const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["cdn.withpersona.com/vite/assets/inquiry/index-DHJSNrY_.js","cdn.withpersona.com/vite/assets/inquiry/vendor-Z4elj-t9.js","cdn.withpersona.com/vite/assets/inquiry/assets-NP11rhWX.js","cdn.withpersona.com/vite/assets/inquiry/lottie-C3glzQL2.js","cdn.withpersona.com/vite/assets/inquiry/inquiry-fog-nu2jQ89Y.js","cdn.withpersona.com/vite/assets/inquiry/lodash-CORkOFgh.js","cdn.withpersona.com/vite/assets/inquiry/assets-icons-BxQ_82PR.js","assets/inquiry/faceapi-3BgOrKXL.js","cdn.withpersona.com/vite/assets/inquiry/index-BZ2aX1Yc.js","cdn.withpersona.com/vite/assets/inquiry/index-RuXVWpVf.js","cdn.withpersona.com/vite/assets/inquiry/AllowedOrigins-DUzUleEe.js","cdn.withpersona.com/vite/assets/inquiry/index-BGv0Tig_.js","cdn.withpersona.com/vite/assets/inquiry/EidEasyPopup-DbVxIeh6.js","cdn.withpersona.com/vite/assets/inquiry/index--1YE3uBZ.js","cdn.withpersona.com/vite/assets/inquiry/index-Cy-FtBZj.js","cdn.withpersona.com/vite/assets/inquiry/jitteredBackoff-iGDKJJZX.js","cdn.withpersona.com/vite/assets/inquiry/index-AneBervg.js","cdn.withpersona.com/vite/assets/inquiry/index-BfFTFlT-.css"])))=>i.map(i=>d[i]);
import{A as Zb,C as Jb,o as Xb,d as ci,e as rr,a as e0,q as Wo,f as t0,j as i,F as Ah,$ as Co,v as S,g as On,h as $,W as Ln,r as f,i as b,L as Th,k as Eh,m as n0,X as kh,n as i0,M as Ze,p as El,t as bn,U as r0,x as o0,y as a0,z as As,b as kl,B as Ui,D as s0,E as c0,O as l0,G as d0,H as u0,I as m0,J as Nt,K as ji,N as jn,P as Wn,Q as h0,R as Re,S as Zn,T as ot,V as Dr,Y as gt,Z as Nl,_ as z,a0 as p0,a1 as xa,a2 as jl,a3 as qn,a4 as f0,a5 as ri,a6 as g0,a7 as Pl,a8 as b0,a9 as C0,aa as x0,ab as Ts,ac as os,ad as as,ae as v0,af as I0,ag as S0,ah as w0,ai as Nh,aj as jh,ak as Ph,al as Hi,am as Te,an as Ot,ao as Dh,ap as Pn,aq as y0,ar as Dl,as as oa,at as _0,au as R0,av as va,aw as Ia,ax as N,ay as J,az as Ne,aA as A0,aB as T0,aC as E0,aD as fc,aE as k0,aF as iu,aG as N0,aH as j0,aI as ru,aJ as _r,aK as Qn,aL as P0,aM as D0,aN as ou,aO as O0,aP as P,aQ as ie,aR as Ge,aS as L0,aT as F0,aU as gc,aV as M0,aW as au,aX as V0,aY as Fo,aZ as B0,a_ as U0,a$ as su,b0 as cu,b1 as H0,b2 as lu,b3 as q0,b4 as Oh,b5 as Lh,b6 as Fh,w as $0,b7 as G0,b8 as ve,b9 as Mh,ba as W0,bb as Y0,bc as z0,bd as K0,be as Q0,bf as Z0,bg as J0,bh as X0,bi as e1,bj as t1,bk as n1,bl as i1,bm as r1}from"/vendor-Z4elj-t9.js";import{S as o1,b as a1,d as s1,e as c1,f as l1,h as d1,i as u1,j as m1,k as h1,l as p1,m as f1,n as g1,P as b1,C as C1,o as x1,p as v1,q as I1,r as S1,s as w1,t as y1,u as _1,v as R1,w as A1,x as Ol,y as Ll,z as Fl,A as Vh,B as Ml,D as Bh,E as T1,F as E1,G as Uh,H as k1,I as N1,J as Vl,K as j1,L as P1,M as D1,N as O1,O as L1,Q as Hh,R as F1,T as M1,U as V1,V as Es,W as B1,X as An,Y as U1,Z as H1,_ as qh,$ as ss,a0 as $h,a1 as Gh,a2 as Wh,a3 as ks,a4 as Yh,a5 as q1,a6 as zh,a7 as $1,a8 as Kh,a9 as Bl,aa as G1,ab as W1,ac as Y1,ad as z1,ae as K1,af as Qh,ag as cs,ah as _i,ai as Rr,aj as Q1,ak as Zh,al as Jh,am as Xh,an as ep,ao as Kn,ap as Z1,aq as J1,ar as X1,as as eC,at as tp,au as Qc,av as np,aw as tC,ax as nC}from"/assets-NP11rhWX.js";import{A as ht,a as Ct,c as me,s as Jn,i as ip,b as ct,d as yn,e as Sa,f as iC,g as $e,h as rC,j as oC,U as on,o as Or,k as Ns,l as fi,B as Lr,m as aC,n as Ul,D as rp,p as op,q as ap,r as sp,t as cp,u as ao,v as js,w as bc,x as ro,y as sC,z as aa,C as du,E as Hl,F as cC,G as lp,H as Zc,I as ta,J as lC,K as dp,L as Jc,M as dC,N as up,O as uC,P as mC,Q as hC,R as Mo}from"/inquiry-fog-nu2jQ89Y.js";import{_ as mp,a as pC,b as ql,c as fC,d as uu,e as Xc,f as wa,g as hp,h as Wt,i as gC,j as pp,k as bC,l as ls,m as mu,n as CC,o as fp,p as xC,q as gp,r as vC,s as IC,t as el,u as SC,v as Xr,w as wC,x as bp,y as yC,z as _C,A as RC,B as AC,C as TC,D as EC,E as kC,F as NC,G as jC,H as PC,I as DC,J as OC,K as LC,L as FC,M as MC,N as VC,O as BC}from"/lodash-CORkOFgh.js";import{S as Cp,a as $l,b as Gl,c as xp,d as vp,e as Ip,f as Sp,g as Ps,h as wp,i as Fr,j as UC,k as ds,l as us,m as ms,n as HC,o as qC}from"/assets-icons-BxQ_82PR.js";import{q as $C,z as vr,Y as GC,Q as WC,G as YC,p as zC,a as KC,m as yp}from"/faceapi-3BgOrKXL.js";import"/lottie-C3glzQL2.js";function eB(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1c72e932-1eb8-47c5-aaf8-c846f4dc3f3b",e._sentryDebugIdIdentifier="sentry-dbid-1c72e932-1eb8-47c5-aaf8-c846f4dc3f3b")}catch{}})();const dn={base:"1px",rounded:"4px",circle:"100px",pill:"24px"},Le={indigo100:"#290087",indigo80:"#4F4099",indigo60:"#7E66B6",indigo50:"#8D89BB",indigo30:"#BDB8D9",indigo20:"#D4CCE7",indigo10:"#EAE6F3",yellow100:"#FFDC82",yellow10:"#FFF8E6",green100:"#62D284",green10:"#E0F6E6",red100:"#FF645A",red60:"#FF8F88",red10:"#FFE0DE",gray100:"#1E1B17",gray70:"#625F5D",gray50:"#9394A1",gray20:"#D2D1D1",gray8:"#EDEDEC",gray4:"#F6F6F7",black:"#000000",white:"#FFFFFF"},_p={base:"rgba(0, 0, 0, 0.4)",popover:"0px 14px 24px rgba(0, 0, 0, 0.12);",card:"0px 2px 6px rgba(191, 191, 199, 0.4), 0px 2px 2px rgba(191, 191, 199, 0.24), 0px 0px 2px rgba(191, 191, 199, 0.28);"},$t={hero:"44px",h1:"30px",h2:"24px",h3:"18px",h4:"16px",h5:"14px",h6:"14px",input:"16px",p:"16px",small:"14px",xs:"12px",code:"12px"},an={light:"300",regular:"400",medium:"500",semiBold:"500",bold:"700"},$n={hero:1.27,h1:1.33,h2:1.45,h3:1.44,h4:1.5,h5:1.71,h6:1.71,input:1.5,p:1.5,a:1.5,small:1.5,xs:1.75,code:1.5},Va={mobile:568},wi={mobileSmall:576,mobile:768.98,tablet:769,desktop:1024,widescreen:1216,fullHD:1408},tr=.02,jt={isSmallVertical:`(max-height: ${Va.mobile-tr}px)`,isMobileSmall:`(max-width: ${wi.mobileSmall-tr}px), (max-height: ${Va.mobile-tr}px)`,isMobile:`(max-width: ${wi.tablet-tr}px), (max-height: ${Va.mobile-tr}px)`,isNotMobile:`(min-width: ${wi.tablet}px) and (min-height: ${Va.mobile}px)`,isTablet:`(min-width: ${wi.tablet}px) and (max-width: ${wi.desktop-tr}px)`,isDesktop:`(min-width: ${wi.desktop}px) and (max-width: ${wi.widescreen-tr}px)`,isWidescreen:`(min-width: ${wi.widescreen}px) and (max-width: ${wi.fullHD-tr}px)`,isFullHD:`(min-width: ${wi.fullHD}px)`},L={base:8,widgetPadding:"24px",inputPadding:"16px",navHeight:"48px"},Ji={input:"48px",textArea:"96px"},ya={fast:"0.2s",medium:"0.4s"};class Wl extends Error{constructor({method:t,uri:n}){super(`${t} ${n}`),this.name="ApiCanceledError",Object.setPrototypeOf(this,new.target.prototype),this.message=[t,n].filter(Boolean).join(" "),this.method=t,this.uri=n}}class Yl extends Error{constructor({method:t,uri:n}){super(`${t} ${n}`),this.name="ApiRequestError",Object.setPrototypeOf(this,new.target.prototype),this.message=`${t} ${n}`,this.method=t,this.uri=n}}function ar({error:e,method:t,uri:n}){var o;if(!(e instanceof Zb))throw e;const r=e;throw r instanceof Jb?new Wl({method:t,uri:n}):r.response?new ht({method:t,status:r.response.status,uri:n,errors:(o=r.response.data)==null?void 0:o.errors,code:r.code}):r.request||r.message==="Network Error"?new Ct({method:t,uri:n,code:r.code}):new Yl({method:t,uri:n})}var w=(e=>(e.CurrentUser="current-user",e.CurrentInquirySession="current-inquiry-session",e.Organization="organization",e.Organizations="organizations",e.Account="accounts",e.AccountAction="account-actions",e.AccountStatus="account-statuses",e.AccountType="account-types",e.AccountTypeGridLayout="account-type-grid-layouts",e.AccountVariableDefinition="account-variable-definitions",e.AnalyticsQueryTemplates="analytics-query-templates",e.ApiKey="api-keys",e.ApiLog="api-logs",e.Blueprint="blueprints",e.Case="cases",e.CaseAssignmentPolicy="case-assignment-policies",e.CaseComment="case-comments",e.CaseMessage="case-messages",e.CaseQueue="case-queues",e.CaseQuery="case-queries",e.CaseQueryResult="case-query-results",e.CaseTemplate="case-templates",e.Device="devices",e.Environment="environments",e.Event="events",e.Exporter="exporters",e.ExternalIntegration="external-integrations",e.ExternalIntegrationCall="external-integration-calls",e.ExternalIntegrationConfig="external-integration-configs",e.ExternalIntegrationDataSource="external-integration/data-sources",e.ExternalIntegrationLog="external-integration-logs",e.ExternalIntegrationVendor="external-integration-vendors",e.File="files",e.Graph="graphs",e.GraphDatumType="graph-datum-types",e.GraphNode="graph-nodes",e.GraphQuery="graph-queries",e.GraphQueryTemplate="graph-query-templates",e.GraphSnapshot="graph-snapshots",e.ImporterPipeline="importer-pipelines",e.ImporterRun="importer-pipeline-runs",e.Inquiry="inquiries",e.InquirySession="inquiry-sessions",e.InquiryTemplate="inquiry-templates",e.InquiryTemplateModule="inquiry-template-modules",e.InquiryTemplateVersion="inquiry-template-versions",e.InsightQuery="insight-queries",e.Invoice="invoices",e.List="lists",e.ListItem="list-items",e.ListMatch="list-match",e.OrganizationsSSO="organizations/sso",e.OnboardingFlowV1="onboarding-flow-v1s",e.OrganizationPlan="organization-plan",e.OrganizationPlanMigration="organization-plan-migrations",e.PasswordReset="password-resets",e.Persona="personas",e.PlatformNode="platform-nodes",e.ReviewQueue="review-queues",e.ReviewQueueTask="review-queue-tasks",e.Role="roles",e.SAR="sars",e.SARConfiguration="sar-configurations",e.Selfie="selfie",e.SimulatePreset="simulate-presets",e.TableView="table-views",e.Tag="tags",e.Team="teams",e.Template="templates",e.Theme="themes",e.ThemeSet="theme-sets",e.Transaction="transactions",e.TransactionLabel="transaction-labels",e.TransactionStatus="transaction-statuses",e.TransactionType="transaction-types",e.TransactionTypeFilters="transaction-types/basics",e.Translations="translations",e.Trigger="triggers",e.FeatureFlag="feature-flags",e.User="users",e.UserAuditLog="user-audit-logs",e.UserAuthentication="user-authentications",e.UserNotification="user-notifications",e.UserSession="user-sessions",e.Verification="verifications",e.VerificationTemplate="verification-templates",e.VerificationTemplateVersion="verification-template-versions",e.Webhook="webhooks",e.WebhookEvent="webhook-events",e.Workflow="workflows",e.WorkflowBlock="workflow-blocks",e.WorkflowDeployment="workflow-deployments",e.WorkflowModule="workflow-modules",e.WorkflowRun="workflow-runs",e.WorkflowRunStep="workflow-steps",e.WorkflowSchemaFullOld="workflows/schema",e.WorkflowSchema="workflow-schemas",e.WorkflowSchemaCriteriaVariableSchemas="workflow-schemas/criteria-variable-schemas",e.WorkflowSchemaOperators="workflow-schemas/operators",e.WorkflowSchemaRedactableFieldConfigs="workflow-schemas/redactable-field-configs",e.WorkflowSchemaFilterFieldConfigs="workflow-schemas/filter-field-configs",e.WorkflowSchemaWorkflowActions="workflow-schemas/workflow-actions",e.WorkflowSchemaJsonSchema="workflow-schemas/json-schema",e.WorkflowSchemaPrimitives="workflow-schemas/primitives",e.WorkflowVersion="workflow-versions",e.ExporterAccount="exporter/accounts",e.ExporterCase="exporter/cases",e.ExporterCustomFiles="exporter/custom-files",e.ExporterDataset="exporter/dataset",e.ExporterMetricsVerificationVolume="exporter/metrics/verifications/volume",e.ExporterMetricsVerificationChecks="exporter/metrics/verifications/checks",e.ExporterGraph="exporter/graphs",e.ExporterInquiry="exporter/inquiries",e.ExporterInsightQueries="exporter/insight-queries",e.ExporterMetricsInquiry="exporter/metrics/inquiry",e.ExporterReport="exporter/reports",e.ExporterReviewQueueTask="exporter/review-queue-tasks",e.ExporterTransactions="exporter/txns",e.Importer="importers",e.ImporterReportAddressLookup="importer/report/address-lookups",e.ImporterReportAdverseMedia="importer/report/adverse-media",e.ImporterReportBusinessAdverseMedia="importer/report/business-adverse-media",e.ImporterReportBusinessLookup="importer/report/business-lookups",e.ImporterReportBusinessWatchlist="importer/report/business-watchlists",e.ImporterReportEmailAddress="importer/report/email-addresses",e.ImporterReportPhoneNumber="importer/report/phone-numbers",e.ImporterReportPoliticallyExposedPerson="importer/report/politically-exposed-people",e.ImporterReportProfileNonAuthoritative="importer/report/profile-non-authoritatives",e.ImporterReportSocialMedia="importer/report/social-media",e.ImporterReportWatchlist="importer/report/watchlists",e.SelfieCenterOnly="selfie/center-onlies",e.SelfieProfileAndCenter="selfie/profile-and-centers",e.VerificationAamva="verification/aamvas",e.VerificationBusinessWebsite="verification/business-websites",e.VerificationCertificateKorea="verification/certificate-koreas",e.VerificationDatabase="verification/databases",e.VerificationDatabaseAadhaar="verification/database-aadhaars",e.VerificationDatabaseBusiness="verification/database-businesses",e.VerificationDatabaseBusinessFootprint="verification/database-business-footprints",e.VerificationDatabaseEcbsv="verification/database-ecbsvs",e.VerificationDatabasePhoneCarrier="verification/database-phone-carriers",e.VerificationDatabaseSerpro="verification/database-serpros",e.VerificationDatabaseStandard="verification/database-standards",e.VerificationDatabaseTin="verification/database-tins",e.VerificationDatabaseVatNumber="verification/database-vat-numbers",e.VerificationDigitalIdFinnishTrustNetwork="verification/digital-id-finnish-trust-networks",e.VerificationDigitalIdOneId="verification/digital-id-one-id",e.VerificationDigitalIdSingpass="verification/digital-id-singpasses",e.VerificationDigitalIdUkSharecode="verification/digital-id-uk-sharecodes",e.VerificationDocument="verification/documents",e.VerificationEmailAddress="verification/email-addresses",e.VerificationGovernmentId="verification/government-ids",e.VerificationGovernmentIdNfc="verification/government-id-nfcs",e.VerificationMobileDriversLicense="verification/mobile-drivers-license",e.VerificationPhoneNumber="verification/phone-numbers",e.VerificationSelfie="verification/selfies",e.Report="reports",e.ReportAddressLookup="report/address-lookups",e.ReportAdverseMedia="report/adverse-media",e.ReportBusinessAdverseMedia="report/business-adverse-media",e.ReportBusinessAssociatedPersons="report/business-associated-persons",e.ReportBusinessClassification="report/business-classifications",e.ReportBusinessIndustryClassification="report/business-industry-classifications",e.ReportBusinessLiensLookup="report/business-liens-lookup",e.ReportBusinessLookup="report/business-lookups",e.ReportBusinessNonprofit="report/business-nonprofits",e.ReportBusinessOnlinePresence="report/business-online-presences",e.ReportBusinessRegistrationsLookup="report/business-registrations-lookup",e.ReportBusinessSocialMedia="report/business-social-media",e.ReportBusinessWatchlist="report/business-watchlists",e.ReportBusinessWebsite="report/business-websites",e.ReportChainalysisAddressScreening="report/integration/chainalysis-address-screening",e.ReportClearbitBusinessLookup="report/integration/clearbit-business-lookup",e.ReportCoinbaseCheckCryptoRisk="report/integration/coinbase-check-crypto-risk",e.ReportCryptoAddressWatchlist="report/crypto-address-watchlists",e.ReportCustomList="report/custom-lists",e.ReportEmailAddress="report/email-addresses",e.ReportEquifaxOneview="report/integration/equifax-oneview",e.ReportFinraBrokerCheck="report/finra-broker-checks",e.ReportKyckrBusinessLookup="report/integration/kyckr-business-lookup",e.ReportMiddeskBusinessLookup="report/integration/middesk-business-lookup",e.ReportMxAccount="report/integration/mx-account",e.ReportPhoneNumber="report/phone-numbers",e.ReportPoliticallyExposedPerson="report/politically-exposed-people",e.ReportProfile="report/profiles",e.ReportProfileNonAuthoritative="report/profile-non-authoritatives",e.ReportSecActionLookup="report/sec-action-lookups",e.ReportSentilinkApplicationRisk="report/integration/sentilink-application-risk",e.ReportSentilinkScores="report/integration/sentilink-scores",e.ReportSocialMedia="report/social-media",e.ReportSynthetic="report/synthetics",e.ReportTrmWalletScreening="report/integration/trm-wallet-screening",e.ReportWatchlist="report/watchlists",e.ReportRunsCustomList="report-run/custom-lists",e.ReportSnapshot="report-snapshot",e.ReportTemplate="report-templates",e.ReportTemplateAddressLookup="report-template/address-lookups",e.ReportTemplateAdverseMedia="report-template/adverse-media",e.ReportTemplateBusinessAdverseMedia="report-template/business-adverse-media",e.ReportTemplateBusinessAssociatedPersons="report-template/business-associated-persons",e.ReportTemplateBusinessClassification="report-template/business-classifications",e.ReportTemplateBusinessIndustryClassification="report-template/business-industry-classifications",e.ReportTemplateBusinessLookup="report-template/business-lookups",e.ReportTemplateBusinessLiensLookup="report-template/business-liens-lookup",e.ReportTemplateBusinessNonprofit="report-template/business-nonprofits",e.ReportTemplateBusinessOnlinePresence="report-template/business-online-presences",e.ReportTemplateBusinessRegistrationsLookup="report-template/business-registrations-lookups",e.ReportTemplateBusinessSocialMedia="report-template/business-social-media",e.ReportTemplateBusinessWatchlist="report-template/business-watchlists",e.ReportTemplateBusinessWebsite="report-template/business-websites",e.ReportTemplateCreateable="report-templates/createable",e.ReportTemplateChainalysisAddressScreening="report-template/integration/chainalysis-address-screenings",e.ReportTemplateClearbitBusinessLookup="report-template/integration/clearbit-business-lookup",e.ReportTemplateCoinbaseCheckCryptoRisk="report-template/integration/coinbase-check-crypto-risk",e.ReportTemplateCryptoAddressWatchlist="report-template/crypto-address-watchlists",e.ReportTemplateCustomList="report-template/custom-lists",e.ReportTemplateEmailAddress="report-template/email-addresses",e.ReportTemplateEquifaxOneview="report-template/integration/equifax-oneview",e.ReportTemplateFilters="report-templates/basics",e.ReportTemplateFinraBrokerCheck="report-template/finra-broker-checks",e.ReportTemplateKyckrBusinessLookup="report-template/integration/kyckr-business-lookups",e.ReportTemplateNovaCreditCashAtlas="report-template/integration/nova-credit-cash-atlas",e.ReportTemplateMiddeskBusinessLookup="report-template/integration/middesk-business-lookups",e.ReportTemplateMxAccount="report-template/integration/mx-accounts",e.ReportTemplateNovaCreditCreditPassport="report-template/integration/nova-credit-credit-passport",e.ReportTemplatePhoneNumber="report-template/phone-numbers",e.ReportTemplatePoliticallyExposedPerson="report-template/politically-exposed-people",e.ReportTemplateProfile="report-template/profiles",e.ReportTemplateProfileNonAuthoritative="report-template/profile-non-authoritatives",e.ReportTemplateSecActionLookup="report-template/sec-action-lookups",e.ReportTemplateSentilinkApplicationRisk="report-template/integration/sentilink-application-risk",e.ReportTemplateSentilinkScores="report-template/integration/sentilink-scores",e.ReportTemplateSocialMedia="report-template/social-media",e.ReportTemplateSynthetic="report-template/synthetics",e.ReportTemplateTrmWalletScreening="report-template/integration/trm-wallet-screening",e.ReportTemplateWatchlist="report-template/watchlists",e.ReportTemplateVersion="report-template-versions",e.ReportTemplateVersionCustomList="report-template-version/custom-lists",e.MetricsApiLogsPaths="metrics/api-logs/paths",e.MetricsApiLogsVolumeOverTime="metrics/api-logs/volume-over-time",e.MetricsCases="metrics/cases",e.MetricsCasesStatusOverTime="metrics/cases/status-over-time",e.MetricsInquiries="metrics/inquiries",e.MetricsInquiriesFunnelConversionOverTime="metrics/inquiries/conversion-over-time",e.MetricsInquiriesFunnelFlow="metrics/inquiries/funnel-flow",e.MetricsInquiriesMedianCompletionVolume="metrics/inquiries/median-completion",e.MetricsInquiriesRecentActivity="metrics/inquiries/recent-activity",e.MetricsInquiriesRiskDistribution="metrics/inquiries/risk-distribution",e.MetricsInquiriesVolume="metrics/inquiries/volume",e.MetricsInquiriesVolumeOverTime="metrics/inquiries/volume-over-time",e.MetricsTransactions="metrics/txns",e.MetricsTransactionsVolumeOverTime="metrics/txns/volume-over-time",e.MetricsVerifications="metrics/verifications",e.MetricsVerificationsFilteredVolume="metrics/verifications/volume-with-filters",e.MetricsVerificationsVolumeOverTime="metrics/verifications/volume-over-time",e.MetricsVerificationsFilteredChecksOverTime="metrics/verifications/checks-over-time-filters",e.MetricsReportsSummary="metrics/reports/reports-summary",e.MetricsReportsOverTime="metrics/reports/reports-over-time",e.MetricsWorkflowRuns="metrics/workflow-runs",e.Document="documents",e.DocumentGeneric="document/generics",e.DocumentGovernmentId="document/government-ids",e.DocumentFile="document-files",e.DataSourceS3Config="data-source/s3/config",e.DataSourceS3ListObjects="data-source/s3/list-objects",e.Omnisearch="omnisearch/search",e.HelpCenterArticles="article_search",e.TrackingEvents="t",e.SimulatePresetVerification="simulate/preset/verification",e))(w||{}),y=(e=>(e.Account="account",e.AccountAction="account-action",e.AccountStatus="account-status",e.AccountType="account-type",e.AccountTypeGridLayout="account-type-grid-layout",e.AccountVariableDefinition="account-variable-definition",e.AnalyticsQueryTemplate="analytics-query-template",e.Blueprint="blueprint",e.Case="case",e.CaseAssignmentPolicy="case-assignment-policy",e.CaseComment="case-comment",e.CaseMessage="case-message",e.CaseQueue="case-queue",e.CaseQuery="case-query",e.CaseQueryResult="case-query-result",e.CaseTemplate="case-template",e.CurrentInquirySession="current-inquiry-session",e.CurrentUser="current-user",e.Device="device",e.Environment="environment",e.EnvironmentProduction="environment/production",e.EnvironmentSandbox="environment/sandbox",e.Event="event",e.Graph="graph",e.GraphDatumType="graph-datum-type",e.GraphNode="graph-node",e.GraphQuery="graph-query",e.GraphQueryTemplate="graph-query-template",e.GraphSnapshot="graph-snapshot",e.ImporterPipelineCsv="importer-pipeline/csv-external-integration-importer-pipeline",e.ImporterPipelineMysql="importer-pipeline/mysql-external-integration-importer-pipeline",e.ImporterPipelineSnowflake="importer-pipeline/snowflake-external-integration-importer-pipeline",e.ImporterPipelineRedshift="importer-pipeline/redshift-external-integration-importer-pipeline",e.ImporterPipelineS3="importer-pipeline/s3-external-integration-importer-pipeline",e.ImporterPipelineGoogleSheets="importer-pipeline/google-sheets-external-integration-importer-pipeline",e.ImporterRun="importer-pipeline-run",e.Inquiry="inquiry",e.InquirySession="inquiry-session",e.InquiryTemplate="inquiry-template",e.InquiryTemplateModule="inquiry-template-module",e.InquiryTemplateVersion="inquiry-template-version",e.InquiryTemplateVersionDiff="inquiry-template-version-diff",e.InsightQuery="insight-query",e.Invoice="invoice",e.OnboardingFlowV1="onboarding-flow/v1",e.Organization="organization",e.OrganizationPlan="organization-plan",e.OrganizationPlanMigration="organization-plan-migration",e.PartialInquiryTemplateVersion="partial-inquiry-template-version",e.PasswordResetEmail="password-reset/email",e.PlatformNode="platform-node",e.Role="role",e.SAR="sar",e.SARConfiguration="sar-configurations",e.TableView="table-view",e.Team="team",e.Template="template",e.Theme="theme",e.ThemeSet="theme-set",e.Transaction="transaction",e.TransactionLabel="transaction-label",e.TransactionStatus="transaction-status",e.TransactionType="transaction-type",e.TriggerAccount="trigger-account",e.TriggerEvent="trigger-event",e.TriggerSchedule="trigger-schedule",e.TriggerRecurring="trigger-recurring",e.TriggerApi="trigger-api",e.TriggerCase="trigger-case",e.TriggerDirect="trigger-direct",e.TriggerComputedField="trigger-computed-field",e.User="user",e.UserAuditLog="user-audit-log",e.UserAuthentication="user-authentication",e.UserNotification="user-notification",e.UserSession="user-session",e.Webhook="webhook",e.WebhookEvent="webhook-event",e.List="list",e.ListGovernmentIdNumber="list/government-id-number",e.ListIpAddress="list/ip-address",e.ListName="list/name",e.ListPhoneNumber="list/phone-number",e.ListEmailAddress="list/email-address",e.ListGeolocation="list/geolocation",e.ListBrowserFingerprint="list/browser-fingerprint",e.ListDeviceFingerprint="list/device-fingerprint",e.ListFace="list/face",e.ListCountry="list/country",e.ListField="list/field",e.ListString="list/string",e.ListSelfieBackground="list/selfie-background",e.ListItem="list-item",e.ListItemGovernmentIdNumber="list-item/government-id-number",e.ListItemIpAddress="list-item/ip-address",e.ListItemName="list-item/name",e.ListItemPhoneNumber="list-item/phone-number",e.ListItemEmailAddress="list-item/email-address",e.ListItemGeolocation="list-item/geolocation",e.ListItemBrowserFingerprint="list-item/browser-fingerprint",e.ListItemDeviceFingerprint="list-item/device-fingerprint",e.ListItemFace="list-item/face",e.ListItemCountry="list-item/country",e.ListItemField="list-item/field",e.ListItemString="list-item/string",e.ListItemSelfieBackground="list-item/selfie-background",e.ListMatch="list-match",e.ReviewQueue="review-queue",e.ReviewQueueTask="review-queue-task",e.Workflow="workflow",e.WorkflowBlock="workflow-block",e.WorkflowDeployment="workflow-deployment",e.WorkflowModule="workflow-module",e.WorkflowRun="workflow-run",e.WorkflowRunSimulated="workflow-run/simulated",e.WorkflowVersion="workflow-version",e.WorkflowRunStep="workflow-step",e.WorkflowRunStepAction="workflow-step/action",e.WorkflowRunStepConditional="workflow-step/conditional",e.WorkflowRunStepLoop="workflow-step/loop",e.WorkflowRunStepModule="workflow-step/module",e.WorkflowRunStepParallel="workflow-step/parallel",e.WorkflowRunStepWait="workflow-step/wait",e.WorkflowRunVariablePersonaObject="workflow-run/variable-store/persona-object-variable",e.WorkflowRunVariablePlatformIntegration="workflow-run/variable-store/platform-integration-variable",e.WorkflowRunVariableOutput="workflow-run/variable-store/output-variable",e.WorkflowRunVariableTriggerParams="workflow-run/variable-store/trigger-params-variable",e.WorkflowRunVariableLoop="workflow-run/variable-store/loop-variable",e.Report="report",e.ReportAdverseMedia="report/adverse-media",e.ReportBusinessAdverseMedia="report/business-adverse-media",e.ReportBusinessAssociatedPersons="report/business-associated-persons",e.ReportBusinessClassification="report/business-classification",e.ReportBusinessIndustryClassification="report/business-industry-classification",e.ReportBusinessLiensLookup="report/business-liens-lookup",e.ReportBusinessLookup="report/business-lookup",e.ReportBusinessNonprofit="report/business-nonprofit",e.ReportBusinessOnlinePresence="report/business-online-presence",e.ReportBusinessRegistrationsLookup="report/business-registrations-lookup",e.ReportBusinessSocialMedia="report/business-social-media",e.ReportBusinessWatchlist="report/business-watchlist",e.ReportBusinessWebsite="report/business-website",e.ReportCryptoAddressWatchlist="report/crypto-address-watchlist",e.ReportCustomList="report/custom-list",e.ReportEmailAddress="report/email-address",e.ReportFinraBrokerCheck="report/finra-broker-check",e.ReportPhoneNumber="report/phone-number",e.ReportPoliticallyExposedPerson="report/politically-exposed-person",e.ReportProfile="report/profile",e.ReportProfileNonAuthoritative="report/profile-non-authoritative",e.ReportSecActionLookup="report/sec-action-lookup",e.ReportAddressLookup="report/address-lookup",e.ReportSocialMedia="report/social-media",e.ReportSynthetic="report/synthetic",e.ReportWatchlist="report/watchlist",e.ReportSnapshotAdverseMedia="report-snapshot/adverse-media",e.ReportSnapshotBusinessNonprofit="report-snapshot/business-nonprofit",e.ReportSnapshotWatchlist="report-snapshot/watchlist",e.ReportChainalysisAddressScreening="report/integration/chainalysis-address-screening",e.ReportClearbitBusinessLookup="report/integration/clearbit-business-lookup",e.ReportCoinbaseCheckCryptoRisk="report/integration/coinbase-check-crypto-risk",e.ReportEquifaxOneview="report/integration/equifax-oneview",e.ReportKyckrBusinessLookup="report/integration/kyckr-business-lookup",e.ReportMiddeskBusinessLookup="report/integration/middesk-business-lookup",e.ReportMxAccount="report/integration/mx-account",e.ReportSentilinkApplicationRisk="report/integration/sentilink-application-risk",e.ReportSentilinkScores="report/integration/sentilink-scores",e.ReportTrmWalletScreening="report/integration/trm-wallet-screening",e.ReportTemplate="report-template",e.ReportTemplateAddressLookup="report-template/address-lookup",e.ReportTemplateAdverseMedia="report-template/adverse-media",e.ReportTemplateBusinessAdverseMedia="report-template/business-adverse-media",e.ReportTemplateBusinessAssociatedPersons="report-template/business-associated-persons",e.ReportTemplateBusinessClassification="report-template/business-classification",e.ReportTemplateBusinessIndustryClassification="report-template/business-industry-classification",e.ReportTemplateBusinessLiensLookup="report-template/business-liens-lookup",e.ReportTemplateBusinessLookup="report-template/business-lookup",e.ReportTemplateBusinessNonprofit="report-template/business-nonprofit",e.ReportTemplateBusinessOnlinePresence="report-template/business-online-presence",e.ReportTemplateBusinessRegistrationsLookup="report-template/business-registrations-lookup",e.ReportTemplateBusinessSocialMedia="report-template/business-social-media",e.ReportTemplateBusinessWatchlist="report-template/business-watchlist",e.ReportTemplateBusinessWebsite="report-template/business-website",e.ReportTemplateCryptoAddressWatchlist="report-template/crypto-address-watchlist",e.ReportTemplateCustomList="report-template/custom-list",e.ReportTemplateEmailAddress="report-template/email-address",e.ReportTemplateFinraBrokerCheck="report-template/finra-broker-check",e.ReportTemplatePhoneNumber="report-template/phone-number",e.ReportTemplatePoliticallyExposedPerson="report-template/politically-exposed-person",e.ReportTemplateProfile="report-template/profile",e.ReportTemplateProfileNonAuthoritative="report-template/profile-non-authoritative",e.ReportTemplateSecActionLookup="report-template/sec-action-lookup",e.ReportTemplateSocialMedia="report-template/social-media",e.ReportTemplateSynthetic="report-template/synthetic",e.ReportTemplateWatchlist="report-template/watchlist",e.ReportTemplateClearbitBusinessLookup="report-template/integration/clearbit-business-lookup",e.ReportTemplateChainalysisAddressScreening="report-template/integration/chainalysis-address-screening",e.ReportTemplateCoinbaseCheckCryptoRisk="report-template/integration/coinbase-check-crypto-risk",e.ReportTemplateEquifaxOneview="report-template/integration/equifax-oneview",e.ReportTemplateKyckrBusinessLookup="report-template/integration/kyckr-business-lookup",e.ReportTemplateMiddeskBusinessLookup="report-template/integration/middesk-business-lookup",e.ReportTemplateMxAccount="report-template/integration/mx-account",e.ReportTemplateNovaCreditCashAtlas="report-template/integration/nova-credit-cash-atlas",e.ReportTemplateNovaCreditCreditPassport="report-template/integration/nova-credit-credit-passport",e.ReportTemplateSentilinkApplicationRisk="report-template/integration/sentilink-application-risk",e.ReportTemplateSentilinkScores="report-template/integration/sentilink-scores",e.ReportTemplateTrmWalletScreening="report-template/integration/trm-wallet-screening",e.ReportTemplateVersionAddressLookup="report-template-version/address-lookup",e.ReportTemplateVersionAdverseMedia="report-template-version/adverse-media",e.ReportTemplateVersionBusinessAdverseMedia="report-template-version/business-adverse-media",e.ReportTemplateVersionBusinessAssociatedPersons="report-template-version/business-associated-persons",e.ReportTemplateVersionBusinessClassification="report-template-version/business-classification",e.ReportTemplateVersionBusinessIndustryClassification="report-template-version/business-industry-classification",e.ReportTemplateVersionBusinessLiensLookup="report-template-version/business-liens-lookup",e.ReportTemplateVersionBusinessLookup="report-template-version/business-lookup",e.ReportTemplateVersionBusinessNonprofit="report-template-version/business-nonprofit",e.ReportTemplateVersionBusinessOnlinePresence="report-template-version/business-online-presence",e.ReportTemplateVersionBusinessRegistrationsLookup="report-template-version/business-registrations-lookup",e.ReportTemplateVersionBusinessSocialMedia="report-template-version/business-social-media",e.ReportTemplateVersionBusinessWatchlist="report-template-version/business-watchlist",e.ReportTemplateVersionBusinessWebsite="report-template-version/business-website",e.ReportTemplateVersionCryptoAddressWatchlist="report-template-version/crypto-address-watchlist",e.ReportTemplateVersionCustomList="report-template-version/custom-list",e.ReportTemplateVersionEmailAddress="report-template-version/email-address",e.ReportTemplateVersionFinraBrokerCheck="report-template-version/finra-broker-check",e.ReportTemplateVersionPhoneNumber="report-template-version/phone-number",e.ReportTemplateVersionPoliticallyExposedPerson="report-template-version/politically-exposed-person",e.ReportTemplateVersionProfile="report-template-version/profile",e.ReportTemplateVersionProfileNonAuthoritative="report-template-version/profile-non-authoritative",e.ReportTemplateVersionSecActionLookup="report-template-version/sec-action-lookup",e.ReportTemplateVersionSocialMedia="report-template-version/social-media",e.ReportTemplateVersionSynthetic="report-template-version/synthetic",e.ReportTemplateVersionWatchlist="report-template-version/watchlist",e.ReportTemplateVersionChainalysisAddressScreening="report-template-version/integration/chainalysis-address-screening",e.ReportTemplateVersionClearbitBusinessLookup="report-template-version/integration/clearbit-business-lookup",e.ReportTemplateVersionEquifaxOneview="report-template-version/integration/equifax-oneview",e.ReportTemplateVersionKyckrBusinessLookup="report-template-version/integration/kyckr-business-lookup",e.ReportTemplateVersionMiddeskBusinessLookup="report-template-version/integration/middesk-business-lookup",e.ReportTemplateVersionMxAccount="report-template-version/integration/mx-account",e.ReportTemplateVersionSentilinkApplicationRisk="report-template-version/sentilink-application-risk",e.ReportTemplateVersionSentilinkScores="report-template-version/sentilink-scores",e.ReportTemplateVersionTrmWalletScreening="report-template-version/integration/trm-wallet-screening",e.ReportSnapshot="report-snapshot",e.ReportRun="report-run",e.ReportRunCustomList="report-run/custom-list",e.SelfieCenterOnly="selfie/center-only",e.SelfieProfileAndCenter="selfie/profile-and-center",e.Tag="tag",e.Translations="translations",e.Exporter="exporter",e.ExporterAccount="exporter/account",e.ExporterCase="exporter/case",e.ExporterCustomFile="exporter/custom-file",e.ExporterInsightQuery="exporter/insight-query",e.ExporterDataset="exporter/dataset",e.ExporterGraph="exporter/graph",e.ExporterInquiry="exporter/inquiry",e.ExporterMetricsVerificationVolume="exporter/metrics/verifications/volume",e.ExporterMetricsInquiry="exporter/metrics/inquiry",e.ExporterMetricsVerificationChecks="exporter/metrics/verifications/checks",e.ExporterReport="exporter/report",e.ExporterReviewQueueTask="exporter/review-queue-task",e.ExporterTransaction="exporter/txn",e.Importer="importer",e.ImporterReportAddressLookup="importer/report/address-lookup",e.ImporterReportAdverseMedia="importer/report/adverse-media",e.ImporterReportBusinessAdverseMedia="importer/report/business-adverse-media",e.ImporterReportBusinessLookup="importer/report/business-lookup",e.ImporterReportBusinessWatchlist="importer/report/business-watchlist",e.ImporterReportEmailAddress="importer/report/email-address",e.ImporterReportPhoneNumber="importer/report/phone-number",e.ImporterReportPoliticallyExposedPerson="importer/report/politically-exposed-person",e.ImporterReportProfileNonAuthoritative="importer/report/profile-non-authoritative",e.ImporterReportSocialMedia="importer/report/social-media",e.ImporterReportWatchlist="importer/report/watchlist",e.Verification="verification",e.VerificationAamva="verification/aamva",e.VerificationBusinessWebsite="verification/business-website",e.VerificationCertificateKorea="verification/certificate-korea",e.VerificationDatabase="verification/database",e.VerificationDatabaseAadhaar="verification/database-aadhaar",e.VerificationDatabaseStandard="verification/database-standard",e.VerificationDatabaseBusiness="verification/database-business",e.VerificationDatabaseBusinessFootprint="verification/database-business-footprint",e.VerificationDatabaseEcbsv="verification/database-ecbsv",e.VerificationDatabasePhoneCarrier="verification/database-phone-carrier",e.VerificationDatabaseSerpro="verification/database-serpro",e.VerificationDatabaseTin="verification/database-tin",e.VerificationDatabaseVatNumber="verification/database-vat-number",e.VerificationDigitalIdFinnishTrustNetwork="verification/digital-id-finnish-trust-network",e.VerificationDigitalIdOneId="verification/digital-id-one-id",e.VerificationDigitalIdSingpass="verification/digital-id-singpass",e.VerificationDigitalIdUkSharecode="verification/digital-id-uk-sharecode",e.VerificationDocument="verification/document",e.VerificationEmailAddress="verification/email-address",e.VerificationGovernmentId="verification/government-id",e.VerificationGovernmentIdNfc="verification/government-id-nfc",e.VerificationMobileDriversLicense="verification/mobile-drivers-license",e.VerificationPhoneNumber="verification/phone-number",e.VerificationSelfie="verification/selfie",e.VerificationTemplate="verification-template",e.VerificationTemplateAamva="verification-template/aamva",e.VerificationTemplateBusinessWebsite="verification-template/business-website",e.VerificationTemplateCertificateKorea="verification-template/certificate-korea",e.VerificationTemplateDatabase="verification-template/database",e.VerificationTemplateDatabaseAadhaar="verification-template/database-aadhaar",e.VerificationTemplateDatabaseStandard="verification-template/database-standard",e.VerificationTemplateDatabaseBusiness="verification-template/database-business",e.VerificationTemplateDatabaseBusinessFootprint="verification-template/database-business-footprint",e.VerificationTemplateDatabaseEcbsv="verification-template/database-ecbsv",e.VerificationTemplateDatabasePhoneCarrier="verification-template/database-phone-carrier",e.VerificationTemplateDatabaseSerpro="verification-template/database-serpro",e.VerificationTemplateDatabaseTin="verification-template/database-tin",e.VerificationTemplateDatabaseVatNumber="verification-template/database-vat-number",e.VerificationTemplateDigitalIdFinnishTrustNetwork="verification-template/digital-id-finnish-trust-network",e.VerificationTemplateDigitalIdOneId="verification-template/digital-id-one-id",e.VerificationTemplateDigitalIdSingpass="verification-template/digital-id-singpass",e.VerificationTemplateDigitalIdUkSharecode="verification-template/digital-id-uk-sharecode",e.VerificationTemplateDocument="verification-template/document",e.VerificationTemplateEmailAddress="verification-template/email-address",e.VerificationTemplateGovernmentId="verification-template/government-id",e.VerificationTemplateGovernmentIdNfc="verification-template/government-id-nfc",e.VerificationTemplateMobileDriversLicense="verification-template/mobile-drivers-license",e.VerificationTemplatePhoneNumber="verification-template/phone-number",e.VerificationTemplateSelfie="verification-template/selfie",e.VerificationTemplateVersion="verification-template-version",e.VerificationTemplateVersionAamva="verification-template-version/aamva",e.VerificationTemplateVersionBusinessWebsite="verification-template-version/business-website",e.VerificationTemplateVersionCertificateKorea="verification-template-version/certificate-korea",e.VerificationTemplateVersionDatabase="verification-template-version/database",e.VerificationTemplateVersionDatabaseAadhaar="verification-template-version/database-aadhaar",e.VerificationTemplateVersionDatabaseStandard="verification-template-version/database-standard",e.VerificationTemplateVersionDatabaseBusiness="verification-template-version/database-business",e.VerificationTemplateVersionDatabaseBusinessFootprint="verification-template-version/database-business-footprint",e.VerificationTemplateVersionDatabaseEcbsv="verification-template-version/database-ecbsv",e.VerificationTemplateVersionDatabasePhoneCarrier="verification-template-version/database-phone-carrier",e.VerificationTemplateVersionDatabaseSerpro="verification-template-version/database-serpro",e.VerificationTemplateVersionDatabaseTin="verification-template-version/database-tin",e.VerificationTemplateVersionDatabaseVatNumber="verification-template-version/database-vat-number",e.VerificationTemplateVersionDigitalIdFinnishTrustNetwork="verification-template-version/digital-id-finnish-trust-network",e.VerificationTemplateVersionDigitalIdOneId="verification-template-version/digital-id-one-id",e.VerificationTemplateVersionDigitalIdSingpass="verification-template-version/digital-id-singpass",e.VerificationTemplateVersionDigitalIdUkSharecode="verification-template-version/digital-id-uk-sharecode",e.VerificationTemplateVersionDocument="verification-template-version/document",e.VerificationTemplateVersionEmailAddress="verification-template-version/email-address",e.VerificationTemplateVersionGovernmentId="verification-template-version/government-id",e.VerificationTemplateVersionGovernmentIdNfc="verification-template-version/government-id-nfc",e.VerificationTemplateVersionMobileDriversLicense="verification-template-version/mobile-drivers-license",e.VerificationTemplateVersionPhoneNumber="verification-template-version/phone-number",e.VerificationTemplateVersionSelfie="verification-template-version/selfie",e.Document="document",e.DocumentGeneric="document/generic",e.DocumentGovernmentId="document/government-id",e.DocumentFile="document-file",e.ApiKey="api-key",e.ApiLog="api-log",e.ExternalIntegration="external-integrations",e.ExternalIntegrationCall="external-integration-call",e.ExternalIntegrationConfig="external-integration-config",e.ExternalIntegrationConfigCredentialApiKey="external-integration-config/http-credential/api-key-scheme",e.ExternalIntegrationConfigCredentialBearer="external-integration-config/http-credential/bearer-scheme",e.ExternalIntegrationConfigCredentialBasic="external-integration-config/http-credential/basic-scheme",e.ExternalIntegrationDataSource="external-integration/data-source",e.ExternalIntegrationDataSourceCsv="external-integration/data-source/csv",e.ExternalIntegrationDataSourceGoogleSheets="external-integration/data-source/google-sheets",e.ExternalIntegrationDataSourceMongodb="external-integration/data-source/mongodb",e.ExternalIntegrationDataSourceMysql="external-integration/data-source/mysql",e.ExternalIntegrationDataSourcePostgres="external-integration/data-source/postgres",e.ExternalIntegrationDataSourceRedshift="external-integration/data-source/redshift",e.ExternalIntegrationDataSourceS3="external-integration/data-source/s3",e.ExternalIntegrationDataSourceSnowflake="external-integration/data-source/snowflake",e.ExternalIntegrationEnrichmentChainalysis="external-integration/enrichment/chainalysis",e.ExternalIntegrationEnrichmentEquifaxOneview="external-integration/enrichment/equifax/oneview",e.ExternalIntegrationEnrichmentKyckr="external-integration/enrichment/kyckr",e.ExternalIntegrationEnrichmentMiddesk="external-integration/enrichment/middesk",e.ExternalIntegrationEnrichmentMx="external-integration/enrichment/mx",e.ExternalIntegrationEnrichmentSentilink="external-integration/enrichment/sentilink",e.ExternalIntegrationEnrichmentTrm="external-integration/enrichment/trm",e.ExternalIntegrationLog="external-integration-log",e.ExternalIntegrationProductivity="external-integration/productivity",e.ExternalIntegrationProductivityHubspotOAuth="external-integration/productivity/hubspot-oauth",e.ExternalIntegrationProductivityOpenAi="external-integration/productivity/openai",e.ExternalIntegrationProductivitySalesforceOAuth="external-integration/productivity/salesforce-oauth",e.ExternalIntegrationProductivitySlackOAuth="external-integration/productivity/slack-oauth",e.ExternalIntegrationProductivityZendeskOAuth="external-integration/productivity/zendesk-oauth",e.ExternalIntegrationVendor="external-integration-vendor",e.SimulatePreset="simulate/preset",e.SimulatePresetVerification="simulate/preset/verification",e))(y||{});const QC={[y.Account]:w.Account,[y.AccountAction]:w.AccountAction,[y.AccountStatus]:w.AccountStatus,[y.AccountType]:w.AccountType,[y.AccountTypeGridLayout]:w.AccountTypeGridLayout,[y.AccountVariableDefinition]:w.AccountVariableDefinition,[y.AnalyticsQueryTemplate]:w.AnalyticsQueryTemplates,[y.ApiKey]:w.ApiKey,[y.Blueprint]:w.Blueprint,[y.Case]:w.Case,[y.CaseAssignmentPolicy]:w.CaseAssignmentPolicy,[y.CaseComment]:w.CaseComment,[y.CaseMessage]:w.CaseMessage,[y.CaseQueue]:w.CaseQueue,[y.CaseQuery]:w.CaseQuery,[y.CaseQueryResult]:w.CaseQueryResult,[y.CaseTemplate]:w.CaseTemplate,[y.Device]:w.Device,[y.Document]:w.Document,[y.DocumentGeneric]:w.DocumentGeneric,[y.DocumentGovernmentId]:w.DocumentGovernmentId,[y.DocumentFile]:w.DocumentFile,[y.Inquiry]:w.Inquiry,[y.CurrentInquirySession]:w.CurrentInquirySession,[y.Graph]:w.Graph,[y.GraphDatumType]:w.GraphDatumType,[y.GraphNode]:w.GraphNode,[y.GraphQuery]:w.GraphQuery,[y.GraphQueryTemplate]:w.GraphQueryTemplate,[y.GraphSnapshot]:w.GraphSnapshot,[y.InquirySession]:w.InquirySession,[y.Template]:w.Template,[y.InquiryTemplate]:w.InquiryTemplate,[y.InquiryTemplateVersion]:w.InquiryTemplateVersion,[y.InquiryTemplateVersionDiff]:w.InquiryTemplateVersion,[y.InquiryTemplateModule]:w.InquiryTemplateModule,[y.InsightQuery]:w.InsightQuery,[y.PartialInquiryTemplateVersion]:w.InquiryTemplateVersion,[y.Importer]:w.Importer,[y.ImporterPipelineCsv]:w.ImporterPipeline,[y.ImporterPipelineMysql]:w.ImporterPipeline,[y.ImporterPipelineSnowflake]:w.ImporterPipeline,[y.ImporterPipelineRedshift]:w.ImporterPipeline,[y.ImporterPipelineS3]:w.ImporterPipeline,[y.ImporterPipelineGoogleSheets]:w.ImporterPipeline,[y.ImporterRun]:w.ImporterRun,[y.ImporterReportAddressLookup]:w.ImporterReportAddressLookup,[y.ImporterReportAdverseMedia]:w.ImporterReportAdverseMedia,[y.ImporterReportBusinessAdverseMedia]:w.ImporterReportBusinessAdverseMedia,[y.ImporterReportBusinessLookup]:w.ImporterReportBusinessLookup,[y.ImporterReportBusinessWatchlist]:w.ImporterReportBusinessWatchlist,[y.ImporterReportEmailAddress]:w.ImporterReportEmailAddress,[y.ImporterReportPhoneNumber]:w.ImporterReportPhoneNumber,[y.ImporterReportPoliticallyExposedPerson]:w.ImporterReportPoliticallyExposedPerson,[y.ImporterReportProfileNonAuthoritative]:w.ImporterReportProfileNonAuthoritative,[y.ImporterReportSocialMedia]:w.ImporterReportSocialMedia,[y.ImporterReportWatchlist]:w.ImporterReportWatchlist,[y.PlatformNode]:w.PlatformNode,[y.Report]:w.Report,[y.ReportAddressLookup]:w.ReportAddressLookup,[y.ReportAdverseMedia]:w.ReportAdverseMedia,[y.ReportBusinessAdverseMedia]:w.ReportBusinessAdverseMedia,[y.ReportBusinessAssociatedPersons]:w.ReportBusinessAssociatedPersons,[y.ReportBusinessClassification]:w.ReportBusinessClassification,[y.ReportBusinessIndustryClassification]:w.ReportBusinessIndustryClassification,[y.ReportBusinessLiensLookup]:w.ReportBusinessLiensLookup,[y.ReportBusinessLookup]:w.ReportBusinessLookup,[y.ReportBusinessNonprofit]:w.ReportBusinessNonprofit,[y.ReportBusinessOnlinePresence]:w.ReportBusinessOnlinePresence,[y.ReportBusinessRegistrationsLookup]:w.ReportBusinessRegistrationsLookup,[y.ReportBusinessSocialMedia]:w.ReportBusinessSocialMedia,[y.ReportBusinessWatchlist]:w.ReportBusinessWatchlist,[y.ReportBusinessWebsite]:w.ReportBusinessWebsite,[y.ReportChainalysisAddressScreening]:w.ReportChainalysisAddressScreening,[y.ReportClearbitBusinessLookup]:w.ReportClearbitBusinessLookup,[y.ReportCoinbaseCheckCryptoRisk]:w.ReportCoinbaseCheckCryptoRisk,[y.ReportCryptoAddressWatchlist]:w.ReportCryptoAddressWatchlist,[y.ReportCustomList]:w.ReportCustomList,[y.ReportEmailAddress]:w.ReportEmailAddress,[y.ReportEquifaxOneview]:w.ReportEquifaxOneview,[y.ReportFinraBrokerCheck]:w.ReportFinraBrokerCheck,[y.ReportKyckrBusinessLookup]:w.ReportKyckrBusinessLookup,[y.ReportMiddeskBusinessLookup]:w.ReportMiddeskBusinessLookup,[y.ReportMxAccount]:w.ReportMxAccount,[y.ReportPhoneNumber]:w.ReportPhoneNumber,[y.ReportPoliticallyExposedPerson]:w.ReportPoliticallyExposedPerson,[y.ReportProfile]:w.ReportProfile,[y.ReportProfileNonAuthoritative]:w.ReportProfileNonAuthoritative,[y.ReportSecActionLookup]:w.ReportSecActionLookup,[y.ReportSentilinkApplicationRisk]:w.ReportSentilinkApplicationRisk,[y.ReportSentilinkScores]:w.ReportSentilinkScores,[y.ReportSocialMedia]:w.ReportSocialMedia,[y.ReportSynthetic]:w.ReportSynthetic,[y.ReportTrmWalletScreening]:w.ReportTrmWalletScreening,[y.ReportWatchlist]:w.ReportWatchlist,[y.ReportSnapshot]:w.ReportSnapshot,[y.ReportSnapshotWatchlist]:w.ReportSnapshot,[y.ReportSnapshotAdverseMedia]:w.ReportSnapshot,[y.ReportSnapshotBusinessNonprofit]:w.ReportSnapshot,[y.ReportTemplate]:w.ReportTemplate,[y.ReportTemplateAddressLookup]:w.ReportTemplateAddressLookup,[y.ReportTemplateAdverseMedia]:w.ReportTemplateAdverseMedia,[y.ReportTemplateBusinessAdverseMedia]:w.ReportTemplateBusinessAdverseMedia,[y.ReportTemplateBusinessAssociatedPersons]:w.ReportTemplateBusinessAssociatedPersons,[y.ReportTemplateBusinessClassification]:w.ReportTemplateBusinessClassification,[y.ReportTemplateBusinessIndustryClassification]:w.ReportTemplateBusinessIndustryClassification,[y.ReportTemplateBusinessLiensLookup]:w.ReportTemplateBusinessLiensLookup,[y.ReportTemplateBusinessLookup]:w.ReportTemplateBusinessLookup,[y.ReportTemplateBusinessNonprofit]:w.ReportTemplateBusinessNonprofit,[y.ReportTemplateBusinessOnlinePresence]:w.ReportTemplateBusinessOnlinePresence,[y.ReportTemplateBusinessRegistrationsLookup]:w.ReportTemplateBusinessRegistrationsLookup,[y.ReportTemplateBusinessSocialMedia]:w.ReportTemplateBusinessSocialMedia,[y.ReportTemplateBusinessWatchlist]:w.ReportTemplateBusinessWatchlist,[y.ReportTemplateBusinessWebsite]:w.ReportTemplateBusinessWebsite,[y.ReportTemplateChainalysisAddressScreening]:w.ReportTemplateChainalysisAddressScreening,[y.ReportTemplateClearbitBusinessLookup]:w.ReportTemplateClearbitBusinessLookup,[y.ReportTemplateCoinbaseCheckCryptoRisk]:w.ReportTemplateCoinbaseCheckCryptoRisk,[y.ReportTemplateCryptoAddressWatchlist]:w.ReportTemplateCryptoAddressWatchlist,[y.ReportTemplateCustomList]:w.ReportTemplateCustomList,[y.ReportTemplateEmailAddress]:w.ReportTemplateEmailAddress,[y.ReportTemplateEquifaxOneview]:w.ReportTemplateEquifaxOneview,[y.ReportTemplateFinraBrokerCheck]:w.ReportTemplateFinraBrokerCheck,[y.ReportTemplateKyckrBusinessLookup]:w.ReportTemplateKyckrBusinessLookup,[y.ReportTemplateMiddeskBusinessLookup]:w.ReportTemplateMiddeskBusinessLookup,[y.ReportTemplateMxAccount]:w.ReportTemplateMxAccount,[y.ReportTemplateNovaCreditCashAtlas]:w.ReportTemplateNovaCreditCashAtlas,[y.ReportTemplateNovaCreditCreditPassport]:w.ReportTemplateNovaCreditCreditPassport,[y.ReportTemplatePhoneNumber]:w.ReportTemplatePhoneNumber,[y.ReportTemplatePoliticallyExposedPerson]:w.ReportTemplatePoliticallyExposedPerson,[y.ReportTemplateProfile]:w.ReportTemplateProfile,[y.ReportTemplateProfileNonAuthoritative]:w.ReportTemplateProfileNonAuthoritative,[y.ReportTemplateSecActionLookup]:w.ReportTemplateSecActionLookup,[y.ReportTemplateSentilinkApplicationRisk]:w.ReportTemplateSentilinkApplicationRisk,[y.ReportTemplateSentilinkScores]:w.ReportTemplateSentilinkScores,[y.ReportTemplateSocialMedia]:w.ReportTemplateSocialMedia,[y.ReportTemplateSynthetic]:w.ReportTemplateSynthetic,[y.ReportTemplateTrmWalletScreening]:w.ReportTemplateTrmWalletScreening,[y.ReportTemplateWatchlist]:w.ReportTemplateWatchlist,[y.ReportTemplateVersionAddressLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionAdverseMedia]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessAdverseMedia]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessAssociatedPersons]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessClassification]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessIndustryClassification]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessLiensLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessNonprofit]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessOnlinePresence]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessRegistrationsLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessSocialMedia]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessWatchlist]:w.ReportTemplateVersion,[y.ReportTemplateVersionBusinessWebsite]:w.ReportTemplateVersion,[y.ReportTemplateVersionClearbitBusinessLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionChainalysisAddressScreening]:w.ReportTemplateVersion,[y.ReportTemplateVersionCryptoAddressWatchlist]:w.ReportTemplateVersion,[y.ReportTemplateVersionCustomList]:w.ReportTemplateVersionCustomList,[y.ReportTemplateVersionEmailAddress]:w.ReportTemplateVersion,[y.ReportTemplateVersionEquifaxOneview]:w.ReportTemplateVersion,[y.ReportTemplateVersionFinraBrokerCheck]:w.ReportTemplateVersion,[y.ReportTemplateVersionKyckrBusinessLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionMiddeskBusinessLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionMxAccount]:w.ReportTemplateVersion,[y.ReportTemplateVersionPhoneNumber]:w.ReportTemplateVersion,[y.ReportTemplateVersionPoliticallyExposedPerson]:w.ReportTemplateVersion,[y.ReportTemplateVersionProfile]:w.ReportTemplateVersion,[y.ReportTemplateVersionProfileNonAuthoritative]:w.ReportTemplateVersion,[y.ReportTemplateVersionSecActionLookup]:w.ReportTemplateVersion,[y.ReportTemplateVersionSentilinkApplicationRisk]:w.ReportTemplateVersion,[y.ReportTemplateVersionSentilinkScores]:w.ReportTemplateVersion,[y.ReportTemplateVersionSocialMedia]:w.ReportTemplateVersion,[y.ReportTemplateVersionSynthetic]:w.ReportTemplateVersion,[y.ReportTemplateVersionTrmWalletScreening]:w.ReportTemplateVersion,[y.ReportTemplateVersionWatchlist]:w.ReportTemplateVersion,[y.ReportRun]:w.ReportRunsCustomList,[y.ReportRunCustomList]:w.ReportRunsCustomList,[y.SAR]:w.SAR,[y.SARConfiguration]:w.SARConfiguration,[y.SelfieCenterOnly]:w.SelfieCenterOnly,[y.SelfieProfileAndCenter]:w.SelfieProfileAndCenter,[y.Verification]:w.Verification,[y.VerificationAamva]:w.VerificationAamva,[y.VerificationBusinessWebsite]:w.VerificationBusinessWebsite,[y.VerificationCertificateKorea]:w.VerificationCertificateKorea,[y.VerificationDatabase]:w.VerificationDatabase,[y.VerificationDatabaseAadhaar]:w.VerificationDatabaseAadhaar,[y.VerificationDatabaseBusiness]:w.VerificationDatabaseBusiness,[y.VerificationDatabaseBusinessFootprint]:w.VerificationDatabaseBusinessFootprint,[y.VerificationDatabaseEcbsv]:w.VerificationDatabaseEcbsv,[y.VerificationDatabasePhoneCarrier]:w.VerificationDatabasePhoneCarrier,[y.VerificationDatabaseSerpro]:w.VerificationDatabaseSerpro,[y.VerificationDatabaseStandard]:w.VerificationDatabaseStandard,[y.VerificationDatabaseTin]:w.VerificationDatabaseTin,[y.VerificationDatabaseVatNumber]:w.VerificationDatabaseVatNumber,[y.VerificationDigitalIdFinnishTrustNetwork]:w.VerificationDigitalIdFinnishTrustNetwork,[y.VerificationDigitalIdOneId]:w.VerificationDigitalIdOneId,[y.VerificationDigitalIdSingpass]:w.VerificationDigitalIdSingpass,[y.VerificationDigitalIdUkSharecode]:w.VerificationDigitalIdUkSharecode,[y.VerificationDocument]:w.VerificationDocument,[y.VerificationEmailAddress]:w.VerificationEmailAddress,[y.VerificationGovernmentId]:w.VerificationGovernmentId,[y.VerificationGovernmentIdNfc]:w.VerificationGovernmentIdNfc,[y.VerificationMobileDriversLicense]:w.VerificationMobileDriversLicense,[y.VerificationPhoneNumber]:w.VerificationPhoneNumber,[y.VerificationSelfie]:w.VerificationSelfie,[y.VerificationTemplate]:w.VerificationTemplate,[y.VerificationTemplateAamva]:w.VerificationTemplate,[y.VerificationTemplateBusinessWebsite]:w.VerificationTemplate,[y.VerificationTemplateCertificateKorea]:w.VerificationTemplate,[y.VerificationTemplateDatabase]:w.VerificationTemplate,[y.VerificationTemplateDatabaseAadhaar]:w.VerificationTemplate,[y.VerificationTemplateDatabaseEcbsv]:w.VerificationTemplate,[y.VerificationTemplateDatabaseBusiness]:w.VerificationTemplate,[y.VerificationTemplateDatabaseBusinessFootprint]:w.VerificationTemplate,[y.VerificationTemplateDatabasePhoneCarrier]:w.VerificationTemplate,[y.VerificationTemplateDatabaseSerpro]:w.VerificationTemplate,[y.VerificationTemplateDatabaseStandard]:w.VerificationTemplate,[y.VerificationTemplateDatabaseTin]:w.VerificationTemplate,[y.VerificationTemplateDatabaseVatNumber]:w.VerificationTemplate,[y.VerificationTemplateDigitalIdFinnishTrustNetwork]:w.VerificationTemplate,[y.VerificationTemplateDigitalIdOneId]:w.VerificationTemplate,[y.VerificationTemplateDigitalIdSingpass]:w.VerificationTemplate,[y.VerificationTemplateDigitalIdUkSharecode]:w.VerificationTemplate,[y.VerificationTemplateDocument]:w.VerificationTemplate,[y.VerificationTemplateEmailAddress]:w.VerificationTemplate,[y.VerificationTemplateGovernmentId]:w.VerificationTemplate,[y.VerificationTemplateGovernmentIdNfc]:w.VerificationTemplate,[y.VerificationTemplateMobileDriversLicense]:w.VerificationTemplate,[y.VerificationTemplatePhoneNumber]:w.VerificationTemplate,[y.VerificationTemplateSelfie]:w.VerificationTemplate,[y.VerificationTemplateVersion]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionAamva]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionBusinessWebsite]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionCertificateKorea]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabase]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseAadhaar]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseStandard]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseBusiness]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseBusinessFootprint]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseEcbsv]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabasePhoneCarrier]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseSerpro]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseTin]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDatabaseVatNumber]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDigitalIdFinnishTrustNetwork]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDigitalIdOneId]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDigitalIdSingpass]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDigitalIdUkSharecode]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionDocument]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionEmailAddress]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionGovernmentId]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionGovernmentIdNfc]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionMobileDriversLicense]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionPhoneNumber]:w.VerificationTemplateVersion,[y.VerificationTemplateVersionSelfie]:w.VerificationTemplateVersion,[y.Organization]:w.Organization,[y.OrganizationPlan]:w.OrganizationPlan,[y.OrganizationPlanMigration]:w.OrganizationPlanMigration,[y.OnboardingFlowV1]:w.OnboardingFlowV1,[y.Invoice]:w.Invoice,[y.CurrentUser]:w.CurrentUser,[y.User]:w.User,[y.UserAuditLog]:w.UserAuditLog,[y.UserAuthentication]:w.UserAuthentication,[y.UserNotification]:w.UserNotification,[y.UserSession]:w.UserSession,[y.Event]:w.Event,[y.ApiLog]:w.ApiLog,[y.Environment]:w.Environment,[y.EnvironmentProduction]:w.Environment,[y.EnvironmentSandbox]:w.Environment,[y.Exporter]:w.Exporter,[y.ExporterAccount]:w.ExporterAccount,[y.ExporterInquiry]:w.ExporterInquiry,[y.ExporterMetricsInquiry]:w.ExporterMetricsInquiry,[y.ExporterCase]:w.ExporterCase,[y.ExporterCustomFile]:w.ExporterCustomFiles,[y.ExporterInsightQuery]:w.ExporterInsightQueries,[y.ExporterDataset]:w.ExporterDataset,[y.ExporterGraph]:w.ExporterGraph,[y.ExporterMetricsVerificationVolume]:w.ExporterMetricsVerificationVolume,[y.ExporterMetricsVerificationChecks]:w.ExporterMetricsVerificationChecks,[y.ExporterReport]:w.ExporterReport,[y.ExporterReviewQueueTask]:w.ExporterReviewQueueTask,[y.ExporterTransaction]:w.ExporterTransactions,[y.ExternalIntegration]:w.ExternalIntegration,[y.ExternalIntegrationCall]:w.ExternalIntegrationCall,[y.ExternalIntegrationConfig]:w.ExternalIntegrationConfig,[y.ExternalIntegrationConfigCredentialApiKey]:w.ExternalIntegrationConfig,[y.ExternalIntegrationConfigCredentialBearer]:w.ExternalIntegrationConfig,[y.ExternalIntegrationConfigCredentialBasic]:w.ExternalIntegrationConfig,[y.ExternalIntegrationDataSource]:w.ExternalIntegrationDataSource,[y.ExternalIntegrationDataSourceCsv]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceMongodb]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceMysql]:w.ExternalIntegration,[y.ExternalIntegrationDataSourcePostgres]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceRedshift]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceGoogleSheets]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceSnowflake]:w.ExternalIntegration,[y.ExternalIntegrationDataSourceS3]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentChainalysis]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentEquifaxOneview]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentKyckr]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentMiddesk]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentMx]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentSentilink]:w.ExternalIntegration,[y.ExternalIntegrationEnrichmentTrm]:w.ExternalIntegration,[y.ExternalIntegrationLog]:w.ExternalIntegrationLog,[y.ExternalIntegrationProductivity]:w.ExternalIntegration,[y.ExternalIntegrationProductivityHubspotOAuth]:w.ExternalIntegration,[y.ExternalIntegrationProductivityOpenAi]:w.ExternalIntegration,[y.ExternalIntegrationProductivitySalesforceOAuth]:w.ExternalIntegration,[y.ExternalIntegrationProductivitySlackOAuth]:w.ExternalIntegration,[y.ExternalIntegrationProductivityZendeskOAuth]:w.ExternalIntegration,[y.ExternalIntegrationVendor]:w.ExternalIntegrationVendor,[y.PasswordResetEmail]:w.PasswordReset,[y.SimulatePreset]:w.SimulatePreset,[y.SimulatePresetVerification]:w.SimulatePreset,[y.TableView]:w.TableView,[y.Theme]:w.Theme,[y.ThemeSet]:w.ThemeSet,[y.Transaction]:w.Transaction,[y.TransactionLabel]:w.TransactionLabel,[y.TransactionStatus]:w.TransactionStatus,[y.TransactionType]:w.TransactionType,[y.Translations]:w.Translations,[y.TriggerComputedField]:w.Trigger,[y.TriggerEvent]:w.Trigger,[y.TriggerSchedule]:w.Trigger,[y.TriggerRecurring]:w.Trigger,[y.TriggerAccount]:w.Trigger,[y.TriggerApi]:w.Trigger,[y.TriggerCase]:w.Trigger,[y.TriggerDirect]:w.Trigger,[y.Webhook]:w.Webhook,[y.Workflow]:w.Workflow,[y.WorkflowBlock]:w.WorkflowBlock,[y.WorkflowDeployment]:w.WorkflowDeployment,[y.WorkflowModule]:w.WorkflowModule,[y.WorkflowRun]:w.WorkflowRun,[y.WorkflowRunSimulated]:w.WorkflowRun,[y.WorkflowRunStep]:w.WorkflowRunStep,[y.WorkflowRunStepAction]:w.WorkflowRunStep,[y.WorkflowRunStepConditional]:w.WorkflowRunStep,[y.WorkflowRunStepParallel]:w.WorkflowRunStep,[y.WorkflowRunStepLoop]:w.WorkflowRunStep,[y.WorkflowRunStepModule]:w.WorkflowRunStep,[y.WorkflowRunStepWait]:w.WorkflowRunStep,[y.WorkflowRunVariablePersonaObject]:w.WorkflowRunStep,[y.WorkflowRunVariablePlatformIntegration]:w.WorkflowRunStep,[y.WorkflowRunVariableOutput]:w.WorkflowRunStep,[y.WorkflowRunVariableTriggerParams]:w.WorkflowRunStep,[y.WorkflowRunVariableLoop]:w.WorkflowRunStep,[y.WorkflowVersion]:w.WorkflowVersion,[y.List]:w.List,[y.ListGovernmentIdNumber]:w.List,[y.ListIpAddress]:w.List,[y.ListName]:w.List,[y.ListPhoneNumber]:w.List,[y.ListEmailAddress]:w.List,[y.ListGeolocation]:w.List,[y.ListBrowserFingerprint]:w.List,[y.ListDeviceFingerprint]:w.List,[y.ListString]:w.List,[y.ListFace]:w.List,[y.ListCountry]:w.List,[y.ListField]:w.List,[y.ListSelfieBackground]:w.List,[y.ListItem]:w.ListItem,[y.ListItemGovernmentIdNumber]:w.ListItem,[y.ListItemIpAddress]:w.ListItem,[y.ListItemName]:w.ListItem,[y.ListItemPhoneNumber]:w.ListItem,[y.ListItemEmailAddress]:w.ListItem,[y.ListItemGeolocation]:w.ListItem,[y.ListItemBrowserFingerprint]:w.ListItem,[y.ListItemDeviceFingerprint]:w.ListItem,[y.ListItemFace]:w.ListItem,[y.ListItemCountry]:w.ListItem,[y.ListItemField]:w.ListItem,[y.ListItemString]:w.ListItem,[y.ListItemSelfieBackground]:w.ListItem,[y.ListMatch]:w.ListMatch,[y.WebhookEvent]:w.WebhookEvent,[y.ReviewQueue]:w.ReviewQueue,[y.ReviewQueueTask]:w.ReviewQueueTask,[y.Tag]:w.Tag,[y.Role]:w.Role,[y.Team]:w.Team},Zt=e=>QC[e];class ZC{constructor(t){this.apiRoot=t}listResource(t,n={}){return this.makeRequest(t,"GET",n)}getResource(t,n,r={}){return this.makeRequest(`${t}/${n}`,"GET",r)}getResourceMeta(t,n,r={}){return this.makeRequest(`${t}/${n}`,"GET",r)}getResourceMetaTyped(t,n={}){return this.makeRequest(`${t}`,"GET",n)}getResourceSingleton(t,n={}){return this.makeRequest(t,"GET",n)}get(t,n,r,o={}){return this.makeRequest(`${t}/${n}/${r}`,"GET",o)}getEndpoint(t,n={}){return this.makeRequest(t,"GET",n)}getBlob(t,n,r,o={}){return this.makeRequest(mp([t,n,r]).join("/"),"GET",{...o,responseType:"blob"})}postResourceCreate(t,n={}){const r=t.type,o=n.parent,s=(o&&`${Zt(o.type)}/${o.id}/`||"")+Zt(r);return this.makeRequestWithBody(s,"POST",t,n)}postMultiResourceCreate(t,n,r={}){const{parent:o,additionalData:a}=r,c=(o&&`${Zt(o.type)}/${o.id}/`||"")+t;return this.makeRequestWithMultipleResources(c,"POST",n,a,r)}deleteResource(t,n){return this.makeRequest(`${t}/${n}`,"DELETE")}deleteResourceWithPayload(t,n,r){return this.makeRequestWithBody(`${n}/${r}`,"DELETE",t)}updateResource(t,n={}){const r=t.type,o=n.parent,s=`${(o?`${Zt(o.type)}/${o.id}/`:"")+Zt(r)}/${t.id}`;return this.makeRequestWithBody(s,"PATCH",t,n)}updateResourceAction(t,n,r={}){const o=t.type,a=r.parent,c=`${(a?`${Zt(a.type)}/${a.id}/`:"")+Zt(o)}/${t.id}/${n}`;return this.makeRequestWithBody(c,"PATCH",t,r)}updateResourceSingleton(t,n={}){const r=t.type,o=n.parent,s=(o&&`${Zt(o.type)}/${o.id}/`||"")+Zt(r);return this.makeRequestWithBody(s,"PATCH",t,n)}postResourceSingletonActionNew(t,n,r,o={}){const a=`${t}/${n}`;return this.makeRequestWithBody(a,"POST",r,o)}postResourceSingletonAction(t,n,r={}){const o=t.type,a=`${Zt(o)}/${n}`;return this.makeRequestWithBody(a,"POST",t,r)}postResourceAction(t,n,r={}){const o=t.type,a=`${Zt(o)}/${t.id}/${n}`;return this.makeRequestWithBody(a,"POST",t,r)}async sendRequest(t,n,r={}){var a,s;const o=this.generateParams(r);r.contentType==="multipart/form-data"&&(n.data=Xb.serialize(n.data,{allowEmptyArrays:!!r.formDataAllowEmptyArrays})),(a=n.headers)!=null||(n.headers={}),n.headers["Persona-Server-SHA"]="d1808851723";try{const c=await ci.request({...n,url:`${this.apiRoot}/${t}${o}`});if(rr("request_id",(s=c==null?void 0:c.headers)==null?void 0:s["x-request-id"]),c.status===0&&n.method)throw new Ct({method:n.method,uri:t,extra:"with 0 status code"});if(c.data==null&&n.method&&n.method.toLowerCase()!=="delete")throw new Ct({method:n.method,uri:t,extra:"with empty response"});return c}catch(c){n.method?ar({error:c,method:n.method,uri:t}):e0(new Error(`Missing request method for Axios error. Error: ${JSON.stringify(c)}`))}finally{rr("request_id",void 0)}}async makeRequest(t,n,r={}){const o={method:n,"axios-retry":r.retryOptions,signal:r.signal,responseType:r.responseType,headers:r.headers},a=await this.sendRequest(t,o,r);return a==null?void 0:a.data}async makeRequestWithBody(t,n,r,o={}){const s={data:{data:r,meta:o.meta},headers:{"Content-Type":o.contentType||"application/json",...o.headers},method:n,"axios-retry":o.retryOptions,onUploadProgress:o.onUploadProgress},c=await this.sendRequest(t,s,o);return c==null?void 0:c.data}async makeRequestWithMultipleResources(t,n,r,o=[],a={}){const s={data:{data:[r,...o],meta:a.meta},headers:{"Content-Type":"application/json",...a.headers},method:n,"axios-retry":a.retryOptions,onUploadProgress:a.onUploadProgress},c=await this.sendRequest(t,s,a);return c==null?void 0:c.data}generateParams(t){const n=Wo.stringify({filter:{...t.filter},page:{...t.page},sort:t.sort,query:t.query,include:Array.isArray(t.include)?t.include.join(","):void 0,activation_token:t==null?void 0:t.activationToken});return n?`?${n}`:""}}const Rs=class Rs{static init(){try{sessionStorage.setItem("testtest","testtest"),sessionStorage.getItem("testtest"),sessionStorage.removeItem("testtest"),localStorage.setItem("testtest","testtest"),localStorage.getItem("testtest"),localStorage.removeItem("testtest"),this.supportsStorage=!0}catch{this.supportsStorage=!1}}static setSessionItem(t,n){if(this.sessionData[t]=n,this.supportsStorage)try{sessionStorage.setItem(t,n)}catch(r){me(r,"warning",{keys:Object.keys(sessionStorage)}),this.supportsStorage=!1}}static getSessionItem(t){return this.supportsStorage?this.sessionData[t]=sessionStorage.getItem(t):t in this.sessionData||(this.sessionData[t]=null),this.sessionData[t]}static removeSessionItem(t){delete this.sessionData[t],this.supportsStorage&&sessionStorage.removeItem(t)}static setLocalItem(t,n){if(this.localData[t]=n,this.supportsStorage)try{localStorage.setItem(t,n)}catch(r){me(r,"warning",{keys:Object.keys(localStorage)}),this.supportsStorage=!1}}static getLocalItem(t){return this.supportsStorage?this.localData[t]=localStorage.getItem(t):t in this.localData||(this.localData[t]=null),this.localData[t]}static removeLocalItem(t){delete this.localData[t],this.supportsStorage&&localStorage.removeItem(t)}};Rs.sessionData={},Rs.localData={};let rn=Rs;rn.init();var _a=(e=>(e.IpStackCacheKey="cached-ipstack-location",e.LocaleInfoCacheKey="cached-locale-info",e.DashboardCurrentEnvironmentId="dashboard:current-environment-id",e.DashboardRefreshTokenSession="PERSONA-DASHBOARD-REFRESH",e.DashboardCasesNextPageSettingDefault="dashboard:cases:next-page-setting-default",e.DashboardLayoutEditorCopiedModule="dashboard:copied-module",e.DashboardGraphQueryParameters="dashboard:graph:query-parameters",e.DashboardInquirySimulateBannerDismissed="dashboard:inquiry:simulate-banner-dismissed",e.DashboardITEInternalEditingEnabled="dashboard:ite:internal-editing-enabled",e.DashboardITEPreviewSimulatePanelOpen="dashboard:ite:simulate-panel-open",e.DashboardITEScreenEditorSelectedScreenMode="dashboard:ite-screen-editor-selected-screen-mode",e.DashboardITEScreenEditorSelectedComponentPanelSettings="dashboard:ite-screen-editor-selected-component-panel-settings",e.DashboardITEPreviewStepsPanelOpen="dashboard:ite:simulate-steps-panel-open",e.DasbhoardITEScreenEditorCopiedComponent="dashboard:ite:screen-editor:copied-component",e.DashboardITEScreenDimensions="dashboard:ite:screen-dimensions",e.DashboardReportsTableVisibleColumns="dashboard:reports:visible-columns",e.DashboardWorkflowRunsTableSelectedColumns="dashboard:workflow-runs:selected-columns",e.DashboardWorkflowEditorCollapsedSteps="dashboard:workflow-editor:collapsed-steps",e.DashboardWorkflowEditorCopiedSteps="dashboard:workflow-editor:copied-steps",e.DashboardWorkflowEditorRunCodeFormInputs="dashboard:workflow-editor:run-code-form-inputs",e.DashboardActivityAt="dashboard:activity-at",e.GroupProperties="ajs_group_properties",e.UserTraits="ajs_user_traits",e.APIListInfoBanner="api-list-info-banner",e.APIEditInfoBanner="api-edit-info-banner",e.WebhooksInfoBanner="webhooks-info-banner",e.EventsInfoBanner="events-info-banner",e.DashboardImporterStepperFormInputs="dashboard:importer-stepper-form-inputs",e.DashboardEventBus="dashboard:event-bus",e.MarketingGclid="marketing:gclid",e.MarketingUtmSource="marketing:utm-source",e.MarketingUtmMedium="marketing:utm-medium",e.MarketingUtmCampaign="marketing:utm-campaign",e.MarketingUtmTerm="marketing:utm-term",e.MarketingUtmContent="marketing:utm-content",e.MarketingUtmAudience="marketing:utm-audience",e.MarketingUtmOther="marketing:utm-other",e.InquirySandboxBannerHidden="inquiry:sandbox-banner-hidden",e))(_a||{}),ui=(e=>(e.CommentModuleDrafts="dashboard:comment-module-drafts",e.SarModuleTabIdx="dashboard:sar-module-tab-idx",e.SectionedCardIdx="dashboard:sectioned-card-idx",e.CaseTemplateSettingTabIdx="dashboard:case-template-setting-tab-idx",e.InquiryParams="inquiry:params-key",e.InquiryAccessToken="inquiry:access-token",e.InquiryDeviceId="inquiry:device-id",e))(ui||{});function hs(e){try{return t0(e)}catch{return null}}const tl=(e,t=null,n=[])=>{const r=Object.prototype.toString.call(e);if(r==="[object Object]")for(const o in e)tl(e[o],t?`${t}[${o}]`:o,n);else if(r==="[object Array]")for(let o=0;o<e.length;o++)tl(e[o],`${t}[${o}]`,n);else String(e)==="undefined"||String(e)==="null"||n.push([t,e]);return n},JC=e=>{try{return btoa(unescape(encodeURIComponent(e)))}catch{return"Failed to encode input"}},XC="/dashboard/inquiry-templates/:inquiryTemplateId/:inquiryTemplateVersionId",ps={CREATED:"create-persona/created",DISMISSED:"create-persona/dismissed"},Ai={TRANSITION_STARTED:"verify-with-persona/transition-started",TRANSITION_POLLING:"verify-with-persona/transition-polling",TRANSITION_COMPLETED:"verify-with-persona/transition-completed",TRANSITION_ERRORED:"verify-with-persona/transition-errored"},Rp="/inquiry/reusable-persona-create-popup",Ap="/inquiry/reusable-persona-verify-popup";var ke=(e=>(e.NameFirst="name-first",e.NameMiddle="name-middle",e.NameLast="name-last",e.NameFull="name-full",e.Birthdate="birthdate",e.SocialSecurityNumber="social-security-number",e.Address="address",e.AddressStreet1="address-street-1",e.AddressStreet2="address-street-2",e.AddressCity="address-city",e.AddressSubdivision="address-subdivision",e.AddressPostalCode="address-postal-code",e.AddressCountryCode="address-country-code",e.CountryCode="country-code",e.PhoneNumber="phone-number",e.EmailAddress="email-address",e.IdentificationNumber="identification-number",e.IdentificationClass="identification-class",e))(ke||{}),Ae=(e=>(e.Ui="ui",e.Document="document",e.GovernmentId="government_id",e.Selfie="selfie",e.SelfieReflection="selfie_reflection",e.Complete="complete",e.Integration="integration",e.VerifyWithPersona="verify_with_persona",e.Start="start",e.Completed="completed",e.Failed="failed",e.CountrySelect="country_select",e.DocumentsUpload="documents_upload",e))(Ae||{}),Tp=(e=>(e.Default="default",e.None="none",e))(Tp||{});function ut(e){const t=typeof e=="object"?JSON.stringify(e):e;me(new TypeError(`assertNever non-exhaustive match: ${t}`))}const ex=e=>e.replace(/\/$/,""),Ep=e=>{const t=e.split(".");return t.length>1?t.pop():null},tx=e=>{if(e==null||e==="personacallback")return!0;let t;try{t=new URL(e).protocol}catch{return!1}return!["data:","javascript:"].includes(t)},nx=e=>e&&e.substring(0,15)==="intent:#Intent;"&&e.substr(-4)===";end";function kp({children:e,disabled:t,...n}){return t?i.jsx(i.Fragment,{children:e}):i.jsx(Ah,{...n,children:e})}var wt=(e=>(e.Embedded="embedded",e.WebView="webview",e.Hosted="hosted",e.Inline="inline",e))(wt||{});const ix=Co(["body{height:100%;width:100%;font-size:",";line-height:",";color:",";-webkit-font-smoothing:antialiased;font-family:",";overflow:auto;-webkit-overflow-scrolling:touch;@media ","{overflow:hidden;}@media ","{background-color:",";}}input,textarea,select{opacity:unset;}a{color:",";font-size:inherit;line-height:inherit;text-decoration-line:",";&:focus-visible{outline:"," auto 1px;outline-offset:2px;}}h2{font-size:",";line-height:",";font-weight:",";margin-bottom:","px;}h3{font-size:",";line-height:",";font-weight:",";}small{font-size:",";line-height:",";a{font-size:",";line-height:",";}}section{margin-bottom:","px;}.row{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-","px;margin-left:-","px;}.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{position:relative;width:100%;min-height:1px;padding-right:","px;padding-left:","px;}@media (min-width:576px){.col-sm-1{-webkit-box-flex:0;-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%;}.col-sm-2{-webkit-box-flex:0;-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%;}.col-sm-3{-webkit-box-flex:0;-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%;}.col-sm-4{-webkit-box-flex:0;-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%;}.col-sm-5{-webkit-box-flex:0;-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%;}.col-sm-6{-webkit-box-flex:0;-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%;}.col-sm-7{-webkit-box-flex:0;-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%;}.col-sm-8{-webkit-box-flex:0;-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%;}.col-sm-9{-webkit-box-flex:0;-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%;}.col-sm-10{-webkit-box-flex:0;-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%;}.col-sm-11{-webkit-box-flex:0;-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%;}.col-sm-12{-webkit-box-flex:0;-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%;}}"],$t.p,$n.p,S.Color.CoreSlate500,S.FontFamilies.Primary,jt.isMobile,jt.isNotMobile,({flowType:e})=>e===wt.Inline?"unset":"#505060",({theme:e})=>e.colorLink,({theme:e})=>e.textDecorationLineLink,({theme:e})=>e.colorLink,$t.h2,$n.h2,an.semiBold,L.base,$t.h3,$n.h3,an.semiBold,$t.small,$n.small,$t.small,$n.small,L.base*2,L.base*2,L.base*2,L.base*2,L.base*2),Tr={"ar-EG":"",bn:"",cs:"etina",cy:"Cymraeg",da:"dansk",de:"Deutsch","el-GR":"","en-US":"English","es-MX":"Espaol",fi:"suomi",fr:"Franais",he:"",hi:"",hr:"hrvatski",hu:"magyar","id-ID":"Bahasa indonesia",it:"Italiano",ja:"","ko-KR":"",lt:"lietuvi kalba",ms:"Bahasa Melayu","nl-NL":"Nederlands",no:"norsk",pl:"Polski","pt-BR":"Portugus",ro:"Romn",ru:"",sk:"slovenina",sv:"Svenska",ta:"",th:"",tl:"Tagalog","tr-TR":"Trke","uk-UA":"",ur:"Roman Urdu",vi:"ting vit","zh-CN":" (","zh-TW":" ("},rx=["ar-EG","he"],fs={AK:"Alaska",AL:"Alabama",AR:"Arkansas",AZ:"Arizona",CA:"California",CO:"Colorado",CT:"Connecticut",DC:"District of Columbia",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",IA:"Iowa",ID:"Idaho",IL:"Illinois",IN:"Indiana",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",MA:"Massachusetts",MD:"Maryland",ME:"Maine",MI:"Michigan",MN:"Minnesota",MO:"Missouri",MS:"Mississippi",MT:"Montana",NC:"North Carolina",ND:"North Dakota",NE:"Nebraska",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NV:"Nevada",NY:"New York",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VA:"Virginia",VT:"Vermont",WA:"Washington",WI:"Wisconsin",WV:"West Virginia",WY:"Wyoming"},gs={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthlemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia (Plurinational State of)",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cte dIvoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cabo Verde",CW:"Curaao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia (Federated States of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom of Great Britain and Northern Ireland",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran (Islamic Republic of)",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea (Democratic Peoples Republic of)",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao Peoples Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Runion",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Eswatini",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States of America",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See",VC:"Saint Vincent and the Grenadines",VE:"Venezuela (Bolivarian Republic of)",VG:"Virgin Islands (British)",VI:"Virgin Islands (U.S.)",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"},Ds=["GB"],ox={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AN:"ANT",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AX:"ALA",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BL:"BLM",BM:"BMU",BN:"BRN",BO:"BOL",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MF:"MAF",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",SS:"SSD",ST:"STP",SV:"SLV",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",XK:"XKX",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};pC(ox);const ax=Co(["select{padding-right:","px !important;}h4{padding-left:0px !important;padding-right:","px !important;}"],L.base*3,L.base*3),sx=({children:e,i18n:t})=>{const n=rx.indexOf(t.language)>=0?"rtl":"ltr";return i.jsxs("div",{dir:n,"data-test":"localized-direction",children:[n==="rtl"&&i.jsx(ax,{}),e]})},cx=On()(sx),lx={hide:$(["@media print{display:none;}"]),border:$(["@media print{border:1px solid ",";}"],({theme:e})=>e.color.border.primary),avoidPageBreak:$(["@media print{break-inside:avoid;}"])},zl=({disabled:e})=>e?"":":disabled",En=({disabled:e})=>e?":not(*)":":not(:disabled)",so=({hovered:e})=>e?"":":hover",Wi=({focused:e})=>e?"":":focus",dx=({active:e})=>e?"":":focus-within";var Mi=(e=>(e.High="0px 11px 15px rgba(191, 191, 199, 0.2), 0px 9px 46px rgba(191, 191, 199, 0.12), 0px 24px 38px rgba(191, 191, 199, 0.14)",e.Mid="0px 10px 14px rgba(0, 0, 0, 0.08), 0px 6px 6px rgba(0, 0, 0, 0.06)",e.Low="0px 4px 5px rgba(191, 191, 199, 0.2), 0px 3px 14px rgba(191, 191, 199, 0.12), 0px 8px 10px rgba(191, 191, 199, 0.14)",e))(Mi||{});`${S.Color.BorderHairline}`,`${S.Color.BorderHairline}`,`${S.Color.BorderHairline}`;var et=(e=>(e.Fast="200ms",e.Medium="400ms",e))(et||{});const ux=$(["box-shadow:0 0 0 3px transparent,",";"],Mi.Mid),mx=e=>$(["",""],({theme:t,variant:n="primary"})=>$(["box-shadow:0 0 0 3px ",";"],t.color.variants[n].highlight)),hx=e=>$(["",""],({theme:t,variant:n="primary"})=>$(["box-shadow:0 0 0 3px ",",",";"],t.color.variants[n].highlight,Mi.Mid)),Np=$(["cursor:pointer;&","{cursor:not-allowed;}transition:box-shadow ",";&","","{",";}&","","{",";}&","","","{",";}"],zl,et.Fast,so,En,ux,Wi,En,mx(),so,Wi,En,hx()),px=$(["font-family:",";"],({theme:e})=>e.text.fontFamily.base),fx={lg:$(["",";margin:0;"],S.Typography.DisplayLarge),md:$(["",";margin:0;"],S.Typography.DisplayMedium),sm:$(["",";margin:0;"],S.Typography.DisplaySmall)},gx={lg:$(["",";margin:0;"],S.Typography.HeadingLarge),md:$(["",";margin:0;"],S.Typography.HeadingMedium),sm:$(["",";margin:0;"],S.Typography.HeadingSmall)},Di={lg:$(["",";margin:0;"],S.Typography.TextLarge),lgBold:$(["",";margin:0;"],S.Typography.TextLargeBold),lgLight:$(["",";margin:0;"],S.Typography.TextLargeLight),md:$(["",";margin:0;"],S.Typography.TextMedium),mdBold:$(["",";margin:0;"],S.Typography.TextMediumBold),mdLight:$(["",";margin:0;"],S.Typography.TextMediumLight),mdLink:$(["",";margin:0;"],S.Typography.TextMediumLink),sm:$(["",";margin:0;"],S.Typography.TextSmall),smLink:$(["",";margin:0;"],S.Typography.TextSmallLink),xs:$(["",";margin:0;"],S.Typography.TextExtraSmall)},bx=Ln(["100%{transform:rotate(360deg);}"]);Ln(["0%{opacity:0;}100%{opacity:1;}"]);function rt(e=!1){const[t,n]=f.useState(!!e),r=f.useCallback(c=>n(c),[]),o=f.useCallback(()=>n(!t),[t]),a=f.useCallback(()=>n(!0),[]),s=f.useCallback(()=>n(!1),[]);return[t,{set:r,toggle:o,enable:a,disable:s}]}const Cx=()=>{},xx=({active:e})=>e?"":":active:enabled",vx={md:$([""," height:",";padding:",";svg{height:16px;width:16px;}"],Di.md,({theme:e})=>e.button.height.md,S.Spacing[2]),sm:$([""," height:",";padding:",";svg{height:16px;width:16px;}"],Di.sm,({theme:e})=>e.button.height.sm,S.Spacing[1])},Ix={full:$(["width:100%;"]),auto:$(["width:auto;"]),button:$(["width:",";"],({theme:e})=>e.element.width.md),icon:$(["width:",";padding:0;flex:none;"],({theme:e,size:t})=>e.button.height[t])},Sx=b.button.attrs(({to:e})=>ql(e)?"button":typeof e=="string"&&e.startsWith("https://")?{as:"a",href:e,target:"_blank",rel:"noreferrer"}:{as:Th}).withConfig({displayName:"Button__StyledButton",componentId:"sc-91wjkl-0"})(["",";border:none;box-sizing:border-box;outline:0 !important;white-space:nowrap;"," display:flex;align-items:center;justify-content:center;position:relative;border-radius:",";transition:",";"," "," "," ",""],Np,({theme:e,variant:t})=>{const n=e.color.variants[t];return $(["&:disabled{background-color:",";color:",";svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}user-select:none;}"],n.disabled,n.textDisabled,n.textDisabled)},({theme:e})=>e.button.borderRadius,et.Fast,({size:e})=>vx[e],({width:e})=>Ix[e],({theme:e,variant:t,$isPending:n})=>{const r=e.color.variants[t];return $(["background-color:",";color:",";svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}&","{background-color:",";}",""],r.default,r.text,r.text,xx,r.active,n&&$(["cursor:default;background-color:",";&:disabled{background-color:",";user-select:none;}svg path{stroke:",";}svg.pds-icon{path{stroke:unset;}path[stroke]{stroke:currentColor;}}"],r.active,({theme:o})=>o.color.variants[t].active,r.highlightDark))},lx.hide),wx=b.div.withConfig({displayName:"Button__LoaderContainer",componentId:"sc-91wjkl-1"})(["position:absolute;height:100%;width:100%;top:0;display:flex;align-items:center;justify-content:center;transition:opacity 2s;opacity:",";"],({isPending:e})=>e?"1":"0"),yx=b(Eh).withConfig({displayName:"Button__Loader",componentId:"sc-91wjkl-2"})(["animation:"," linear 1s infinite;"],bx),_x=b("div").attrs(({isPending:e})=>({"aria-hidden":e})).withConfig({displayName:"Button__ButtonChildren",componentId:"sc-91wjkl-3"})(["width:100%;display:flex;flex-wrap:nowrap;align-items:center;justify-content:center;transition:opacity ",";opacity:",";"],et.Fast,({isPending:e})=>e?"0":"1"),jp=b.div.withConfig({displayName:"Button__PrefixIconContainer",componentId:"sc-91wjkl-4"})(["display:flex;align-items:center;margin-right:",";"],S.Spacing[1]),Rx=b.div.withConfig({displayName:"Button__InheritPrefixIconContainer",componentId:"sc-91wjkl-5"})(["display:flex;align-items:center;& svg{width:inherit;height:inherit;}"]),Ax=b(jp).withConfig({displayName:"Button__SuffixIconContainer",componentId:"sc-91wjkl-6"})(["margin-left:",";margin-right:0;flex-grow:1;justify-content:flex-end;"],S.Spacing[1]),Pp=f.forwardRef(function({id:t,children:n,prefixIcon:r,suffixIcon:o,disabled:a,isPending:s,type:c="button",prefixIconType:l="basic",variant:u="primary",size:d="md",width:m="full",onClick:h,...p},g){const[C,{enable:I,disable:v}]=rt(!1),x=fC(h)?h:Cx,R=s||C,_=f.useCallback(async T=>{if(R)return;const E=x(T);E instanceof Promise&&(I(),await E,v())},[R,x]);return i.jsxs(Sx,{id:t,type:c,"data-test":"button__"+u,variant:u,size:d,width:m,disabled:a||R,$isPending:R,...p,onClick:_,ref:g,children:[R&&i.jsx(wx,{isPending:R,children:i.jsx(yx,{"aria-label":`Loading ${p["aria-label"]||""}`})}),i.jsxs(_x,{isPending:R,children:[r!=null&&i.jsxs(i.Fragment,{children:[l==="basic"&&i.jsx(jp,{children:r}),l==="inherit"&&i.jsx(Rx,{children:r})]}),n,o!=null&&i.jsx(Ax,{children:o})]})]})}),Ba={sm:"12px",md:"16px"},Tx=b(Pp).attrs({width:"icon",variant:"basic"}).withConfig({displayName:"IconButton__IconBtn",componentId:"sc-1b440bg-0"})(["background-color:transparent;padding:0;border-radius:",";"," ",""],S.BorderRadius.Circle,({size:e})=>$(["height:",";width:",";svg{width:",";height:",";}"],Ba[e],Ba[e],Ba[e],Ba[e]),({theme:e})=>$(["&","","{box-shadow:0 0 0 3px ",";}&","","","{box-shadow:0 0 0 3px ",",",";}"],Wi,En,e.color.border.active,so,Wi,En,e.color.border.active,Mi.Mid));f.forwardRef(function({size:t="md",...n},r){return i.jsx(Tx,{size:t,ref:r,...n})});const Ex=b("div").withConfig({displayName:"Banner__StyledBanner",componentId:"sc-1jbckac-0"})(["",";line-height:18px;display:flex;align-items:center;justify-content:space-between;padding:0px ",";border-radius:4px;background:",";"],Di.sm,S.Spacing[2],({variant:e})=>{switch(e){case"success":return S.Color.CoreGreen100;case"warning":return S.Color.CoreYellow100;case"alert":return S.Color.CoreRed100;case"basic":default:return S.Color.BackgroundSecondary}}),kx=b.div.withConfig({displayName:"Banner__BannerContent",componentId:"sc-1jbckac-1"})(["display:flex;align-items:center;> svg:first-child{margin-right:",";}",""],S.Spacing[2],({extendContentWidth:e})=>e&&$(["width:100%;"])),hu=b(Pp).withConfig({displayName:"Banner__ActionButton",componentId:"sc-1jbckac-2"})(["background-color:transparent;justify-self:space-between;&","","{background-color:unset;}&","","{box-shadow:none;}",""],dx,En,so,En,({isFocusVisible:e})=>!e&&$(["&","","","{box-shadow:none;}&","","{box-shadow:none;}"],so,Wi,En,Wi,En)),Nx=({children:e,variant:t,action:n,onClose:r,extendContentWidth:o,...a})=>{const{isFocusVisible:s}=n0();return i.jsxs(Ex,{variant:t,role:"alert",...a,children:[i.jsx(kx,{extendContentWidth:o,children:e}),typeof n=="string"?r&&i.jsx(hu,{variant:"basic",width:"auto",size:"sm",onClick:r,children:n}):n,!n&&r&&i.jsx(hu,{variant:"basic",width:"icon","aria-label":"Close",title:"Close",onClick:r,isFocusVisible:s,children:i.jsx(kh,{})})]})},jx=(e,t,{sync:n}={sync:!1})=>{const[r,o]=f.useState(()=>{const s=rn.getLocalItem(e);return s!=null?JSON.parse(s):(rn.setLocalItem(e,JSON.stringify(t)),t)});f.useEffect(()=>{if(!n)return;const s=c=>{c.key===e&&c.newValue&&o(JSON.parse(c.newValue))};return window.addEventListener("storage",s),()=>{window.removeEventListener("storage",s)}},[e,n]);const a=f.useCallback(s=>{const c=typeof s=="function"?s(r):s,l=JSON.stringify(c);rn.setLocalItem(e,l),n?window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:l})):o(c)},[e,r,n]);return[r,a]},yt={page:0,inputButtons:1,navbar:10,footer:10,dropdown:11,notifications:100,drawer:101,popupBackdrop:102},Dp={small:"400px"},Be={header:"104px"},Px=b(Nx).withConfig({displayName:"SandboxBanner__StyledBanner",componentId:"sc-3vktuu-0"})(["",";position:absolute;top:",";left:",";right:",";z-index:",";box-shadow:",";"],Di.md,S.Spacing[2],S.Spacing[2],S.Spacing[2],yt.notifications,Mi.Low),Dx=b("div").withConfig({displayName:"SandboxBanner__IconContainer",componentId:"sc-3vktuu-1"})(["height:40px;width:40px;display:flex;align-items:center;justify-content:center;"]),Ox=b("div").withConfig({displayName:"SandboxBanner__MessageContainer",componentId:"sc-3vktuu-2"})(["margin:",";"],S.Spacing[2]),Lx=b.h1.attrs(()=>({tabIndex:-1})).withConfig({displayName:"SandboxBanner__Title",componentId:"sc-3vktuu-3"})(["",";color:",";"],Di.md,({theme:e})=>e.color.text.primary),Fx="https://help.withpersona.com/articles/11tePoksKZ5kSCo7pdC800/";function Mx(){const[e,t]=f.useState(!1),[n,r]=jx(_a.InquirySandboxBannerHidden,!1),o=()=>{t(!0),setTimeout(Yi,0)},a=s=>{s.preventDefault(),r(!0),setTimeout(Yi,0)};return e||n?null:i.jsxs(Px,{"data-test":"sandbox-banner",variant:"alert",onClose:o,children:[i.jsx(Dx,{children:i.jsx(i0,{size:24})}),i.jsxs(Ox,{children:[i.jsxs(Lx,{children:[i.jsx("span",{children:"You are in a Sandbox environment. No verifications or extractions are performed and you will see simulated data."})," ",i.jsx("a",{href:Fx,target:"_blank",rel:"noreferrer",children:"Learn more."})]}),i.jsx("div",{children:i.jsx("a",{href:"#",id:"sandbox-banner__dismiss-forever",onClick:a,children:"Dont show me again."})})]})]})}function co(e){const[t,n]=f.useState(e?"loading":"idle");return f.useEffect(()=>{if(!e){n("idle");return}let r=document.querySelector(`link[href="${e}"]`);r==null?(r=document.createElement("link"),r.href=e,r.rel="stylesheet",r.setAttribute("data-status","loading"),document.head.appendChild(r)):n(r.getAttribute("data-status")),r.onload=()=>{r.setAttribute("data-status","ready"),n("ready")},r.onerror=()=>{r.setAttribute("data-status","error"),n("error")}},[e]),t}var sa=(e=>(e.Anton="Anton",e.Archivo="Archivo",e.Domine="Domine",e.Dosis="Dosis",e.DroidSans="Droid Sans",e.IBMPlexSans="IBM Plex Sans",e.Inter="Inter",e.Jost="Jost",e.Lato="Lato",e.Lora="Lora",e.Manrope="Manrope",e.Montserrat="Montserrat",e.NotoSansJP="Noto Sans JP",e.NotoSansTC="Noto Sans TC",e.Nunito="Nunito",e.NunitoSans="Nunito Sans",e.OpenSans="Open Sans",e.Oswald="Oswald",e.Outfit="Outfit",e.PTSans="PT Sans",e.PlayfairDisplay="Playfair Display",e.Poppins="Poppins",e.PublicSans="Public Sans",e.RedditSans="Reddit Sans",e.Roboto="Roboto",e.Rubik="Rubik",e.SourceSansPro="Source Sans Pro",e.SourceSerifPro="Source Serif Pro",e.SpaceGrotesk="Space Grotesk",e.Ubuntu="Ubuntu",e.WorkSans="Work Sans",e))(sa||{});const Ht=e=>e!=null?`'${e}', sans-serif`:S.FontFamilies.Primary,pu=(e,t)=>e&&(e==null?void 0:e.replace(/\s/g,""))in sa?`https://fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:wght@300;400;500;700;900&display=swap`:t||`https://fonts.googleapis.com/css2?family=${sa.Rubik}:wght@300;400;500;700;900&display=swap`,Vx=b.div.withConfig({displayName:"ThemedFonts__Container",componentId:"sc-1o9ay19-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamily:e}})=>Ht(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody),Bx=({children:e})=>{const{fontFamily:t,fontFamilyTitle:n,fontUrl:r}=f.useContext(Ze);return co(pu(t,r)),co(pu(n,r)),i.jsx(Vx,{children:e})},Ux=50,Ra=650,Hx=b("div").withConfig({displayName:"Frame__ContainerWrapper",componentId:"sc-hgw3de-0"})(["position:relative;height:100%;width:100%;",""],({flowType:e,extraMarginTop:t})=>e===wt.Inline?null:t?`
        @media ${jt.isNotMobile} {
          margin-top: 70px;
          margin-bottom: 50px;
        }
      `:`
        @media ${jt.isNotMobile} {
          margin-top: 50px;
          margin-bottom: 50px;
        }
      `),qx=b("div").withConfig({displayName:"Frame__Container",componentId:"sc-hgw3de-1"})(["",";position:relative;color:",";@media ","{height:100vh;}@media ","{border-radius:",";margin-left:auto;margin-right:auto;"," min-height:","px;max-height:100%;overflow-y:hidden;}"],({hidden:e})=>e&&"display: none;",({theme:e})=>e.colorFont,jt.isMobile,jt.isNotMobile,({theme:e})=>e.borderRadiusModal,({flowType:e})=>e===wt.Inline?null:`
          max-width: ${Dp.small};
          box-shadow: 0 5px 15px 0 ${_p.base};
        `,Ra),Op="application__frame";function fu(e){const t=$x(),n={};return window.matchMedia(jt.isMobile).matches&&(n.height=t?`${t}px`:"100vh"),i.jsx(kp,{disabled:!j.isEmbedded,focusTrapOptions:{escapeDeactivates:!1,clickOutsideDeactivates:!1,allowOutsideClick:!1,initialFocus:!1,fallbackFocus:document.body,setReturnFocus:!1},children:i.jsx("div",{id:Op,"data-test":e["data-test"],children:i.jsxs(El,{theme:e.themeSerialized,children:[i.jsx(ix,{flowType:e.flowType}),i.jsx(f.Suspense,{fallback:null,children:i.jsx(cx,{children:i.jsxs(Bx,{children:[e.isSandbox&&!e.sandboxBannerDisabled&&i.jsx(Mx,{}),i.jsxs(Hx,{flowType:e.flowType,extraMarginTop:!!(e.isSandbox&&e.sandboxBannerDisabled),children:[i.jsx(qx,{"data-test":"frame__container",flowType:e.flowType,style:n,hidden:e.hidden,children:e.children}),e.footerWidgets]})]})})})]})})})}function $x(){const[e,t]=f.useState(gu),n=Gx();return f.useEffect(()=>{if(!n)return;function r(){const o=gu();t(o)}return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),n?e:null}function gu(){var e;return Lp()?((e=document.documentElement)==null?void 0:e.clientHeight)||window.innerHeight:null}function Gx(){const[e,t]=f.useState(!1);return f.useEffect(()=>{Lp()&&t(!0)},[]),e}function Lp(){return typeof window<"u"&&typeof document<"u"}function Yi(e){var r;e!=null||(e=document.getElementById(Op));const t=(r=e==null?void 0:e.querySelector("h1"))!=null?r:e;(t==null?void 0:t.offsetParent)!=null&&(t==null||t.focus())}const Wx="/dashboard/";var Pe=(e=>(e.Error="error",e.Exit="exit",e.Complete="complete",e.Fail="fail",e.Load="load",e.Ready="ready",e.Start="start",e.Success="success",e.DocumentCameraSelect="document-camera-select",e.DocumentCameraCapture="document-camera-capture",e.DocumentUpload="document-upload",e.OneTimeLinkSent="one-time-link-sent",e.OneTimeLinkStart="one-time-link-start",e.OneTimeLinkExit="one-time-link-exit",e.SelfieCameraSelect="selfie-camera-select",e.SelfieCameraCapture="selfie-camera-capture",e.SelfieRecordUpload="selfie-record-upload",e.PageChange="page-change",e.LoadCameraFailed="load-camera-failed",e.CameraCaptureFailed="camera-capture-failed",e.InquiryLoad="inquiry-load",e.CountrySelect="country-select",e.VerificationChange="verification-change",e))(Pe||{}),nl=(e=>(e.Open="open",e.Exit="exit",e))(nl||{});let Yx=class{constructor(t,n){var s;const r=Wo.parse(n,{ignoreQueryPrefix:!0});this.currentPath=t,((s=r["is-webview"])==null?void 0:s.toLowerCase())==="true"?this.flowType=wt.WebView:Object.values(wt).includes(r["flow-type"])?this.flowType=r["flow-type"]:t.startsWith("/widget")?this.flowType=wt.Embedded:this.flowType=wt.Hosted,r["template-id"]||(r["template-id"]=r["blueprint-id"]),r["reference-id"]||(r["reference-id"]=r.subject);const a=(r["inquiry-template-id"]!=null||r["inquiry-template-version-id"]!=null||r["template-id"]!=null||r.code!=null||r["inquiry-id"]!=null?r:JSON.parse(rn.getSessionItem(ui.InquiryParams)))||{};this.inquiryParams={...a,prefill:this.normalizePrefill(a.prefill)},this.flowType===wt.Hosted&&rn.setSessionItem(ui.InquiryParams,JSON.stringify(this.inquiryParams))}removeSessionTokenFromCachedParams(){const t=JSON.parse(rn.getSessionItem(ui.InquiryParams));t&&(delete t["session-token"],rn.setSessionItem(ui.InquiryParams,JSON.stringify(t)))}get isEmbedded(){return this.flowType===wt.Embedded}get isWebView(){var t;return this.flowType===wt.WebView||((t=navigator.userAgent)==null?void 0:t.includes("WebView"))}get isHosted(){return this.flowType===wt.Hosted}get isInline(){return this.flowType===wt.Inline}get widgetPadding(){var r,o,a,s,c,l,u,d;const t={top:72,bottom:24,left:24,right:24};if(!this.isInline)return t;const n=(m,h)=>m==null||Number.isNaN(Number(m))?h:Number(m);return{top:n((o=(r=this.inquiryParams)==null?void 0:r["widget-padding"])==null?void 0:o.top,t.top),bottom:n((s=(a=this.inquiryParams)==null?void 0:a["widget-padding"])==null?void 0:s.bottom,t.bottom),left:n((l=(c=this.inquiryParams)==null?void 0:c["widget-padding"])==null?void 0:l.left,t.left),right:n((d=(u=this.inquiryParams)==null?void 0:u["widget-padding"])==null?void 0:d.right,t.right)}}get isEmbeddedOrIframeIntegration(){return this.flowType===wt.Embedded||this.flowType===wt.Inline||window.parent!==window}get isNonIframeHostedIntegration(){return this.flowType===wt.Hosted&&window.parent===window}get isDashboard(){try{return!!bn(window.location.pathname,{path:Wx,exact:!1})}catch(t){return me(t),!1}}get isDashboardFLE(){try{return!!bn(window.location.pathname,{path:XC,exact:!1})}catch(t){return me(t),!1}}get isReusablePersonaPopup(){const t=bn(this.currentPath,{path:Ap,exact:!1}),n=bn(this.currentPath,{path:Rp,exact:!1});return!!t||!!n}get canRequestMicrophone(){return this.flowType!==wt.Embedded&&this.flowType!==wt.Inline||!this.beforeVersion("4.8.1")}get canCopyToClipboard(){return this.flowType!==wt.Embedded&&this.flowType!==wt.Inline||!this.beforeVersion("5.1.2")}redirectToStart(t){const n=o=>window.location.assign(o),r=t!=null?t:n;if(this.isEmbeddedOrIframeIntegration)r("/widget?"+Wo.stringify(j.inquiryParams));else if(this.flowType===wt.WebView||this.flowType===wt.Hosted)r("/verify");else throw this.onError({status:400,code:"invalid_config",message:"Unsupported flow type for redirect to start event"}),new Error("[IGNORED] Unsupported flow type for redirect to start event")}beforeVersion(t){if(this.inquiryParams["client-version"]==null)return!0;try{const{major:n,minor:r,patch:o}=this.parseClientVersion(t),{major:a,minor:s,patch:c}=this.parseClientVersion(this.inquiryParams["client-version"]);if(a<n)return!0;if(a===n&&s<r)return!0;if(a===n&&s===r&&c<o)return!0}catch(n){return me(n),!1}return!1}parseClientVersion(t){const n=/(\d+)\.(\d+)\.(\d+)/.exec(t);return{major:parseInt(n[1]),minor:parseInt(n[2]),patch:parseInt(n[3])}}get targetOrigin(){var r;const t=(r=this.inquiryParams["message-target-origin"])!=null?r:this.inquiryParams["iframe-origin"],n=new r0(t).origin;return n==="null"&&t!=="*"?t:n}onError(t){var r;const n={containerId:this.inquiryParams["container-id"],templateId:(r=this.inquiryParams["inquiry-template-id"])!=null?r:this.inquiryParams["template-id"],templateVersionId:this.inquiryParams["inquiry-template-version-id"],name:"error",error:t};window.parent.postMessage(this.flowType===wt.WebView?JSON.stringify(n):n,this.targetOrigin)}onEvent(t,n={},r={}){var l,u;t==="ready"&&(this.isInline||setTimeout(Yi,0)),this.beforeVersion("3.1.1")&&t==="fail"&&(t="exit");const o={containerId:this.inquiryParams["container-id"],templateId:(l=this.inquiryParams["inquiry-template-id"])!=null?l:this.inquiryParams["template-id"],templateVersionId:this.inquiryParams["inquiry-template-version-id"],name:t,metadata:n};if(window.parent.postMessage(this.flowType===wt.WebView?JSON.stringify(o):o,this.targetOrigin),this.flowType!==wt.Hosted&&this.flowType!==wt.WebView||t!=="exit"&&t!=="complete"&&t!=="fail")return;const a=r==null?void 0:r.inquiry,s=a==null?void 0:a.attributes["redirect-query-string-config"];let c=this.inquiryParams["redirect-uri"]||(a==null?void 0:a.attributes["redirect-uri"]);if(!tx(c))throw this.onError({status:400,code:"invalid_config",message:"Unsafe redirect. Redirects must be valid URLs."}),new Error("[IGNORED] Unsafe redirect. Redirects must be valid URLs.");switch(this.flowType){case wt.WebView:{c||(c="https://personacallback");const d={"inquiry-id":t==="complete"?n.inquiryId:void 0,"persona-inquiry-id":n.inquiryId,"reference-id":n.referenceId,subject:n.referenceId,scopes:n.scopes,status:n.status,fields:n.fields},m=this.applyRedirectQueryStringConfig(d,s),h=Wo.stringify(m,{addQueryPrefix:!1}),g=c.includes("?")||decodeURIComponent(c).includes("?")?"&":"?",C=h?c+g+h:c;window.location.assign(C);break}case wt.Hosted:{if(c==null)if(((u=a==null?void 0:a.attributes["next-step"])==null?void 0:u.type)===Ae.Complete){window.close();return}else throw this.onError({status:400,code:"invalid_config",message:"Close event called from hosted inquiry flow without redirect-uri; investigate template for misconfiguration"}),new Error("[IGNORED] Close event called from hosted inquiry flow without redirect-uri; investigate template for misconfiguration");else if(nx(c)){const d=c.length-3,m=c.substring(0,d)+"S.com.withpersona.INQUIRY_ID="+n.inquiryId+";end";window.location.assign(m)}else{const d={"inquiry-id":n.inquiryId,"reference-id":n.referenceId,subject:n.referenceId,scopes:n.scopes,status:n.status,fields:n.fields},m=this.applyRedirectQueryStringConfig(d,s),h=Wo.stringify(m,{addQueryPrefix:!1}),g=c.includes("?")||decodeURIComponent(c).includes("?")?"&":"?",C=h?c+g+h:c;window.location.assign(C)}break}default:ut(this.flowType)}}normalizePrefill(t){if(!t)return{};let n;t[ke.PhoneNumber]&&(n=o0(t[ke.PhoneNumber],{defaultCountry:t[ke.CountryCode]||"US"}));let r;return t[ke.EmailAddress]&&(r=t[ke.EmailAddress].replace(/\s/g,"+")),{...t,[ke.PhoneNumber]:n?n.number:void 0,[ke.EmailAddress]:r!=null?r:t[ke.EmailAddress]}}applyRedirectQueryStringConfig(t,n){if(t={...t},t.fields={...t.fields},n!=null)switch(n["include-inquiry-id"]||(delete t["inquiry-id"],"persona-inquiry-id"in t&&delete t["persona-inquiry-id"]),n["include-reference-id"]||(delete t["reference-id"],delete t.subject),n["include-status"]||delete t.status,n["include-fields"]){case"allowlist":{const r=new Set(n["field-keys"].concat(n["field-keys"].map(uu)));Object.keys(t.fields).forEach(o=>{r.has(o)||delete t.fields[o]});break}case"blocklist":{const r=new Set(n["field-keys"].concat(n["field-keys"].map(uu)));Object.keys(t.fields).forEach(o=>{r.has(o)&&delete t.fields[o]});break}}return t}};const j=new Yx(window.location.pathname,window.location.search),lo="/api/internal/verify/v1",zx="2023-08-08";var il=(e=>(e.Other="other",e.Network="network",e.Camera="camera",e.Permissions="permissions",e))(il||{});let Kx=class extends ZC{constructor(){super(...arguments),this.organizationMetadata={},this.onError=async t=>fetch(`${lo}/current-inquiry-session/error`,{method:"post",headers:{...this.getHeaders(),"Content-Type":"application/json"},body:JSON.stringify({error_type:t.type,debug_description:t.description||{}})}),this.onCancel=async()=>fetch(`${lo}/current-inquiry-session/cancel`,{method:"post",headers:this.getHeaders(),keepalive:!0})}get accessToken(){var t,n;return(n=(t=this.myAccessToken)!=null?t:rn.getSessionItem(ui.InquiryAccessToken))!=null?n:void 0}set accessToken(t){hs(t)==null?(this.myAccessToken=null,rn.removeSessionItem(ui.InquiryAccessToken),j.removeSessionTokenFromCachedParams()):(this.myAccessToken=t,t==null?rn.removeSessionItem(ui.InquiryAccessToken):rn.setSessionItem(ui.InquiryAccessToken,t))}clearAccessToken(){this.accessToken=null}getAuthHeaders(){if(this.accessToken)return{Authorization:`Bearer ${this.accessToken}`}}getOrganizationMetadataHeaders(){return{"Persona-Inquiry-Template-Id":this.organizationMetadata.inquiryTemplateId,"Persona-Organization-Id":this.organizationMetadata.organizationId,"Persona-Environment-Id":this.organizationMetadata.environmentId}}getSdkVersionHeaders(){return j.inquiryParams["client-version"]!=null?{"Persona-Js-Sdk-Version":j.inquiryParams["client-version"]}:{}}getChecksumHeaders(t,n){if(this.accessToken){const r=Math.floor(t/1e3).toString();let o=tl(n).map(s=>s[1]instanceof Blob?[s[0],String(s[1].size)]:/^[+-]?\d+(\.\d+)?$/.test(String(s[1]))?[s[0],String(s[1]).substring(0,10)]:[s[0],String(s[1]).replace(/\s/g,"")]).filter(s=>s[1].length>0);o=Xc(o,[s=>wa(s).join()]);const a=a0([hs(this.accessToken).sub,r,JSON.stringify(o)].join(":")).toString();return{nhmjlnrs:r,stpbwsbb:a,requestparams:JC(JSON.stringify(o.map(s=>s[1])).slice(0,1e3))}}}get styleVariant(){var t,n;return j.inquiryParams["style-variant"]?j.inquiryParams["style-variant"]:(n=(t=window.matchMedia)==null?void 0:t.call(window,"(prefers-color-scheme: dark)"))!=null&&n.matches?"dark":"base"}getHeaders(){var t,n;return{...this.getAuthHeaders(),...this.getOrganizationMetadataHeaders(),...this.getSdkVersionHeaders(),"Persona-Version":zx,"Persona-Device-Id":(t=rn.getSessionItem(ui.InquiryDeviceId))!=null?t:void 0,"Persona-Device-Locale":As.language,"Persona-Style-Variant":this.styleVariant,"Persona-Country":(n=this.countryToRouteRequests)!=null?n:j.inquiryParams["routing-country"]}}get fpjsCountry(){return this.countryToRouteRequests}async sendRequest(t,n,r={}){var a,s,c,l,u;const o={...n,headers:{...n.headers,...this.getHeaders(),...this.getChecksumHeaders(Date.now(),n.data)}};try{const d=await super.sendRequest(t,o,r);return(a=d==null?void 0:d.headers)!=null&&a["persona-device-id"]&&rn.setSessionItem(ui.InquiryDeviceId,d.headers["persona-device-id"]),(s=d==null?void 0:d.headers)!=null&&s["persona-country"]&&(this.countryToRouteRequests=d.headers["persona-country"]),(c=d==null?void 0:d.headers)!=null&&c["persona-organization-id"]&&(this.organizationMetadata.organizationId=d.headers["persona-organization-id"]),(l=d==null?void 0:d.headers)!=null&&l["persona-environment-id"]&&(this.organizationMetadata.environmentId=d.headers["persona-environment-id"]),(u=d==null?void 0:d.headers)!=null&&u["persona-inquiry-template-id"]&&(this.organizationMetadata.inquiryTemplateId="itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"),d}catch(d){if(d instanceof ht&&d.status===401)kl({level:"warning",message:"Failed to authenticate",data:{name:d.name,method:d.method,uri:d.uri,errors:d.errors}}),this.clearAccessToken(),delete j.inquiryParams["session-token"],j.redirectToStart();else throw d}}};const ne=new Kx(lo),Qx=60*60*24*60;function Zx(){let e={country_code:"US"};try{const t=new Date().getTime(),n=JSON.parse(rn.getLocalItem(_a.LocaleInfoCacheKey));n&&n.expire>=t&&(e==null?void 0:e.country_code)!=null&&(e=n.value)}catch{e={country_code:"US"}}return e}function Jx(e){return rn.setLocalItem(_a.LocaleInfoCacheKey,JSON.stringify({value:e,expire:new Date().getTime()+Qx})),e}function Xx(e){if(e==null)return!1;const t=JSON.parse(rn.getLocalItem(_a.LocaleInfoCacheKey));return(t==null?void 0:t.value)==null||(t==null?void 0:t.expire)==null?!0:new Date().getTime()>=t.expire||t.value.country_code!==e.country_code||t.value.latitude!==e.latitude||t.value.longitude!==e.longitude}var Fp=(e=>(e.SaveLocaleInfo="locale/SAVE_LOCALE_INFO",e))(Fp||{});function Mp(e){return{payload:{localeInfo:e},type:"locale/SAVE_LOCALE_INFO"}}function ev(e){return async t=>{var o;const n=await ne.updateResourceSingleton(e),r=(o=n==null?void 0:n.data)==null?void 0:o.attributes;if(r!=null&&r["country-code"]){const a={country_code:r["country-code"],latitude:r==null?void 0:r.latitude,longitude:r==null?void 0:r.longitude};Xx(a)&&(Jx(a),t(Mp(a)))}}}var Os=(e=>(e.InquiriesEnableDeviceFingerprint="inquiries.device-fingerprint",e))(Os||{});const _n=()=>{try{return!!window.Cypress}catch{return!1}},tv=()=>window.self!==window.top;class ee{static async logAmplitude(t,n){_n()||Ui.getInstance().logEvent(t,n)}static async logPendo(t,n){_n()||window.pendo.track(t,n)}static async logAll(t,n){ee.logAmplitude(t,n),ee.logPendo(t,n)}}var rl=(e=>(e.InsideMargins="inside_margins",e.EdgeToEdge="edge_to_edge",e))(rl||{}),Aa=(e=>(e.Start="start",e.Center="center",e.End="end",e))(Aa||{}),Kl=(e=>(e.Horizontal="horizontal",e.Vertical="vertical",e))(Kl||{}),Ql=(e=>(e.Light="light",e.Normal="normal",e.Medium="medium",e.Bold="bold",e.Heavy="heavy",e))(Ql||{}),Zl=(e=>(e.None="none",e.Capitalize="capitalize",e.Uppercase="uppercase",e.Lowercase="lowercase",e))(Zl||{});const nv={light:300,normal:400,medium:500,bold:700,heavy:900},Fn=e=>e!=null?nv[e]:void 0,k=e=>{if(e!=null)switch(e.unit){case"px":case"%":return`${e.value}${e.unit}`;default:ut(e)}},A=e=>{if(e!=null)return e.value},iv=e=>{if(e!=null)return Object.keys(e).map(t=>{var n;return e[t]==null?"0px":(n=k(e[t]))!=null?n:"0px"}).join(" ")},Vp=e=>e==null?void 0:["top","right","bottom","left"].map(n=>{var r;return e[n]==null?"0px":(r=k(e[n]))!=null?r:"0px"}).join(" ");var Fe=(e=>(e.ButtonAction="button_action",e.ButtonCancel="button_cancel",e.ButtonComplete="button_complete",e.ButtonCreatePersona="button_create_persona",e.ButtonDeviceHandoff="button_device_handoff",e.ButtonLink="button_link",e.ButtonSubmit="button_submit",e.ButtonVerifyWithPersona="button_verify_with_persona",e.CombinedStepButton="combined_step/button",e.CombinedStepImagePreview="combined_step/image_preview",e.ClickableStack="clickable_stack",e.Footer="footer",e.GovernmentIdNfcScan="government_id_nfc_scan",e.GovernmentIdTypeSelect="government_id_type_select",e.HorizontalStack="horizontal_stack",e.ImageLocal="image_local",e.ImageRemote="image_remote",e.InputAddress="input_address",e.InputCheckbox="input_checkbox",e.InputCheckboxGroup="input_checkbox_group",e.InputConfirmationCode="input_confirmation_code",e.InputCurrency="input_currency",e.InputDate="input_date",e.InputESignature="input_e_signature",e.InputFileUpload="input_file_upload",e.InputInternationalDb="input_international_db",e.InputMaskedText="input_masked_text",e.InputMultiSelect="input_multi_select",e.InputNumber="input_number",e.InputPhoneNumber="input_phone_number",e.InputRadioGroup="input_radio_group",e.InputSelect="input_select",e.InputText="input_text",e.InputTextArea="input_text_area",e.LanguageSelector="language_selector",e.PasskeyAuthentication="passkey_authentication",e.PasskeyRegistration="passkey_registration",e.PersonaBranding="persona_branding",e.PrivacyPolicy="privacy_policy",e.QrCode="qr_code",e.Spacer="spacer",e.Stepper="stepper",e.TableStatic="table_static",e.Text="text",e.Title="title",e))(Fe||{});function rv(e){switch(e==null?void 0:e.type){case"clickable_stack":case"footer":case"horizontal_stack":return!0;default:return!1}}var Bp=(e=>(e.Primary="primary",e.Secondary="secondary",e))(Bp||{}),ue=(e=>(e.AnimatedCheck="animated_check",e.FailedIcon="failed_icon",e.StartHero="start_hero",e.FailureDefaultIcon="failure_default_icon",e.FailureDocumentIcon="failure_document_icon",e.FailureSelfieIcon="failure_selfie_icon",e.IdBackIcon="id_back_icon",e.IdFrontIcon="id_front_icon",e.DocumentStartHero="document_start_hero",e.OptionFlagIcon="option_flag_icon",e.OptionGlobeIcon="option_globe_icon",e.OptionHomeIcon="option_home_icon",e.OptionIdIcon="option_id_icon",e.OptionIdDocumentIcon="option_id_document_icon",e.OptionUserIcon="option_user_icon",e.OptionPhoneIcon="option_phone_icon",e.OptionCheckIcon="option_check_icon",e.OptionChevronIcon="option_chevron_icon",e.CreatePersonaCtaCardIcon="create_persona_cta_card_icon",e.CreatePersonaPasskeyRegistrationHero="create_persona_passkey_registration_hero",e.CreatePersonaPasskeyRegistrationSpeedIcon="create_persona_passkey_registration_speed_icon",e.CreatePersonaPasskeyRegistrationShieldIcon="create_persona_passkey_registration_shield_icon",e.CreatePersonaPasskeyRegistrationFingerprintIcon="create_persona_passkey_registration_fingerprint_icon",e.CreatePersonaSuccessHero="create_persona_success_hero",e.VerifyWithPersonaPasskeyAuthenticationHero="verify_with_persona_passkey_authentication_hero",e.VerifyWithPersonaPasskeyAuthenticationPersonaLogo="verify_with_persona_passkey_authentication_persona_logo",e.VerifyWithPersonaPasskeyAuthenticationIdIcon="verify_with_persona_passkey_authentication_id_icon",e.VerifyWithPersonaPasskeyAuthenticationAddressIcon="verify_with_persona_passkey_authentication_address_icon",e.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon="verify_with_persona_passkey_authentication_individual_attributes_icon",e.VerifyWithPersonaPasskeyAuthenticationNameIcon="verify_with_persona_passkey_authentication_name_icon",e.VerifyWithPersonaPasskeyAuthenticationSelfieIcon="verify_with_persona_passkey_authentication_selfie_icon",e.GovernmentIdNfcScanBackClosed="government_id_nfc_scan_back_closed",e.GovernmentIdNfcScanFrontClosed="government_id_nfc_scan_front_closed",e.GovernmentIdNfcScanPhotoPage="government_id_nfc_scan_photo_page",e.GovernmentIdNfcScanIdCard="government_id_nfc_scan_id_card",e.GovernmentIdNfcScanBackThenFront="government_id_nfc_scan_back_then_front",e.StepperIncompleteIcon="stepper_incomplete_icon",e.StepperConnectorIcon="stepper_connector_icon",e.StepperCurrentIcon="stepper_current_icon",e.StepperCompletedIcon="stepper_completed_icon",e.StepperErroredIcon="stepper_errored_icon",e))(ue||{}),ns=(e=>(e.None="none",e.GoogleMaps="google_maps",e))(ns||{}),na=(e=>(e.Text="text",e.Email="email",e.NumberPad="number_pad",e))(na||{}),Up=(e=>(e.ButtonAction="button_action",e.ButtonCancel="button_cancel",e.ButtonComplete="button_complete",e.ButtonDeviceHandoff="button_device_handoff",e.ButtonLink="button_link",e.ButtonSubmit="button_submit",e.ButtonVerifyWithPersona="button_verify_with_persona",e.CombinedStepButton="combined_step/button",e.CombinedStepImagePreview="combined_step/image_preview",e.ClickableStack="clickable_stack",e.FailureReasonText="failure_reason_text",e.FailureReasonImage="failure_reason_image",e.Footer="footer",e.GovernmentIdNfcScan="government_id_nfc_scan",e.GovernmentIdTypeSelect="government_id_type_select",e.HorizontalStack="horizontal_stack",e.ImageHosted="image_hosted",e.ImageLocal="image_local",e.InputAddress="input_address",e.InputCheckbox="input_checkbox",e.InputCheckboxDatetime="input_checkbox_datetime",e.InputCheckboxGroup="input_checkbox_group",e.InputConfirmationCode="input_confirmation_code",e.InputCountrySelect="input_country_select",e.InputCurrency="input_currency",e.InputDate="input_date",e.InputESignature="input_e_signature",e.InputFileUpload="input_file_upload",e.InputInternationalDb="input_international_db",e.InputMaskedText="input_masked_text",e.InputMultiSelect="input_multi_select",e.InputNumber="input_number",e.InputPhoneNumber="input_phone_number",e.InputRadioGroup="input_radio_group",e.InputSelect="input_select",e.InputSubdivisionSelect="input_subdivision_select",e.InputText="input_text",e.InputTextArea="input_text_area",e.InputUrl="input_url",e.LanguageSelector="language_selector",e.PasskeyAuthentication="passkey_authentication",e.PasskeyRegistration="passkey_registration",e.PersonaBranding="persona_branding",e.PrivacyPolicy="privacy_policy",e.QrCode="qr_code",e.Spacer="spacer",e.Stepper="stepper",e.TableStatic="table_static",e.Text="text",e.Title="title",e))(Up||{});Object.values(Up).filter(e=>![].includes(e));var ol=(e=>(e.Auto="auto",e.National="national",e.International="international",e))(ol||{});const ov="QXz8BHySkL0h61Kytaae",av="TDFWciWInORo44Ij1rSu";async function Hp(){try{const e=await s0.load(),{visitorId:t}=await e.get();return t}catch{}}async function qp(e){try{const t=e==="DE"?av:ov,n=e==="DE"?"eu":"us";return(await c0({token:t,modules:[l0()],endpoint:`https://fp-${n}.withpersona.com`,region:n})).get({extendedResult:!0})}catch{}}function Nn(e){e&&(e.entries=[],e.length=0,e.index=-1)}function sv(e){e&&(e.entries=e.entries.slice(-1),e.length=1,e.index=0)}function Ls(e,t,n,r,o,a){{d0({id:e}),rr("organization_id",o),rr("template_id",r),rr("environment_type",n),rr("viewType",j.flowType),rr("release","d1808851723"),rr("is_government_id_beta",(a==null?void 0:a["inquiry:enable-experimental-govid-perf-improvements"])&&(a==null?void 0:a["inquiry:enable-experimental-govid-perf-improvements-percentage"])),u0("featureFlags",a);const s=m0();t==null||e==null||s.setSession({sid:t,did:e,release:"d1808851723",init:!0}),Ui.getInstance().setOptOut(!a["inquiry:enable-amplitude"]),Ui.getInstance().setUserId(e),Ui.getInstance().setGroup("environment",n),Ui.getInstance().setGroup("template-id",r),Ui.getInstance().setGroup("organization-id",o),Ui.getInstance().setGroup("viewType",j.flowType),Object.entries(a).forEach(([c,l])=>{Ui.getInstance().setGroup(c,l.toString())})}}var Ce=(e=>(e.Created="created",e.Pending="pending",e.Completed="completed",e.Expired="expired",e.Approved="approved",e.NeedsReview="needs_review",e.Declined="declined",e.Failed="failed",e))(Ce||{}),Xt=(e=>(e.BACKGROUND="background",e.BLOCKING="blocking",e.NONE="none",e))(Xt||{}),al=(e=>(e.CREATED="created",e.ERRORED="errored",e.AUTHENTICATED="authenticated",e.UPDATED="updated",e))(al||{});function xi(e){var t,n;return(n=(t=e==null?void 0:e.attributes["wait-for-transition"])==null?void 0:t["polling-mode"])!=null?n:"none"}function xo(e){switch(e.type){case Ae.Document:case Ae.GovernmentId:case Ae.Selfie:case Ae.SelfieReflection:return!0;default:return!1}}var cn=(e=>(e.LoadVerifications="inquiry/LOAD_VERIFICATIONS",e.LogCollectedData="inquiry/LOG_COLLECTED_DATA",e.SaveVerification="inquiry/SAVE_VERIFICATION",e.LoadDocuments="inquiry/LOAD_DOCUMENTS",e.UpdateDocumentAtIndex="inquiry/UPDATE_DOCUMENT_AT_INDEX",e.SaveTemplate="inquiry/SAVE_TEMPLATE",e.SaveInquiryTemplateVersion="inquiry/SAVE_INQUIRY_TEMPLATE_VERSION",e.SaveInquiry="inquiry/SAVE_INQUIRY",e.SaveOrganization="inquiry/SAVE_ORGANIZATION",e.SaveTheme="inquiry/SAVE_THEME",e.SaveIsWebGLIncompatible="inquiry/SAVE_WEB_GL_INCOMPATIBILITY",e.SavePopupUrl="inquiry/SAVE_POPUP_URL",e.SaveFeatureFlags="inquiry/SAVE_FEATURE_FLAGS",e.SaveProductFeatures="inquiry/SAVE_PRODUCT_FEATURES",e.SetCurrentSession="inquiry/SET_CURRENT_SESSION",e.SetCurrentStep="inquiry/SET_CURRENT_STEP",e.SetComponent="inquiry/SET_COMPONENT",e))(cn||{});function cv(e){return{payload:{verifications:e},type:"inquiry/LOAD_VERIFICATIONS"}}function lv(e){return{payload:{verification:e},type:"inquiry/SAVE_VERIFICATION"}}function dv(e){return{payload:{documents:e},type:"inquiry/LOAD_DOCUMENTS"}}function Ta(e){return{payload:{data:e},type:"inquiry/LOG_COLLECTED_DATA"}}function ca(e,t){return{payload:{document:e,documentNumber:t},type:"inquiry/UPDATE_DOCUMENT_AT_INDEX"}}function $p(e){return{payload:{template:e},type:"inquiry/SAVE_TEMPLATE"}}function uv(e){return{payload:{inquiryTemplateVersion:e},type:"inquiry/SAVE_INQUIRY_TEMPLATE_VERSION"}}function Pt(e){return{payload:{inquiry:e},type:"inquiry/SAVE_INQUIRY"}}function Jl(e){return{payload:{organization:e},type:"inquiry/SAVE_ORGANIZATION"}}function Xl(e){return{payload:{theme:e},type:"inquiry/SAVE_THEME"}}function Gp(e){return{payload:{isWebGLIncompatible:e},type:"inquiry/SAVE_WEB_GL_INCOMPATIBILITY"}}function Wp(e){return{payload:{popupUrl:e},type:"inquiry/SAVE_POPUP_URL"}}function ed(e){return{payload:{featureFlags:e},type:"inquiry/SAVE_FEATURE_FLAGS"}}function td(e){return{payload:{productFeatures:e},type:"inquiry/SAVE_PRODUCT_FEATURES"}}function Fs(e){return{payload:{session:e},type:"inquiry/SET_CURRENT_SESSION"}}function mv(e){return{payload:{step:e},type:"inquiry/SET_CURRENT_STEP"}}function ur(e){return{payload:{component:e},type:"inquiry/SET_COMPONENT"}}var Yo=(e=>(e.ShowMessage="messages/SHOW_MESSAGE",e.RemoveMessage="messages/REMOVE_MESSAGE",e.ClearMessage="messages/CLEAR_MESSAGE",e.ClearMessages="messages/CLEAR_MESSAGES",e.ClearMessagesOnRouteChange="messages/CLEAR_MESSAGES_ON_ROUTE_CHANGE",e))(Yo||{});function ae(e,t){return{payload:{id:hp("message"),message:e,persist:t},type:"messages/SHOW_MESSAGE"}}function Lt(){return{type:"messages/CLEAR_MESSAGES"}}function hv(){return{type:"messages/CLEAR_MESSAGES_ON_ROUTE_CHANGE"}}var Yp=(e=>(e.Default="default",e.None="none",e))(Yp||{}),nd=(e=>(e.None="none",e.Mobile="mobile",e))(nd||{}),B=(e=>(e.Front="front",e.Back="back",e.BarcodePdf417="barcode_pdf417",e.FrontOrBack="front_or_back",e.PassportSignature="passport_signature",e))(B||{}),zo=(e=>(e.Flag="flag",e.World="world",e.House="house",e.Card="card",e))(zo||{}),wn=(e=>(e.Barcode="barcode",e.Passport="passport",e.IdFront="id_front",e.IdFrontRightPortrait="id_front_right_portrait",e.IdBack="id_back",e.CornersOnly="corners_only",e.Empty="empty",e))(wn||{}),pn=(e=>(e.Name="name",e.Birthdate="birthdate",e.Address="address",e.IdentificationNumberLast4="identification_number_last_4",e.IdentificationNumberFull9="identification_number_full_9",e.PhoneNumber="phone_number",e.EmailAddress="email_address",e))(pn||{}),zp=(e=>(e.Full="full",e.Partial="partial",e.None="none",e))(zp||{}),Kp=(e=>(e.NameFirst="name_first",e.NameLast="name_last",e.Birthdate="birthdate",e.IdentificationNumber="identification_number",e.AddressStreet1="address_street_1",e.AddressStreet2="address_street_2",e.AddressCity="address_city",e.AddressSubdivision="address_subdivision",e.AddressPostalCode="address_postal_code",e))(Kp||{}),Cn=(e=>(e.WebCamera="web_camera",e.MobileCamera="mobile_camera",e.Upload="upload",e.DeviceHandoff="device_handoff",e))(Cn||{}),id=(e=>(e.None="none",e.Name="name",e.NameAndBirthdate="name_and_birthdate",e.NameAndSsn="name_and_ssn",e))(id||{}),Qp=(e=>(e.Telesign="telesign",e))(Qp||{}),un=(e=>(e.ProfileAndCenter="profile_and_center",e.OnlyCenter="only_center",e.ConfigurablePoses="configurable_poses",e.Reflection="reflection",e))(un||{}),Gn=(e=>(e.WebCamera="web_camera",e.Manual="manual",e.Stillfie="stillfie",e.DeviceHandoff="device_handoff",e))(Gn||{}),la=(e=>(e.None="none",e.GoogleMaps="google_maps",e))(la||{});async function rd(e,t,n){const[{data:r}]=await Promise.all([ci.get(e).catch(o=>{let a;try{a=new URL(e)}catch{}ar({error:o,method:"GET",uri:a instanceof URL?`${a.origin}${a.pathname}`:e})}),t.loadLanguages([n])]);return t.addResourceBundle(n,"translation",r,!0,!0),r}var kt=(e=>(e.Initiated="initiated",e.Confirmed="confirmed",e.Submitted="submitted",e.Passed="passed",e.TentativelyPassed="tentatively_passed",e.TentativelyFailed="tentatively_failed",e.RequiresRetry="requires_retry",e.Failed="failed",e.Skipped="skipped",e.Canceled="canceled",e))(kt||{});const Zp=(e,t,n)=>{if(e==null)return;const r=e.attributes["enabled-country-codes"],o=(t||{})["country-code"];if(r.length===0&&o in gs||r.includes(o))return o;if(o==null&&r.length===1)return r[0];if(r.length===0&&n in gs||r.includes(n))return n},pv=(e,t,n,r)=>{var C;const{"enabled-capture-options-desktop":o,"enabled-capture-options-mobile":a,"enabled-id-classes-by-country":s}=e,l=((C=(s||{})[t])!=null?C:[]).find(I=>I.class===n),u=l==null||l["requires-device"]!==nd.Mobile,d=Jn(),m=(d?a:o)||[],h=u||ip()||d,p=r&&h&&m.includes(Cn.WebCamera),g=window.FileReader!=null;return[{option:Cn.WebCamera,condition:p},{option:Cn.MobileCamera,condition:!p&&d},{option:Cn.Upload,condition:g},{option:Cn.DeviceHandoff,condition:!0}].filter(I=>I.condition&&m.includes(I.option)).map(I=>I.option)};function uo(e){var t,n;return((n=(t=e==null?void 0:e.relationships)==null?void 0:t["inquiry-template-version"])==null?void 0:n.data)!=null}function vo(e){return j.isHosted?!!j.inquiryParams["redirect-uri"]||!!e.attributes["redirect-uri"]:!0}var fe=(e=>(e.Center="center",e.Left="left",e.Right="right",e))(fe||{}),bt=(e=>(e.Live="live",e.Auto="auto",e.Manual="manual",e.Upload="upload",e))(bt||{}),Io=(e=>(e.Guided="guided",e.Unguided="unguided",e))(Io||{}),ln=(e=>(e.PortraitMissing="portrait_missing",e.PortraitNotClear="portrait_not_clear",e.DisabledIdClass="disabled_id_class",e.MilitaryId="military_id",e.BarcodeNotDetected="barcode_not_detected",e.MrzNotDetected="mrz_not_detected",e.Expired="expired",e.FailedAgeComparison="failed_age_comparison",e.DoubleFrontDetected="double_front",e.Blurry="blurry",e.Glare="glare",e.CornerMissing="corner_missing",e.SelectedCountryMismatch="selected_country_mismatch",e.UnprocessableImage="unprocessable_image",e.Generic="generic",e))(ln||{}),sl=(e=>(e.AddressDeliverableDetection="database_address_deliverable_detection",e))(sl||{}),oo=(e=>(e.Generic="generic",e.Glare="glare",e.Glasses="glasses",e))(oo||{});function is(e){return(e.attributes["next-step"].config||{})["require-selfie-match"]||un.ProfileAndCenter}function Ms(e){return(e.attributes["next-step"].config||{})["require-strict-selfie-capture"]||!1}function ki(e,t){return!!e.find(n=>n.pose===t)}function da(e,t,n){if(n&&un.ConfigurablePoses)return Sr(e,n);switch(t){case un.ProfileAndCenter:return ki(e,fe.Center)?ki(e,fe.Left)?ki(e,fe.Right)?void 0:fe.Right:fe.Left:fe.Center;case un.OnlyCenter:return ki(e,fe.Center)?void 0:fe.Center}}function Jp({orderedPoses:e,requireSelfieMatch:t}){const n=t===un.OnlyCenter?[]:[fe.Left,fe.Right];return e!=null?e:[fe.Center,...n]}function Sr(e,t){for(const n of t)if(!ki(e,n))return n}function od(e,t,n,r,o){return[...e,{dataUrl:n,captureMethod:r,pose:t,capturedAt:o}]}const fv=({verificationConfigSelfie:e,isMobile:t,isWebGLIncompatible:n,hasCamera:r})=>{const o=e[t?"enabled-capture-options-mobile":"enabled-capture-options-desktop"],a=r&&!n&&(o==null?void 0:o.includes(Gn.WebCamera));return[{option:Gn.WebCamera,condition:a},{option:Gn.Manual,condition:a},{option:Gn.Stillfie,condition:!a},{option:Gn.DeviceHandoff,condition:!0}].filter(s=>s.condition&&(o==null?void 0:o.includes(s.option))).map(s=>s.option)},mi=(e,t)=>e.find(n=>n.pose===t),gv=e=>e?Object.values(e).map(n=>n.captureMethod).indexOf(bt.Upload)>=0:!1;var hn=(e=>(e.ClearCapturedSelfies="verification/CLEAR_CAPTURED_SELFIES",e.SaveActiveVerificationType="verification/SAVE_ACTIVE_VERIFICATION_TYPE",e.SaveActiveVerification="verification/SAVE_ACTIVE_VERIFICATION",e.SaveCapturedSelfie="verification/SAVE_CAPTURED_SELFIE",e.SaveCaptureMethod="verification/SAVE_CAPTURE_METHOD",e.SaveSubmittedValues="verification/SAVE_SUBMITTED_VALUES",e.SaveVideoConstraints="verification/SAVE_VIDEO_CONSTRAINTS",e.SaveUploadProgress="verification/SAVE_UPLOAD_PROGRESS",e.SaveWaitingOnNetwork="verification/SAVE_WAITING_ON_NETWORK",e.SaveVideoCaptureEnabled="verification/SAVE_VIDEO_CAPTURE_ENABLED",e.SelectGovernmentIdClass="verification/SELECT_GOVERNMENT_ID_CLASS",e.UpdateCameraInspectionData="verification/UPDATE_CAMERA_INSPECTION_DATA",e.UploadFiles="verification/UPLOAD_FILES",e.AcceptCheck="verification/ACCEPT_CHECK",e.SaveAutoclassificatonSuccessIdDetails="verification/SAVE_AUTOCLASSIFICATION_SUCCESS_ID_DETAILS",e.SaveAutoclassificatonFailureResult="verification/SAVE_AUTOCLASSIFICATION_FAILURE_RESULT",e.SaveAutoclassificatonIdSelection="verification/SAVE_AUTOCLASSIFICATION_ID_SELECTION",e.ResetAutoclassificationState="verification/RESET_AUTOCLASSIFICATION_STATE",e))(hn||{});function bv(e){return{payload:{verificationType:e},type:"verification/SAVE_ACTIVE_VERIFICATION_TYPE"}}function Cv(e){return{payload:{verification:e},type:"verification/SAVE_ACTIVE_VERIFICATION"}}function Xp(e){return{payload:{submittedValues:e},type:"verification/SAVE_SUBMITTED_VALUES"}}function So(e){return{payload:{videoConstraints:e},type:"verification/SAVE_VIDEO_CONSTRAINTS"}}function mr(e){return{payload:{captureMethod:e},type:"verification/SAVE_CAPTURE_METHOD"}}function xv(e){return{payload:{videoCaptureEnabled:e},type:"verification/SAVE_VIDEO_CAPTURE_ENABLED"}}function Vs(e,t,n,r){return{payload:{selfieStep:e,imageDataUrl:t,captureMethod:n,capturedAt:r},type:"verification/SAVE_CAPTURED_SELFIE"}}function ad(){return{type:"verification/CLEAR_CAPTURED_SELFIES"}}function sd(e){return{payload:{governmentIdClass:e},type:"verification/SELECT_GOVERNMENT_ID_CLASS"}}function ef(e){return{payload:{cameraInspectionData:e},type:"verification/UPDATE_CAMERA_INSPECTION_DATA"}}function Bs(e,t,n,r){return{payload:{actionStep:e,clientExtractions:n,clientExtractionSource:r,files:t},type:"verification/UPLOAD_FILES"}}function pi(e){return{payload:{progress:e},type:"verification/SAVE_UPLOAD_PROGRESS"}}function vv(e,t,n){return{payload:{autoclassificationCountryCode:e,governmentIdClass:t,idClassesByCountries:n},type:"verification/SAVE_AUTOCLASSIFICATION_SUCCESS_ID_DETAILS"}}function Iv(e,t){return{payload:{autoclassificationFailureReason:e,idClassesByCountries:t},type:"verification/SAVE_AUTOCLASSIFICATION_FAILURE_RESULT"}}function Sv(e,t){return{payload:{autoclassificationCountryCode:e,governmentIdClass:t},type:"verification/SAVE_AUTOCLASSIFICATION_ID_SELECTION"}}function tf(){return{payload:{},type:"verification/RESET_AUTOCLASSIFICATION_STATE"}}var We=(e=>(e[e.Prompt=0]="Prompt",e[e.TakePhoto=1]="TakePhoto",e[e.CaptureLeadInAnimation=2]="CaptureLeadInAnimation",e[e.Check=3]="Check",e[e.CheckUpload=4]="CheckUpload",e[e.AutoclassificationFailure=5]="AutoclassificationFailure",e[e.AutoclassificationSelect=6]="AutoclassificationSelect",e))(We||{});function nf(e){return e.replace(/^[^,]+,/,"")}const bu=";base64,";function Cu(e){const t=e.indexOf(bu)+bu.length,n=e.substring(t),r=atob(n),o=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return o.buffer}function cd(e){try{return new File([Cu(e.dataUrl)],e.filename)}catch{return new Blob([Cu(e.dataUrl)])}}function wo(e,t=!1){return new Promise((n,r)=>{const o=new FileReader;o.onload=a=>n(a.target.result),o.onerror=a=>{r(a.target.error),o.abort()},t?o.readAsText(e):o.readAsDataURL(e)})}function ld(e,t=!0){return t?cd(e):{filename:e.filename,data:nf(e.dataUrl)}}function Ar(e=[],t=!0){return e.map(n=>ld(n,t))}function rf(e,t,n){try{return new File(e,t,{type:n})}catch{return new Blob(e,{type:n})}}const Us=1e7;var cl=(e=>(e.ImageJpg="image/jpg",e.ImageJpeg="image/jpeg",e.ImagePng="image/png",e.ImageHeic="image/heic",e.ImageHeif="image/heif",e.ImageTif="image/tif",e.ImageTiff="image/tiff",e.ImageGif="image/gif",e.ImageSvgXml="image/svg+xml",e.ApplicationPdf="application/pdf",e.TextPlain="text/plain",e.VideoMp4="video/mp4",e.VideoWebm="video/webm",e))(cl||{});function cr(e){switch(e){case"image/svg+xml":return"svg";case"text/plain":return"txt";case"video/mp4":return"mp4";case"video/webm":return"webm";default:return e.split("/")[1]}}function dd(e,t,n,r){var c;if((e==null?void 0:e["enabled-id-classes-by-country"])==null)return;if(n==null)return r===0?B.Front:void 0;const s=((c=e["enabled-id-classes-by-country"][t.toLowerCase()])!=null?c:[]).find(l=>l.class===n);if(s==null)throw new Error(`No configuration for id class: ${n} for country: ${t}`);return s["requires-sides"][r]}function Oi(e,t){switch(t){case We.Prompt:return`/verify/government-id/${e}/prompt`;case We.TakePhoto:return`/verify/government-id/${e}/capture`;case We.Check:case We.CheckUpload:return`/verify/government-id/${e}/check`;case We.AutoclassificationFailure:case We.AutoclassificationSelect:throw new Error("Inquiry 2.0 should not have autoclassification step");case We.CaptureLeadInAnimation:throw new Error("Inquiry 2.0 should not have this govid redesign-only step");default:ut(t)}}function wv(e,t,n,r){const a=(e.attributes["next-step"].config||{})["enabled-id-classes-by-country"][t.toLowerCase()];return a&&a.find(c=>c.class===n&&c["requires-sides"].length>r)?r>=2:r>=1}function xu(e,t,n,r,o=!0){var d,m,h,p,g,C;const a=t[B.Front]||t[B.FrontOrBack],s=t[B.Back]||t[B.BarcodePdf417],c=t[B.PassportSignature],l=[{page:B.Front,"capture-method":(d=Wt(a))==null?void 0:d.captureMethod,"capture-flow":(m=Wt(a))==null?void 0:m.captureFlow,data:Ar(a,o)},{page:B.Back,"capture-method":(h=Wt(s))==null?void 0:h.captureMethod,"capture-flow":(p=Wt(s))==null?void 0:p.captureFlow,data:Ar(s,o)},{page:B.PassportSignature,"capture-method":(g=Wt(c))==null?void 0:g.captureMethod,"capture-flow":(C=Wt(c))==null?void 0:C.captureFlow,data:Ar(c,o)}].filter(I=>I.data.length!==0);return{attributes:{"selected-id-class":e,"government-id-files":l,"client-extraction-raws":r,"camera-properties":n},type:y.VerificationGovernmentId}}function ud(e,t,n){return async r=>{var o,a,s;try{const c=await Av(t,n);r(Fs(c.data)),c.data.attributes.locale&&await e.changeLanguage(c.data.attributes.locale);const l=await ne.getResource(w.Inquiry,c.data.relationships.inquiry.data.id,{include:["inquiry-template-version","organization"]});if((l==null?void 0:l.data)==null)return;const u=l.data,d=c.data;r(Pt(u)),Ls(u.id,d.id,(o=u.attributes.environment)!=null?o:"undefined",uo(u)?u.relationships["inquiry-template-version"].data.id:u.relationships.template.data.id,u.relationships.organization.data.id,(s=(a=l.meta)==null?void 0:a["feature-flags"])!=null?s:{}),ee.logAmplitude("inquiry.one-time-link.start"),j.onEvent(Pe.OneTimeLinkStart),ee.logAmplitude("inquiry.load",{inquiryId:u.id}),j.onEvent(Pe.InquiryLoad,{inquiryId:u.id}),uo(u)?await r(md(e,l,c)):await r(of(e,l,c))}catch(c){if(c instanceof ht)switch(c.status){case 403:Kt({status:403,code:"too_many_sessions"},c);break;case 404:Kt({status:404,code:"invalid_inquiry_id"},c);break;case 409:Kt({status:409,code:"unauthenticated"},c);break;default:Kt({status:c.status,code:"http_response"},c),me(c,"warning",void 0,{functionName:"loadInquiryFromCode"})}else c instanceof Error?Kt({status:0,code:"application_error"},c):Kt({status:-1,code:"unknown"}),me(c,"warning",void 0,{functionName:"loadInquiryFromCode"});r(Nt("/verify/invalid/code"))}}}function yv(e,t){return async n=>{var r,o,a,s;try{const c=await ne.getResource(w.Inquiry,t,{include:["inquiry-template-version","organization"]});if((c==null?void 0:c.data)==null)return;const l=c.data,u=uo(l);let d;j.inquiryParams["theme-id"]&&!u&&(d=(await ne.getResource(w.Theme,j.inquiryParams["theme-id"])).data),n(Pt(l)),((r=hs(ne.accessToken))==null?void 0:r.inquiry_id)!==l.id&&ne.clearAccessToken();const m=ne.accessToken?await Tv():await sf(l);if((m==null?void 0:m.data)==null)return;n(Fs(m.data)),Ls(l.id,m.data.id,(o=l.attributes.environment)!=null?o:"undefined",u?l.relationships["inquiry-template-version"].data.id:l.relationships.template.data.id,l.relationships.organization.data.id,(s=(a=c.meta)==null?void 0:a["feature-flags"])!=null?s:{}),ee.logAmplitude("inquiry.load",{inquiryId:l.id}),j.onEvent(Pe.InquiryLoad,{inquiryId:l.id}),u?await n(md(e,c,m)):await n(of(e,c,m,d))}catch(c){if(c instanceof ht)switch(c.status){case 404:Kt({status:404,code:"invalid_inquiry_id"},c);break;case 409:Kt({status:409,code:"unauthenticated"},c);break;default:Kt({status:c.status,code:"http_response"},c),me(c,"warning",void 0,{functionName:"loadInquiryFromId"})}else c instanceof Error?Kt({status:0,code:"application_error"},c):Kt({status:-1,code:"unknown"}),me(c,"warning",void 0,{functionName:"loadInquiryFromId"});n(Nt("/verify/invalid/inquiry"))}}}function _v(e,t){return async n=>{ne.clearAccessToken();try{const{data:r,included:o}=await ne.getResource(w.Template,t),a=await lf(e,r.attributes["enabled-locales"]),c=(r.attributes["custom-translations"]||[]).filter(d=>d.lang===a);c.length>0&&await rd(c.shift()["translation-url"],e,a),n($p(r));const l=o.find(d=>d.id===r.relationships.organization.data.id);n(Jl(l));let u;j.inquiryParams["theme-id"]?u=(await ne.getResource(w.Theme,j.inquiryParams["theme-id"])).data:u=o.find(d=>d.id===r.relationships["default-theme"].data.id),n(Xl(u)),r.attributes["skip-intro-page"]?await n(af(j.inquiryParams,u,window.location.host)):n(Nt("/verify/intro",{skipAnimation:!0}))}catch(r){me(r,"warning",void 0,{functionName:"loadThemeAndRedirect"}),Kt({status:400,code:"invalid_config"},r),n(Nt("/verify/invalid/config",{error:r}))}}}function of(e,{data:t,meta:n,included:r},{data:o},a){return async s=>{var h;if(!ne.accessToken)throw new Error("No access token set for inquiry:"+t.id);const c=n==null?void 0:n["feature-flags"];s(ed(c));const l=n["product-features"];s(td(l)),s(Xl(a!=null?a:r.find(p=>p.id===t.relationships.theme.data.id)));const u=ne.getResource(w.Template,t.relationships.template.data.id).then(async({data:p,included:g})=>{await lf(e,p.attributes["enabled-locales"],o.attributes.locale),s($p(p));const C=g.find(x=>x.id===p.relationships.organization.data.id);if(s(Jl(C)),t.attributes["selected-country-code"]==null&&p.attributes["enabled-country-codes"].length===1){const x={type:t.type,id:t.id,attributes:{"selected-country-code":p.attributes["enabled-country-codes"][0]}};ne.updateResource(x).then(({data:R})=>Pt(R))}const v=(p.attributes["custom-translations"]||[]).filter(x=>x.lang===e.language);v.length>0&&await rd(v.shift()["translation-url"],e,e.language)}),d=ne.listResource(w.Verification).then(({data:p})=>s(cv(p))),m=!!((h=n["product-features"])!=null&&h[Os.InquiriesEnableDeviceFingerprint]);cf(m,ne.fpjsCountry),await Promise.all([u,d]),s(zt(t,Nt))}}function af(e,t,n){return async r=>{var c,l,u,d,m,h,p;const o=n==="sandbox.withpersona.com"?"sandbox":e.environment,a=e.prefill||{},s={attributes:{"template-id":e["template-id"],"theme-id":t.id,"redirect-uri":e["redirect-uri"],"account-id":e["account-id"],"account-type-id":e["account-type-id"],"reference-id":e["reference-id"],note:e.note,environment:o,"environment-id":e["environment-id"],"flow-type":j.flowType,"accepted-policies":!0,fields:e.fields,...a,"country-code":a["country-code"]},type:y.Inquiry};try{const g=await ne.postResourceCreate(s,{retryOptions:{retryCondition:_=>ji.isNetworkError(_)||ji.isRetryableError(_)}}),C=g.data;r(Pt(C));const I=(l=(c=g.meta)==null?void 0:c["feature-flags"])!=null?l:{};r(ed(I));const v=(d=(u=g.meta)==null?void 0:u["product-features"])!=null?d:{};r(td(v));const x=await sf(C);r(Fs(x.data)),Ls(C.id,x.data.id,(m=C.attributes.environment)!=null?m:"undefined",C.relationships.template.data.id,C.relationships.organization.data.id,I),ee.logAmplitude("inquiry.start",{inquiryId:C.id}),j.onEvent(Pe.Start,{inquiryId:C.id});const R=!!((p=(h=g.meta)==null?void 0:h["product-features"])!=null&&p[Os.InquiriesEnableDeviceFingerprint]);cf(R,ne.fpjsCountry),r(zt(C,Nt))}catch(g){if(g instanceof ht){switch(g.status){case 400:Kt({status:g.status,code:"invalid_config"},g),me(g,"warning",void 0,{functionName:"startInquiry"});break;default:Kt({status:g.status,code:"http_response"},g),me(g,"error",void 0,{functionName:"startInquiry"});break}r(Nt("/verify/invalid/config",{error:g}))}else g instanceof Error?Kt({status:0,code:"application_error"},g):Kt({status:-1,code:"unknown"}),me(g,"error",void 0,{functionName:"startInquiry"}),r(Nt("/verify/invalid/config",{error:g}))}}}function Rv(e){return async t=>{const n={type:e.type,id:e.id,attributes:{"accepted-policies":!0}},r=(await ne.updateResource(n)).data;t(zt(r,Nt))}}async function sf(e){const t=await ne.postResourceCreate({type:y.InquirySession,attributes:{"flow-type":j.flowType}},{meta:{"inquiry-id":e.id}});return ne.accessToken=t.meta["access-token"],t}async function Av(e,t){const n={attributes:{"one-time-link-code":e},type:y.InquirySession},r=await ne.postResourceSingletonAction(n,"exchange-one-time-link-code",{meta:{"device-handoff-method":t==null?void 0:t.deviceHandoffMethod}});return ne.accessToken=r.meta["access-token"],r}async function Tv(){return await ne.getResourceSingleton(w.CurrentInquirySession)}function yo(e,t,n){return async r=>{ee.logAmplitude("inquiry.language-change",{"from-language":t.language,"to-language":n}),await t.changeLanguage(n);const o=await ne.getResource(w.Inquiry,e.id);r(Pt(o.data))}}function ll(e,t={}){return async n=>{const r=e.data,o=e.included.find(a=>a.id===r.relationships.inquiry.data.id);n(zt(o))}}function zt(e,t=jn){return async n=>{var o;n(Pt(e));const r=e.attributes["next-step"];switch(n(mv(r)),r.type){case Ae.Start:n(t("/verify/intro"));return;case Ae.CountrySelect:n(t("/verify/select-country"));return;case Ae.DocumentsUpload:n(t("/verify/documents/intro"));return;case Ae.Completed:n(t("/verify/success"));return;case Ae.Failed:n(t("/verify/failed"));return;case Ae.Ui:case Ae.Document:case Ae.Integration:case Ae.GovernmentId:case Ae.Selfie:case Ae.SelfieReflection:case Ae.Complete:case Ae.VerifyWithPersona:return;default:n(Ev(r.type,r.config,(o=e.attributes["selected-country-code"])!=null?o:e.attributes["country-code"],t))}}}function Ev(e,t,n,r=jn){return t=t||{},o=>{switch(o(bv(e)),e){case y.VerificationDatabase:o(r("/verify/database"));break;case y.VerificationGovernmentId:{const a=t["enabled-id-classes-by-country"];if(!t["enabled-skip-unknown"]&&a&&a[n.toLowerCase()]&&a[n.toLowerCase()].length===1){const c=a[n.toLowerCase()][0].class;o(sd(c)),o(r(Oi(0,We.Prompt)))}else o(r("/verify/government-id/select"));break}case y.VerificationEmailAddress:o(r("/verify/email-address/prompt"));break;case y.VerificationPhoneNumber:o(r("/verify/phone-number/prompt"));break;case y.VerificationSelfie:{const a=da([],un.OnlyCenter);o(r(`/verify/selfie/${a}/prompt`));break}default:throw new Error("Invalid verification type selected")}}}function gi(e){return t=>{if(t(Cv(e)),t(lv(e)),e!=null){let n;e.attributes["submitted-at"]&&[kt.TentativelyPassed,kt.TentativelyFailed,kt.Passed,kt.RequiresRetry,kt.Failed].includes(e.attributes.status)&&(n=Wn.local().diff(Wn.fromISO(e.attributes["submitted-at"]),"seconds").seconds),ee.logAmplitude("inquiry.verification-change",{id:e.id,type:e.type,status:e.attributes.status,duration:n}),j.onEvent(Pe.VerificationChange,{id:e.id,type:e.type,status:e.attributes.status,duration:n})}}}function kv(){return async e=>{const{data:t}=await ne.listResource(w.Document);e(dv(t.filter(n=>n.type===y.DocumentGeneric&&n.attributes["latest-verification-status"]===kt.Passed)))}}function cf(e,t){async function n(){try{const[r,o]=await Promise.all([Hp(),e?qp(t):null]);await ne.updateResourceSingleton({attributes:{},type:y.CurrentInquirySession},{meta:{"browser-fingerprint":r,"device-fingerprint":o==null||o.visitorId==="n/a"?null:o.visitorId,"device-fingerprint-components":o}})}catch{}}n()}async function lf(e,t,n){let r;return n&&(t.length===0||t.includes(n))?r=n:t.length>0?t.includes(e.language)?r=e.language:r=t[0]:r=e.language,r!==e.language&&await e.changeLanguage(r),r}const Nv={nextInquiry:null},{reducer:jv,actions:Pv}=h0({name:"verify-with-persona",initialState:Nv,reducers:{setNextInquiry:(e,t)=>{e.nextInquiry=t.payload.inquiry}}}),{setNextInquiry:dl}=Pv,df=e=>e!=null?uf(e.config.components):[],uf=e=>e.flatMap(t=>rv(t)?[t,...uf(t.attributes.children)]:[t]);function Dv(e,t,n){return async(r,o)=>{var l;await r(ud(e,t));const a=o().inquiry.inquiry;if(!a){r(Nt("/verify/invalid/code"));return}const s=(l=a.attributes)==null?void 0:l["next-step"];if((s==null?void 0:s.type)!==Ae.Ui){r(Nt("/verify/invalid/config",{error:new Error("verify with persona popup accessed on non-ui step")}));return}const c=df(s).find(u=>u.type===Fe.ButtonVerifyWithPersona&&u.name===n);if(!c){r(Nt("/verify/invalid/config",{error:new Error("verify with persona popup accessed without verify with persona component")}));return}r(ur(c)),r(Nt("/inquiry/verify-with-persona/passkey-authentication"))}}function Ov(e,t,n){return async(r,o)=>{var l;await r(ud(e,t));const a=o().inquiry.inquiry;if(!a){r(Nt("/verify/invalid/code"));return}const s=(l=a.attributes)==null?void 0:l["next-step"];if((s==null?void 0:s.type)!==Ae.Ui){r(Nt("/verify/invalid/config",{error:new Error("create persona popup accessed on non-ui step")}));return}const c=df(s).find(u=>u.type===Fe.ButtonCreatePersona&&u.name===n);if(!c){r(Nt("/verify/invalid/config",{error:new Error("create persona popup accessed without create persona component")}));return}r(ur(c)),r(Nt("/inquiry/create-persona/passkey-registration"))}}function Lv(e,t,n){return async r=>{var o,a,s,c,l;try{const u=n==="sandbox.withpersona.com"?"sandbox":t.environment,d={attributes:{"inquiry-template-id":(o=t["inquiry-template-id"])!=null?o:t["template-id"],"inquiry-template-version-id":t["inquiry-template-version-id"],"redirect-uri":t["redirect-uri"],"account-id":t["account-id"],"account-type-id":t["account-type-id"],"reference-id":t["reference-id"],"theme-set-id":t["theme-set-id"],"theme-id":t["theme-id"],environment:u,"environment-id":t["environment-id"],"flow-type":j.flowType,"accepted-policies":!0,fields:t.fields},type:y.Inquiry},m=await ne.postResourceCreate(d,{retryOptions:{retryCondition:g=>ji.isNetworkError(g)||ji.isRetryableError(g)}}),h=m.data;r(Pt(h));const p=await Uv(h);r(Fs(p.data)),Ls(h.id,p.data.id,(a=h.attributes.environment)!=null?a:"undefined",h.relationships["inquiry-template-version"].data.id,h.relationships.organization.data.id,(c=(s=m.meta)==null?void 0:s["feature-flags"])!=null?c:{}),ee.logAmplitude("inquiry.start",{inquiryId:h.id}),j.onEvent(Pe.Start,{inquiryId:h.id}),r(md(e,m,p))}catch(u){u instanceof ht?((l=u.errors)==null?void 0:l[0].code)==="inactive_template_error"?(Kt({status:422,code:"inactive_template"},u),r(Nt("/inquiry/inactive"))):u.status>=500?(Kt({status:u.status,code:"http_response"},u),me(u,"error",void 0,{functionName:"createInquiry"}),r(Nt("/verify/invalid/config",{error:u}))):(Kt({status:400,code:"invalid_config"},u),me(u,"warning",void 0,{functionName:"createInquiry"}),r(Nt("/verify/invalid/config",{error:u}))):(u instanceof Error?Kt({status:0,code:"application_error"},u):Kt({status:-1,code:"unknown"}),me(u,"error",void 0,{functionName:"createInquiry"}),r(Nt("/verify/invalid/config",{error:u})))}}}function md(e,{data:t,meta:n,included:r},{data:o}){return async a=>{if(!ne.accessToken)throw new Error("No access token set for inquiry:"+t.id);const s=n==null?void 0:n["feature-flags"],c=n==null?void 0:n["product-features"],l=r.find(g=>g.id===t.relationships["inquiry-template-version"].data.id),u=r.find(g=>g.id===t.relationships.organization.data.id);s&&a(ed(s)),c&&a(td(c)),a(uv(l)),a(Xl({id:"backserialized-inquiry-template-version-theme",type:y.Theme,attributes:l.attributes.theme})),a(Jl(u));const d=!!(c!=null&&c[Os.InquiriesEnableDeviceFingerprint]);Hv(d,ne.fpjsCountry);const m=e.language;if(await qv(e,l.attributes["enabled-locales"],o.attributes.locale)!==m&&({data:t}=await ne.getResource(w.Inquiry,t.id)),xi(t)===Xt.BLOCKING)try{await a(kn(t))}catch(g){throw a(ct()),g}else a(Rt(t,{skipAnimation:!0}))}}function mf({inquiry:e,componentParams:t,fromComponent:n,workflowInitialVariables:r,contentType:o="multipart/form-data",onUploadProgress:a}){return async s=>{var c;s(yn()),s(Sa());try{const l={meta:{"from-component":n,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":r}};l.contentType=o,l.onUploadProgress=a,l.formDataAllowEmptyArrays=!0,o==="multipart/form-data"&&ql(t)&&(t="");const{data:u}=await ne.postResourceAction({id:e.id,type:e.type,attributes:{componentParams:t,"flow-type":j.flowType}},"transition",l);j.inquiryParams["send-client-side-collected-data-in-events"]&&s(Ta({name:e.attributes["next-step"].name,type:Ae.Ui,data:t||{}})),xi(u)===Xt.BLOCKING?await s(kn(u)):(s(ct()),s(Rt(u,{isSameStep:e.attributes["next-step"].name===u.attributes["next-step"].name})))}catch(l){if(s(ct()),l instanceof Ct){const{data:u}=await ne.getResource(w.Inquiry,e.id);throw s(Rt(u)),l}else if(l instanceof ht)switch(l.status){case 409:if(((c=l.errors)==null?void 0:c[0].code)==="inconsistent_transition_error"){const{data:u}=await ne.getResource(w.Inquiry,e.id);s(Rt(u))}else throw l;break;default:throw l}else throw l}}}function Fv(e,t,n,r){return async o=>{var a;o(yn()),o(Sa());try{const{data:s}=await ne.postResourceAction({id:e.id,type:e.type,attributes:{fields:t,"flow-type":j.flowType}},"transition",{meta:{"from-component":n,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":r}});j.inquiryParams["send-client-side-collected-data-in-events"]&&o(Ta({name:e.attributes["next-step"].name,type:Ae.Integration,data:t})),xi(s)===Xt.BLOCKING?await o(kn(s)):(o(ct()),o(Rt(s,{isSameStep:e.attributes["next-step"].name===s.attributes["next-step"].name})))}catch(s){if(o(ct()),s instanceof Ct){const{data:c}=await ne.getResource(w.Inquiry,e.id);throw o(Rt(c)),s}else if(s instanceof ht)switch(s.status){case 409:if(((a=s.errors)==null?void 0:a[0].code)==="inconsistent_transition_error"){const{data:c}=await ne.getResource(w.Inquiry,e.id);o(Rt(c))}else throw s;break;default:throw s}else throw s}}}function Mv(e,t,n,r){return async o=>{var a;o(yn()),o(Sa()),j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:Ai.TRANSITION_STARTED});try{const{data:s}=await ne.postResourceAction({id:e.id,type:e.type,attributes:{fields:{"client-key":t.response.userHandle,"public-key":JSON.stringify(t),"expected-origin":window.location.origin},"flow-type":j.flowType}},"transition",{meta:{"from-component":n,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":r}});xi(s)===Xt.BLOCKING?(j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:Ai.TRANSITION_POLLING}),await o(kn(s,{skipInquiryStateUpdateOnPoll:!0,onComplete:(l,u,d)=>{j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:Ai.TRANSITION_COMPLETED}),o(ct()),o(dl({inquiry:d})),d.attributes["reusable-persona-status"]===al.ERRORED?o(Nt("/inquiry/verify-with-persona/error")):o(Nt("/inquiry/verify-with-persona/success")),l()}}))):(j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:Ai.TRANSITION_COMPLETED}),o(ct()),o(dl({inquiry:s})),s.attributes["reusable-persona-status"]===al.ERRORED?o(Nt("/inquiry/verify-with-persona/error")):o(Nt("/inquiry/verify-with-persona/success")))}catch(s){if(j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage({name:Ai.TRANSITION_ERRORED}),o(ct()),s instanceof Ct){const{data:c}=await ne.getResource(w.Inquiry,e.id);throw o(Rt(c)),s}else if(s instanceof ht)switch(s.status){case 409:if(((a=s.errors)==null?void 0:a[0].code)==="inconsistent_transition_error"){const{data:c}=await ne.getResource(w.Inquiry,e.id);o(Rt(c))}else throw s;break;default:throw s}else throw s}}}function Vv(e){return async t=>{var n;t(yn()),t(Sa());try{const{data:r}=await ne.postResourceAction({id:e.id,type:e.type},"transition-back",{meta:{"from-step":e.attributes["next-step"].name}});t(ct()),t(Rt(r,{back:!0}))}catch(r){if(t(ct()),r instanceof Ct){const{data:o}=await ne.getResource(w.Inquiry,e.id);throw t(Rt(o)),r}else if(r instanceof ht)switch(r.status){case 409:if(((n=r.errors)==null?void 0:n[0].code)==="inconsistent_transition_error"){const{data:o}=await ne.getResource(w.Inquiry,e.id);t(Rt(o))}else throw r;break;default:throw r}else throw r}}}function Rt(e,t={}){return n=>{n(Pt(e)),!t.isSameStep&&(t.historyToClear&&sv(t.historyToClear),n(Nt("/inquiry/ui",{back:!!t.back,skipAnimation:!!t.skipAnimation,transition:t.transition})))}}function hd(){return ne.onCancel().catch(e=>{me(e,"warning",{note:"A fetch exception may imply the fetch library we are using (in react-native?) is invalid"})})}function Bv(e){switch(e.code){case"unauthenticated":return il.Permissions;default:return il.Other}}function vu(e){if(e)return{name:e==null?void 0:e.name,message:e==null?void 0:e.message}}function Kt(e,t){try{j.onError(e),ee.logAmplitude("inquiry.error",e),ne.accessToken&&ne.onError({type:Bv(e),description:vu(t)}),kl({level:"error",message:"HolderClient.onError",data:{status:e.status,code:e.code,message:e.message,description:vu(t)}})}catch(n){me(n,"warning")}}async function Uv(e){const t=await ne.postResourceCreate({type:y.InquirySession,attributes:{"flow-type":j.flowType}},{meta:{"inquiry-id":e.id}});return ne.accessToken=t.meta["access-token"],t}async function Hv(e,t){async function n(){try{const[r,o]=await Promise.all([Hp(),e?qp(t):null]);await ne.updateResourceSingleton({attributes:{"flow-type":j.flowType},type:y.CurrentInquirySession},{meta:{"browser-fingerprint":r,"device-fingerprint":o==null||o.visitorId==="n/a"?null:o.visitorId,"device-fingerprint-components":o}})}catch{}}n()}function Iu(e,t,n="en-US"){if(e.length===0||e.includes(t))return t;const r=t&&e.find(o=>o.split("-")[0]===t.split("-")[0]);return r||(e.includes(n)?n:e[0])}async function qv(e,t,n){let r;const o=Iu(t,e.language);return n?r=Iu(t,n,o):r=o,r!==e.language&&await e.changeLanguage(r),r}const $v=1e3,Gv=90;function kn(e,t={}){return(n,r)=>new Promise((o,a)=>{var p,g;t.skipInquiryStateUpdateOnPoll||n(Pt(e));let s;const c=(p=t.pollingMode)!=null?p:xi(e),l=e.attributes["wait-for-transition"],u=(g=l==null?void 0:l["max-attempts"])!=null?g:Gv,d=t.onComplete?C=>t.onComplete(o,a,C):null;n(Sa());const m=r().ui.pollerId;c===Xt.BLOCKING&&n(iC());function h(C,I){var v,x,R;if(C<=0){clearTimeout(s),n(ct()),$e(`Polled more than ${u} times without success`,"error",{id:I.id}),a();return}s=window.setTimeout(()=>Yv({inquiry:I,context:{initialPollerId:m,pollingMode:c,getPollerId:()=>Wv(r())},onPending:_=>{h(C-1,_)},onComplete:d!=null?d:_=>{var O,U;const{historyToClear:T}=t,E=_.attributes["next-step"].name===I.attributes["next-step"].name,V=(O=_.attributes["next-step"].config)==null?void 0:O["server-component-errors"],D=(U=_.attributes["next-step"].config)==null?void 0:U["server-step-messages"];if(D&&E)for(const M of D)n(ae(M));if(n(ct()),n(Rt(_,{isSameStep:E,historyToClear:T})),V&&E){const M=gC(pp(Y=>[Y.name,Y.message],V));a(new Re.SubmissionError(M))}else o()},onError:_=>{console.error(_),clearTimeout(s),n(ct()),$e("Failed to poll for inquiry status","error",{id:I.id,error:_}),a()},onAbort:()=>{clearTimeout(s),o()}}),(R=(x=(v=I==null?void 0:I.attributes)==null?void 0:v["wait-for-transition"])==null?void 0:x["interval-ms"])!=null?R:$v)}h(u,e)})}function Wv(e){return e.ui.pollerId}async function Yv({inquiry:e,context:t,onPending:n,onComplete:r,onError:o,onAbort:a}){var s,c;try{const{data:l}=await ne.getResource(w.Inquiry,e.id,{retryOptions:{retries:0}});if(t.getPollerId()>t.initialPollerId){a();return}if(!(l.attributes["next-step"].name===e.attributes["next-step"].name)&&!((c=(s=l.attributes)==null?void 0:s["wait-for-transition"])==null?void 0:c["currently-transitioning-with-persona"])){r(l);return}switch(t.pollingMode){case Xt.BACKGROUND:case Xt.BLOCKING:t.pollingMode!==xi(l)?r(l):n(l);break;case Xt.NONE:default:r(l)}}catch(l){if(l instanceof Ct||l instanceof ht&&l.status===502)n(e);else if(o!=null)o(l);else throw l}}function Mr(){return async(e,t)=>{if(t().ui.hasCamera!==!0){const n=await rC();e(oC(n))}}}const bs=zv();function zv(){var n;const e={},t=document.getElementsByTagName("meta");for(const r of t)if(r.name.startsWith("config.")){let o;(r.name==="config.sandboxToolsDisabled"||r.name==="config.sandboxBannerDisabled")&&(o=((n=r.content)==null?void 0:n.toLowerCase())==="true"),e[r.name.substring(7)]=o}return e}const Kv={cccd:"Citizen ID",cct:"Citizen certificate",cid:"Consular ID",dl:"Driver license",hic:"Healthcare Insurance card",foid:"Foreigner ID",id:"National ID",ipp:"Internal passport",keyp:"Keypass ID",ltpass:"Long-Term pass card",mid:"Military ID",munid:"Municipal ID",myn:"My Number card",nbi:"NBI Clearance",nric:"NRIC",ofw:"OFW ID",pan:"PAN card",pid:"Postal ID",pp:"Passport",ppc:"Passport card",pr:"Permanent resident card",rp:"Residency permit",sss:"SSS ID",td:"Travel Document",tribalid:"Tribal ID",umid:"UMID","us-id":"US ID",vid:"Voter ID",visa:"Visa",wp:"Work permit"},_o={V0:0,V1:1};var Ti=(e=>(e.None="none",e.Slide="slide",e.Fade="fade",e.SlideVertical="slide-vertical",e))(Ti||{}),ul=(e=>(e.Light="300",e.Regular="400",e.Medium="500",e.Bold="700",e.Black="900",e))(ul||{}),Cs=(e=>(e.Inline="inline",e.Bottom="bottom",e))(Cs||{}),Hs=(e=>(e.Input="input",e.Select="select",e))(Hs||{}),qs=(e=>(e.Default="default",e.Start="start",e.Center="center",e))(qs||{}),hf=(e=>(e.None="none",e.Underline="underline",e))(hf||{}),Ni=(e=>(e.Start="start",e.Center="center",e.End="end",e.None="none",e))(Ni||{}),Vr=(e=>(e.Default="default",e.None="none",e))(Vr||{}),Ea=(e=>(e.Default="default",e.Overlay="overlay",e))(Ea||{}),zi=(e=>(e.Default="default",e.Light="light",e.Button="button",e))(zi||{}),Gt=(e=>(e.Start="start",e.Center="center",e))(Gt||{}),xn=(e=>(e.AboveButton="above_button",e.BelowButton="below_button",e))(xn||{});const ka=e=>{const t=e.inquiry.inquiry.attributes["next-step"];return t.type===Ae.Document?t.config:void 0},Na=Zn([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.Document?t.styles:null}),$s=Zn([e=>e.document.document,ka],(e,t)=>(e==null?void 0:e.id)===(t==null?void 0:t["document-id"])?e:void 0),Xi=Zn([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.GovernmentId?t.styles:null}),vi=e=>{const t=e.state.inquiry.inquiry.attributes["next-step"];return t.type===e.stepType&&t.config!=null?t.config:null},Qv=e=>Zn([t=>t.inquiry],t=>{const n=t.attributes["next-step"];return n.type===e?n.styles:null}),pd=e=>{const t=e.inquiry.component;return(t==null?void 0:t.type)===Fe.ButtonVerifyWithPersona?t:null},fd=Zn([e=>e.inquiry],e=>{const t=e.attributes["next-step"];return t.type===Ae.Selfie?t.styles:null}),Ii=Zn([e=>e.inquiry],e=>{var n;const t=(n=e.inquiry)==null?void 0:n.attributes["next-step"];switch(t==null?void 0:t.type){case Ae.Ui:return t.styles;case Ae.Document:return Na(e);case Ae.GovernmentId:return Xi(e);case Ae.Selfie:return fd(e);case Ae.SelfieReflection:return Qv(Ae.SelfieReflection)(e);default:return}}),pf=Zn([e=>e.document.uploadedFiles,e=>e.document.documentFiles],(e,t)=>e.filter(n=>t.some(r=>r.id===n.fileId))),Vi=()=>{const e=f.useRef(!1);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),f.useCallback(()=>e.current,[])},Zv=b.div.withConfig({displayName:"FrameBackground__BackgroundColorDiv",componentId:"sc-1re4kos-0"})(["position:absolute;height:100%;width:100%;bottom:0;left:0;right:0;z-index:-1;overflow-y:hidden;@media ","{height:100vh;width:100vw;}"],jt.isMobile),ff=()=>{var l,u;const e=f.useContext(Ze),t=ot(Ii),o=!!Dr().pathname.match(new RegExp("/inquiry/create-persona"))?"#ffffff":(u=(l=A(t==null?void 0:t["background-color"].base.base))!=null?l:e.colorModalBackground)!=null?u:"#ffffff",[a,s]=f.useState(o),c=Vi();return f.useEffect(()=>{c||s(o)},[c]),i.jsx(Zv,{"data-test":"frame-background",style:{backgroundColor:a},"aria-hidden":!0})},Jv="modulepreload",Xv=function(e){return"//"+e},Su={},tt=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=Xv(l),l in Su)return;Su[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Jv,u||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((h,p)=>{m.addEventListener("load",h),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},eI=b("div").withConfig({displayName:"InlineLoadingIndicator__InlineImage",componentId:"sc-1xu4kxi-0"})(["display:inline-block;width:20px;",";svg{vertical-align:baseline;}"],e=>e.dark&&$(["filter:invert(0.8) brightness(250%);"])),er=({className:e,dark:t})=>i.jsx(eI,{dark:t,className:e,role:"progressbar","aria-busy":!0,"aria-live":"polite",children:i.jsx(o1,{})});var Ko=(e=>(e.Primary="primary",e.Secondary="secondary",e))(Ko||{});const tI=b(er).withConfig({displayName:"ButtonBase__StyledLoadingIndicator",componentId:"sc-sjtwuq-0"})(["position:absolute;transition:opacity 0.2s;",";"],e=>!e.isVisible&&$(["opacity:0;"])),Cc=b("div").attrs(({isVisible:e})=>({"aria-hidden":!e})).withConfig({displayName:"ButtonBase__ButtonChildren",componentId:"sc-sjtwuq-1"})(["width:100%;display:flex;flex-wrap:unset;align-items:center;justify-content:center;transition:opacity 0.2s;",";"],e=>!e.isVisible&&$(["opacity:0;"])),nI=b.div.withConfig({displayName:"ButtonBase__LoadingProgressBackground",componentId:"sc-sjtwuq-2"})(["position:absolute;width:100%;height:100%;display:block;background:rgba(0,0,0,0.2);z-index:0;transform:translateX(",");transition:all 0.7s ease-out;"],({xValue:e})=>`${e}%`),gf=({styles:e,hasLoadingBackground:t})=>{var n,r,o,a,s,c,l,u,d,m,h,p,g,C,I,v,x,R,_,T,E,V,D,O,U,M,Y,F,H,q,W;return{boxSizing:"border-box",cursor:"pointer",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",borderStyle:"solid",whiteSpace:"nowrap",transition:et.Fast,overflow:t?"hidden":"initial",height:k(e==null?void 0:e.height.base.base),width:k(e==null?void 0:e.width.base.base),marginTop:k((n=e==null?void 0:e.margin.base.base)==null?void 0:n.top),marginBottom:k((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom),marginLeft:k((o=e==null?void 0:e.margin.base.base)==null?void 0:o.left),marginRight:k((a=e==null?void 0:e.margin.base.base)==null?void 0:a.right),paddingTop:k((s=e==null?void 0:e.padding.base.base)==null?void 0:s.top),paddingBottom:k((c=e==null?void 0:e.padding.base.base)==null?void 0:c.bottom),paddingLeft:k((l=e==null?void 0:e.padding.base.base)==null?void 0:l.left),paddingRight:k((u=e==null?void 0:e.padding.base.base)==null?void 0:u.right),justifySelf:e==null?void 0:e.justify.base.base,...((d=e==null?void 0:e["font-family"])==null?void 0:d.base.base)!=null&&{fontFamily:Ht(e==null?void 0:e["font-family"].base.base)},fontSize:k(e==null?void 0:e["font-size"].base.base),fontWeight:Fn(e==null?void 0:e["font-weight"].base.base),lineHeight:k(e==null?void 0:e["line-height"].base.base),color:A(e==null?void 0:e["text-color"].base.base),"svg path":{stroke:A(e==null?void 0:e["text-color"].base.base)},textTransform:((h=(m=e==null?void 0:e["text-transform"])==null?void 0:m.base)==null?void 0:h.base)||Zl.None,backgroundColor:A(e==null?void 0:e["background-color"].base.base),borderColor:A(e==null?void 0:e["border-color"].base.base),borderTopWidth:k((p=e==null?void 0:e["border-width"].base.base)==null?void 0:p.top),borderBottomWidth:k((g=e==null?void 0:e["border-width"].base.base)==null?void 0:g.bottom),borderLeftWidth:k((C=e==null?void 0:e["border-width"].base.base)==null?void 0:C.left),borderRightWidth:k((I=e==null?void 0:e["border-width"].base.base)==null?void 0:I.right),borderRadius:k(e==null?void 0:e["border-radius"].base.base),boxShadow:`${k((v=e==null?void 0:e["shadow-offset"].base.base)==null?void 0:v.x)} ${k((x=e==null?void 0:e["shadow-offset"].base.base)==null?void 0:x.y)} ${k(e==null?void 0:e["shadow-radius"].base.base)} 0 ${A(e==null?void 0:e["shadow-color"].base.base)}`,transform:`translateX(${k((R=e==null?void 0:e.translate.base.base)==null?void 0:R.x)}) translateY(${k((_=e==null?void 0:e.translate.base.base)==null?void 0:_.y)})`,"&:hover:not(:disabled), &:focus:not(:disabled)":{color:A(e==null?void 0:e["text-color"].base.focused),backgroundColor:A(e==null?void 0:e["background-color"].base.focused),borderColor:A(e==null?void 0:e["border-color"].base.focused),boxShadow:`${k((T=e==null?void 0:e["shadow-offset"].base.focused)==null?void 0:T.x)} ${k((E=e==null?void 0:e["shadow-offset"].base.focused)==null?void 0:E.y)} ${k(e==null?void 0:e["shadow-radius"].base.focused)} 0 ${A(e==null?void 0:e["shadow-color"].base.focused)}`},"&:active:not(:disabled)":{color:A(e==null?void 0:e["text-color"].base.active),backgroundColor:A(e==null?void 0:e["background-color"].base.active),borderColor:A(e==null?void 0:e["border-color"].base.active),boxShadow:`${k((V=e==null?void 0:e["shadow-offset"].base.active)==null?void 0:V.x)} ${k((D=e==null?void 0:e["shadow-offset"].base.active)==null?void 0:D.y)} ${k(e==null?void 0:e["shadow-radius"].base.active)} 0 ${A(e==null?void 0:e["shadow-color"].base.active)}`,transform:`translateX(${k((O=e==null?void 0:e.translate.base.active)==null?void 0:O.x)}) translateY(${k((U=e==null?void 0:e.translate.base.active)==null?void 0:U.y)})`},"&:disabled":{cursor:"not-allowed",color:A(e==null?void 0:e["text-color"].base.disabled),backgroundColor:A(e==null?void 0:e["background-color"].base.disabled),borderColor:A(e==null?void 0:e["border-color"].base.disabled),boxShadow:`${k((M=e==null?void 0:e["shadow-offset"].base.disabled)==null?void 0:M.x)} ${k((Y=e==null?void 0:e["shadow-offset"].base.disabled)==null?void 0:Y.y)} ${k(e==null?void 0:e["shadow-radius"].base.disabled)} 0 ${A(e==null?void 0:e["shadow-color"].base.disabled)}`,transform:`translateX(${k((F=e==null?void 0:e.translate.base.disabled)==null?void 0:F.x)}) translateY(${k((H=e==null?void 0:e.translate.base.disabled)==null?void 0:H.y)})`},"&:not(:active):not(:disabled)":{"&:hover, &:focus":{transform:`translateX(${k((q=e==null?void 0:e.translate.base.focused)==null?void 0:q.x)}) translateY(${k((W=e==null?void 0:e.translate.base.focused)==null?void 0:W.y)})`}},outlineColor:"#00000000",outlineWidth:"2px",outlineOffset:"2px",outlineStyle:"solid","&:focus-visible":{outlineColor:A(e==null?void 0:e["border-color"].base.focused),outlineWidth:"2px",outlineOffset:"2px",outlineStyle:"solid"}}},iI=b.a.withConfig({displayName:"ButtonBase__StyledLink",componentId:"sc-sjtwuq-3"})(gf),rI=b.button.withConfig({displayName:"ButtonBase__StyledButton",componentId:"sc-sjtwuq-4"})(gf),ua=e=>{const{children:t,href:n,type:r="button",styles:o,isPending:a,uploadProgress:s,pendingContent:c,...l}=e,u=s!=null?(100-s)*-1:-100,d=i.jsxs(i.Fragment,{children:[a&&s!=null&&i.jsx(nI,{xValue:u,role:"progressbar","aria-busy":!0,"aria-live":"polite","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":s}),c?i.jsx(i.Fragment,{children:a?i.jsxs(Cc,{isVisible:!0,children:[i.jsx("span",{children:c}),i.jsx(er,{})]}):i.jsx(Cc,{isVisible:!0,"data-test":"button__children",children:t})}):i.jsxs(i.Fragment,{children:[a&&i.jsx(tI,{isVisible:a}),i.jsx(Cc,{isVisible:!a,"data-test":"button__children",children:t})]})]});return n?i.jsx(iI,{href:n,"data-test":"button__"+e.buttonType,styles:o,hasLoadingBackground:a&&s!=null,target:"_blank",rel:"noopener",...l,children:d}):i.jsx(rI,{"data-test":"button__"+e.buttonType,type:r,styles:o,hasLoadingBackground:a&&s!=null,...l,children:d})},oI=(e,t,n)=>{const{"enabled-capture-options-desktop":r,"enabled-capture-options-mobile":o,idclasses:a}=e,s=Jn(),c=s?o:r,l=a.find(g=>g.class===t),d=(l==null?void 0:l["requires-device"])!==nd.Mobile||ip()||s,m=n&&d&&c.includes("web_camera"),h=s&&(!m||e["always-show-mobile-camera-capture-option"]),p=window.FileReader!=null;return[{option:"web_camera",condition:m},{option:"mobile_camera",condition:h},{option:"upload",condition:p},{option:"device_handoff",condition:!0}].filter(g=>g.condition&&c.includes(g.option)).map(g=>g.option)},aI=({config:e,isWebGLIncompatible:t,hasCamera:n})=>{const{"enabled-capture-options-desktop":r,"enabled-capture-options-mobile":o}=e,s=Jn()?o:r;return[{option:"web_camera",condition:n&&!t&&s.includes("web_camera")},{option:"device_handoff",condition:!0}].filter(l=>l.condition&&s.includes(l.option)).map(l=>l.option)},sI=(e,t)=>{const{"enabled-capture-options-desktop":n,"enabled-capture-options-mobile":r}=e,o=Jn(),a=o?r:n,s=t&&(a==null?void 0:a.includes("web_camera"));return[{option:"web_camera",condition:s},{option:"mobile_camera",condition:!s&&o},{option:"upload",condition:!0},{option:"device_handoff",condition:!0}].filter(c=>c.condition&&(a==null?void 0:a.includes(c.option))).map(c=>c.option)},gd=e=>{const{terminal:t}=e.attributes["next-step"].config;return t};function ml(e,t=void 0,n){const r=e==null?void 0:e[n];if(t==null)return r;{const o=e==null?void 0:e[`${t.toLowerCase()}-${n}`];return o!=null?o:r}}const Ro=(e,t)=>{if(!gd(e))throw new Error("Cannot trigger completion on non-terminal step");j.onEvent(Pe.Complete,{inquiryId:e.id,referenceId:e.attributes["reference-id"],status:e.attributes.status,fields:e.attributes.fields,collectedData:j.inquiryParams["send-client-side-collected-data-in-events"]?t:void 0},{inquiry:e})},ja=e=>{var t,n;return e==null?{base:void 0,buttons:void 0}:{base:{backgroundColor:e["background-color"].base.base,headerButton:{text:{color:e["text-color"]["header-button"].base}},header:{border:{color:e["border-color"].header.base,width:e["border-width"].header.base}},modal:{backgroundColor:e["background-color"].base.base,padding:e.padding.modal.base,border:{radius:e["border-radius"].modal.base}},fill:{color:e["fill-color"].base.base,highlightColor:(t=e["fill-color"].highlight)==null?void 0:t.base,backgroundColor:(n=e["fill-color"].background)==null?void 0:n.base},stroke:{color:e["stroke-color"].base.base},textStyle:e["text-style"].base.base,titleStyle:e["title-style"].base.base,disclaimerStyle:e["disclaimer-style"].base.base},buttons:cI(e)}},cI=e=>e==null?{[Ko.Primary]:null,[Ko.Secondary]:null}:{[Ko.Primary]:e["button-primary-style"].base.base,[Ko.Secondary]:e["button-secondary-style"].base.base},bf=e=>{if(e==null)return{base:void 0,buttons:void 0,imagePreview:void 0,processingPage:void 0};const{base:t,buttons:n}=ja(e);return{base:{...t,border:{color:e["border-color"].base,width:e["border-width"].base}},buttons:n,imagePreview:{border:{color:e["border-color"]["image-preview"].base,radius:e["border-radius"]["image-preview"].base,width:e["border-width"]["image-preview"].base},plusIcon:{stroke:{color:e["stroke-color"]["image-preview-plus-icon"].base},fill:{color:e["fill-color"]["image-preview-plus-icon"].base}},xIcon:{stroke:{color:e["stroke-color"]["image-preview-x-icon"].base},fill:{color:e["fill-color"]["image-preview-x-icon"].base}},mainArea:{fill:{color:e["fill-color"]["image-preview-main-area"].base}},cropArea:{fill:{color:e["fill-color"]["image-preview-crop-area"].base}},imageName:{textStyle:e["text-style"]["image-name"].base}},processingPage:{textStyle:e["text-style"]["document-processing-text"].base,titleStyle:e["title-style"]["document-processing-title"].base}}},Cf=e=>{var r,o,a,s,c,l,u,d,m,h,p;if(e==null)return{base:void 0,buttons:void 0,captureHint:void 0,captureHintIcon:void 0,captureButtons:void 0,captureFeedBox:void 0,captureOverlayHeaderButton:void 0,processingPage:void 0,reviewImageBox:void 0,selectOption:void 0};const{base:t,buttons:n}=ja(e);return{base:{...t,border:{color:e["border-color"].base,width:e["border-width"].base}},buttons:n,captureHint:{textStyle:e["text-style"]["government-id-capture-hint-text"].base},captureHintIcon:{fill:{color:(a=(r=e["fill-color"]["capture-page-hint-icon"])==null?void 0:r.base)!=null?a:(o=e["fill-color"].base)==null?void 0:o.base},stroke:{color:(l=(s=e["stroke-color"]["capture-page-hint-icon"])==null?void 0:s.base)!=null?l:(c=e["stroke-color"].base)==null?void 0:c.base}},captureButtons:{submit:(u=e["button-primary-style"]["submit-photo-button"])==null?void 0:u.base,retake:(d=e["button-secondary-style"]["retake-photo-button"])==null?void 0:d.base},captureHelpButtonIcon:{stroke:{color:(m=e["stroke-color"]["capture-page-help-button-icon"])==null?void 0:m.base}},captureFeedBox:{border:{color:e["border-color"]["government-id-capture-feed-box"].base,radius:e["border-radius"]["government-id-capture-feed-box"].base,width:e["border-width"]["government-id-capture-feed-box"].base},stroke:{color:(h=e["stroke-color"]["government-id-capture-feed-box"])==null?void 0:h.base}},captureOverlayHeaderButton:{stroke:{color:(p=e["stroke-color"]["capture-overlay-header-button"])==null?void 0:p.base}},processingPage:{textStyle:e["text-style"]["government-id-processing-text"].base,titleStyle:e["title-style"]["government-id-processing-title"].base},reviewImageBox:{border:{color:e["border-color"]["government-id-review-image-box"].base,radius:e["border-radius"]["government-id-review-image-box"].base,width:e["border-width"]["government-id-review-image-box"].base}},selectOption:{backgroundColor:{base:e["background-color"].base.base,active:e["background-color"].option.active,focused:e["background-color"].option.focused},border:{color:e["border-color"]["government-id-select-option"].base,width:e["border-width"]["government-id-select-option"].base},chevron:{stroke:{color:e["stroke-color"]["government-id-select-option-chevron"].base}},height:e.height["government-id-select-option-min-row-height"].base,icon:{stroke:{color:e["stroke-color"]["government-id-select-option-icon"].base},fill:{color:e["fill-color"]["government-id-select-option-icon"].base}},textStyle:e["text-style"]["government-id-vertical-option"].base},inputSelect:{base:e["input-select-style"].base.base},imageLocal:{illustration:e["image-local-style"].illustration.base}}},xf=e=>{if(e==null)return{base:void 0,buttons:void 0,captureFeedbox:void 0,captureHintText:void 0,captureCompleteIcon:void 0,captureIcon:void 0,processingPage:void 0,startIcon:void 0};const{base:t,buttons:n}=ja(e);return{base:t,buttons:n,captureFeedbox:{border:{color:e["border-color"]["selfie-capture-feed-box"].base,width:e["border-width"]["selfie-capture-feed-box"].base}},captureHintText:e["text-style"]["selfie-processing-text"].base,captureCompleteIcon:{stroke:{color:e["stroke-color"]["capture-complete-icon"].base}},captureIcon:{fill:{color:e["fill-color"]["selfie-capture-icon-fill-color"].base},background:{color:e["fill-color"]["selfie-capture-icon-background-fill-color"].base},stroke:{color:e["stroke-color"]["selfie-capture-icon-stroke-color"].base}},processingPage:{titleStyle:e["title-style"]["selfie-processing-title"].base,textStyle:e["text-style"]["selfie-processing-text"].base},startIcon:e["image-local-style"]["selfie-start-icon"].base}};var vf=(e=>(e.SetStatus="create-persona/SET_STATUS",e))(vf||{}),Hn=(e=>(e.CtaNotShown="cta-not-shown",e.CtaShown="cta-shown",e.CtaDismissed="cta-dismissed",e.PersonaCreated="persona-created",e))(Hn||{});function Qo(e){return{type:"create-persona/SET_STATUS",payload:{status:e}}}var Z=(e=>(e.Primary="primary",e.Secondary="secondary",e))(Z||{});function lI(e,t){var m,h,p;const n=t.colorButtonPrimary||t.colorPrimary,r=gt(n).mix(gt("white"),.2).hex(),o=gt(n).mix(gt("white"),.4).hex(),a=t.colorButtonSecondary||t.colorPrimary,s=gt(a).mix(gt("white"),.2).hex(),c=gt(a).mix(gt("white"),.4).hex(),l=t.colorButtonSecondaryFill,u=l!=null?gt(l).mix(gt("white"),.2).hex():void 0,d=l!=null?gt(l).mix(gt("white"),.4).hex():void 0;switch(e){default:case"primary":{const g=t.buttonShadowStrength;return $(["background-color:",";background-image:",";border:"," solid ",";color:",";svg:not(.pds-icon) path{stroke:",";}",";&:hover:not(:disabled),&:focus:not(:disabled){background-color:",";border-color:",";",";}&:active:not(:disabled){background-color:",";border-color:",";box-shadow:none;}&:disabled{background-color:",";border-color:",";background-image:none;box-shadow:none;}&:focus-visible{outline-color:",";outline-width:2px;outline-offset:2px;outline-style:solid;}"],n,t.buttonBackgroundImage,t.borderWidth,n,t.colorFontButtonPrimary,t.colorFontButtonPrimary,g>0&&$(["box-shadow:0 3px 10px 0px ",";"],S.Color.CoreSlate500),r,r,g>0&&$(["box-shadow:0 6px 15px 0px ",";"],S.Color.CoreSlate500),o,o,t.colorButtonPrimaryFillDisabled,t.colorButtonPrimaryFillDisabled,r)}case"secondary":return $(["border:"," solid ",";background-color:",";color:",";svg:not(.pds-icon) path{stroke:",";}&:hover:not(:disabled),&:focus:not(:disabled){border:"," solid ",";background-color:",";}&:active:not(:disabled){border:"," solid ",";background-color:",";}&:disabled{background-color:",";border-color:",";color:",";svg:not(.pds-icon) path{stroke:",";}}&:focus-visible{outline-color:",";outline-width:2px;outline-offset:2px;outline-style:solid;}"],t.borderWidth,a,(m=l!=null?l:t.colorModalBackground)!=null?m:S.Color.PrimaryWhite,(h=t.colorFontButtonSecondary)!=null?h:a,(p=t.colorFontButtonSecondary)!=null?p:a,t.borderWidth,s,u!=null?u:S.Color.CoreSlate50,t.borderWidth,c,d!=null?d:S.Color.CoreSlate200,l!=null?t.colorButtonSecondaryFillDisabled:S.Color.PrimaryWhite,t.colorButtonSecondaryFillDisabled,S.Color.CoreSlate500,S.Color.CoreSlate500,s)}}const If=$([""," border-radius:",";box-sizing:border-box;height:48px;text-transform:",";padding:0 ","px;font-size:",";line-height:",";cursor:pointer;position:relative;display:flex;align-items:center;justify-content:center;width:100%;font-weight:",";text-decoration:none;white-space:nowrap;transition:",";outline-color:transparent;outline-width:2px;outline-offset:2px;outline-style:solid;&:disabled{cursor:not-allowed;}&:not(:active):not(:disabled){&:hover,&:focus{transform:translateY(-2px);}}"],e=>lI(e.buttonType,e.theme),e=>{var t;return(t=e.theme.borderRadius)!=null?t:dn.base},e=>e.theme.buttonTextTransform,L.base*2,$t.input,$n.input,e=>{var t;return(t=e.theme.buttonFontWeight)!=null?t:an.medium},ya.fast),wu=b(er).withConfig({displayName:"Button__StyledLoadingIndicator",componentId:"sc-qijgxr-0"})(["position:absolute;transition:opacity 0.2s;",";"],e=>!e.isPending&&$(["opacity:0;"])),yu=b("div").attrs(({isPending:e})=>({"aria-hidden":e})).withConfig({displayName:"Button__ButtonChildren",componentId:"sc-qijgxr-1"})(["width:100%;display:flex;flex-wrap:unset;align-items:center;justify-content:center;transition:opacity 0.2s;",";"],e=>e.isPending&&$(["opacity:0;"])),xc=b("div").withConfig({displayName:"Button__PrefixIconContainer",componentId:"sc-qijgxr-2"})(["display:flex;align-items:center;margin-right:","px;"],L.base),vc=b("div").withConfig({displayName:"Button__SuffixIconContainer",componentId:"sc-qijgxr-3"})(["display:flex;align-items:center;margin-left:","px;"],L.base),dI=b("button").withConfig({displayName:"Button__StyledButton",componentId:"sc-qijgxr-4"})(["",";"],If),uI=b("a").withConfig({displayName:"Button__StyledLink",componentId:"sc-qijgxr-5"})(["",";"],If),ge=e=>{const{children:t,href:n,prefixIcon:r,suffixIcon:o,type:a="button",styles:s,...c}=e;return s!=null?i.jsxs(ua,{href:n,prefixIcon:r,suffixIcon:o,type:a,styles:s,...c,children:[r!=null&&i.jsx(xc,{children:r}),t,o!=null&&i.jsx(vc,{children:o})]}):n?i.jsxs(uI,{"data-test":"button__"+e.buttonType,type:a,href:n,target:"_blank",rel:"noopener",buttonType:e.buttonType,children:[e.isPending&&i.jsx(wu,{isPending:e.isPending}),i.jsxs(yu,{isPending:e.isPending,children:[r!=null&&i.jsx(xc,{children:r}),t,o!=null&&i.jsx(vc,{children:o})]})]}):i.jsxs(dI,{"data-test":"button__"+e.buttonType,type:a,...c,children:[e.isPending&&i.jsx(wu,{isPending:e.isPending}),i.jsxs(yu,{isPending:e.isPending,children:[r!=null&&i.jsx(xc,{children:r}),t,o!=null&&i.jsx(vc,{children:o})]})]})},mI=e=>e==="",hI=e=>Array.isArray(e)&&e.length===0,pI=e=>bC(e)&&Object.keys(e).length===0,Mt=e=>e==null||mI(e)||hI(e)||pI(e);Nl.add_operation("scalarlength",e=>(e==null?void 0:e.length)||0);Nl.add_operation("=",(e,t)=>e==t);const wr=(e,t,n)=>{if(e!=null)try{return Nl.apply(e,t)}catch(r){return r instanceof Error&&r.message==="Unrecognized operation matchesregex"||me(r,"warning",{rule:e}),n}};function It(e,t){const n=ot(s=>{var c;return(c=s.form[t])==null?void 0:c.values}),r=ot(s=>{var c;return((c=s.ui)==null?void 0:c.status)===on.Blocked}),o=f.useMemo(()=>({form:n,value:n==null?void 0:n[e],meta:{polling:r}}),[n,e,r]);return f.useCallback((s,c)=>wr(s,o,c),[o])}function mn({hidden:e,optional:t,validations:n}){return f.useMemo(()=>{const o=(s,c)=>!wr(e,{form:c,value:s})&&(Mt(s)||s===!1)&&!wr(t.logic,{form:c,value:s})&&t.message,a=(n!=null?n:[]).map(({logic:s,message:c})=>(l,u)=>!wr(e,{form:u,value:l})&&!(Mt(l)&&wr(t.logic,{form:u,value:l}))&&!wr(s,{form:u,value:l},!0)&&c);return[o].concat(a)},[e,t,n])}class fn extends Error{constructor({method:t}){super(t),this.name="ApiNonRetryableResponseError",Object.setPrototypeOf(this,new.target.prototype),this.message=t!=null?t:this.name,this.method=t}}const vt=(e,t,n={})=>{const[r,o]=f.useState(!!n.defaultLoading),[a,s]=f.useState(void 0),c=Vi(),l=f.useCallback(async(...u)=>{let d=!1;try{o(!0);const m=await e(...u);return s(void 0),m}catch(m){if(m instanceof Wl)d=!0;else if(m instanceof Ct||m instanceof ht||m instanceof Yl||m instanceof fn)c()&&s(m);else throw m}finally{c()&&!d&&o(!1)}},t);return{loading:r,error:a,callback:l}},At=({error:e,onError:t,onNetworkError:n,onNonRetryableError:r,onRequestError:o})=>{f.useEffect(()=>{if(e==null)return;if(!(typeof e=="object"&&e!=null&&"method"in e))throw e;if(e instanceof Ct)n==null||n(e);else if(e instanceof ht)t==null||t(e);else if(e instanceof Yl)o==null||o(e);else if(e instanceof fn)r==null||r(e);else throw e},[e])},fI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,[l]=z(),{loading:u,error:d,callback:m}=vt(async C=>{await n.onActionButtonClick(e.name)},[n.onActionButtonClick,e.name]);At({error:d,onNetworkError:()=>n.showMessage(l("errors.network")),onError:C=>{C instanceof ht&&C.status===422?n.showMessage("Invalid configuration. Please check your parameters."):me(C)}});const h=It(e.name,t.attributes["next-step"].name);if(h(s))return null;const g=u||r||h(a);return i.jsx(ge,{id:e.name,type:"button",buttonType:o!=null?o:Z.Primary,onClick:m,disabled:g,isPending:u,styles:e==null?void 0:e.styles,children:c})},gI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,l=It(e.name,t.attributes["next-step"].name);if(!j.isDashboardFLE&&(j.isHosted||j.isInline)||l(s))return null;const u=r||l(a);return i.jsx(ge,{id:e.name,type:"button",buttonType:o!=null?o:Z.Primary,onClick:()=>n.onCancel(),disabled:u,styles:e==null?void 0:e.styles,children:c})},bI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{var v;const{disabled:o,hidden:a,text:s,"auto-submit-countdown-text":c,"auto-submit-interval-seconds":l}=e.attributes,{onComplete:u}=n,d=f.useCallback(x=>{x==null||x.preventDefault(),u()},[u]),[m,h]=f.useState(l);f.useEffect(()=>{if(m!=null&&d!=null&&m>0){const x=setTimeout(()=>{m>1?h(m-1):(h(m-1),d())},1e3);return()=>clearTimeout(x)}},[m,d]);const p=It(e.name,t.attributes["next-step"].name);if(p(a)||!vo(t))return null;const C=r||p(o),I=m!=null&&m>0&&c?c.replace("{time}",String(m)):s;return i.jsx(ge,{id:"complete__button",type:"submit",buttonType:(v=e.attributes["button-type"])!=null?v:Z.Primary,onClick:d,disabled:C,styles:e==null?void 0:e.styles,children:I})},CI={disableParsingRawHTML:!0,overrides:{a:{props:{target:"_blank",rel:"noreferrer",onClick:e=>{e.stopPropagation()}}}}},te=({id:e,className:t,children:n,markdownOptions:r,wrapper:o,wrapperProps:a})=>{const s=o!=null?{wrapper:o,forceWrapper:!0}:{},c=f.useMemo(()=>({...CI,...s,...r}),[o,r]);return i.jsx(xI,{id:e,className:t,children:i.jsx(p0,{...a,options:c,children:n!=null?n:""})})},xI=b.div.withConfig({displayName:"Markdown__Container",componentId:"sc-1qxdm1t-0"})(["display:flex;flex-direction:column;a{font-size:inherit;}p + p,ol + p,ul + p{margin-top:",";}p + ol,p + ul,ol + ol,ol + ul,ul + ol,ul + ul{margin-top:0.75rem;}ol,ul{li + li,p + p{margin-top:0.75rem;}p{display:initial;}}ol{margin-left:1.8ch;}ul{list-style:none;li::before{content:'';font-size:150%;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';line-height:0;margin:0 0.5rem 0 0.25rem;position:relative;top:1px;color:",";}}"],S.Spacing[5],({theme:e})=>e.colorFont),Sn=8,vI=b.div.withConfig({displayName:"PopupBackdrop__BackdropBackground",componentId:"sc-l968gl-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;z-index:",";&.backdrop-enter{background-color:rgba(0,0,0,0);pointer-events:none;}&.backdrop-enter-active,&.backdrop-enter-done{background-color:rgba(0,0,0,0.85);transition:background-color ",";pointer-events:unset;}&.backdrop-exit{background-color:rgba(0,0,0,0.85);pointer-events:unset;}&.backdrop-exit-active{background-color:rgba(0,0,0,0);transition:background-color ",";pointer-events:none;}"],yt.popupBackdrop,et.Fast,et.Fast),II=b("button").withConfig({displayName:"PopupBackdrop__CloseButton",componentId:"sc-l968gl-1"})(["position:absolute;right:24px;top:24px;cursor:pointer;pointer-events:auto;background:none;display:flex;align-items:center;justify-content:center;flex:none;margin:-","px;padding:","px;border-radius:",";outline:0 !important;transition:box-shadow ",",background-color ",";box-shadow:0 0 0 2px transparent;:hover:not(:disabled){background-color:",";}:focus:not(:disabled):not(:active){box-shadow:0 0 0 2px ",";}:active:not(:disabled){background-color:",";}svg path{stroke:",";}&:disabled{cursor:not-allowed;opacity:0.25;}"],Sn/1.5,Sn/1.5,({theme:e})=>e.borderRadius,et.Fast,et.Fast,gt(S.Color.CoreSlate300).fade(.5).rgb().string(),({theme:e})=>e.colorPrimary,gt(S.Color.CoreSlate400).fade(.5).rgb().string(),S.Color.PrimaryWhite),Sf=e=>{const t=n=>{var r;n.stopPropagation(),n.preventDefault(),(r=e.onClose)==null||r.call(e)};return i.jsx(xa,{in:e.visible,timeout:{enter:200,exit:200},mountOnEnter:!0,unmountOnExit:!0,classNames:"backdrop",children:i.jsxs(vI,{children:[i.jsx(II,{id:"popup_backdrop__close",onClick:t,children:i.jsx(Cp,{})}),e.children]})})},en=e=>{const t=ot(n=>n.inquiry.featureFlags);return!!(t!=null&&t[e])};var Xn=(e=>(e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Zero=48]="Zero",e[e.C=67]="C",e[e.S=83]="S",e[e.V=86]="V",e[e.Z=90]="Z",e[e.EqualSign=187]="EqualSign",e[e.Dash=189]="Dash",e))(Xn||{});const Ao=(e,t={})=>n=>{const{stopPropagation:r,preventDefault:o}=t;return f.useEffect(()=>{const a=s=>{r&&s.stopPropagation(),o&&s.preventDefault(),s.keyCode===e&&n(s)};return window.addEventListener("keyup",a),()=>window.removeEventListener("keyup",a)},[n])},To=(e,t={})=>n=>{const{stopPropagation:r,preventDefault:o,withAlt:a,withCtrl:s,withShift:c}=t;return f.useEffect(()=>{const l=u=>{if(r&&u.stopPropagation(),o&&u.preventDefault(),!(a&&!u.altKey)&&!(s&&!u.ctrlKey&&!u.metaKey)&&!(c&&!u.shiftKey))return u.keyCode===e&&n(u)};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[n])},bd=Ao(Xn.Esc);Ao(Xn.Left);Ao(Xn.Right);Ao(Xn.Up);Ao(Xn.Down);Ao(Xn.Backspace);To(Xn.Z,{withCtrl:!0});To(Xn.Z,{withCtrl:!0,withShift:!0});To(Xn.S,{withCtrl:!0});To(Xn.Backspace);To(Xn.C,{withCtrl:!0});To(Xn.V,{withCtrl:!0});const _u=400,Ru=650,Ic="reusable-persona-create-popup",hl=250,SI=b.div.withConfig({displayName:"ButtonCreatePersona__Backdrop",componentId:"sc-12sb4nb-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:",";pointer-events:none;@media ","{position:fixed;}"],yt.drawer,jt.isMobile),wI=b.div.withConfig({displayName:"ButtonCreatePersona__Anim",componentId:"sc-12sb4nb-1"})(["position:absolute;bottom:",";left:",";right:",";transition:","ms;.dialog-enter &{transform:translateY( calc(100% + ",") );}.dialog-enter-active &{transform:translateY(0%);}.dialog-exit &{transform:translateY(0%);}.dialog-exit-active &{transform:translateY( calc(100% + ",") );}z-index:",";pointer-events:auto;"],({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.left)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.right)},hl,({styles:e})=>{var t,n,r,o;return(o=k((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom))!=null?o:"0px"},({styles:e})=>{var t,n,r,o;return(o=k((r=(n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom))!=null?o:"0px"},yt.drawer),yI=b.div.withConfig({displayName:"ButtonCreatePersona__CtaCard",componentId:"sc-12sb4nb-2"})(["z-index:",";padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";background-color:",";border-color:",";border-width:",";border-radius:",";box-shadow:"," "," "," 0 ",";"],yt.drawer,({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.top)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.bottom)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.left)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e.padding)==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.right)},({styles:e})=>{var t,n;return A((n=(t=e==null?void 0:e["background-color"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n;return A((n=(t=e==null?void 0:e["border-color"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e["border-width"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.top)},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["border-radius"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e["shadow-offset"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.x)},({styles:e})=>{var t,n,r;return k((r=(n=(t=e==null?void 0:e["shadow-offset"])==null?void 0:t.base)==null?void 0:n.base)==null?void 0:r.y)},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["shadow-radius"])==null?void 0:t.base)==null?void 0:n.base)},({styles:e})=>{var t,n;return A((n=(t=e==null?void 0:e["shadow-color"])==null?void 0:t.base)==null?void 0:n.base)}),_I=b.div.withConfig({displayName:"ButtonCreatePersona__PopupOverlayText",componentId:"sc-12sb4nb-3"})(["font-family:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";width:75%;text-align:center;a{color:",";font-weight:bold;outline-color:",";}"],({theme:e})=>Ht(e.fontFamily),S.Color.PrimaryWhite,S.Color.PrimaryWhite,S.Color.PrimaryWhite),RI=({component:e,actionsApi:t,inquiry:n,inquiryLoading:r})=>{const o=ot(X=>{var oe;return(oe=X.createPersona)==null?void 0:oe.status}),a=jl(),s=e.attributes.pages["cta-card"]["ui-step"].config.components,c=e.attributes.pages["cta-card"]["component-name-mapping"],[l,{enable:u,disable:d}]=rt(o===Hn.CtaShown);bd(d);const[m]=z(),h=f.useRef(null),p=ot(X=>X.inquiry.popupUrl),g=f.useCallback(X=>a(Wp(X)),[a]),C=e.attributes["auto-complete-on-dismiss"],I=f.useRef(!1),v=f.useCallback(()=>{I.current||(I.current=!0,C&&t.onComplete())},[t.onComplete,C]),x=f.useCallback(()=>{g(null),v()},[g,v]),{error:R,loading:_,callback:T}=vt(async()=>{var oe;if(p&&h.current&&h.current!=="blocked"&&!h.current.closed){h.current.focus();return}if(o===Hn.PersonaCreated)return;const X=await ne.postResourceAction({id:n.id,type:n.type},"generate-reusable-persona-create-popup-one-time-link-code");if((oe=X==null?void 0:X.meta)!=null&&oe["one-time-link-code"]){const se=new URL(e.attributes.url);se.searchParams.append("code",X.meta["one-time-link-code"]),se.searchParams.append("component",e.name),se.host=window.location.host,g(se.toString())}},[p,o]);f.useEffect(()=>{var X;if(p){const oe=window.screenX+(window.outerWidth-_u)/2,se=window.screenY+(window.outerHeight-Ru)/2.5;h.current=window.open(p,Ic,`popup,width=${_u},height=${Ru},left=${oe},top=${se}`),h.current||(h.current="blocked");const Se=()=>{(h.current==="blocked"||!h.current||h.current.closed)&&(h.current=null,x())};window.addEventListener("focus",Se);const Ee=de=>{var Ie;de.origin===new URL(p).origin&&(de.source===h.current||h.current==="blocked"&&de.source.name===Ic)&&(de.data===ps.CREATED?(a(Qo(Hn.PersonaCreated)),d(),v()):de.data===ps.DISMISSED&&(a(Qo(Hn.CtaDismissed)),h.current!=="blocked"&&((Ie=h.current)==null||Ie.close()),d(),v()))};window.addEventListener("message",Ee);const he=()=>{var de;h.current!=="blocked"&&((de=h.current)==null||de.close())};return window.addEventListener("close",he),()=>{window.removeEventListener("focus",Se),window.removeEventListener("message",Ee),window.removeEventListener("close",he)}}else h.current!=="blocked"&&((X=h.current)==null||X.close()),h.current=null},[p]),f.useEffect(()=>()=>{var X;g(null),h.current!=="blocked"&&((X=h.current)==null||X.close()),h.current=null},[]),At({error:R,onError:()=>t.showMessage(m("errors.network")),onNetworkError:()=>t.showMessage(m("errors.network"))});const E=en("inquiry:enable-reusable-personas-embedded-web"),V=f.useCallback(async X=>{X===c["start-button"]?j.isNonIframeHostedIntegration?(ee.logAmplitude("reusable-persona.create.cta.started-hosted"),t.setComponent(e),t.route("/inquiry/create-persona/passkey-registration",{transition:Ti.SlideVertical})):j.isEmbeddedOrIframeIntegration&&E&&(ee.logAmplitude("reusable-persona.create.cta.started-embedded"),await T()):X===c["dismiss-button"]&&(ee.logAmplitude("reusable-persona.create.cta.dismissed"),v(),a(Qo(Hn.CtaDismissed)),d())},[e,c,t,d,a,T,E,v]),D=f.useMemo(()=>({...t,onSubmit:V}),[t,V]);f.useEffect(()=>{if(o===Hn.CtaNotShown){const X=setTimeout(()=>{u()},1e3);return()=>clearTimeout(X)}},[u,o]);const[O,{enable:U,disable:M}]=rt(),Y=f.useRef(void 0),F=f.useCallback(()=>{U(),a(Qo(Hn.CtaShown)),Yi(Y.current),ee.logAmplitude("reusable-persona.create.cta.shown")},[]),H=f.useCallback(()=>{setTimeout(Yi,0)},[]),q=f.useMemo(()=>n.attributes["reusable-persona-status"]?!1:j.isEmbeddedOrIframeIntegration?E:j.isNonIframeHostedIntegration,[E,n.attributes]);f.useEffect(()=>{q&&ee.logAmplitude("reusable-persona.create.btn-rendered")},[]);const W={overrides:{a:{component:b.a.withConfig({displayName:"ButtonCreatePersona__component",componentId:"sc-12sb4nb-4"})([""]),props:{target:Ic,onClick:X=>{(h.current!=="blocked"||!p)&&(X.preventDefault(),T())}}}}};return q?i.jsxs(i.Fragment,{children:[i.jsx(Sf,{visible:!!p&&o!==Hn.PersonaCreated,onClose:x,children:i.jsx(_I,{id:"create_persona__popup_overlay_text",children:i.jsx(te,{markdownOptions:W,children:e.attributes["popup-overlay-text"].replace("(#)",`(${p})`)})})}),i.jsx(xa,{in:l,timeout:{enter:o===Hn.CtaShown?0:hl,exit:hl},mountOnEnter:!0,unmountOnExit:!0,onEntered:F,onExit:M,onExited:H,classNames:"dialog",children:i.jsx(Ah,{active:O,focusTrapOptions:{escapeDeactivates:!0,clickOutsideDeactivates:!0,allowOutsideClick:!0,initialFocus:!1,setReturnFocus:!1,fallbackFocus:document.body},children:i.jsx(SI,{children:i.jsx(wI,{styles:e.styles,children:i.jsx(yI,{styles:e.styles,ref:Y,children:s.map(X=>i.jsx(jo,{component:X,inquiry:n,inquiryLoading:r||_,actionsApi:D},X.name))})})})})})]}):null},AI=({component:e,actionsApi:t,inquiryLoading:n})=>{var o;const r=a=>{a.preventDefault(),t.setComponent(e),t.route("/inquiry/device-handoff/prompt")};return i.jsx(ge,{id:"device_handoff__button",type:"button",buttonType:(o=e.attributes["button-type"])!=null?o:Z.Primary,disabled:n,onClick:r,styles:e==null?void 0:e.styles,children:e.attributes.text})},TI=({component:e,inquiry:t})=>{const{"button-type":n,hidden:r,text:o,link:a}=e.attributes;return It(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(ge,{href:a,id:e.name,type:"button",buttonType:n!=null?n:Z.Primary,styles:e==null?void 0:e.styles,children:o})},EI=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"button-type":o,disabled:a,hidden:s,text:c,"auto-submit-countdown-text":l,"auto-submit-interval-seconds":u}=e.attributes,[d]=z(),{loading:m,error:h,callback:p}=vt(async _=>{_==null||_.preventDefault(),await n.onSubmit(e.name)},[n.onSubmit,e.name]);At({error:h,onNetworkError:()=>n.showMessage(d("errors.network")),onError:_=>{_ instanceof ht&&_.status===422?n.showMessage("Invalid configuration. Please check your parameters."):me(_)}});const[g,C]=f.useState(u);f.useEffect(()=>{if(g!=null&&g>0){const _=setTimeout(()=>{g>1?C(g-1):(C(g-1),p())},1e3);return()=>clearTimeout(_)}},[g,p]);const I=It(e.name,t.attributes["next-step"].name);if(I(s))return null;const x=m||r||I(a),R=g>0&&l?l.replace("{time}",String(g)):c;return i.jsx(ge,{id:e.name,type:"submit",buttonType:o!=null?o:Z.Primary,onClick:p,disabled:x,isPending:m,styles:e==null?void 0:e.styles,children:R})},Au=400,Tu=650,Sc="reusable-persona-verify-popup",kI=b.div.withConfig({displayName:"ButtonVerifyWithPersona__PopupOverlayText",componentId:"sc-qdldel-0"})(["font-family:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";width:75%;text-align:center;a{color:",";font-weight:bold;outline-color:",";}"],({theme:e})=>Ht(e.fontFamily),S.Color.PrimaryWhite,S.Color.PrimaryWhite,S.Color.PrimaryWhite),NI=({component:e,actionsApi:t,inquiry:n,inquiryLoading:r})=>{var U;const{"button-type":o,disabled:a,hidden:s,text:c}=e.attributes,[l]=z(),u=jl(),d=f.useRef(null),m=f.useRef(null),h=ot(M=>M.inquiry.popupUrl),p=f.useCallback(M=>u(Wp(M)),[u]),[g,C]=f.useState(!1),{error:I,loading:v,callback:x}=vt(async()=>{var Y;if(h&&d.current&&d.current!=="blocked"&&!d.current.closed){d.current.focus();return}const M=await ne.postResourceAction({id:n.id,type:n.type},"generate-reusable-persona-verify-popup-one-time-link-code");if((Y=M==null?void 0:M.meta)!=null&&Y["one-time-link-code"]){const F=new URL(e.attributes.url);F.searchParams.append("code",M.meta["one-time-link-code"]),F.searchParams.append("component",e.name),F.host=window.location.host,p(F.toString())}},[h]);f.useEffect(()=>{var M;if(h){const Y=window.screenX+(window.outerWidth-Au)/2,F=window.screenY+(window.outerHeight-Tu)/2.5;m.current=null,d.current=window.open(h,Sc,`popup,width=${Au},height=${Tu},left=${Y},top=${F}`),d.current||(d.current="blocked");const H=()=>{(d.current==="blocked"||!d.current||d.current.closed)&&(d.current=null,p(null),m.current===Ai.TRANSITION_STARTED&&(u(yn()),C(!0),u(kn(n,{skipInquiryStateUpdateOnPoll:!0}))))};window.addEventListener("focus",H);const q=X=>{X.origin===new URL(h).origin&&(X.source===d.current||d.current==="blocked"&&X.source.name===Sc)&&(X.data.name===Ai.TRANSITION_POLLING?(u(yn()),C(!0),u(kn(n,{pollingMode:Xt.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))):X.data.name===Ai.TRANSITION_COMPLETED?m.current===Ai.TRANSITION_STARTED&&(u(yn()),C(!0),u(kn(n,{pollingMode:Xt.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))):X.data.name===Ai.TRANSITION_ERRORED&&(u(yn()),C(!0),u(kn(n,{pollingMode:Xt.BLOCKING,skipInquiryStateUpdateOnPoll:!0}))),m.current=X.data.name)};window.addEventListener("message",q);const W=()=>{var X;d.current!=="blocked"&&((X=d.current)==null||X.close())};return window.addEventListener("close",W),()=>{window.removeEventListener("focus",H),window.removeEventListener("message",q),window.removeEventListener("close",W)}}else d.current!=="blocked"&&((M=d.current)==null||M.close()),d.current=null},[h]),f.useEffect(()=>()=>{p(null)},[]),At({error:I,onError:()=>t.showMessage(l("errors.network")),onNetworkError:()=>t.showMessage(l("errors.network"))}),f.useEffect(()=>{r||C(!1)},[r]);const R=en("inquiry:enable-reusable-personas-embedded-web"),_=f.useCallback(async M=>{j.isNonIframeHostedIntegration?(ee.logAmplitude("reusable-persona.verify.started-hosted"),t.setComponent(e),t.route("/inquiry/verify-with-persona/passkey-authentication")):j.isEmbeddedOrIframeIntegration&&R&&(ee.logAmplitude("reusable-persona.verify.started-embedded"),await x())},[t,e,x,R]),T={overrides:{a:{props:{target:Sc,onClick:M=>{(d.current!=="blocked"||!h)&&(M.preventDefault(),x())}}}}},E=It((U=e.name)!=null?U:"",n.attributes["next-step"].name),V=E(s),D=f.useMemo(()=>V?!1:j.isEmbeddedOrIframeIntegration?R:j.isNonIframeHostedIntegration,[V,R]);if(f.useEffect(()=>{D&&ee.logAmplitude("reusable-persona.verify.btn-rendered")},[]),!D)return null;const O=r||v||E(a)||!!n.attributes["reusable-persona-status"];return i.jsxs(i.Fragment,{children:[i.jsx(Sf,{visible:!!h,onClose:()=>p(null),children:i.jsx(kI,{id:"verify_with_persona__popup_overlay_text",children:i.jsx(te,{markdownOptions:T,children:e.attributes["popup-overlay-text"].replace("(#)",`(${h})`)})})}),i.jsx(ge,{id:"verify_with_persona__button",buttonType:o!=null?o:Z.Primary,onClick:_,disabled:O,styles:e==null?void 0:e.styles,isPending:r&&g||v,children:c})]})},wf=b.div.withConfig({displayName:"StackBase__StackContainer",componentId:"sc-19md1e0-0"})(({styles:e})=>{var r,o,a,s,c,l,u,d,m,h,p,g,C,I,v,x;const t=(e==null?void 0:e["frame-positioning"].base.base)===rl.EdgeToEdge?`-${j.widgetPadding.left}px`:k((r=e==null?void 0:e.margin.base.base)==null?void 0:r.left),n=(e==null?void 0:e["frame-positioning"].base.base)===rl.EdgeToEdge?`-${j.widgetPadding.right}px`:k((o=e==null?void 0:e.margin.base.base)==null?void 0:o.right);return{display:"flex",flexWrap:"nowrap",borderStyle:"solid",width:(l=(c=(s=(a=e==null?void 0:e.width)==null?void 0:a.base)==null?void 0:s.base)==null?void 0:c.value)!=null?l:`calc(100% - ${t} - ${n})`,marginTop:k((u=e==null?void 0:e.margin.base.base)==null?void 0:u.top),marginBottom:k((d=e==null?void 0:e.margin.base.base)==null?void 0:d.bottom),marginLeft:t,marginRight:n,flexDirection:`${e.axis.base.base===Kl.Vertical?"column":"row"}`,gap:k(e==null?void 0:e.gap.base.base),justifyContent:e==null?void 0:e.justify.base.base,paddingTop:k((m=e==null?void 0:e.padding.base.base)==null?void 0:m.top),paddingBottom:k((h=e==null?void 0:e.padding.base.base)==null?void 0:h.bottom),paddingLeft:k((p=e==null?void 0:e.padding.base.base)==null?void 0:p.left),paddingRight:k((g=e==null?void 0:e.padding.base.base)==null?void 0:g.right),backgroundColor:A(e==null?void 0:e["background-color"].base.base),borderColor:A(e==null?void 0:e["border-color"].base.base),borderTopWidth:k((C=e==null?void 0:e["border-width"].base.base)==null?void 0:C.top),borderBottomWidth:k((I=e==null?void 0:e["border-width"].base.base)==null?void 0:I.bottom),borderLeftWidth:k((v=e==null?void 0:e["border-width"].base.base)==null?void 0:v.left),borderRightWidth:k((x=e==null?void 0:e["border-width"].base.base)==null?void 0:x.right),borderRadius:k(e==null?void 0:e["border-radius"].base.base)}}),yf=b.div.withConfig({displayName:"StackBase__StackChild",componentId:"sc-19md1e0-1"})(({styles:e,index:t})=>{var a,s;const n=(s=(a=e==null?void 0:e["child-sizes"].base.base)==null?void 0:a[t])!=null?s:0,r=n===0;return{display:"flex",flexDirection:"column",justifyContent:e.axis.base.base===Kl.Vertical||e==null?void 0:e.alignment.base.base,flexGrow:n,flexShrink:r?0:1,flexBasis:r?"initial":0,":empty":{flexGrow:0,margin:`calc(${k(e==null?void 0:e.gap.base.base)} / -2)`},wordBreak:"break-word",'> img, [role="img"] svg':{maxWidth:"100% !important",height:"auto !important",objectFit:"contain",display:"block"}}}),jI=b(wf).withConfig({displayName:"ClickableStack__Container",componentId:"sc-1d75rt7-0"})(["align-items:initial;cursor:pointer;transition-property:background-color,border-color;transition-duration:",";&:hover:enabled,&:focus:enabled{background-color:",";border-color:",";}&:active:enabled{background-color:",";border-color:",";}&:disabled{cursor:not-allowed;background-color:",";border-color:",";}"],et.Fast,e=>{var t;return A((t=e.styles)==null?void 0:t["background-color"].base.focused)},e=>{var t;return A((t=e.styles)==null?void 0:t["border-color"].base.focused)},e=>{var t;return A((t=e.styles)==null?void 0:t["background-color"].base.active)},e=>{var t;return A((t=e.styles)==null?void 0:t["border-color"].base.active)},e=>{var t,n;return A(e.isPending?(t=e.styles)==null?void 0:t["background-color"].base.active:(n=e.styles)==null?void 0:n["background-color"].base.disabled)},e=>{var t,n;return A(e.isPending?(t=e.styles)==null?void 0:t["border-color"].base.active:(n=e.styles)==null?void 0:n["border-color"].base.disabled)}),PI=({component:e,...t})=>{const{disabled:n,hidden:r,"transition-behavior":o}=e.attributes,{actionsApi:a,inquiry:s,inquiryLoading:c}=t,[l]=z(),{loading:u,error:d,callback:m}=vt(async C=>{C.preventDefault(),o==="action"?await a.onActionButtonClick(e.name):await a.onSubmit(e.name)},[a.onSubmit,e.name]);At({error:d,onNetworkError:()=>a.showMessage(l("errors.network")),onError:C=>{C instanceof ht&&C.status===422?a.showMessage("Invalid configuration. Please check your parameters."):me(C)}});const h=It(e.name,s.attributes["next-step"].name);if(h(r))return null;const g=u||c||h(n);return i.jsxs(jI,{as:"button",id:"clickable__stack",styles:e.styles,type:o==="action"?"button":"submit",onClick:m,disabled:g,isPending:u,children:[!t.isPreview&&e.attributes.children.map((C,I)=>i.jsx(yf,{styles:e.styles,index:I,children:i.jsx(jo,{...t,component:C})},C.name)),t.isPreview&&t.childPreviews.map(C=>C.component)]})},DI=b.div.withConfig({displayName:"Footer__Container",componentId:"sc-atrlkw-0"})(["position:absolute;z-index:",";left:0;right:0;bottom:0;border-style:solid;display:flex;flex-direction:",";align-items:",";justify-content:space-between;@media ","{position:fixed;}",""],yt.footer,({direction:e})=>{switch(e){case"end_to_start":return"row-reverse";case"top_to_bottom":return"column";case"start_to_end":default:return"row"}},({styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e.justify)==null?void 0:t.base)==null?void 0:n.base)!=null?r:"center"},jt.isMobile,({styles:e})=>{var t,n,r,o,a,s,c,l,u,d;return $(["background-color:",";padding-top:",";padding-bottom:",";border-top-width:",";border-bottom-width:",";border-left-width:",";border-right-width:",";border-top-left-radius:",";border-top-right-radius:",";border-color:",";padding-left:",";padding-right:",";padding-left:calc( "," + env(safe-area-inset-left))};padding-right:calc( "," + env(safe-area-inset-right))};"],A(e==null?void 0:e["background-color"].base.base),k((t=e==null?void 0:e.padding.base.base)==null?void 0:t.top),k((n=e==null?void 0:e.padding.base.base)==null?void 0:n.bottom),k((r=e==null?void 0:e["border-width"].base.base)==null?void 0:r.top),k((o=e==null?void 0:e["border-width"].base.base)==null?void 0:o.bottom),k((a=e==null?void 0:e["border-width"].base.base)==null?void 0:a.left),k((s=e==null?void 0:e["border-width"].base.base)==null?void 0:s.right),k(e==null?void 0:e["border-radius"].base.base),k(e==null?void 0:e["border-radius"].base.base),A(e==null?void 0:e["border-color"].base.base),k((c=e==null?void 0:e.padding.base.base)==null?void 0:c.left),k((l=e==null?void 0:e.padding.base.base)==null?void 0:l.right),k((u=e==null?void 0:e.padding.base.base)==null?void 0:u.left),k((d=e==null?void 0:e.padding.base.base)==null?void 0:d.right))}),OI=({component:e,...t})=>{const[n,r]=f.useState(L.base*7),o=f.useRef(),a=()=>{var c;const s=((c=o.current)==null?void 0:c.getBoundingClientRect().height)-parseInt(L.widgetPadding);s>=0&&r(Math.floor(s))};return f.useLayoutEffect(()=>{a()}),f.useEffect(()=>{const s=setTimeout(a,0);return()=>clearTimeout(s)},[]),i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-hidden":!0,style:{height:n}}),i.jsx(DI,{"data-test":"footer",ref:o,direction:e.attributes.direction,styles:e.styles,children:i.jsxs(i.Fragment,{children:[!t.isPreview&&e.attributes.children.map(s=>f.createElement(jo,{...t,key:s.name,component:s})),t.isPreview&&t.childPreviews.map(s=>i.jsx(f.Fragment,{children:s.component},s.name))]})})]})},LI=({component:e,inquiry:t})=>{var c,l,u;const{hidden:n,"launch-button-text":r}=e.attributes;if(It(e.name,t.attributes["next-step"].name)(n))return null;const s=!j.isDashboardFLE;return i.jsx(i.Fragment,{children:i.jsx(ge,{id:"government_id_nfc_scan__button_submit",type:"submit",buttonType:Z.Primary,disabled:s,styles:(u=(l=(c=e==null?void 0:e.styles)==null?void 0:c["button-primary-style"])==null?void 0:l.base)==null?void 0:u.base,children:r||"Start scan"})})},FI=({component:e,...t})=>{const{hidden:n}=e.attributes,{inquiry:r}=t;return It(e.name,r.attributes["next-step"].name)(n)?null:i.jsxs(wf,{styles:e.styles,children:[!t.isPreview&&e.attributes.children.map((s,c)=>i.jsx(yf,{styles:e.styles,index:c,children:i.jsx(jo,{...t,component:s})},s.name)),t.isPreview&&t.childPreviews.map(s=>s.component)]})},MI=b.div.attrs(()=>({role:"img","aria-label":"Pictograph of documents to upload"})).withConfig({displayName:"VerificationHero__Container",componentId:"sc-1xtav50-0"})(["display:flex;align-items:center;justify-content:center;border-radius:8px;background-color:",";height:160px;width:100%;svg{margin:",";}"],({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,S.Spacing[2]),gn=({children:e,backgroundColor:t,className:n})=>i.jsx(MI,{className:n,$backgroundColor:t,"data-test":"verification-hero-banner",children:e}),Eu=e=>{if(typeof e=="string"&&e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i)){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(!t)throw new Error("Color can be only hex or rgb array (ex. [10,20,30])");return[Math.round(parseInt(t[1],16)/255*1e3)/1e3,Math.round(parseInt(t[2],16)/255*1e3)/1e3,Math.round(parseInt(t[3],16)/255*1e3)/1e3]}else{if(typeof e=="object"&&e.length===3&&e.every(t=>t>=0&&t<=255))return[Math.round(e[0]/255*1e3)/1e3,Math.round(e[1]/255*1e3)/1e3,Math.round(e[2]/255*1e3)/1e3];if(e)throw new Error("Color can be only hex or rgb array (ex. [10,20,30])");return}},wc=e=>Math.round(e*1e3)/1e3,VI=(e,t,n,r=!0)=>{const o=Eu(e),a=Eu(t);if(!o||!a)throw new Error("Proper colors must be used for both source and target");function s(c,l,u){if(u&&u.s&&Array.isArray(u.s)&&u.s.length===4)c[0]===u.s[0]&&c[1]===u.s[1]&&c[2]===u.s[2]&&(u.s=[...l,1]);else if(u&&u.c&&u.c.k)Array.isArray(u.c.k)&&typeof u.c.k[0]!="number"?s(c,l,u.c.k):c[0]===wc(u.c.k[0])&&c[1]===wc(u.c.k[1])&&c[2]===wc(u.c.k[2])&&(u.c.k=l);else for(const d in u)typeof u[d]=="object"&&s(c,l,u[d]);return u}return s(o,a,r?ls(n):n)},Vo=(e,t)=>e.reduce((n,[r,o])=>VI(r,o,n),t),BI=b("div").withConfig({displayName:"AnimatedCheck__AnimationContainer",componentId:"sc-1ixhrx1-0"})(["height:250px;width:250px;margin:-32px;.lines,.green-c-1,.green-c-2,.white-c-1,.white-c-2,.check-c{transform-origin:50% 50%;}.white-c-1{transform:scale(0);animation:reset 0.6s 0.2s forwards;fill:",";}.green-c-1{transform:scale(0);opacity:0.4;animation:reset 0.8s forwards;fill:",";}@keyframes reset{to{transform:initial;}}.lines{transform:scale(0);animation:lines 0.8s 0.4s forwards;}.lines path{fill:",";}@keyframes lines{to{transform:scale(1.5);}}.white-c-2{transform:scale(0);animation:reset 0.6s 1s forwards;fill:",";}.green-c-2{transform:scale(0);opacity:0.4;animation:reset 0.8s 0.8s forwards;fill:",";}.check-c{transform:scale(0);animation:check-c 0.3s 0.7s forwards ease-in-out;fill:",";}@keyframes check-c{0%{transform:scale(0);opacity:0;}70%{transform:scale(1.3);}100%{transform:scale(1);}}.check{stroke-dasharray:250;stroke-dashoffset:250;animation:check 0.2s 1s forwards ease-in-out;}@keyframes check{to{stroke-dashoffset:0;}}"],e=>{var t;return(t=e.$backgroundColor)!=null?t:e.theme.colorModalBackground},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$backgroundColor)!=null?t:e.theme.colorModalBackground},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess},e=>{var t;return(t=e.$primaryColor)!=null?t:e.theme.colorSuccess});function _f({$primaryColor:e,$backgroundColor:t}){return i.jsx(BI,{$primaryColor:e,$backgroundColor:t,children:i.jsxs("svg",{role:"img",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1000 1000",children:[i.jsx("circle",{className:"green-c-1",fill:"#6ABF39",cx:"500",cy:"500",r:"496.3"}),i.jsx("circle",{className:"white-c-1",fill:"#FFFFFF",cx:"500",cy:"500",r:"500.0"}),i.jsx("circle",{className:"green-c-2",fill:"#6ABF39",cx:"500",cy:"500",r:"496.3"}),i.jsx("circle",{className:"white-c-2",fill:"#FFFFFF",cx:"500",cy:"500",r:"500.0"}),i.jsx("circle",{className:"check-c",fill:"#6ABF39",cx:"500",cy:"500",r:"272.4"}),i.jsx("clipPath",{id:"lines_mask",children:i.jsx("circle",{className:"lines-mask",fill:"#FFFFFF",cx:"500",cy:"500",r:"496.3"})}),i.jsx("g",{clipPath:"url(#lines_mask)",children:i.jsxs("g",{className:"lines",children:[i.jsx("path",{fill:"#6ABF39",d:"M268.6,261.2l-100.8-104l-10.6,10.6l104,100.8C263.7,266.1,266.1,263.7,268.6,261.2z"}),i.jsx("path",{fill:"#6ABF39",d:"M167.5,500c0-1.7,0-3.5,0.1-5.2l-144.8-2.3v14.9l144.8-2.3C167.5,503.5,167.5,501.7,167.5,500z"}),i.jsx("path",{fill:"#6ABF39",d:"M261.2,731.4l-104,100.8l10.6,10.6l100.8-104C266.1,736.3,263.7,733.9,261.2,731.4z"}),i.jsx("path",{fill:"#6ABF39",d:"M500,832.5c-1.7,0-3.5,0-5.2-0.1l-2.3,144.8h14.9l-2.3-144.8C503.5,832.5,501.7,832.5,500,832.5z"}),i.jsx("path",{fill:"#6ABF39",d:"M738.8,731.4c-2.4,2.5-4.9,4.9-7.4,7.4l100.8,104l10.6-10.6L738.8,731.4z"}),i.jsx("path",{fill:"#6ABF39",d:"M832.4,494.8c0,1.7,0.1,3.5,0.1,5.2s0,3.5-0.1,5.2l144.8,2.3v-14.9L832.4,494.8z"}),i.jsx("path",{fill:"#6ABF39",d:"M738.8,268.6l104-100.8l-10.6-10.6l-100.8,104C733.9,263.7,736.3,266.1,738.8,268.6z"}),i.jsx("path",{fill:"#6ABF39",d:"M500,167.5c1.7,0,3.5,0,5.2,0.1l2.3-144.8h-14.9l2.3,144.8C496.5,167.5,498.3,167.5,500,167.5z"})]})}),i.jsx("polyline",{className:"check",fill:"none",stroke:"#FFFFFF",strokeWidth:"30",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",points:"416.5,520 470.1,573.7 583.9,459.9 "})]})})}const UI=b.div.withConfig({displayName:"CenteredPictograph__Container",componentId:"sc-ti65m9-0"})(["display:flex;justify-content:",";position:relative;"," :empty{margin-bottom:0;}svg{"," ","}"],({justify:e})=>e,({marginTop:e,marginBottom:t,marginLeft:n,marginRight:r})=>$(["margin-top:",";margin-bottom:",";margin-left:",";margin-right:",";"],e,t!=null?t:S.Spacing[5],n,r),({height:e})=>e!=null&&`height: ${e}px;`,({width:e})=>e!=null&&`width: ${e}px;`),Ye=({height:e=100,width:t=100,justify:n=Aa.Center,children:r,title:o,"aria-label":a,role:s="img",...c})=>i.jsx(UI,{height:e,width:t,justify:n,title:o,"aria-label":a,role:s,...c,children:r}),pe=b("div").withConfig({displayName:"ThemedSvg",componentId:"sc-lrejct-0"})(["circle[stroke]:not(.no-theme),rect[stroke]:not(.no-theme),path[stroke]:not(.no-theme),g[stroke]:not(.no-theme){stroke:",";vector-effect:",";}circle[fill]:not([fill='none']):not(.no-theme),rect[fill]:not([fill='none']):not(.no-theme),path[fill]:not([fill='none']):not(.no-theme),g[fill]:not([fill='none']):not(.no-theme){fill:",";}circle[fill].icon-color-highlight,rect[fill].icon-color-highlight,path[fill].icon-color-highlight,g[fill].icon-color-highlight{fill:"," !important;}circle[fill].icon-color-background,rect[fill].icon-color-background,path[fill].icon-color-background,g[fill].icon-color-background{fill:"," !important;}circle[fill].icon-color-stroke,rect[fill].icon-color-stroke,path[fill].icon-color-stroke,g[fill].icon-color-stroke{fill:"," !important;}line-height:0;"],({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke,({vectorEffect:e})=>e!=null?e:"non-scaling-stroke",({$primaryColor:e,theme:t})=>e!=null?e:t.iconColorPrimary,({$highlightColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorBackground,({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke),HI=b.div.withConfig({displayName:"ImageLocal__AnimatedCheckContainer",componentId:"sc-aey58n-0"})(["display:flex;flex-direction:column;align-items:",";margin-top:calc("," + ",");margin-bottom:calc("," + ",");"],({justify:e})=>e!=null?e:"center",({marginTop:e})=>e!=null?e:"0",S.Spacing[6],({marginBottom:e})=>e!=null?e:"0",S.Spacing[6]),Bo=b.div.withConfig({displayName:"ImageLocal__FailureReasonPictograph",componentId:"sc-aey58n-1"})(["display:flex;flex-direction:column;align-items:",";"],({justify:e})=>e!=null?e:"center");ue.OptionFlagIcon,ue.OptionGlobeIcon,ue.OptionHomeIcon,ue.OptionIdIcon,ue.OptionIdDocumentIcon,ue.OptionUserIcon,ue.OptionPhoneIcon;const Rf={[ue.AnimatedCheck]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.DocumentStartHero]:{width:{value:100,unit:"%"},height:{value:184,unit:"px"}},[ue.FailedIcon]:{width:{value:140,unit:"px"},height:{value:120,unit:"px"}},[ue.StartHero]:{width:{value:240,unit:"px"},height:{value:177,unit:"px"}},[ue.FailureDefaultIcon]:{width:{value:100,unit:"px"},height:{value:100,unit:"px"}},[ue.FailureDocumentIcon]:{width:{value:149,unit:"px"},height:{value:120,unit:"px"}},[ue.FailureSelfieIcon]:{width:{value:103,unit:"px"},height:{value:111,unit:"px"}},[ue.IdBackIcon]:{width:{value:149,unit:"px"},height:{value:100,unit:"px"}},[ue.IdFrontIcon]:{width:{value:149,unit:"px"},height:{value:100,unit:"px"}},[ue.OptionFlagIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionGlobeIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionHomeIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionIdIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionIdDocumentIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionUserIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionPhoneIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionCheckIcon]:{width:{value:32,unit:"px"},height:{value:32,unit:"px"}},[ue.OptionChevronIcon]:{width:{value:8,unit:"px"},height:{value:14,unit:"px"}},[ue.CreatePersonaPasskeyRegistrationHero]:{width:{value:181,unit:"px"},height:{value:181,unit:"px"}},[ue.CreatePersonaCtaCardIcon]:{width:{value:41,unit:"px"},height:{value:44,unit:"px"}},[ue.CreatePersonaPasskeyRegistrationSpeedIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.CreatePersonaPasskeyRegistrationShieldIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.CreatePersonaPasskeyRegistrationFingerprintIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.CreatePersonaSuccessHero]:{width:{value:354,unit:"px"},height:{value:208,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationPersonaLogo]:{width:{value:128,unit:"px"},height:{value:128,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationHero]:{width:{value:181,unit:"px"},height:{value:181,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationAddressIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationIdIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationNameIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.VerifyWithPersonaPasskeyAuthenticationSelfieIcon]:{width:{value:48,unit:"px"},height:{value:48,unit:"px"}},[ue.GovernmentIdNfcScanBackClosed]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.GovernmentIdNfcScanFrontClosed]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.GovernmentIdNfcScanPhotoPage]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.GovernmentIdNfcScanIdCard]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.GovernmentIdNfcScanBackThenFront]:{width:{value:250,unit:"px"},height:{value:250,unit:"px"}},[ue.StepperIncompleteIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ue.StepperCurrentIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ue.StepperErroredIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ue.StepperCompletedIcon]:{width:{value:20,unit:"px"},height:{value:20,unit:"px"}},[ue.StepperConnectorIcon]:{width:{value:10,unit:"px"},height:{value:32,unit:"px"}}},qI=({component:e,inquiry:t})=>{var T,E,V,D,O,U,M,Y,F,H,q,W,X,oe,se,Se,Ee,he,de,Ie,ye,je,ce,Q,K,be,Oe;const{attributes:{"image-key":n,hidden:r}}=e;if(It(e.name,t==null?void 0:t.attributes["next-step"].name)(r))return null;const s=k((E=(T=e.styles)==null?void 0:T.height)==null?void 0:E.base.base),c=k((D=(V=e.styles)==null?void 0:V.width)==null?void 0:D.base.base),l=k((M=(U=(O=e.styles)==null?void 0:O.margin)==null?void 0:U.base.base)==null?void 0:M.top),u=k((H=(F=(Y=e.styles)==null?void 0:Y.margin)==null?void 0:F.base.base)==null?void 0:H.bottom),d=k((X=(W=(q=e.styles)==null?void 0:q.margin)==null?void 0:W.base.base)==null?void 0:X.left),m=k((Se=(se=(oe=e.styles)==null?void 0:oe.margin)==null?void 0:se.base.base)==null?void 0:Se.right),h=(Ee=e.styles)==null?void 0:Ee.justify.base.base,p=A((Ie=(de=(he=e.styles)==null?void 0:he["fill-color"])==null?void 0:de.base)==null?void 0:Ie.base),g=A((je=(ye=e.styles)==null?void 0:ye["fill-color"])==null?void 0:je.background.base),C=A((Q=(ce=e.styles)==null?void 0:ce["fill-color"])==null?void 0:Q.highlight.base),I=A((Oe=(be=(K=e.styles)==null?void 0:K["stroke-color"])==null?void 0:be.base)==null?void 0:Oe.base),v={$primaryColor:p,$backgroundColor:g,$highlightColor:C,$strokeColor:I},x=Rf[n],R={marginTop:l,marginBottom:u,marginLeft:d,marginRight:m},_=[["#290087",I],["#322B7E",I],["#CBB2FF",p],["#F1E9FF",C],["#FFFFFF",g]].filter(ze=>ze[1]!=null&&ze[0]!==ze[1].toUpperCase());switch(n){case ue.AnimatedCheck:return i.jsx(HI,{role:"img","aria-label":"Checkmark icon","data-test":"image-local__animated-check",marginTop:l,marginBottom:u,justify:h,style:{marginLeft:d,marginRight:m},children:i.jsx(_f,{$primaryColor:p,$backgroundColor:g})});case ue.FailedIcon:return i.jsx(Ye,{role:"img","aria-label":"Failed icon",justify:h,...R,children:i.jsx(pe,{...v,children:i.jsx(Vl,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.StartHero:return i.jsx(Ye,{role:"img","aria-label":"Start hero image",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(N1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.FailureDefaultIcon:return i.jsx(Bo,{role:"img","aria-label":"Failed icon",justify:h,children:i.jsx(pe,{...v,children:i.jsx(k1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),marginTop:l,marginBottom:u,marginLeft:d,marginRight:m}})})});case ue.FailureDocumentIcon:return i.jsx(Bo,{role:"img","aria-label":"Document icon",justify:h,children:i.jsx(pe,{...v,children:i.jsx(Uh,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),marginTop:l,marginBottom:u,marginLeft:d,marginRight:m}})})});case ue.FailureSelfieIcon:return i.jsx(Bo,{role:"img","aria-label":"Selfie icon",justify:h,children:i.jsx(pe,{...v,children:i.jsx(E1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),marginTop:l,marginBottom:u,marginLeft:d,marginRight:m}})})});case ue.IdBackIcon:return i.jsx(Bo,{role:"img","aria-label":"ID back icon",justify:h,children:i.jsx(pe,{...v,children:i.jsx(T1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),marginTop:l,marginBottom:u,marginLeft:d,marginRight:m}})})});case ue.IdFrontIcon:return i.jsx(Bo,{role:"img","aria-label":"ID front icon",justify:h,children:i.jsx(pe,{...v,children:i.jsx(Bh,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),marginTop:l,marginBottom:u,marginLeft:d,marginRight:m}})})});case ue.DocumentStartHero:return i.jsx(Ye,{height:null,width:null,role:null,"aria-label":null,justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,style:{width:"100%"},children:i.jsx(gn,{backgroundColor:C,children:i.jsx(Ml,{height:80,width:"100%"})})})});case ue.OptionFlagIcon:return i.jsx(Ye,{role:"img","aria-label":"Flag option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(Vh,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionGlobeIcon:return i.jsx(Ye,{role:"img","aria-label":"Globe option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(Fl,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionHomeIcon:return i.jsx(Ye,{role:"img","aria-label":"Home option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(Ll,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionIdIcon:return i.jsx(Ye,{role:"img","aria-label":"ID option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(Ol,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionPhoneIcon:return i.jsx(Ye,{role:"img","aria-label":"Phone option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(A1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionIdDocumentIcon:return i.jsx(Ye,{role:"img","aria-label":"Document ID option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(R1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionUserIcon:return i.jsx(Ye,{role:"img","aria-label":"User option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(_1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionCheckIcon:return i.jsx(Ye,{role:"img","aria-label":"Check option icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx(y1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.OptionChevronIcon:return i.jsx(Ye,{role:"img","aria-label":"Chevron icon",justify:h,...R,children:i.jsx(pe,{vectorEffect:"initial",...v,children:i.jsx($l,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})})});case ue.CreatePersonaCtaCardIcon:return i.jsx(pe,{role:"img","aria-label":"Create Persona card icon",vectorEffect:"initial",...v,children:i.jsx(w1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.CreatePersonaPasskeyRegistrationHero:return i.jsx(qn,{role:"img",animationData:S1,"aria-label":"Create Persona passkey registration hero image",loop:!0,style:{width:`min(${c!=null?c:k(x.width)}, 1000px)`,height:`min(${s!=null?s:k(x.height)}, 768px)`}});case ue.CreatePersonaPasskeyRegistrationSpeedIcon:return i.jsx(pe,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...v,children:i.jsx(I1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.CreatePersonaPasskeyRegistrationShieldIcon:return i.jsx(pe,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...v,children:i.jsx(v1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.CreatePersonaPasskeyRegistrationFingerprintIcon:return i.jsx(pe,{role:"img","aria-label":"Create Persona passkey registration icon",vectorEffect:"initial",...v,children:i.jsx(x1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.CreatePersonaSuccessHero:return i.jsx(qn,{role:"img","aria-label":"Create Persona success hero image",animationData:C1,loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height),maxHeight:"1000px",maxWidth:"768px"}});case ue.VerifyWithPersonaPasskeyAuthenticationHero:return i.jsx(qn,{role:"img",animationData:b1,"aria-label":"Verify with Persona passkey authentication hero image",loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.VerifyWithPersonaPasskeyAuthenticationPersonaLogo:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication logo",vectorEffect:"initial",...v,children:i.jsx(g1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.VerifyWithPersonaPasskeyAuthenticationAddressIcon:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication address icon",vectorEffect:"initial",...v,children:i.jsx(f1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.VerifyWithPersonaPasskeyAuthenticationIdIcon:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication ID icon",vectorEffect:"initial",...v,children:i.jsx(p1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.VerifyWithPersonaPasskeyAuthenticationIndividualAttributesIcon:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication individual attributes icon",vectorEffect:"initial",...v,children:i.jsx(h1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.VerifyWithPersonaPasskeyAuthenticationNameIcon:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication name icon",vectorEffect:"initial",...v,children:i.jsx(m1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.VerifyWithPersonaPasskeyAuthenticationSelfieIcon:return i.jsx(pe,{role:"img","aria-label":"Verify with Persona passkey authentication selfie icon",vectorEffect:"initial",...v,children:i.jsx(u1,{style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}})});case ue.GovernmentIdNfcScanBackClosed:return i.jsx(qn,{role:"img","aria-label":"Government Id Nfc scan back of closed id image",animationData:Vo(_,L1),loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.GovernmentIdNfcScanFrontClosed:return i.jsx(qn,{role:"img","aria-label":"Government Id Nfc scan front of closed id image",animationData:Vo(_,O1),loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.GovernmentIdNfcScanPhotoPage:return i.jsx(qn,{role:"img","aria-label":"Government Id Nfc scan photo page image",animationData:Vo(_,D1),loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.GovernmentIdNfcScanIdCard:return i.jsx(qn,{role:"img","aria-label":"Government Id Nfc scan id card image",animationData:Vo(_,P1),loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.GovernmentIdNfcScanBackThenFront:return i.jsx(qn,{role:"img","aria-label":"Government Id Nfc scan back then front of id image",animationData:Vo(_,j1),loop:!0,style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.StepperIncompleteIcon:return i.jsx(d1,{role:"img",style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.StepperCurrentIcon:return i.jsx(l1,{role:"img",style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.StepperCompletedIcon:return i.jsx(c1,{role:"img",style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.StepperErroredIcon:return i.jsx(s1,{role:"img",style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});case ue.StepperConnectorIcon:return i.jsx(a1,{role:"img",style:{width:c!=null?c:k(x.width),height:s!=null?s:k(x.height)}});default:return null}},Ua={};function $I({contentType:e,normalizedPathname:t,src:n}){return e==="image/png"||e==="image/gif"||e==="image/jpeg"||e==="image/webp"||t!=null&&t.endsWith(".png")||t!=null&&t.endsWith(".gif")||t!=null&&t.endsWith(".jpg")||t!=null&&t.endsWith(".jpeg")||t!=null&&t.endsWith(".webp")||n!=null&&n.startsWith("data:image/png;")||n!=null&&n.startsWith("data:image/gif;")||n!=null&&n.startsWith("data:image/jpeg;")||n!=null&&n.startsWith("data:image/webp;")?"image":e==="image/svg+xml"||t!=null&&t.endsWith(".svg")||n!=null&&n.startsWith("data:image/svg+xml")?"svg":e==="application/json"?"json":null}const Af=f.memo(function({contentType:t,src:n,styles:r,"data-test":o="image",environment:a,alt:s,"aria-label":c,...l}){var R,_,T,E,V,D,O,U;const[u,{disable:d}]=rt(!0),[m,{enable:h}]=rt(!1);let p;try{p=new URL(n).pathname}catch{p=n}const[g,C]=f.useState(Ua[p]),I=$I({contentType:t,normalizedPathname:p==null?void 0:p.toLowerCase(),src:n}),v=n==null?void 0:n.toLowerCase().startsWith("data:");if(f.useEffect(()=>{var Y;if((a?a==="production":!0)&&!(n!=null&&n.startsWith("https://files.withpersona.com/")||n!=null&&n.startsWith("https://files.withpersona-staging.com/"))){d();return}switch(I){case"image":if(v||n==null)return;ci.get(n,{responseType:"blob","axios-retry":{retryDelay:()=>0,retryCondition:F=>ji.isNetworkOrIdempotentRequestError(F)||F.code==="ECONNABORTED"}}).then(({data:F})=>{var q;const H=URL.createObjectURL(F);Ua[p]=H,C(H),d(),(q=l.onLoad)==null||q.call(l)}).catch(F=>{var H;h(),d(),(H=l.onError)==null||H.call(l),ar({error:F,method:"GET",uri:n})}).catch(F=>{if(!(F instanceof Ct))throw F});break;case"svg":ci.get(n).then(({data:F})=>{var W;const H=WI(F,GI(r)),q=`data:image/svg+xml;base64,${btoa(H)}`;Ua[p]=q,C(q),d(),(W=l.onLoad)==null||W.call(l)}).catch(F=>{var H;d(),(H=l.onError)==null||H.call(l),ar({error:F,method:"GET",uri:n})}).catch(F=>{if(!(F instanceof Ct))throw F});break;case"json":ci.get(n).then(({data:F})=>{var H;(g==null||(F==null?void 0:F.nm)!==(g==null?void 0:g.nm))&&(Ua[p]=F,C(F)),d(),(H=l.onLoad)==null||H.call(l)}).catch(F=>{var H;d(),(H=l.onError)==null||H.call(l),ar({error:F,method:"GET",uri:n})}).catch(F=>{if(!(F instanceof Ct))throw F});break;default:d(),(Y=l.onError)==null||Y.call(l);break}},[n,I]),!n)return null;const x=i.jsx("div",{"aria-label":u?"loading image":"no image","data-test":`${o}__${u?"loading":"empty"}`,className:l.className});switch(I){case"image":return v||m?i.jsx("img",{...l,src:n,"data-test":o,alt:s,"aria-label":c}):g!=null?i.jsx("img",{...l,src:g,"data-test":o,alt:s,"aria-label":c}):x;case"svg":return g!=null?i.jsx("img",{...l,src:g,"data-test":o,alt:s,"aria-label":c}):x;case"json":return g!=null?i.jsx(qn,{role:"img",alt:s,"aria-label":c,animationData:g,style:{height:(E=(T=k((_=(R=r==null?void 0:r.height)==null?void 0:R.base)==null?void 0:_.base))!=null?T:l.height)!=null?E:"auto",width:(U=(O=k((D=(V=r==null?void 0:r.width)==null?void 0:V.base)==null?void 0:D.base))!=null?O:l.width)!=null?U:"auto",maxWidth:"min(100%, 100vw)"},className:l.className}):x;default:return x}}),nr={fillColor:"{{ fill_color }}",backgroundColorColor:"{{ background_color }}",highlightColor:"{{ highlight_color }}",strokeColor:"{{ stroke_color }}"};function GI(e){var t,n,r,o,a,s,c,l,u,d,m,h,p,g,C,I;return{fillColor:A((n=(t=e==null?void 0:e["fill-color"])==null?void 0:t.fill)==null?void 0:n.base),backgroundColor:A((o=(r=e==null?void 0:e["fill-color"])==null?void 0:r.background)==null?void 0:o.base),highlightColor:A((s=(a=e==null?void 0:e["fill-color"])==null?void 0:a.highlight)==null?void 0:s.base),strokeColor:A((l=(c=e==null?void 0:e["stroke-color"])==null?void 0:c.stroke)==null?void 0:l.base),originalFillColor:A((d=(u=e==null?void 0:e["fill-color"])==null?void 0:u["original-fill"])==null?void 0:d.base),originalBackgroundColor:A((h=(m=e==null?void 0:e["fill-color"])==null?void 0:m["original-background"])==null?void 0:h.base),originalHighlightColor:A((g=(p=e==null?void 0:e["fill-color"])==null?void 0:p["original-highlight"])==null?void 0:g.base),originalStrokeColor:A((I=(C=e==null?void 0:e["stroke-color"])==null?void 0:C["original-stroke"])==null?void 0:I.base)}}function WI(e,t){var c,l,u,d;if(Object.values(t).every(m=>m==null))return e;const n=mu((m,h)=>h==null,{[(c=t.originalFillColor)==null?void 0:c.toUpperCase()]:nr.fillColor,[(l=t.originalBackgroundColor)==null?void 0:l.toUpperCase()]:nr.backgroundColorColor,[(u=t.originalHighlightColor)==null?void 0:u.toUpperCase()]:nr.highlightColor,[(d=t.originalStrokeColor)==null?void 0:d.toUpperCase()]:nr.strokeColor});let r=e;if(Object.keys(n).some(m=>m!=null)){const m=new RegExp(Object.keys(n).join("|"),"gi");r=e.replace(m,h=>n[h.toUpperCase()])}const o=mu((m,h)=>m==null,{[nr.fillColor]:t.fillColor,[nr.backgroundColorColor]:t.backgroundColor,[nr.highlightColor]:t.highlightColor,[nr.strokeColor]:t.strokeColor}),a=new RegExp(Object.keys(o).join("|"),"g");return r.replace(a,m=>o[m])}const ku={width:{unit:"%",value:100},height:{unit:"%",value:100}},YI=b(Af).withConfig({displayName:"ImageRemote__StyledCachedImage",componentId:"sc-yyqavh-0"})(({styles:e,height:t,width:n})=>{var r,o,a,s,c,l;return{display:"block",objectFit:"contain",height:(r=k(e==null?void 0:e.height.base.base))!=null?r:t,width:(o=k(e==null?void 0:e.width.base.base))!=null?o:n,maxWidth:"min(100%, 100vw)",alignSelf:e==null?void 0:e.justify.base.base,marginTop:k((a=e==null?void 0:e.margin.base.base)==null?void 0:a.top),marginBottom:k((s=e==null?void 0:e.margin.base.base)==null?void 0:s.bottom),marginLeft:k((c=e==null?void 0:e.margin.base.base)==null?void 0:c.left),marginRight:k((l=e==null?void 0:e.margin.base.base)==null?void 0:l.right)}}),Tf=({component:e,inquiry:t,onLoad:n,onError:r,environment:o})=>{const{attributes:{url:a,height:s,width:c,"content-type":l,hidden:u,alt:d}}=e;return It(e.name,t==null?void 0:t.attributes["next-step"].name)(u)?null:i.jsx(YI,{onLoad:n,onError:r,src:a,contentType:l,"data-test":e.type,height:s!=null?s:k(ku.height),width:c!=null?c:k(ku.width),styles:e.styles,environment:o,alt:d||"","aria-label":d||void 0,role:d?void 0:"presentation"})},zI=e=>({mainText:e.main_text,secondaryText:e.secondary_text}),yi=(...e)=>(...t)=>{e.forEach(n=>n&&n(...t))},Kd=class Kd extends f.Component{constructor(t){super(t),this.init=()=>{if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");this.autocompleteService=new window.google.maps.places.AutocompleteService,this.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,this.setState(n=>n.ready?null:{ready:!0})},this.autocompleteCallback=(n,r)=>{var a,s,c;if(this.setState({loading:!1}),r!==this.autocompleteOK){(s=(a=this.props).onError)==null||s.call(a,r,this.clearSuggestions);return}const{highlightFirstSuggestion:o}=this.props;this.setState({suggestions:(c=n==null?void 0:n.map((l,u)=>({description:l.description,placeId:l.place_id,active:!!(o&&u===0),index:u,formattedSuggestion:zI(l.structured_formatting),matchedSubstrings:l.matched_substrings,terms:l.terms,types:l.types})))!=null?c:[],hideSuggestions:!1})},this.fetchPredictions=()=>{var r;const{value:n}=this.props;n!=null&&n.length&&(this.setState({loading:!0}),(r=this.autocompleteService)==null||r.getPlacePredictions({...this.props.searchOptions,input:n},this.autocompleteCallback))},this.clearSuggestions=()=>{this.setState({suggestions:[]})},this.clearActive=()=>{this.setState({suggestions:this.state.suggestions.map(n=>({...n,active:!1}))})},this.hideSuggestions=()=>{this.setState({...this.state,hideSuggestions:!0})},this.handleSelect=(n,r,o)=>{var a,s;this.hideSuggestions(),this.props.onSelect?this.props.onSelect(n,r,o):(s=(a=this.props).onChange)==null||s.call(a,n)},this.getActiveSuggestion=()=>this.state.suggestions.find(n=>n.active),this.selectActiveAtIndex=n=>{var o,a,s;const r=(o=this.state.suggestions.find(c=>c.index===n))==null?void 0:o.description;this.setActiveAtIndex(n),(s=(a=this.props).onChange)==null||s.call(a,r)},this.selectUserInputValue=()=>{var n,r;this.clearActive(),(r=(n=this.props).onChange)==null||r.call(n,this.state.userInputValue)},this.handleEnterKey=()=>{const n=this.getActiveSuggestion();n==null?this.handleSelect(this.props.value,null,null):this.handleSelect(n.description,n.placeId,n)},this.handleDownKey=()=>{if(this.state.suggestions.length===0)return;const n=this.getActiveSuggestion();n==null?this.selectActiveAtIndex(0):n.index===this.state.suggestions.length-1?this.selectUserInputValue():this.selectActiveAtIndex(n.index+1)},this.handleUpKey=()=>{if(this.state.suggestions.length===0)return;const n=this.getActiveSuggestion();n==null?this.selectActiveAtIndex(this.state.suggestions.length-1):n.index===0?this.selectUserInputValue():this.selectActiveAtIndex(n.index-1)},this.handleInputKeyDown=n=>{switch(n.key){case"Enter":n.preventDefault(),this.handleEnterKey();break;case"ArrowDown":n.preventDefault(),this.handleDownKey();break;case"ArrowUp":n.preventDefault(),this.handleUpKey();break;case"Escape":this.hideSuggestions();break}},this.setActiveAtIndex=n=>{this.setState({suggestions:this.state.suggestions.map((r,o)=>o===n?{...r,active:!0}:{...r,active:!1})})},this.handleInputChange=n=>{var o,a;const{value:r}=n.target;if((a=(o=this.props).onChange)==null||a.call(o,r),this.setState({userInputValue:r}),!r){this.clearSuggestions();return}this.props.shouldFetchSuggestions&&this.debouncedFetchPredictions()},this.handleInputOnBlur=()=>{this.mousedownOnSuggestion||this.hideSuggestions()},this.handleInputOnFocus=()=>{this.setState({...this.state,hideSuggestions:!1})},this.getActiveSuggestionId=()=>{const n=this.getActiveSuggestion();return n?`PlacesAutocomplete__suggestion-${n.placeId}`:void 0},this.getIsExpanded=()=>this.state.suggestions.length>0,this.getInputProps=n=>({...{type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":this.getIsExpanded(),"aria-activedescendant":this.getActiveSuggestionId(),disabled:!this.state.ready},...n,onKeyDown:yi(this.handleInputKeyDown,n==null?void 0:n.onKeyDown),onBlur:yi(this.handleInputOnBlur,n==null?void 0:n.onBlur),onFocus:yi(this.handleInputOnFocus,n==null?void 0:n.onFocus),value:this.props.value,onChange:o=>{this.handleInputChange(o)}}),this.getSuggestionItemProps=(n,r={})=>{const o=this.handleSuggestionMouseEnter.bind(this,n.index),a=this.handleSuggestionClick.bind(this,n);return{...r,key:n.placeId,id:this.getActiveSuggestionId(),role:"option",onMouseEnter:yi(o,r.onMouseEnter),onMouseLeave:yi(this.handleSuggestionMouseLeave,r.onMouseLeave),onMouseDown:yi(this.handleSuggestionMouseDown,r.onMouseDown),onMouseUp:yi(this.handleSuggestionMouseUp,r.onMouseUp),onTouchStart:yi(this.handleSuggestionTouchStart,r.onTouchStart),onTouchEnd:yi(this.handleSuggestionMouseUp,r.onTouchEnd),onClick:yi(a,r.onClick)}},this.handleSuggestionMouseEnter=n=>{this.setActiveAtIndex(n)},this.handleSuggestionMouseLeave=()=>{this.mousedownOnSuggestion=!1,this.clearActive()},this.handleSuggestionMouseDown=n=>{n.preventDefault(),this.mousedownOnSuggestion=!0},this.handleSuggestionTouchStart=()=>{this.mousedownOnSuggestion=!0},this.handleSuggestionMouseUp=()=>{this.mousedownOnSuggestion=!1},this.handleSuggestionClick=(n,r)=>{r&&r.preventDefault&&r.preventDefault();const{description:o,placeId:a}=n;this.handleSelect(o,a,n),setTimeout(()=>{this.mousedownOnSuggestion=!1})},this.state={loading:!1,suggestions:[],userInputValue:t.value,ready:!t.googleCallbackName,hideSuggestions:!0},this.debouncedFetchPredictions=CC(this.fetchPredictions,t.debounce)}componentDidMount(){const{googleCallbackName:t}=this.props;t?window.google&&window.google.maps&&window.google.maps.places?this.init():window[t]=this.init:this.init()}componentWillUnmount(){const{googleCallbackName:t}=this.props;t&&window[t]&&delete window[t]}shouldComponentUpdate(t,n){let r=!1;return Object.keys(this.props).forEach(s=>{this.props[s]!==t[s]&&(r=!0)}),Object.keys(this.state).forEach(s=>{this.state[s]!==n[s]&&s!=="userInputValue"&&(r=!0)}),r}render(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.hideSuggestions?[]:this.state.suggestions})}};Kd.defaultProps={onError:(t,n)=>console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,t),searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};let xs=Kd;const Ef=e=>{const t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((r,o)=>{t.geocode({placeId:e},(a,s)=>{s!==n||a==null?o(s):r(a)})})},pl=gt(S.Color.CoreSlate700).fade(.9).rgb().string();function Eo(e,t){var s,c,l;const n=t.colorPrimary,r=t.borderRadius?t.borderRadius:dn.base,o=/(\d+)px/.exec(r);let a=r;return o&&parseInt(o[1],10)>4&&(a=dn.rounded),$(["font-family:",";border-radius:",";border-style:solid;border-width:1px;box-sizing:border-box;display:block;min-width:0;padding:",";width:100%;height:",";font-size:",";font-weight:",";line-height:",";outline:0 !important;box-shadow:0 0 0 0 ",";transition:",";",";&::placeholder{font-weight:",";}&:focus-within{background-color:",";border-color:",";color:",";box-shadow:0 0 0 1px ",";&::placeholder{color:",";opacity:0.6;}}&:disabled{background-color:",";border-color:",";color:",";-webkit-text-fill-color:",";&::placeholder{color:",";-webkit-text-fill-color:",";opacity:1;}}"],Ht(t.fontFamily),a,L.inputPadding,Ji.input,$t.input,an.regular,$n.input,S.Color.CorePurple900,ya.fast,e.hasError?$(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.7;}"],t.colorError,gt(t.colorError).fade(.97).rgb().string(),t.colorError,t.colorError):e.hasWarning?$(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.7;}"],t.colorWarning,gt(t.colorWarning).fade(.97).rgb().string(),t.colorWarning,t.colorWarning):$(["border-color:",";background-color:",";color:",";&::placeholder{color:",";opacity:0.6;}"],t.colorInputBorder,t.colorInputBackground,(s=t.colorFont)!=null?s:S.Color.CoreSlate1000,(c=t.colorFont)!=null?c:S.Color.CoreSlate1000),an.regular,t.colorInputBackground,n,t.colorFont?t.colorFont:S.Color.CoreSlate1000,n,(l=t.colorFont)!=null?l:S.Color.CoreSlate1000,pl,S.Color.CoreSlate200,S.Color.CoreSlate900,S.Color.CoreSlate900,S.Color.CoreSlate800,S.Color.CoreSlate800)}const Bi=$(["margin-bottom:",";",""],S.Spacing[4],j.isDashboardFLE&&$(["pointer-events:visible;"])),hr=e=>{var t,n;return $([""," margin:",";"],Bi,Vp((n=(t=e==null?void 0:e.margin)==null?void 0:t.base)==null?void 0:n.base))};$(["margin-bottom:",";padding-top:",";"],S.Spacing[2],S.Spacing[2]);const ko=$(["margin-bottom:",";position:relative;padding-top:",";"],S.Spacing[2],S.Spacing[4]),No=$(["color:",";font-size:",";margin-top:",";"],({theme:e})=>e.colorError,({theme:e})=>e.fontSizeSmall,S.Spacing[2]),KI=e=>{var t,n,r,o,a,s,c,l;return $([""," color:",";font-family:",";font-size:",";font-weight:",";"],No,A((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.error)==null?void 0:n.base),Ht((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.error)==null?void 0:o.base),k((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.error)==null?void 0:s.base),Fn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.error)==null?void 0:l.base))},Gs=$(["label,legend{",";font-weight:500;font-family:inherit;margin-bottom:",";transition-duration:",";}&:focus-within label{color:",";}"],Di.sm,S.Spacing[2],et.Fast,({theme:e})=>e.colorPrimary),Mn=e=>{var t,n,r,o,a,s,c,l,u,d;return $([""," label,legend{color:",";font-family:",";font-size:",";font-weight:",";}&:focus-within label{color:",";}"],Gs,A((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.label)==null?void 0:n.base),Ht((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.label)==null?void 0:o.base),k((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.label)==null?void 0:s.base),Fn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.label)==null?void 0:l.base),A((d=(u=e==null?void 0:e["text-color"])==null?void 0:u.label)==null?void 0:d.focused))},Ha=e=>{var t,n,r,o,a,s,c,l,u,d,m,h,p,g,C,I,v,x,R,_;return{BASE:$(["&::placeholder{color:",";font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";opacity:1;}"],A((n=(t=e==null?void 0:e["text-color"])==null?void 0:t.placeholder)==null?void 0:n.base),Ht((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.placeholder)==null?void 0:o.base),k((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.placeholder)==null?void 0:s.base),Fn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.placeholder)==null?void 0:l.base),k((d=(u=e==null?void 0:e["line-height"])==null?void 0:u.placeholder)==null?void 0:d.base),k((h=(m=e==null?void 0:e["letter-spacing"])==null?void 0:m.placeholder)==null?void 0:h.base)),ERRORED:$(["&::placeholder{color:",";opacity:1;}"],A((g=(p=e==null?void 0:e["text-color"])==null?void 0:p.placeholder)==null?void 0:g.errored)),FOCUSED:$(["&::placeholder{color:",";opacity:1;}"],A((I=(C=e==null?void 0:e["text-color"])==null?void 0:C.placeholder)==null?void 0:I.focused)),DISABLED:$(["&::placeholder{color:",";-webkit-text-fill-color:",";opacity:1;}"],A((x=(v=e==null?void 0:e["text-color"])==null?void 0:v.placeholder)==null?void 0:x.disabled),A((_=(R=e==null?void 0:e["text-color"])==null?void 0:R.placeholder)==null?void 0:_.disabled))}},QI=({styles:e,error:t=!1,themeErrorColor:n})=>{var r,o,a,s,c,l,u,d,m,h,p,g,C,I,v,x,R,_,T,E,V,D,O,U,M,Y,F,H,q,W,X,oe,se,Se,Ee,he,de,Ie,ye,je,ce,Q,K,be,Oe,ze,re,le,Ue,G;return $(["outline:0 !important;transition:",";box-shadow:0 0 0 0;font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";border-radius:",";border-width:",";color:",";background-color:",";border-color:",";box-shadow:"," "," 0 ",";",";"," &:focus-within{color:",";background-color:",";border-color:",";"," ",";}&:disabled{color:",";-webkit-text-fill-color:",";background-color:",";border-color:",";",";}"],et.Fast,Ht((o=(r=e==null?void 0:e["font-family"])==null?void 0:r.base)==null?void 0:o.base),k((s=(a=e==null?void 0:e["font-size"])==null?void 0:a.value)==null?void 0:s.base),Fn((l=(c=e==null?void 0:e["font-weight"])==null?void 0:c.value)==null?void 0:l.base),k((d=(u=e==null?void 0:e["line-height"])==null?void 0:u.value)==null?void 0:d.base),k((h=(m=e==null?void 0:e["letter-spacing"])==null?void 0:m.base)==null?void 0:h.base),k((g=(p=e==null?void 0:e["border-radius"])==null?void 0:p.base)==null?void 0:g.base),Vp((I=(C=e==null?void 0:e["border-width"])==null?void 0:C.base)==null?void 0:I.base),A((x=(v=e==null?void 0:e["text-color"])==null?void 0:v.value)==null?void 0:x.base),A((_=(R=e==null?void 0:e["background-color"])==null?void 0:R.base)==null?void 0:_.base),A((E=(T=e==null?void 0:e["border-color"])==null?void 0:T.base)==null?void 0:E.base),iv((D=(V=e==null?void 0:e["shadow-offset"])==null?void 0:V.base)==null?void 0:D.base),k((U=(O=e==null?void 0:e["shadow-radius"])==null?void 0:O.base)==null?void 0:U.base),A((Y=(M=e==null?void 0:e["shadow-color"])==null?void 0:M.base)==null?void 0:Y.base),Ha(e).BASE,t&&$(["color:",";background-color:",";border-color:",";",";"],A((H=(F=e==null?void 0:e["text-color"])==null?void 0:F.value)==null?void 0:H.errored),(W=A((q=e==null?void 0:e["background-color"])==null?void 0:q.base.errored))!=null?W:gt(n).fade(.97).rgb().string(),A((oe=(X=e==null?void 0:e["border-color"])==null?void 0:X.base)==null?void 0:oe.errored),Ha(e).ERRORED),A((Se=(se=e==null?void 0:e["text-color"])==null?void 0:se.value)==null?void 0:Se.focused),A((he=(Ee=e==null?void 0:e["background-color"])==null?void 0:Ee.base)==null?void 0:he.focused),A((Ie=(de=e==null?void 0:e["border-color"])==null?void 0:de.base)==null?void 0:Ie.focused),A((je=(ye=e==null?void 0:e["border-color"])==null?void 0:ye.base)==null?void 0:je.focused)&&$(["box-shadow:0 0 0 1px ",";"],A((Q=(ce=e==null?void 0:e["border-color"])==null?void 0:ce.base)==null?void 0:Q.focused)),Ha(e).FOCUSED,A((be=(K=e==null?void 0:e["text-color"])==null?void 0:K.value)==null?void 0:be.disabled),A((ze=(Oe=e==null?void 0:e["text-color"])==null?void 0:Oe.value)==null?void 0:ze.disabled),A((le=(re=e==null?void 0:e["background-color"])==null?void 0:re.base)==null?void 0:le.disabled),A((G=(Ue=e==null?void 0:e["border-color"])==null?void 0:Ue.base)==null?void 0:G.disabled),Ha(e).DISABLED)},Er=(e,t,n)=>$([""," ",""],Eo(e,t),n!=null&&QI({styles:n,error:e.hasError,themeErrorColor:t.colorError})),Cd=$(["font-family:",";font-size:",";font-weight:",";line-height:",";letter-spacing:",";position:absolute;pointer-events:none;left:",";top:",";transition:"," ease all;"," &&& label{margin-bottom:0;font-size:inherit;font-weight:inherit;line-height:inherit;color:inherit;}"],({styles:e,theme:t})=>{var n,r,o;return(o=Ht((r=(n=e==null?void 0:e["font-family"])==null?void 0:n.placeholder)==null?void 0:r.base))!=null?o:t.fontFamily},({styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:$t.input},({styles:e})=>{var t,n,r;return(r=Fn((n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:an.regular},({styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.placeholder)==null?void 0:n.base))!=null?r:$n.input},({styles:e})=>{var t,n;return k((n=(t=e==null?void 0:e["letter-spacing"])==null?void 0:t.placeholder)==null?void 0:n.base)},S.Spacing[1],S.Spacing[2],et.Fast,({styles:e,theme:t,hasError:n,hasWarning:r,focused:o})=>{var s,c,l,u,d,m,h,p,g;let a;return n?a=(l=A((c=(s=e==null?void 0:e["text-color"])==null?void 0:s.error)==null?void 0:c.base))!=null?l:t.colorError:r?a=t.colorWarning:a=(m=A((d=(u=e==null?void 0:e["text-color"])==null?void 0:u.label)==null?void 0:d.focused))!=null?m:t.colorPrimary,o?$(["color:",";"],a):$(["color:",";*:focus ~ &{color:",";}"],(g=A((p=(h=e==null?void 0:e["border-color"])==null?void 0:h.base)==null?void 0:p.base))!=null?g:t.colorInputBorder,a)}),xd=$(["font-family:",";font-size:",";font-weight:",";line-height:",";padding:"," "," "," ",";width:100%;display:block;border:none;border-bottom:1px solid;border-radius:0;background-color:",";color:",";transition:"," ease border-color;",""],({styles:e,theme:t})=>{var n,r,o;return Ht((o=(r=(n=e==null?void 0:e["font-family"])==null?void 0:n.base)==null?void 0:r.base)!=null?o:t.fontFamily)},({styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:$t.input},({styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.value)==null?void 0:n.base)!=null?r:an.regular},({styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:$n.input},S.Spacing[2],S.Spacing[2],S.Spacing[2],S.Spacing[1],({styles:e,theme:t})=>{var n,r,o;return(o=A((r=(n=e==null?void 0:e["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:t.colorInputBackground},({styles:e,theme:t})=>{var n,r,o;return(o=A((r=(n=e==null?void 0:e["text-color"])==null?void 0:n.value)==null?void 0:r.base))!=null?o:t.colorFont},et.Fast,({styles:e,theme:t,hasError:n,hasWarning:r,focused:o})=>{var s,c,l,u,d,m,h,p,g;let a;return n?a=(l=A((c=(s=e==null?void 0:e["border-color"])==null?void 0:s.base)==null?void 0:c.errored))!=null?l:t.colorError:r?a=t.colorWarning:a=(m=A((d=(u=e==null?void 0:e["border-color"])==null?void 0:u.base)==null?void 0:d.focused))!=null?m:t.colorPrimary,o?$(["border-color:",";"],a):$(["border-color:",";*:focus{outline:none;border-color:",";}"],(g=A((p=(h=e==null?void 0:e["border-color"])==null?void 0:h.base)==null?void 0:p.base))!=null?g:t.colorInputBorder,a)}),vd=parseInt($t.input)*$n.input+Sn*2,ZI=b("input").withConfig({displayName:"MaterialInput__Input",componentId:"sc-25ma2t-0"})(["",""],xd),JI=b(te).withConfig({displayName:"MaterialInput__StyledMarkdown",componentId:"sc-25ma2t-1"})([""," ",";"],Cd,({hasError:e,hasValue:t})=>(e||t)&&$(["top:-14px;font-size:",";"],$t.small)),XI=b("div").withConfig({displayName:"MaterialInput__Container",componentId:"sc-25ma2t-2"})(["position:relative;"]);function lr({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s}){return i.jsxs(XI,{className:e,children:[i.jsx(ZI,{focused:t,hasError:n,hasWarning:r,spellCheck:!1,styles:a,...s}),i.jsx(JI,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:!!s.value,hasWarning:r,styles:a,children:o})]})}const eS=b.div.withConfig({displayName:"FormError__FormErrorContainer",componentId:"sc-1p5wybl-0"})([""," display:",";"],({styles:e})=>KI(e),({hasError:e})=>e?null:"none"),sn=e=>{const{errorMessage:t,hasError:n,styles:r,...o}=e;return i.jsx(eS,{"aria-live":"polite",role:"alert",hasError:n,styles:r,...o,children:t})};var Tt=(e=>(e.Outlined="outlined",e.Material="material",e))(Tt||{});const tS=b("div").withConfig({displayName:"ThemedFormInput__OutlinedContainer",componentId:"sc-zw49yf-0"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),nS=b("div").withConfig({displayName:"ThemedFormInput__MaterialContainer",componentId:"sc-zw49yf-1"})(["",""],ko),qi=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,placeholder:c,id:l,styles:u,"data-test":d="form",serverError:m,...h}=e,{inputStyle:p}=f.useContext(Ze),g=o&&r||m,C=!!g;switch(p){case Tt.Material:return i.jsxs(nS,{className:t,children:[i.jsx(lr,{labelText:s||c,...n,...h,autoFocus:a,hasError:C,"aria-invalid":C,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`,id:l,"data-test":d,styles:u}),i.jsx(sn,{id:`${l}--error`,"data-test":`${d}-error`,hasError:C,errorMessage:g,styles:u})]});case Tt.Outlined:default:return i.jsxs(tS,{className:t,styles:u,children:[s&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:l},children:s}),i.jsx(vs,{...n,...h,autoFocus:a,hasError:C,"aria-invalid":C,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`,id:l,placeholder:c,"data-test":d,styles:u}),i.jsx(sn,{id:`${l}--error`,"data-test":`${d}-error`,hasError:C,errorMessage:g,styles:u})]})}},iS=b("input").attrs({spellCheck:!1}).withConfig({displayName:"ThemedFormInputBase__ThemedFormInputBaseInner",componentId:"sc-1apa5v6-0"})(["",";"],e=>Er(e,e.theme,e.styles));function vs(e){return i.jsx(iS,{...e})}const kf=Zn(e=>{var t;return(t=e.locale)==null?void 0:t.localeInfo},e=>e!=null&&e.latitude&&(e!=null&&e.longitude)?{lat:e.latitude,lng:e.longitude}:void 0),rS=b("div").withConfig({displayName:"LocationSearchInput__DropdownWrapper",componentId:"sc-1ddacib-0"})(["position:relative;margin-bottom:",";& > div{margin-bottom:0;}"],({styles:e})=>{var t;return k((t=e==null?void 0:e.margin.base.base)==null?void 0:t.bottom)}),oS=b("div").withConfig({displayName:"LocationSearchInput__MaterialDropdownWrapper",componentId:"sc-1ddacib-1"})(["position:relative;margin-bottom:",";& > div{margin-bottom:0;}"],({styles:e})=>{var t;return k((t=e==null?void 0:e.margin.base.base)==null?void 0:t.bottom)}),aS=b("div").withConfig({displayName:"LocationSearchInput__DropdownContainer",componentId:"sc-1ddacib-2"})(["background-color:",";border:1px solid ",";position:absolute;z-index:",";width:100%;",""],({theme:e})=>e.colorDropdownBackground,S.Color.CoreSlate400,yt.dropdown,({openUpwards:e})=>e&&`bottom: ${Ji.input}`),sS=new Set(["AT","CH","CZ","DE","HU","SK"]),Nf=b("div").withConfig({displayName:"LocationSearchInput__DropdownItem",componentId:"sc-1ddacib-3"})(["cursor:pointer;padding:",";&:hover,&:focused{background-color:",";}",";"],S.Spacing[2],({theme:e})=>e.colorDropdownOption,e=>e.active&&$(["background-color:",";"],({theme:t})=>t.colorDropdownOption)),qa=({selectedCountryCode:e,onChange:t,input:n,setField:r,fieldKeyAddressStreet1:o,fieldKeyAddressStreet2:a,fieldKeyAddressCity:s,fieldKeyAddressSubdivision:c,fieldKeyAddressPostalCode:l,fieldKeyAddressBusinessName:u,showBusinessNameField:d,placeType:m,...h})=>{var O,U;const[p,{enable:g,disable:C}]=rt(),I=ot(kf),{inputStyle:v}=f.useContext(Ze),x={componentRestrictions:{country:e},types:m!=null?[m]:void 0,...I&&((U=(O=window.google)==null?void 0:O.maps)!=null&&U.LatLng)?{location:new window.google.maps.LatLng(I),radius:4e3}:{}},R=({getInputProps:M,suggestions:Y,getSuggestionItemProps:F,loading:H})=>{const W=(p?Y:[]).map(oe=>f.createElement(Nf,{...F(oe,{key:oe.description,active:oe.active}),key:oe.placeId},oe.description)),X=i.jsxs(i.Fragment,{children:[i.jsx(qi,{input:n,id:n.name,...M({name:n.name,onBlur:V,onFocus:D}),...h}),i.jsx(cS,{loading:H,children:W})]});switch(v){case Tt.Material:return i.jsx(oS,{styles:h.styles,children:X});case Tt.Outlined:default:return i.jsx(rS,{styles:h.styles,children:X})}},_=M=>{[google.maps.places.PlacesServiceStatus.ZERO_RESULTS,google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR,google.maps.places.PlacesServiceStatus.REQUEST_DENIED,google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT].includes(M)||$e("Google Maps API returned error with status: "+M)},T=M=>{n.onChange(M)},E=async(M,Y)=>{if(!Y)return;let F;try{F=await Ef(Y)}catch(he){_(he);return}if(!F)return;const H=F[0].address_components,q=(he,de=!1)=>{const Ie=H.filter(ye=>ye.types.indexOf(he)!==-1);return Ie.length>0?de?Ie[0].short_name:Ie[0].long_name:""};if(d){const he=M==null?void 0:M.split(",")[0];r(u,he)}const W=q("street_number"),X=q("route"),oe=q("premise"),se=q("subpremise"),Se=[q("sublocality_level_1"),q("sublocality_level_2"),q("sublocality_level_3"),q("sublocality_level_4")],Ee=q("country",!0);if(W){const he=sS.has(e==null?void 0:e.toUpperCase())?[X,W]:[W,X];r(o,he.filter(de=>de).join(" ")),r(a,se)}else if(Ee==="KR"){const he=[Se[3],Se[2],Se[1]].filter(de=>de);r(o,[oe,he.join(", ")].filter(de=>de).join(" ")),r(a,se)}else if(Ee==="JP"){const he=[[[Se[2],Se[3],oe].filter(de=>de).join("-"),Se[1]].filter(de=>de).join(" "),Se[0]].filter(de=>de).join(", ");r(o,he),r(a,se)}else oe&&!X?(r(o,oe),r(a,se)):r(o,[se,X].filter(he=>he).join(" "));r(s,q("locality")||q("sublocality_level_1")||q("administrative_area_level_2")||q("neighborhood")),r(c,q("administrative_area_level_1")),r(l,q("postal_code"))},V=M=>{var Y;C(),(Y=n.onBlur)==null||Y.call(n,M)},D=M=>{var Y;g(),(Y=n.onFocus)==null||Y.call(n,M)};return i.jsx(xs,{onChange:T,onError:_,value:n.value,onSelect:E,searchOptions:x,googleCallbackName:"onGoogleMapsLoaded",children:R})},cS=({loading:e,children:t})=>{const[n,r]=f.useState(!1),o=f.useRef(),a=f.Children.count(t);return f.useLayoutEffect(()=>{if(o.current==null||o.current.offsetParent==null)return;const c=o.current.offsetParent.getBoundingClientRect().bottom+o.current.getBoundingClientRect().height;r(document.documentElement.clientHeight<c)},[a]),a===0?null:i.jsxs(aS,{ref:o,openUpwards:n,children:[e&&i.jsx(Nf,{active:!1,children:"Loading..."}),t]})},Jt=e=>e===""?null:e,jf=e=>t=>Mt(t)||t.length===e,lS=e=>t=>Mt(t)||t.length<=e,vn=e=>!Mt(e),dS=e=>{if(!e)return!1;const t=Date.parse(e);if(isNaN(t))return!1;const r=new Date(t).toISOString().split("T")[0];return!Mt(e)&&r===e.split("T")[0]},uS=e=>{if(!e)return!0;const t=e;return Mt(t.month)&&Mt(t.day)&&Mt(t.year)||!Mt(t.month)&&!Mt(t.day)&&!Mt(t.year)&&Wn.local(t.year,t.month,t.day).isValid},mS=e=>e?typeof e=="string"?Wn.local().diff(Wn.fromISO(e),"years").years<100:Wn.local().diff(Wn.fromObject(e),"years").years<100:!1,hS=e=>e?typeof e=="string"?Wn.local().diff(Wn.fromISO(e),"years").years>1:Wn.local().diff(Wn.fromObject(e),"years").years>1:!1,Pf=e=>e==null||e===""?!0:f0(e),dr=e=>t=>Mt(t)||e.test(t),pt=(e,t)=>(n,r)=>t(n,r)?null:e,Df=(e,t)=>(n,r)=>{const o=n==null?void 0:n.replace(e,"");return t(o,r)},Ws=$(["content:'';position:absolute;right:",";top:50%;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid ",";transform:translateY(-50%);"],S.Spacing[4],S.Color.CoreSlate800),Of=b("select").withConfig({displayName:"MaterialSelect__Select",componentId:"sc-i6stps-0"})(["appearance:none;&::-ms-expand{display:none;}background-color:",";font-family:",";font-size:",";font-weight:",";line-height:",";color:",";padding:","px 0px ","px ","px;border-bottom:",";border-radius:0;",";&:focus{outline:none;border-color:",";}position:relative;width:100%;background-color:",";"],Le.white,({theme:{fontFamily:e}})=>Ht(e),$t.input,an.regular,$n.input,({theme:e})=>e.colorFont,L.base,L.base,L.base/2,({theme:e})=>`1px solid ${e.colorInputBorder}`,({theme:e,hasError:t})=>t&&`border-color: ${e.colorError}`,({theme:e,hasError:t,hasWarning:n})=>t?e.colorError:n?e.colorWarning:e.colorPrimary,({theme:e})=>e.colorInputBackground),pS=b("div").withConfig({displayName:"MaterialSelect__Wrapper",componentId:"sc-i6stps-1"})(["position:relative;width:100%;&::after{",";right:","px;}"],Ws,L.base),fS=b(te).withConfig({displayName:"MaterialSelect__StyledMarkdown",componentId:"sc-i6stps-2"})(["font-weight:",";line-height:",";color:",";position:absolute;pointer-events:none;left:","px;transition:"," ease all;top:-14px;font-size:",";label{margin-bottom:0;font-size:inherit;font-weight:inherit;line-height:inherit;color:inherit;}",";",""," ~ &{color:",";}"],an.regular,$n.input,({theme:e})=>e.colorInputBorder,L.base/2,ya.fast,$t.small,({theme:e,hasError:t})=>t&&`color: ${e.colorError};`,Of,Wi,({theme:e,hasError:t,hasWarning:n})=>t?e.colorError:n?e.colorWarning:e.colorPrimary),Lf=({labelText:e,hasError:t,hasWarning:n,className:r,...o})=>i.jsxs(pS,{className:r,children:[i.jsx(Of,{hasError:t,hasWarning:n,...o}),i.jsx(fS,{wrapper:"label",wrapperProps:{htmlFor:o.id},hasError:t,hasWarning:n,children:e})]}),gS=b("select").withConfig({displayName:"Select__InnerSelect",componentId:"sc-bkgd00-0"})(["",";appearance:none;&::-ms-expand{display:none;}color:",";height:",";padding-top:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;"," ",""],e=>Eo(e,e.theme),({theme:e})=>{var t;return(t=e.colorFont)!=null?t:Le.gray20},Ji.input,L.base,L.base,L.base*2,L.base*4,({isSelectingPlaceholder:e,theme:t})=>{var n;return e&&$(["font-weight:",";color:",";"],an.regular,gt((n=t.colorFont)!=null?n:Le.gray100).fade(.5).rgb().string())},({hasError:e,theme:t,value:n})=>{var o;const r=gt((o=t.colorError)!=null?o:S.Color.CoreRed900).rgb();return e&&(n==null||n==="")&&$(["color:",";-webkit-text-fill-color:",";"],`rgba(${r.red()}, ${r.green()}, ${r.blue()}, 0.7)`,`rgba(${r.red()}, ${r.green()}, ${r.blue()}, 0.7)`)}),bS=b("div").withConfig({displayName:"Select__Wrapper",componentId:"sc-bkgd00-1"})(["position:relative;"]),CS=b(Gl).withConfig({displayName:"Select__StyledIconCaretDown",componentId:"sc-bkgd00-2"})(["position:absolute;right:","px;top:50%;transform:translateY(-50%);display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],L.base*2,({theme:e})=>{var t;return(t=e.colorFont)!=null?t:Le.gray50}),Ys=({value:e,...t})=>i.jsxs(bS,{children:[i.jsx(gS,{...t,value:e,isSelectingPlaceholder:e===""}),i.jsx(CS,{})]}),Nu=b("div").withConfig({displayName:"ThemedFormSelect__Container",componentId:"sc-8hgqfp-0"})(["margin-bottom:","px;",";text-transform:capitalize;"],L.base*2,({inputStyle:e})=>e===Tt.Material?`padding-top: ${L.base*2}px;`:""),xS=b("div").withConfig({displayName:"ThemedFormSelect__OutlinedLabelContainer",componentId:"sc-8hgqfp-1"})(["",""],Gs),ju=b("div").withConfig({displayName:"ThemedFormSelect__FormError",componentId:"sc-8hgqfp-2"})(["",";padding-left:","px;"],No,L.base);function Ff(e){const{id:t,input:n,label:r,serverError:o,meta:{error:a,submitFailed:s},...c}=e,{inputStyle:l}=f.useContext(Ze),u=s&&a||o,d=!!u;switch(l){case Tt.Material:return i.jsxs(Nu,{inputStyle:l,children:[i.jsx(Lf,{...n,...c,hasError:d,labelText:r}),d&&i.jsx(ju,{role:"alert",children:u})]});default:case Tt.Outlined:return i.jsxs(xS,{children:[r&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:r}),i.jsxs(Nu,{inputStyle:l,children:[i.jsx(Ys,{...n,...c,id:t,hasError:d}),d&&i.jsx(ju,{role:"alert",children:u})]})]})}}const vS=b("div").withConfig({displayName:"ThemedFormAddressInput__Container",componentId:"sc-tr0su4-0"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),IS=b("div").withConfig({displayName:"ThemedFormAddressInput__ExpandedContainer",componentId:"sc-tr0su4-1"})([""," "," margin-bottom:0;"],({styles:e})=>hr(e),({styles:e})=>Mn(e)),SS=({fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,editAddressManuallyPrompt:s,label:c,placeholderAddressStreet1:l,placeholderAddressStreet2:u,placeholderAddressCity:d,placeholderAddressSubdivision:m,placeholderAddressSubdivisionUs:h,placeholderAddressPostalCode:p,placeholderAddressPostalCodeUs:g,placeholderAddressBusinessName:C,placeholderAutocomplete:I,placeholderAutocompletePostalCode:v,validateAddressStreet1:x,validateAddressStreet2:R,validateAddressCity:_,validateAddressSubdivision:T,validateAddressPostalCode:E,validateAddressBusinessName:V,serverErrorAddressStreet1:D,serverErrorAddressStreet2:O,serverErrorAddressCity:U,serverErrorAddressSubdivision:M,serverErrorAddressPostalCode:Y,serverErrorAddressBusinessName:F,setField:H,selectedCountryCode:q,forceOpen:W,addressAutocompleteMethod:X,placeType:oe,disabled:se,optional:Se,showBusinessNameField:Ee,styles:he})=>{var _e,we;const[de,Ie]=f.useState(!((we=(_e=window.google)==null?void 0:_e.maps)!=null&&we.places)),ye=f.useContext(Ze),je=f.useMemo(()=>({autocompleteClosed:Se?[]:[pt("Fill out the details of your current address",()=>!1)],addressStreet1:x,addressStreet2:R,addressCity:_,addressSubdivision:T,addressPostalCode:E,addressBusinessName:V}),[x,R,_,T,E,V,Se]),ce=Ds.includes(q),Q=ce?o:e,K=ce?v:I,be=q==="US"?g:p,Oe=()=>{if(de||W||X===ns.None)return Ue();{const De=ye.inputStyle===Tt.Outlined?K:c;return i.jsxs(vS,{styles:he,children:[i.jsx(Re.Field,{"data-test":"address-street-1",selectedCountryCode:q,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:Ee,name:Q,id:Q,setField:re,component:qa,disabled:se,type:"text",parse:Jt,validate:je.autocompleteClosed,placeholder:De,placeType:oe,styles:he}),!se&&s&&i.jsx("a",{id:"address_input_section__manual_edit","data-test":"address_input_section__manual_edit",onClick:G,tabIndex:0,children:s})]})}},ze=(De,Me,nt,St,Qt,Ft,Vt)=>{switch(De){case"AR":case"GL":case"IS":return[[Vt],[Me],[nt],[Ft,St]];case"AT":case"BE":case"DK":return[[Vt],[Me,nt],[Ft,St]];case"BR":case"CR":return[[Vt],[Me,nt],[St,Qt],[Ft]];case"CA":return[[Vt],[nt,Me],[St,Qt,Ft]];case"CN":return[[Vt],[nt],[Me,St],[Qt,Ft]];case"IT":return[[Vt],[Me,nt],[Ft,St,Qt]];case"AU":case"GB":case"PH":case"US":return[[Vt],[Me,nt],[St,Qt,Ft]];case"FI":case"FR":case"DE":case"IL":return[[Vt],[Me,nt],[Ft,St]];case"JP":case"KR":return[[Vt],[nt,Me],[St,Qt,Ft]];case"IN":return[[Vt],[nt],[Me],[St,Ft]];case"FJ":return[[Vt],[Me,nt],[St]];case"HK":return[[Vt],[nt],[Me],[St]];case"EE":case"CZ":case"TW":case"ID":default:return[[Vt],[Me,nt],[St,Ft]]}},re=(De,Me)=>{H(De,Jt(Me)),Ie(!0)},le=()=>Q===o?i.jsx(Re.Field,{"data-test":"address-postal-code",autoComplete:"postal-code",selectedCountryCode:q,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:Ee,name:o,id:o,disabled:se,placeholder:be,type:"text",parse:Jt,validate:je.addressPostalCode,setField:H,component:qa,placeType:oe,serverError:Y,styles:he}):i.jsx(Re.Field,{"data-test":"address-postal-code",autoComplete:"postal-code",name:o,id:o,disabled:se,placeholder:be,type:"text",parse:Jt,validate:je.addressPostalCode,setField:H,component:qi,serverError:Y,styles:he}),Ue=()=>{const De=i.jsx(Re.Field,{"data-test":"address-street-2",autoComplete:"address-line2",name:t,id:t,component:qi,disabled:se,type:"text",placeholder:u,parse:Jt,validate:je.addressStreet2,serverError:O,styles:he}),Me=i.jsx(Re.Field,{"data-test":"address-city",autoComplete:"address-level2",name:n,id:n,component:qi,disabled:se,type:"text",placeholder:d,parse:Jt,validate:je.addressCity,serverError:U,styles:he}),nt=i.jsx(wS,{selectedCountryCode:q,disabled:se,placeholderAddressSubdivisionUs:h,placeholderAddressSubdivision:m,theme:ye,fieldKeyAddressSubdivision:r,validate:je.addressSubdivision,serverError:M,styles:he});return ze(q,xe(),De,Me,nt,le(),Ke()).map((Qt,Ft)=>i.jsx("div",{className:"row",children:Qt.filter(Boolean).map((Vt,Vn)=>i.jsx("div",{className:"col-sm-12",children:Vt},Vn))},Ft))},G=()=>{Ie(!0)},xe=()=>Q===e&&X===ns.GoogleMaps?i.jsx(Re.Field,{"data-test":"address-street-1",autoComplete:"address-line1",selectedCountryCode:q,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:Ee,name:e,id:e,disabled:se,placeholder:l,type:"text",parse:Jt,validate:je.addressStreet1,setField:H,component:qa,placeType:oe,serverError:D,styles:he}):i.jsx(Re.Field,{"data-test":"address-street-1",autoComplete:"address-line1",name:e,id:e,disabled:se,placeholder:l,type:"text",parse:Jt,validate:je.addressStreet1,component:qi,serverError:D,styles:he}),Ke=()=>Ee?X===ns.GoogleMaps?i.jsx(Re.Field,{"data-test":"address-business-name",autoComplete:"address-line1",selectedCountryCode:q,fieldKeyAddressStreet1:e,fieldKeyAddressStreet2:t,fieldKeyAddressCity:n,fieldKeyAddressSubdivision:r,fieldKeyAddressPostalCode:o,fieldKeyAddressBusinessName:a,showBusinessNameField:Ee,name:a,id:a,disabled:se,placeholder:C,type:"text",setField:H,component:qa,placeType:oe,parse:Jt,validate:je.addressBusinessName,serverError:F,styles:he}):i.jsx(Re.Field,{"data-test":"address-business-name",name:a,id:a,component:qi,disabled:se,type:"text",placeholder:C,parse:Jt,validate:je.addressBusinessName,serverError:F,styles:he}):null;return i.jsxs(IS,{styles:he,children:[ye.inputStyle===Tt.Outlined&&c&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:e},children:c}),Oe()]})};function wS({selectedCountryCode:e,disabled:t,theme:n,placeholderAddressSubdivisionUs:r,placeholderAddressSubdivision:o,fieldKeyAddressSubdivision:a,validate:s,serverError:c,styles:l}){return e==="US"&&n.usStateInputMethod===Hs.Select?i.jsxs(Re.Field,{"data-test":"address-subdivision",autoComplete:"address-level1",name:a,id:a,component:Ff,disabled:t,type:"text",placeholder:r,parse:Jt,validate:s,serverError:c,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r}),Object.keys(fs).map(u=>i.jsx("option",{value:fs[u],children:u},u))]}):i.jsx(Re.Field,{"data-test":"address-subdivision",autoComplete:"address-level1",name:a,id:a,component:qi,disabled:t,type:"text",placeholder:e==="US"?r:o,parse:Jt,validate:s,serverError:c,styles:l})}const oi=(e,t,n,r)=>{const o=e.attributes["next-step"].name,a=ot(u=>Re.isPristine(o)(u,n)),s=ot(u=>Re.formValueSelector(o)(u,n)),[c,l]=f.useState(!0);return f.useEffect(()=>{(r||"")!==(s||"")&&!a&&l(!1)},[a,r,s]),f.useEffect(()=>{l(!0)},[e]),f.useEffect(()=>{t&&l(!1)},[t]),c},Yr={STREET_1:"street_1",STREET_2:"street_2",CITY:"city",SUBDIVISION:"subdivision",POSTAL_CODE:"postal_code",BUSINESS_NAME:"business_name"},yS=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const o=`${e.name}.${Yr.STREET_1}`,a=`${e.name}.${Yr.STREET_2}`,s=`${e.name}.${Yr.CITY}`,c=`${e.name}.${Yr.SUBDIVISION}`,l=`${e.name}.${Yr.POSTAL_CODE}`,u=`${e.name}.${Yr.BUSINESS_NAME}`,{"prefill-address-street-1":d,"prefill-address-street-2":m,"prefill-address-city":h,"prefill-address-subdivision":p,"prefill-address-postal-code":g,"prefill-address-business-name":C,"selected-country-code":I,"validations-address-street-1":v,"validations-address-street-2":x,"validations-address-city":R,"validations-address-subdivision":_,"validations-address-postal-code":T,"validations-address-business-name":E,"edit-address-manually-prompt":V,label:D,"placeholder-autocomplete":O,"placeholder-autocomplete-postal-code":U,"placeholder-address-street-1":M,"placeholder-address-street-2":Y,"placeholder-address-city":F,"placeholder-address-subdivision":H,"placeholder-address-subdivision-us":q,"placeholder-address-postal-code":W,"placeholder-address-postal-code-us":X,"placeholder-address-business-name":oe,"error-address-street-1":se,"error-address-street-2":Se,"error-address-city":Ee,"error-address-subdivision":he,"error-address-postal-code":de,"error-address-business-name":Ie,"address-autocomplete-method":ye,"place-type":je,disabled:ce,hidden:Q,optional:K}=e.attributes,be=t.attributes["next-step"].name,Oe=ot(Re.hasSubmitFailed(be)),ze=ot(ei=>[a,s,c,Ds.includes(I)?o:l].some(lt=>Re.formValueSelector(be)(ei,lt))),re=oi(t,n,o,d),le=oi(t,n,a,m),Ue=oi(t,n,s,h),G=oi(t,n,c,p),xe=oi(t,n,l,g),Ke=oi(t,n,u,C),_e=re&&le&&Ue&&G&&xe&&Ke,we=!!(se||Se||Ee||he||de||Ie),De=It("",t.attributes["next-step"].name),Me=De(Q),nt=zr(e.name,v),St=zr(e.name,x),Qt=zr(e.name,R),Ft=zr(e.name,_),Vt=zr(e.name,T),Vn=zr(e.name,E);return f.useEffect(()=>{Me?(r.setField(o,""),r.setField(a,""),r.setField(s,""),r.setField(c,""),r.setField(l,""),r.setField(u,"")):Me||[[o,d],[a,m],[s,h],[c,p],[l,g],[u,C]].forEach(([ei,lt])=>{Mt(lt)||r.setField(ei,lt)})},[Me]),Me?null:i.jsx(i.Fragment,{children:i.jsx(SS,{disabled:De(ce),optional:De(K==null?void 0:K.logic),selectedCountryCode:I,fieldKeyAddressStreet1:o,fieldKeyAddressStreet2:a,fieldKeyAddressCity:s,fieldKeyAddressSubdivision:c,fieldKeyAddressPostalCode:l,fieldKeyAddressBusinessName:u,editAddressManuallyPrompt:V,label:D,placeholderAutocomplete:O,placeholderAutocompletePostalCode:U,placeholderAddressStreet1:M,placeholderAddressStreet2:Y,placeholderAddressCity:F,placeholderAddressSubdivision:H,placeholderAddressSubdivisionUs:q,placeholderAddressPostalCode:W,placeholderAddressPostalCodeUs:X,placeholderAddressBusinessName:oe,validateAddressStreet1:nt,validateAddressStreet2:St,validateAddressCity:Qt,validateAddressSubdivision:Ft,validateAddressPostalCode:Vt,validateAddressBusinessName:Vn,serverErrorAddressStreet1:_e?se:null,serverErrorAddressStreet2:_e?Se:null,serverErrorAddressCity:_e?Ee:null,serverErrorAddressSubdivision:_e?he:null,serverErrorAddressPostalCode:_e?de:null,serverErrorAddressBusinessName:_e?Ie:null,addressAutocompleteMethod:ye,placeType:je,setField:r.setField,forceOpen:Oe||ze||we,showBusinessNameField:e.attributes["field-key-address-business-name"]!=null,styles:e.styles})})};function zr(e,t){return f.useMemo(()=>(t!=null?t:[]).map(({logic:r,message:o})=>(a,s)=>!wr(r,{form:s,value:s[e]},!0)&&o),[e,t])}const Mf=b("div").withConfig({displayName:"Stack",componentId:"sc-dqoy2x-0"})(["display:flex;flex-direction:",";gap:",";"," "," "," ",""],({direction:e})=>e==="horizontal"?"row":"column",({spacing:e})=>e||S.Spacing[2],({align:e})=>e&&$(["align-items:",";"],e),({justify:e})=>e&&$(["justify-content:",";"],e),({wrap:e})=>e&&$(["flex-wrap:",";"],e),({equal:e})=>e&&$(["> *{flex-grow:1;flex-basis:0;}"])),Bt={black:S.Color.PrimaryBlack,white:S.Color.PrimaryWhite,brand:S.Color.PrimaryPurple,brand800:S.Color.CorePurple800,brand700:S.Color.CorePurple700,brand600:S.Color.CorePurple600,brand500:S.Color.CorePurple500,brand400:S.Color.CorePurple400,brand300:S.Color.CorePurple300,brand200:S.Color.CorePurple200,brand100:S.Color.CorePurple100},Bn={primary:S.Color.TextPrimary,secondary:S.Color.TextSecondary,tertiary:S.Color.CoreSlate800,brand:Bt.brand,inverse:S.Color.TextInverse,disabled:S.Color.TextDisabled},ii={primary:S.Color.TextInverse,secondary:S.Color.CoreSlate500,tertiary:S.Color.CoreSlate800,brand:Bt.brand,inverse:S.Color.TextPrimary,disabled:S.Color.TextDisabled},_S={primary:Bt,text:Bn,background:{primary:S.Color.BackgroundPrimary,secondary:S.Color.BackgroundSecondary,active:Bt.brand,highlight:Bt.brand100,disabled:S.Color.BackgroundInputDisabled},variants:{basic:{active:S.Color.BackgroundButtonDefaultActive,default:S.Color.BackgroundButtonDefault,highlight:S.Color.CoreSlate400,highlightLight:S.Color.CoreSlate400,highlightDark:S.Color.CoreSlate700,disabled:S.Color.CoreSlate100,text:Bn.primary,textDisabled:Bn.disabled},primary:{active:S.Color.BackgroundButtonPrimaryActive,default:S.Color.BackgroundButtonPrimary,highlight:Bt.brand200,highlightLight:Bt.brand100,highlightDark:Bt.brand200,disabled:S.Color.BackgroundButtonPrimaryDisabled,text:Bn.inverse,textDisabled:Bn.inverse},inverse:{active:Bt.brand100,default:Bt.white,highlight:Bt.brand200,highlightLight:Bt.brand100,highlightDark:Bt.brand700,disabled:Bt.white,text:Bn.primary,textDisabled:Bn.disabled},danger:{active:S.Color.BackgroundButtonDangerActive,default:S.Color.BackgroundButtonDanger,highlight:S.Color.CoreRed200,highlightLight:S.Color.CoreRed100,highlightDark:S.Color.CoreRed200,disabled:S.Color.BackgroundButtonDangerDisabled,text:Bn.inverse,textDisabled:Bn.inverse},caution:{active:S.Color.CoreYellow900,default:S.Color.CoreYellow800,highlight:S.Color.CoreYellow200,highlightLight:S.Color.CoreYellow100,highlightDark:S.Color.CoreYellow200,disabled:S.Color.CoreYellow100,text:Bn.inverse,textDisabled:Bn.inverse},success:{active:S.Color.CoreGreen900,default:S.Color.CoreGreen800,highlight:S.Color.CoreGreen200,highlightLight:S.Color.CoreGreen100,highlightDark:S.Color.CoreGreen200,disabled:S.Color.CoreGreen100,text:Bn.inverse,textDisabled:Bn.inverse}},border:{primary:S.Color.BorderHairline,secondary:S.Color.BorderDivider,active:S.Color.BorderInputActive,input:S.Color.BorderInputDefault,disabled:S.Color.BorderInputDisabled}};S.Color.CoreSlate1000,S.Color.CoreSlate50,Bt.brand,S.Color.PrimaryWhite,S.Color.CoreSlate300,S.Color.BackgroundButtonDefaultActive,S.Color.BackgroundButtonDefault,S.Color.CoreSlate400,S.Color.CoreSlate400,S.Color.CoreSlate900,S.Color.CoreSlate100,ii.primary,ii.disabled,S.Color.CoreSlate900,S.Color.CoreSlate1000,Bt.brand200,Bt.brand100,Bt.brand200,S.Color.BackgroundButtonPrimaryDisabled,Bt.white,ii.inverse,Bt.brand100,Bt.white,Bt.brand200,Bt.brand100,Bt.brand700,Bt.white,ii.inverse,ii.disabled,S.Color.BackgroundButtonDangerActive,S.Color.BackgroundButtonDanger,S.Color.CoreRed300,S.Color.CoreRed100,S.Color.CoreRed300,S.Color.BackgroundButtonDangerDisabled,ii.inverse,ii.inverse,S.Color.CoreYellow900,S.Color.CoreYellow800,S.Color.CoreYellow200,S.Color.CoreYellow100,S.Color.CoreYellow200,S.Color.CoreYellow100,ii.inverse,ii.inverse,S.Color.CoreGreen900,S.Color.CoreGreen800,S.Color.CoreGreen200,S.Color.CoreGreen100,S.Color.CoreGreen200,S.Color.CoreGreen100,ii.inverse,ii.inverse,S.Color.CoreSlate900,S.Color.BorderDivider,S.Color.BorderInputActive,S.Color.BorderInputDefault,S.Color.BorderInputDisabled;const Vf={fontFamily:{base:S.FontFamilies.Primary,mono:S.FontFamilies.Monospace},display:{lg:S.Typography.DisplayLarge,md:S.Typography.DisplayMedium,sm:S.Typography.DisplaySmall},heading:{lg:S.Typography.HeadingLarge,md:S.Typography.HeadingMedium,sm:S.Typography.HeadingSmall},paragraph:{lg:S.Typography.TextLarge,lgBold:S.Typography.TextLargeBold,lgLight:S.Typography.TextLargeLight,md:S.Typography.TextMedium,mdBold:S.Typography.TextMediumBold,mdLight:S.Typography.TextMediumLight,mdLink:S.Typography.TextMediumLink,sm:S.Typography.TextSmall,smLink:S.Typography.TextSmallLink,xs:S.Typography.TextExtraSmall}};({...Vf,fontFamily:(S.FontFamilies.Primary,S.FontFamilies.Monospace)});const RS={borderRadius:"4px",height:{xl:"128px",lg:"56px",md:"48px",sm:"40px",xs:"32px"},width:{md:"228px"}},AS={borderRadius:"4px",height:{md:"32px",sm:"24px"}},TS={borderRadius:"8px"},ES={borderRadius:{xl:"8px",lg:"4px",md:"4px"},width:{xl:"1020px",lg:"720px",md:"520px"}},Gi={color:_S,text:Vf,element:RS,button:AS,card:TS,modal:ES},kS=b.div.withConfig({displayName:"CheckboxBase__CheckboxContainer",componentId:"sc-1njarhg-0"})(({styles:e,"aria-readonly":t})=>({cursor:t?"initial":"pointer",overflowWrap:"break-word",display:"flex",flexWrap:"nowrap",alignItems:e==null?void 0:e.alignment.base.base})),NS=b(te).withConfig({displayName:"CheckboxBase__CheckboxLabel",componentId:"sc-1njarhg-1"})(["padding:0 ",";p + p{margin:0 !important;}",""],S.Spacing[2],({styles:e,disabled:t})=>({fontFamily:Ht(e==null?void 0:e["font-family"].base.base),fontSize:k(e==null?void 0:e["font-size"].base.base),fontWeight:Fn(e==null?void 0:e["font-weight"].base.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].base.base),lineHeight:k(e==null?void 0:e["line-height"].base.base),color:t?Gi.color.text.disabled:A(e==null?void 0:e["text-color"].base.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}})),jS=b(te).withConfig({displayName:"CheckboxBase__CheckboxDescription",componentId:"sc-1njarhg-2"})(["padding:0 ",";p + p{margin:0 !important;}",""],S.Spacing[2],({styles:e,disabled:t})=>({fontFamily:Ht(e==null?void 0:e["font-family"].description.base),fontSize:k(e==null?void 0:e["font-size"].description.base),fontWeight:Fn(e==null?void 0:e["font-weight"].description.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].description.base),lineHeight:k(e==null?void 0:e["line-height"].description.base),color:t?Gi.color.text.disabled:A(e==null?void 0:e["text-color"].description.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}})),PS=b.input.withConfig({displayName:"CheckboxBase__HiddenInput",componentId:"sc-1njarhg-3"})(["height:1px;width:1px;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),DS=b.div.withConfig({displayName:"CheckboxBase__IconContainer",componentId:"sc-1njarhg-4"})(["display:flex;flex:none;align-items:center;transition:box-shadow ",";",""],et.Fast,({styles:e})=>$(["svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}&:hover","{box-shadow:0 0 0 3px transparent,",";}&","","{svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}&:active","{svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}&","{cursor:not-allowed;svg{.checkbox__border--empty{fill:",";stroke:",";}.checkbox__border{fill:",";stroke:",";}}}"],A(e==null?void 0:e["fill-color"]["checkbox-unchecked"].base),A(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].base),A(e==null?void 0:e["fill-color"]["checkbox-checked"].base),A(e==null?void 0:e["stroke-color"]["checkbox-checked"].base),A(e==null?void 0:e["stroke-color"].checkmark.base),En,Mi.Mid,Wi,En,A(e==null?void 0:e["fill-color"]["checkbox-unchecked"].focused),A(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].focused),A(e==null?void 0:e["fill-color"]["checkbox-checked"].focused),A(e==null?void 0:e["stroke-color"]["checkbox-checked"].focused),En,A(e==null?void 0:e["fill-color"]["checkbox-unchecked"].active),A(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].active),A(e==null?void 0:e["fill-color"]["checkbox-checked"].active),A(e==null?void 0:e["stroke-color"]["checkbox-checked"].active),zl,A(e==null?void 0:e["fill-color"]["checkbox-unchecked"].disabled),A(e==null?void 0:e["stroke-color"]["checkbox-unchecked"].disabled),A(e==null?void 0:e["fill-color"]["checkbox-checked"].disabled),A(e==null?void 0:e["stroke-color"]["checkbox-checked"].disabled))),Bf=({className:e,disabled:t,indeterminate:n,hasError:r,onChange:o,onFocus:a,onBlur:s,value:c,id:l,autoFocus:u,styles:d,labelText:m,descriptionText:h,"data-test":p})=>{const[g,{enable:C,disable:I}]=rt(),v=f.useCallback(()=>{var _;o(!c),(_=x.current)==null||_.focus()},[o,c]),x=f.useRef();f.useEffect(()=>{x.current&&(x.current.indeterminate=n)},[n]);let R;return r?R=`${l}--error`:h&&(R=`${l}-description`),i.jsxs(kS,{id:l,className:e,onClick:t?void 0:v,"data-test":p,"aria-checked":!!c,"aria-readonly":t,styles:d,children:[i.jsx(PS,{"aria-label":m,"aria-describedby":R,"aria-invalid":r,"aria-errormessage":`${l}--error`,ref:x,"data-test-toggle-status":c?"on":"off",disabled:t,type:"checkbox",checked:!!c,readOnly:!0,onChange:()=>null,autoFocus:u,onFocus:_=>{C(),a==null||a(_)},onBlur:_=>{I(),s==null||s(_)}}),i.jsx(DS,{focused:g,disabled:t,styles:d,children:n?i.jsx(xp,{}):c?i.jsx(vp,{}):i.jsx(Ip,{})}),i.jsxs(Mf,{spacing:S.Spacing[0],children:[i.jsx(NS,{wrapper:"label",wrapperProps:{htmlFor:l},styles:d,disabled:t,children:m}),h&&i.jsx(jS,{id:`${l}-description`,styles:d,disabled:t,children:h})]})]})},OS=b("div").withConfig({displayName:"ThemedFormCheckbox__Container",componentId:"sc-2drq49-0"})(["",""],Bi),LS=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,descriptionText:c,id:l,styles:u,disabled:d,...m}=e,h=!!(r&&o);return i.jsxs(OS,{className:t,children:[i.jsx(Bf,{...n,...m,autoFocus:a,disabled:d,id:l,value:n.value,styles:u,labelText:s,descriptionText:c,hasError:h,"aria-errormessage":`${l}--error`,"aria-describedby":`${l}--error`}),i.jsx(sn,{id:`${l}--error`,hasError:h,errorMessage:r,styles:u})]})},FS=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,"description-text":s,optional:c,prefill:l,validations:u}=e.attributes,d=e.name,m=It(d,t.attributes["next-step"].name),h=mn({hidden:o,optional:c,validations:u}),p=m(o);return f.useEffect(()=>{p?n.setField(d,""):!p&&!Mt(l)&&n.setField(d,l)},[p]),p?null:i.jsx(i.Fragment,{children:i.jsx(Re.Field,{id:d,name:d,label:a,descriptionText:s,component:LS,disabled:m(r),validate:h,type:"checkbox",styles:e.styles})})},MS=b("div").withConfig({displayName:"ThemedFormCheckboxGroup__Container",componentId:"sc-1jm42aq-0"})(["",""],Bi),VS=b("fieldset").withConfig({displayName:"ThemedFormCheckboxGroup__ItemContainer",componentId:"sc-1jm42aq-1"})(["display:flex;flex-direction:column;"]),BS=b(te).attrs(()=>({wrapper:"legend"})).withConfig({displayName:"ThemedFormCheckboxGroup__Legend",componentId:"sc-1jm42aq-2"})(["",""],({styles:e})=>Mn(e)),US=b("label").withConfig({displayName:"ThemedFormCheckboxGroup__LineItem",componentId:"sc-1jm42aq-3"})(["position:relative;display:flex;align-items:baseline;margin:0 ",";& + &{margin-top:",";}"],S.Spacing[2],S.Spacing[2]),HS=e=>{const{className:t,input:{name:n,value:r,onChange:o,...a},meta:{error:s,submitFailed:c},label:l,id:u,styles:d,options:m,disabled:h,...p}=e,g=f.useMemo(()=>m.reduce((v,x,R)=>(v[x.value]=R,v),{}),[m]),C=f.useCallback((v,x)=>{const R=r||[],T=(v?R.concat(x):R.filter(E=>E!==x)).map(E=>g[E]).sort((E,V)=>E-V).map(E=>m[E].value);o(T)},[r,o,m,g]),I=!!(s&&c);return i.jsxs(MS,{className:t,children:[i.jsxs(VS,{id:u,"aria-invalid":I,"aria-errormessage":`${u}--error`,"aria-describedby":`${u}--error`,children:[l&&i.jsx(BS,{styles:d,children:l}),m.map((v,x)=>{var T,E;const R=`${n}_${x}`,_=(T=r==null?void 0:r.includes(v.value))!=null?T:!1;return i.jsx(US,{isSelected:_,htmlFor:R,children:i.jsx(Bf,{...a,...p,id:R,disabled:(E=v.disabled)!=null?E:h,labelText:v.text,descriptionText:v["description-text"],hasError:I,value:_,onChange:V=>C(V,v.value),styles:d,onFocus:()=>null,onBlur:()=>null})},v.value)})]}),i.jsx(sn,{id:`${u}--error`,hasError:I,errorMessage:s,styles:d})]})},qS=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,prefill:l,validations:u}=e.attributes,d=e.name,m=It(d,t.attributes["next-step"].name),h=mn({hidden:o,optional:s,validations:u}),p=m(o);return f.useEffect(()=>{p?n.setField(d,""):!p&&!Mt(l)&&n.setField(d,l)},[p]),p?null:i.jsx(Re.Field,{id:d,name:d,component:HS,options:c,disabled:m(r),validate:h,label:a,styles:e.styles})},Ki=b("input").attrs(()=>({spellCheck:!1})).withConfig({displayName:"Input",componentId:"sc-12x9mcm-0"})(["",";"],e=>Eo(e,e.theme));var tn=(e=>(e.Email="email",e.Sms="sms",e.Qr="qr",e))(tn||{});const Id=4;new Set(Object.values(zp));new Set(Object.values(Kp));new Set(Object.keys(Kv));new Set(Object.values(tn));new Set(Object.values(id));new Set(Object.values(Qp));new Set(Object.values(un));new Set(Object.values(pn));new Set(Object.values(la));const $S=b("div").withConfig({displayName:"PinInput__Container",componentId:"sc-1wwo943-0"})(["display:flex;justify-content:space-between;position:relative;margin-left:-","px;margin-right:-","px;direction:ltr;"],L.base,L.base),GS=b(Ki).withConfig({displayName:"PinInput__HiddenInput",componentId:"sc-1wwo943-1"})(["background:transparent !important;border-color:transparent !important;box-shadow:none !important;caret-color:transparent;color:transparent !important;position:absolute;left:0;right:0;top:0;bottom:0;&::selection{color:transparent;}"]),WS=Ln(["49%{color:",";}50%{color:transparent;}99%{color:transparent;}100%{color:",";}"],Le.gray100,Le.gray100),YS=b(Ki).withConfig({displayName:"PinInput__CodeInput",componentId:"sc-1wwo943-2"})(["text-align:center;margin-left:","px;margin-right:","px;",";",";"],L.base,L.base,e=>e.isFocused&&$(["border-color:",";color:",";box-shadow:0 0 0 1px ",";"],e.theme.colorPrimary,Le.gray100,e.theme.colorPrimary),e=>e.isCursor&&$(["animation-name:",";animation-duration:1s;animation-iteration-count:infinite;"],WS)),zS=({id:e,"data-test":t,allowsLetters:n=!1,autoFocus:r=!1,codeLength:o=Id,disabled:a=!1,name:s,value:c="",handleSubmitCode:l=()=>{},onChange:u,refHiddenInput:d,hasError:m})=>{const[h,p]=f.useState(r),g=yc(c,{allowsLetters:n,codeLength:o});d!=null||(d=f.createRef());const C=()=>{d.current.selectionStart=d.current.selectionEnd=g.length},I=()=>{p(!0)},v=()=>{p(!1)},x=_=>{u(yc(_.target.value,{allowsLetters:n,codeLength:o}))},R=_=>{const T=_.clipboardData||window.clipboardData;if(!T)return;const E=yc(T.getData("text"),{allowsLetters:n,codeLength:o});new RegExp(`\\d{${o}}`).test(E)&&(u(E),l({"confirmation-code":E}))};return i.jsxs($S,{"data-test":t,children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:e,children:`${o} digit code`})}),i.jsx(GS,{id:e,autoComplete:"no-autocomplete",autoFocus:r,name:s,ref:d,value:g,onBlur:v,onChange:x,onFocus:I,onKeyDown:C,onPaste:R,"aria-invalid":m,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`}),fp(o).map(_=>{const T=h&&Math.min(g.length,o-1)===_,E=g.charAt(_),V=E!==""?E:T?"|":"";return i.jsx(YS,{disabled:a,isCursor:E==="",isFocused:T,maxLength:1,onChange:()=>{},tabIndex:-1,type:"tel",value:V},_)})]})};function yc(e,{allowsLetters:t,codeLength:n}){return e.trim().toUpperCase().replace(t?/[^0-9-A-Z]/g:/[^0-9-]/g,"").replace(/[-]/g,r=>(r.charCodeAt(0)-65296).toString()).substring(0,n)}const KS=b("div").withConfig({displayName:"PinInputField__Container",componentId:"sc-1oeykwt-0"})(["",""],Bi);function QS(e){const{input:t,className:n,disabled:r,meta:{error:o,submitFailed:a,submitting:s},autoFocus:c,handleSubmitCode:l,styles:u,...d}=e,m=!!(o&&a),h=f.createRef(),[p,g]=f.useState(void 0);f.useEffect(()=>{var I;m&&((I=t.value)==null?void 0:I.length)===4&&(g(o),t.onChange(""),h.current.focus())},[m]);const C=I=>{g(void 0),t==null||t.onChange(I)};return i.jsxs(KS,{className:n,children:[i.jsx(zS,{...d,...t,onChange:C,autoFocus:c,handleSubmitCode:l,disabled:r||s,refHiddenInput:h,hasError:m||!!p}),i.jsx(sn,{id:`${d.id}--error`,hasError:m||!!p,errorMessage:p||o,styles:u})]})}const ZS=({actionsApi:e,component:t,inquiry:n})=>{const{disabled:r,hidden:o,optional:a,validations:s}=t.attributes,c=t.name,l=It(c,n.attributes["next-step"].name),u=mn({hidden:o,optional:a,validations:s}),d=l(o);f.useEffect(()=>{d&&e.setField(c,"")},[d]);const m=f.useMemo(()=>{const h=p=>d||!p||(p==null?void 0:p.length)>=4?null:a==null?void 0:a.message;return[...u,h]},[u,a==null?void 0:a.message,d]);return d?null:i.jsx(Re.Field,{component:QS,disabled:r,id:c,name:c,parse:Jt,validate:m,styles:t.styles})},JS=["ar","bn"],XS=e=>{var n,r,o,a,s;if(!e)return{};const t=Intl.NumberFormat(e.locale,{style:"currency",currency:e.currency}).formatToParts(.1111111111111);return{decimalLength:(o=(r=(n=t.find(c=>c.type==="fraction"))==null?void 0:n.value)==null?void 0:r.length)!=null?o:0,decimalSymbol:(a=t.find(c=>c.type==="decimal"))==null?void 0:a.value,currencySymbol:(s=t.find(c=>c.type==="currency"))==null?void 0:s.value}},ew=({id:e,hasError:t,hasWarning:n,enableAutofocus:r,onBlur:o,onChange:a,value:s,intlConfig:c,decimalScale:l,maxLength:u,prefix:d,suffix:m,disableGroupSeparators:h,decimalSeparator:p,...g})=>{var V,D,O;const[C,I]=f.useState(void 0),{decimalLength:v,decimalSymbol:x,currencySymbol:R}=f.useMemo(()=>XS(c),[c]),_=f.useMemo(()=>{if(l)return l;if(v&&v>0&&x){if(typeof C=="string")return C.includes(x)?v:void 0;if(typeof C=="number")return C%1>0?v:void 0}},[v,x,l,C]),T=f.useCallback((U,M,Y)=>{U!==C&&((Y==null?void 0:Y.float)!=null?Math.abs(Y.float)<=1e16-2&&(I(U),a(Y.float)):(I(U),a("")))},[a,C]);f.useEffect(()=>{Number(s!=null?s:"")!==Number(C!=null?C:"")&&I((s!=null?s:"").toString())},[s]);const E=!!c&&JS.includes((O=(D=(V=c==null?void 0:c.locale)==null?void 0:V.split)==null?void 0:D.call(V,"-"))==null?void 0:O[0]);return i.jsx(g0,{autoFocus:r,value:C,onValueChange:T,decimalScale:_,maxLength:Math.min(u!=null?u:17,17),...g,onBlur:()=>o==null?void 0:o(void 0),"aria-invalid":t,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`,id:e,intlConfig:E?void 0:c,prefix:d!=null?d:E?"":void 0,suffix:m!=null?m:E?R:void 0,decimalSeparator:p!=null?p:E?x:void 0,disableGroupSeparators:h!=null?h:E,disableAbbreviations:!0})},tw=b(ew).withConfig({displayName:"CurrencyInput",componentId:"sc-11h3wuq-0"})(["",";"],e=>Eo(e,e.theme)),nw=b("div").withConfig({displayName:"CurrencyInputField__Container",componentId:"sc-3pqjn7-0"})([""," ",""],Bi,({styles:e})=>Mn(e)),iw=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a,warning:s},autoFocus:c,label:l,placeholder:u,"data-test":d="form",serverError:m,styles:h,...p}=e,g=a&&(o||s)||m,C=!!g;return i.jsxs(nw,{className:n,styles:h,children:[l&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:l}),i.jsx(tw,{...r,...p,autoFocus:c,hasError:C,id:t,placeholder:u,"data-test":d,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`}),i.jsx(sn,{id:`${t}--error`,"data-test":`${d}-error`,hasError:C,errorMessage:g,styles:h})]})},rw=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:u=[],"currency-code":d}=e.attributes,m=e.name,h=It(m,t.attributes["next-step"].name),p=mn({hidden:o,optional:s,validations:u}),g=h(o);f.useEffect(()=>{g?n.setField(m,""):!g&&!Mt(l)&&n.setField(m,l)},[g]);const{i18n:C}=z(),I=navigator.language.split("-")[0]===C.language.split("-")[0]?navigator.language:C.language;return g?null:i.jsx(Re.Field,{name:m,id:m,component:iw,disabled:h(r),validate:p,label:a,placeholder:c,type:"text",inputmode:"decimal",styles:e.styles,intlConfig:{locale:I,currency:d}})},ow=b("select").withConfig({displayName:"MaterialSelect__Select",componentId:"sc-yvsb2h-0"})(["appearance:none;&::-ms-expand{display:none;}"," padding:","px 0px ","px ","px;position:relative;color:",";"],xd,L.base,L.base,L.base/2,({hasValue:e,styles:t,theme:n})=>{var r,o,a;if(!e)return(a=A((o=(r=t==null?void 0:t["border-color"])==null?void 0:r.base)==null?void 0:o.base))!=null?a:n.colorInputBorder}),aw=b("div").withConfig({displayName:"MaterialSelect__Wrapper",componentId:"sc-yvsb2h-1"})(["position:relative;width:100%;&::after{",";right:","px;}"],Ws,L.base),sw=b(te).withConfig({displayName:"MaterialSelect__StyledMarkdown",componentId:"sc-yvsb2h-2"})([""," top:-14px;font-size:",";"],Cd,$t.small),Uf=({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s})=>{const c=!!s.value;return i.jsxs(aw,{className:e,children:[i.jsx(ow,{...s,focused:t,hasError:n,hasValue:c,hasWarning:r,styles:a}),i.jsx(sw,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:c,hasWarning:r,styles:a,children:o})]})},cw=b("select").withConfig({displayName:"Select__InnerSelect",componentId:"sc-plsfst-0"})(["",";appearance:none;&::-ms-expand{display:none;}height:",";opacity:unset;padding-top:","px;padding-bottom:","px;padding-left:","px;padding-right:","px;",""],e=>Er(e,e.theme,e.styles),Ji.input,L.base,L.base,L.base*2,L.base*4,({hasValue:e,hasError:t,styles:n,theme:r})=>{var s;if(e)return;if(((s=n==null?void 0:n["text-color"])==null?void 0:s.placeholder)!=null)return $(["font-weight:",";color:",";-webkit-text-fill-color:",";&:disabled{color:",";-webkit-text-fill-color:",";}",""],an.regular,A(n==null?void 0:n["text-color"].placeholder.base),A(n==null?void 0:n["text-color"].placeholder.base),A(n==null?void 0:n["text-color"].placeholder.disabled),A(n==null?void 0:n["text-color"].placeholder.disabled),t&&`
          &:not(:focus) {
            color: ${A(n==null?void 0:n["text-color"].placeholder.errored)};
            -webkit-text-fill-color: ${A(n==null?void 0:n["text-color"].placeholder.errored)};
          }
        `);const o=gt(r.colorFont).rgb(),a=gt(r.colorError).rgb();return $(["font-weight:",";color:",";-webkit-text-fill-color:",";&:disabled{color:",";-webkit-text-fill-color:",";}",""],an.regular,`rgba(${o.red()}, ${o.green()}, ${o.blue()}, 0.6)`,`rgba(${o.red()}, ${o.green()}, ${o.blue()}, 0.6)`,S.Color.CoreSlate800,S.Color.CoreSlate800,t&&`
        &:not(:focus) {
          color: ${`rgba(${a.red()}, ${a.green()}, ${a.blue()}, 0.7)`};
          -webkit-text-fill-color: ${`rgba(${a.red()}, ${a.green()}, ${a.blue()}, 0.7)`};
        }
      `)}),lw=b("div").withConfig({displayName:"Select__Wrapper",componentId:"sc-plsfst-1"})(["position:relative;"]),dw=b(Gl).withConfig({displayName:"Select__StyledIconCaretDown",componentId:"sc-plsfst-2"})(["position:absolute;right:","px;top:50%;transform:translateY(-50%);display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],L.base*2,({styles:e,theme:t})=>{var n,r,o;return(o=A((r=(n=e==null?void 0:e["text-color"])==null?void 0:n.value)==null?void 0:r.base))!=null?o:t.colorFont}),Sd=({value:e,hasError:t,styles:n,...r})=>i.jsxs(lw,{children:[i.jsx(cw,{...r,value:e,hasValue:!!e,hasError:t,styles:n}),!r.disabled&&i.jsx(dw,{styles:n})]}),_c=b("span").withConfig({displayName:"ThemedFormDateInput__VisuallyHiddenSpan",componentId:"sc-174kr1d-0"})(["border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;"]),uw=b("div").withConfig({displayName:"ThemedFormDateInput__OutlinedContainer",componentId:"sc-174kr1d-1"})([""," display:flex;flex-wrap:wrap;margin-left:-",";margin-right:-",";"],({styles:e})=>hr(e),S.Spacing[2],S.Spacing[2]),mw=b("div").withConfig({displayName:"ThemedFormDateInput__MaterialContainer",componentId:"sc-174kr1d-2"})([""," display:flex;flex-wrap:wrap;margin-left:-",";margin-right:-",";"],ko,S.Spacing[2],S.Spacing[2]),hw=b("div").withConfig({displayName:"ThemedFormDateInput__OutlinedLabelContainer",componentId:"sc-174kr1d-3"})(["",""],({styles:e})=>Mn(e)),Pu=b("div").withConfig({displayName:"ThemedFormDateInput__ErrorContainer",componentId:"sc-174kr1d-4"})(["padding-left:",";"],S.Spacing[2]),Du=b("div").withConfig({displayName:"ThemedFormDateInput__Month",componentId:"sc-174kr1d-5"})(["flex:0 0 40%;max-width:40%;padding-left:",";padding-right:",";text-transform:capitalize;"],S.Spacing[2],S.Spacing[2]),$a=b("div").withConfig({displayName:"ThemedFormDateInput__DayOrYear",componentId:"sc-174kr1d-6"})(["flex:0 0 30%;max-width:30%;padding-left:",";padding-right:",";"],S.Spacing[2],S.Spacing[2]),pw=({disabled:e,input:t,label:n,meta:{error:r,submitFailed:o},textMonths:a,placeholderDay:s,placeholderMonth:c,placeholderYear:l,labelMonth:u,labelDay:d,labelYear:m,styles:h})=>{const[p,g]=f.useState(""),[C,I]=f.useState(""),[v,x]=f.useState(""),R=f.useContext(Ze),_=f.useMemo(()=>{if(/\d{4}-\d{2}-\d{2}/.test(t.value)){const M=new Date(t.value);return{year:String(M.getUTCFullYear()),month:String(M.getUTCMonth()),day:String(M.getUTCDate())}}else return{year:v,month:C,day:p}},[t.value,v,C,p]),T=M=>{D({year:_.year,month:_.month,day:M.target.value})},E=M=>{D({year:_.year,month:M.target.value,day:_.day})},V=M=>{D({year:M.target.value,month:_.month,day:_.day})},D=M=>{g(M.day),I(M.month),x(M.year);const Y=parseInt(M.year,10),F=parseInt(M.month,10),H=parseInt(M.day,10),q=new Date(Date.UTC(Y,F,H));if(!isNaN(q.getTime())&&q.getUTCFullYear()===Y&&q.getUTCMonth()===F&&q.getUTCDate()===H){const W=q.toISOString().split("T")[0];t.onChange(W)}else t.onChange("")},O=()=>{const M=!!(r&&o);return i.jsxs(hw,{styles:h,children:[n&&i.jsx(te,{wrapper:"label",wrapperProps:{style:{marginBottom:u||m||d?"0":"8px"}},children:n}),i.jsxs(uw,{styles:h,children:[i.jsxs(Du,{children:[u&&i.jsxs("label",{htmlFor:t.name+"-month",children:[i.jsx(_c,{children:n&&i.jsx(te,{children:`${n}, `})}),i.jsx(te,{wrapperProps:{role:"presentation",style:{marginBottom:S.Spacing[2]}},children:u})]}),i.jsxs(Sd,{id:t.name+"-month",name:t.name+"-month",disabled:e,hasError:M,onChange:E,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,value:_.month,styles:h,children:[i.jsx("option",{value:"",disabled:!0,children:c}),a.map((Y,F)=>i.jsx("option",{value:F,children:Y},F))]})]}),i.jsxs($a,{children:[d&&i.jsxs("label",{htmlFor:t.name+"-day",children:[i.jsx(_c,{children:n&&i.jsx(te,{children:`${n}, `})}),i.jsx(te,{wrapperProps:{role:"presentation",style:{marginBottom:S.Spacing[2]}},children:d})]}),i.jsx(vs,{id:t.name+"-day",name:t.name+"-day",disabled:e,hasError:M,min:1,max:31,onChange:T,placeholder:s,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:_.day,styles:h})]}),i.jsxs($a,{children:[m&&i.jsxs("label",{htmlFor:t.name+"-year",children:[i.jsx(_c,{children:n&&i.jsx(te,{children:`${n}, `})}),i.jsx(te,{wrapperProps:{role:"presentation",style:{marginBottom:S.Spacing[2]}},children:m})]}),i.jsx(vs,{id:t.name+"-year",name:t.name+"-year",disabled:e,hasError:M,min:1900,max:new Date().getFullYear(),onChange:V,placeholder:l,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:_.year,styles:h})]}),i.jsx(Pu,{children:i.jsx(sn,{id:`${t.name}--error`,hasError:M,errorMessage:r,styles:h})})]})]})},U=()=>{const M=!!(r&&o);return i.jsxs(mw,{children:[i.jsxs(Du,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:t.name+"-month",children:`${n}, ${c}`})}),i.jsxs(Uf,{id:t.name+"-month",name:t.name+"-month",disabled:e,hasError:M,onChange:E,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,value:_.month,labelText:n,styles:h,children:[i.jsx("option",{value:"",disabled:!0,children:c}),a.map((Y,F)=>i.jsx("option",{value:F,children:Y},F))]})]}),i.jsxs($a,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:t.name+"-day",children:`${n}, ${s}`})}),i.jsx(lr,{id:t.name+"-day",name:t.name+"-day",disabled:e,hasError:M,min:1,max:31,onChange:T,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:_.day,labelText:s,styles:h})]}),i.jsxs($a,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:t.name+"-year",children:`${n}, ${l}`})}),i.jsx(lr,{id:t.name+"-year",name:t.name+"-year",disabled:e,hasError:M,min:1900,max:9999,onChange:V,labelText:l,"aria-invalid":M,"aria-errormessage":`${t.name}--error`,"aria-describedby":`${t.name}--error`,type:"number",value:_.year,styles:h})]}),i.jsx(Pu,{children:i.jsx(sn,{id:`${t.name}--error`,hasError:M,errorMessage:r,styles:h})})]})};switch(R.inputStyle){case Tt.Material:return U();case Tt.Outlined:default:return O()}},fw=Pl(pw),gw=({component:e,inquiry:t,actionsApi:n})=>{const{"placeholder-day":r,"placeholder-month":o,"placeholder-year":a,"label-day":s,"label-month":c,"label-year":l,"text-months":u,disabled:d,hidden:m,label:h,optional:p,prefill:g,validations:C}=e.attributes,I=e.name,v=It(I,t.attributes["next-step"].name),x=mn({hidden:m,optional:p,validations:C}),R=v(m);return f.useEffect(()=>{R?n.setField(I,""):!R&&!Mt(g)&&n.setField(I,g)},[R]),R?null:i.jsx(Re.Field,{name:I,id:I,component:fw,disabled:v(d),parse:Jt,validate:x,label:h,type:"text",placeholderMonth:o,placeholderDay:r,placeholderYear:a,labelDay:s,labelMonth:c,labelYear:l,textMonths:u,styles:e.styles})},Je=b.div.attrs(()=>({"aria-hidden":!0})).withConfig({displayName:"Spacer",componentId:"sc-1733kfs-0"})(["height:","px;width:","px;flex:none;"],({height:e=5})=>e*Sn,({width:e=0})=>e*Sn),ma=250,bw=b.div.withConfig({displayName:"Dialog__Backdrop",componentId:"sc-1ep06vy-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:",";@media ","{position:fixed;}&.dialog-enter{background-color:rgba(0,0,0,0);pointer-events:none;}&.dialog-enter-active,&.dialog-enter-done{background-color:rgba(0,0,0,0.7);transition:background-color ","ms;pointer-events:unset;}&.dialog-exit{background-color:rgba(0,0,0,0.7);pointer-events:unset;}&.dialog-exit-active{background-color:rgba(0,0,0,0);transition:background-color ","ms;pointer-events:none;}"],yt.drawer,jt.isMobile,ma,ma),Cw=b.div.withConfig({displayName:"Dialog__Anim",componentId:"sc-1ep06vy-1"})(["position:absolute;bottom:0;width:100%;transition:","ms;.dialog-enter &{transform:translateY(100%);}.dialog-enter-active &{transform:translateY(0%);}.dialog-exit &{transform:translateY(0%);}.dialog-exit-active &{transform:translateY(100%);}"],ma),xw=b.div.withConfig({displayName:"Dialog__DialogContainer",componentId:"sc-1ep06vy-2"})(["box-shadow:0 0 6px 0 ",";background-color:",";color:",";margin:4px;pointer-events:all;user-select:none;position:relative;"," "," @media ","{max-height:","px;}@media ","{max-height:calc(100vh - 40px);}display:flex;flex-direction:column;"],_p.base,({styles:e,theme:t})=>{var n;return(n=A(e==null?void 0:e.backgroundColor))!=null?n:t.colorModalBackground},({theme:e})=>e.colorFont,({swipeable:e})=>e&&`
    cursor: grab;

    &:active {
      cursor: grabbing;
    }
  `,({styles:e})=>{var t,n,r,o,a,s,c,l,u,d;return`
    border-radius: ${(n=k((t=e==null?void 0:e.border)==null?void 0:t.radius))!=null?n:dn.rounded};
    padding-top: calc(${(o=k((r=e==null?void 0:e.padding)==null?void 0:r.top))!=null?o:"16px"} - ${Zo}px);
    padding-bottom: calc(${(s=k((a=e==null?void 0:e.padding)==null?void 0:a.bottom))!=null?s:"16px"} - ${Zo}px);
    padding-left: calc(${(l=k((c=e==null?void 0:e.padding)==null?void 0:c.left))!=null?l:"24px"} - ${Zo}px);
    padding-right: calc(${(d=k((u=e==null?void 0:e.padding)==null?void 0:u.right))!=null?d:"24px"} - ${Zo}px);
  `},jt.isNotMobile,Ra-40,jt.isMobile),vw=b.div.withConfig({displayName:"Dialog__SwipeHandle",componentId:"sc-1ep06vy-3"})(["position:absolute;top:8px;left:0;right:0;"]),Iw=b.div.withConfig({displayName:"Dialog__SwipeHandleInner",componentId:"sc-1ep06vy-4"})(["width:60px;margin:auto;height:4px;border-radius:",";background-color:",";"],dn.rounded,({theme:e})=>e.colorDivider);function Si({children:e,isOpen:t,onClose:n,styles:r,"aria-labelledby":o,"aria-describedby":a,"data-test":s="dialog"}){const[c,{enable:l,disable:u}]=rt();bd(n!=null?n:xC);const d=b0({onSwipedDown:()=>n==null?void 0:n(),preventDefaultTouchmoveEvent:!0,trackTouch:!0,trackMouse:!0}),m=n!=null,h=f.useRef(null),p=f.useCallback(()=>{l(),Yi(h.current)},[]),g=f.useCallback(()=>{setTimeout(Yi,0)},[]);return i.jsx(xa,{in:t,timeout:{enter:ma,exit:ma},mountOnEnter:!0,unmountOnExit:!0,onEntered:p,onExit:u,onExited:g,classNames:"dialog",children:i.jsx(kp,{active:c,focusTrapOptions:{escapeDeactivates:!1,clickOutsideDeactivates:!1,allowOutsideClick:!1,initialFocus:!1,fallbackFocus:document.body,setReturnFocus:!1},children:i.jsx(bw,{"data-test":"dialog__backdrop",id:"dialog__backdrop",onClick:n,children:i.jsx(Cw,{id:"dialog__animation",onClick:C=>C.stopPropagation(),children:i.jsxs(Sw,{styles:r,dialogContainerRef:h,"data-test":s,"aria-labelledby":o,"aria-describedby":a,swipeable:m,swipeHandlers:d,children:[m&&i.jsx(vw,{role:"presentation",children:i.jsx(Iw,{})}),i.jsx(ww,{children:e})]})})})})})}const Sw=({dialogContainerRef:e,swipeHandlers:{ref:t,...n},...r})=>(f.useEffect(()=>{var o,a;e.current!=null&&!yw(e.current)&&((a=(o=document.body).scrollTo)==null||a.call(o,{top:window.innerHeight-Ux,behavior:"smooth"}))},[]),i.jsx(xw,{role:"dialog",...n,...r,ref:o=>{e.current=o,t(o)}})),Zo=4,ww=b.div.withConfig({displayName:"Dialog__DialogScrollContainer",componentId:"sc-1ep06vy-5"})(["overflow-y:auto;padding:","px;"],Zo);function yw(e){const{top:t,height:n}=e.getBoundingClientRect();return t-n/2<window.innerHeight}const zs=(e,t)=>e&&(e==null?void 0:e.replace(/\s/g,""))in sa?`https://fonts.googleapis.com/css2?family=${e.replace(/\s/g,"+")}:wght@300;400;500;700;900&display=swap`:`https://fonts.googleapis.com/css2?family=${sa.Rubik}:wght@300;400;500;700;900&display=swap`;b.div.withConfig({displayName:"ThemedFonts__Container",componentId:"sc-16j6dhq-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamily:e}})=>Ht(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody);const Ks=b.span.withConfig({displayName:"TextBase",componentId:"sc-dokknq-0"})(({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=k((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=k((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=k((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=k((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,textAlign:e==null?void 0:e.justify.base.base,fontFamily:Ht(e==null?void 0:e["font-family"].base.base),fontSize:k(e==null?void 0:e["font-size"].base.base),fontWeight:Fn(e==null?void 0:e["font-weight"].base.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].base.base),lineHeight:k(e==null?void 0:e["line-height"].base.base),color:A(e==null?void 0:e["text-color"].base.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}}}),_w=b("p").withConfig({displayName:"ThemedParagraph__Paragraph",componentId:"sc-1xt23cs-0"})(["font-family:",";color:",";font-size:",";line-height:",";text-align:",";"],({theme:{fontFamily:e}})=>Ht(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody,({theme:e})=>e.textAlign),at=({styles:e,...t})=>(co(zs(e==null?void 0:e["font-family"].base.base)),i.jsx(i.Fragment,{children:e!=null?i.jsx(Ks,{...t,styles:e}):i.jsx(_w,{...t})})),wd=b("h1").attrs(()=>({tabIndex:-1})).withConfig({displayName:"TitleTextBase",componentId:"sc-1oqm48g-0"})(["",""],({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=k((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=k((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=k((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=k((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,textAlign:e==null?void 0:e.justify.base.base,fontFamily:Ht(e==null?void 0:e["font-family"].base.base),fontSize:k(e==null?void 0:e["font-size"].base.base),fontWeight:Fn(e==null?void 0:e["font-weight"].base.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].base.base),lineHeight:k(e==null?void 0:e["line-height"].base.base),color:A(e==null?void 0:e["text-color"].base.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}}}),Rw=b("h1").withConfig({displayName:"ThemedTitle__Title",componentId:"sc-xrn9gt-0"})(["font-family:",";color:",";font-size:",";font-weight:",";line-height:",";margin-bottom:",";text-align:",";"],({theme:{fontFamilyTitle:e}})=>Ht(e),({theme:e})=>e.colorFontTitle,({theme:e})=>e.fontSizeHeader,({theme:e})=>e.headerFontWeight,({theme:e})=>e.lineHeightHeader,({theme:e})=>e.headerMarginBottom,({theme:e})=>e.textAlign),dt=({styles:e,...t})=>(co(zs(e==null?void 0:e["font-family"].base.base)),i.jsx(i.Fragment,{children:e!=null?i.jsx(wd,{...t,styles:e}):i.jsx(Rw,{...t,tabIndex:-1})})),Aw=b("div").withConfig({displayName:"ThemedFormESignature__Container",componentId:"sc-dy8tgn-0"})([""," ",""],Bi,Gs),Tw=b.div.withConfig({displayName:"ThemedFormESignature__SignaturePadWrapper",componentId:"sc-dy8tgn-1"})(({styles:e})=>{var t,n,r,o;return{position:"relative",height:"120px",borderStyle:"solid",borderColor:A(e==null?void 0:e["border-color"].base.base),borderRadius:k(e==null?void 0:e["border-radius"].base.base),borderTopWidth:k((t=e==null?void 0:e["border-width"].base.base)==null?void 0:t.top),borderBottomWidth:k((n=e==null?void 0:e["border-width"].base.base)==null?void 0:n.bottom),borderLeftWidth:k((r=e==null?void 0:e["border-width"].base.base)==null?void 0:r.left),borderRightWidth:k((o=e==null?void 0:e["border-width"].base.base)==null?void 0:o.right),"&:hover":{cursor:"pointer"}}}),Ew=b.hr.withConfig({displayName:"ThemedFormESignature__SignaturePadOverlay",componentId:"sc-dy8tgn-2"})(({styles:e})=>{var t;return{position:"absolute",left:"10%",right:"10%",bottom:S.Spacing[5],margin:"auto",borderStyle:"solid",borderColor:A(e==null?void 0:e["border-color"].base.base),borderBottomWidth:k((t=e==null?void 0:e["border-width"].base.base)==null?void 0:t.bottom)}}),kw=b.div.withConfig({displayName:"ThemedFormESignature__ButtonWrapper",componentId:"sc-dy8tgn-3"})(["display:flex;justify-content:space-between;gap:",";"],S.Spacing[3]),Nw=b.button.withConfig({displayName:"ThemedFormESignature__AddSignatureButton",componentId:"sc-dy8tgn-4"})(["",";height:160px;width:100%;background-color:",";border:2px solid ",";border-radius:",";&:hover{cursor:pointer;}"],S.Typography.TextMedium,({styles:e})=>A(e==null?void 0:e["background-color"]["signature-preview"].base),({styles:e})=>A(e==null?void 0:e["border-color"].base.base),({styles:e})=>k(e==null?void 0:e["border-radius"].base.base)),jw=b.button.withConfig({displayName:"ThemedFormESignature__AddSignaturePreview",componentId:"sc-dy8tgn-5"})(["position:relative;height:160px;width:100%;background-color:",";border:2px solid ",";border-radius:",";&:hover{cursor:pointer;}"],({styles:e})=>A(e==null?void 0:e["background-color"]["signature-preview"].base),({styles:e})=>A(e==null?void 0:e["border-color"].base.base),({styles:e})=>k(e==null?void 0:e["border-radius"].base.base)),Pw=b.img.withConfig({displayName:"ThemedFormESignature__PreviewImage",componentId:"sc-dy8tgn-6"})(["height:100%;width:100%;max-height:128px;object-fit:contain;"]),Dw=b(C0).withConfig({displayName:"ThemedFormESignature__EditSignatureIcon",componentId:"sc-dy8tgn-7"})(["position:absolute;top:",";right:",";"],S.Spacing[4],S.Spacing[4]),Ow=b.div.withConfig({displayName:"ThemedFormESignature__DialogHeaderWrapper",componentId:"sc-dy8tgn-8"})(["display:flex;justify-content:space-between;"]),Lw=b.button.withConfig({displayName:"ThemedFormESignature__DialogCloseButton",componentId:"sc-dy8tgn-9"})(["width:24px;background-color:transparent;color:",";&:hover{cursor:pointer;}"],({styles:e})=>A(e==null?void 0:e["text-color"].label.base)),Fw=e=>{var U,M,Y,F;const{input:{onChange:t,value:n},meta:{error:r,submitFailed:o},id:a,label:s,placeholder:c,dialogTitle:l,dialogText:u,clearButtonText:d,saveButtonText:m,styles:h,disabled:p}=e,g=!!(r&&o),[C,{enable:I,disable:v}]=rt(!1),x=f.useRef(null),R=f.useCallback(()=>{var H,q;(q=(H=x.current)==null?void 0:H.instance)==null||q.clear()},[]),_=f.useCallback(()=>{var H,q;if((q=(H=x.current)==null?void 0:H.instance)!=null&&q.isEmpty())t(null);else{const W=x.current.toDataURL();t(W!=null?W.split(",")[1]:null)}v()},[t,v]),T=(U=h==null?void 0:h["button-primary-style"])==null?void 0:U["save-signature-button"].base,E=(M=h==null?void 0:h["button-secondary-style"])==null?void 0:M["clear-signature-button"].base,V=(Y=h==null?void 0:h["title-style"])==null?void 0:Y["dialog-title"].base,D=(F=h==null?void 0:h["text-style"])==null?void 0:F["dialog-text"].base,O={margin:{base:{base:null}},justify:{base:{base:Aa.Start}},"font-family":{base:{base:h==null?void 0:h["font-family"].placeholder.base}},"font-size":{base:{base:h==null?void 0:h["font-size"].placeholder.base}},"font-weight":{base:{base:h==null?void 0:h["font-weight"].placeholder.base}},"letter-spacing":{base:{base:h==null?void 0:h["letter-spacing"].placeholder.base}},"line-height":{base:{base:h==null?void 0:h["line-height"].placeholder.base}},"text-color":{base:{base:h==null?void 0:h["text-color"].placeholder.base}},"text-color-highlight":{base:{base:h==null?void 0:h["text-color"].placeholder.base}}};return i.jsxs(i.Fragment,{children:[i.jsxs(Aw,{children:[s&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:`${a}-open-dialog__btn`},children:s}),n?i.jsxs(jw,{type:"button",id:a,onClick:I,styles:h,"aria-errormessage":`${a}--error`,"aria-describedby":`${a}--error`,children:[i.jsx(Dw,{size:16,color:S.Color.CoreSlate800}),i.jsx(Pw,{src:Mw(n),alt:"Current signature preview"})]}):i.jsx(Nw,{type:"button",id:a,onClick:I,styles:h,"aria-errormessage":`${a}--error`,"aria-describedby":`${a}--error`,children:i.jsx(at,{styles:O,children:c})}),i.jsx(sn,{id:`${a}--error`,hasError:g,errorMessage:r})]}),i.jsxs(Si,{isOpen:C,onClose:v,"data-test":`${a}-dialog`,"aria-labelledby":`${a}-dialog__title`,"aria-describedby":`${a}-dialog__description`,children:[i.jsxs(Ow,{role:"presentation",children:[i.jsx(dt,{id:`${a}-dialog__title`,styles:V,children:l}),i.jsx(Lw,{type:"button",id:`${a}-dialog-close__btn`,onClick:v,styles:h,children:i.jsx(kh,{size:24,"aria-hidden":!0})})]}),i.jsx(at,{id:`${a}-dialog__description`,styles:D,children:u}),i.jsx(Je,{height:4}),i.jsxs(Tw,{role:"presentation",styles:h,children:[i.jsx(x0,{ref:x,height:120}),i.jsx(Ew,{role:"presentation",styles:h})]}),i.jsx(Je,{height:4}),i.jsxs(kw,{role:"presentation",children:[i.jsx(ua,{type:"button",id:`${a}-dialog-save__btn`,styles:E,onClick:R,children:d}),i.jsx(ua,{type:"button",id:`${a}-dialog-clear__btn`,styles:T,onClick:_,children:m})]})]})]})},Mw=e=>`data:image/png;base64,${e}`,Vw=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:u,"dialog-title":d,"dialog-text":m,"clear-button-text":h,"save-button-text":p}=e.attributes,g=e.name,C=It(g,t.attributes["next-step"].name),I=mn({hidden:o,optional:s,validations:u}),v=C(o);return f.useEffect(()=>{v?n.setField(g,""):!v&&!Mt(l)&&n.setField(g,l)},[v]),v?null:i.jsx(Re.Field,{id:g,name:g,component:Fw,disabled:C(r),parse:Jt,validate:I,label:a,placeholder:c,dialogTitle:d,dialogText:m,clearButtonText:h,saveButtonText:p,styles:e.styles})},Hf="USE PREVIOUS FILE",Bw=b("div").withConfig({displayName:"ThemedFormFileUpload__FileUploadContainer",componentId:"sc-1etar0k-0"})([""," ",""],Bi,({styles:e})=>Mn(e)),Uw=b("input").withConfig({displayName:"ThemedFormFileUpload__UploadInput",componentId:"sc-1etar0k-1"})(["display:block;"]),Hw=e=>{const{input:{onChange:t},meta:{error:n,submitFailed:r},id:o,label:a,fileUploadLimit:s,allowedFileTypes:c,disabled:l,styles:u,prefill:d}=e,m=!!(n&&r),[h,p]=f.useState(!1);f.useEffect(()=>{t(d?Hf:[])},[]);const g=f.useCallback(C=>{const I=C.target.files;t(()=>{const v=Array.from(I!=null?I:[]);if(v&&v.length)return p(!0),v})},[t]);return i.jsxs(Bw,{styles:u,children:[a&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:o},children:a}),i.jsx(Uw,{id:o,name:o,accept:c.join(","),"data-test":`${o}__upload-input`,disabled:l,multiple:s>1,onChange:g,type:"file","aria-errormessage":`${o}--error`,"aria-describedby":`${o}--error`}),d&&!h&&i.jsx(te,{children:d.map(C=>`- ${C}`).join(`
`)}),i.jsx(sn,{id:`${o}--error`,hasError:m,errorMessage:n,styles:u})]})},qw=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,prefill:o,hidden:a,label:s,optional:c,validations:l,"file-upload-limit":u,"allowed-file-types":d}=e.attributes,m=e.name,h=It(m,t.attributes["next-step"].name),p=ot(x=>{var R;return(R=x.form[t.attributes["next-step"].name])==null?void 0:R.values}),C=(p&&p[m])!==Hf,I=mn({hidden:a,optional:c,validations:C?l:[]}),v=h(a);return f.useEffect(()=>{v&&n.setField(m,"")},[v]),v?null:i.jsx(Re.Field,{id:m,name:m,component:Hw,disabled:h(r),validate:I,label:s,fileUploadLimit:u,allowedFileTypes:d,styles:e.styles,prefill:o})},$w=b("div").withConfig({displayName:"ThemedFormSelect__OutlinedContainer",componentId:"sc-14x9c3j-0"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),Gw=b("div").withConfig({displayName:"ThemedFormSelect__MaterialContainer",componentId:"sc-14x9c3j-1"})(["",""],ko);function fl(e){const{id:t,input:n,label:r,styles:o,meta:{error:a,submitFailed:s},...c}=e,{inputStyle:l}=f.useContext(Ze),u=!!(a&&s);switch(l){case Tt.Material:return i.jsxs(Gw,{children:[i.jsx(Uf,{...n,...c,id:t,hasError:u,"aria-invalid":u,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,labelText:r,styles:o}),i.jsx(sn,{id:`${t}--error`,hasError:u,errorMessage:a,styles:o})]});default:case Tt.Outlined:return i.jsxs($w,{styles:o,children:[r&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:r}),i.jsx(Sd,{...n,...c,id:t,hasError:u,"aria-invalid":u,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,styles:o}),i.jsx(sn,{id:`${t}--error`,hasError:u,errorMessage:a,styles:o})]})}}const mo=b("button").withConfig({displayName:"IconButton",componentId:"sc-1qrgawo-0"})(["cursor:pointer;pointer-events:auto;height:",";width:",";background:none;display:flex;align-items:center;justify-content:center;flex:none;border-radius:",";outline:0 !important;transition:box-shadow ",",background-color ",";box-shadow:0 0 0 2px transparent;:hover:not(:disabled){background-color:",";}:focus-visible:not(:disabled){box-shadow:0 0 0 2px ",";}:active:not(:disabled){background-color:",";}svg{color:",";}&:disabled{cursor:not-allowed;opacity:0.25;}"],S.Spacing[6],S.Spacing[6],({theme:e})=>e.borderRadius,et.Fast,et.Fast,gt(S.Color.CoreSlate200).fade(.5).rgb().string(),({theme:e})=>e.colorPrimary,gt(S.Color.CoreSlate300).fade(.5).rgb().string(),({theme:e})=>e.colorFont),Ou=b("div").withConfig({displayName:"ThemedMaskedInput__Container",componentId:"sc-1fzoepq-0"})(["position:relative;"]),Ww=b(Ts).withConfig({displayName:"ThemedMaskedInput__StyledThemedMaskedInput",componentId:"sc-1fzoepq-1"})(["",";"," left:0;position:absolute;background:transparent !important;border-color:transparent;caret-color:#000000;color:transparent !important;-webkit-text-fill-color:transparent !important;"],e=>Er(e,e.theme,e.styles),e=>{if(e.$secured)return`font-family: ${e.theme.text.fontFamily.mono};
        &::placeholder {
          font-family: ${e.$fontFamily||e.theme.text.fontFamily.base};
        }
      `}),Yw=b(vs).withConfig({displayName:"ThemedMaskedInput__DisplayInput",componentId:"sc-1fzoepq-2"})(["",";",""],e=>Er(e,e.theme,e.styles),e=>{if(e.$secured)return`font-family: ${e.theme.text.fontFamily.mono};
        &::placeholder {
          font-family: ${e.$fontFamily||e.theme.text.fontFamily.base};
        }
      `}),zw=b(Ts).withConfig({displayName:"ThemedMaskedInput__StyledMaterialThemedMaskedInput",componentId:"sc-1fzoepq-3"})([""," font-size:",";font-weight:",";line-height:",";padding:"," "," "," ",";width:100%;left:0;position:absolute;background-color:",";border-color:transparent;caret-color:#000000;color:transparent !important;"],({$styles:e,$secured:t,theme:n})=>{var o,a;const r=t?n.text.fontFamily.mono:(a=(o=e==null?void 0:e["font-family"])==null?void 0:o.base)==null?void 0:a.base;return`font-family: ${r!=null?r:n.text.fontFamily.base};`},({$styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["font-size"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:$t.input},({$styles:e})=>{var t,n,r;return(r=(n=(t=e==null?void 0:e["font-weight"])==null?void 0:t.value)==null?void 0:n.base)!=null?r:an.regular},({$styles:e})=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e["line-height"])==null?void 0:t.value)==null?void 0:n.base))!=null?r:$n.input},S.Spacing[2],S.Spacing[2],S.Spacing[2],S.Spacing[1],({$styles:e,theme:t})=>{var n,r,o;return(o=A((r=(n=e==null?void 0:e["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:t.colorInputBackground}),Kw=b(lr).withConfig({displayName:"ThemedMaskedInput__DisplayMaterialInput",componentId:"sc-1fzoepq-4"})(["background-color:transparent !important;pointer-events:none;> input{"," background-color:transparent !important;}"],({styles:e,$secured:t,theme:n})=>{var o,a;const r=t?n.text.fontFamily.mono:(a=(o=e==null?void 0:e["font-family"])==null?void 0:o.base)==null?void 0:a.base;return`font-family: ${r!=null?r:n.text.fontFamily.base};`}),Qw=b("div").withConfig({displayName:"ThemedMaskedInput__OutlinedContainer",componentId:"sc-1fzoepq-5"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),Zw=b("div").withConfig({displayName:"ThemedMaskedInput__MaterialContainer",componentId:"sc-1fzoepq-6"})(["",""],ko),qf=b.div.withConfig({displayName:"ThemedMaskedInput__ButtonContainer",componentId:"sc-1fzoepq-7"})(["position:absolute;right:0;z-index:",";height:100%;display:flex;align-items:center;padding-right:",";[dir='rtl'] &{right:unset;left:0;padding-right:unset;padding-left:",";}"],yt.inputButtons,S.Spacing[2],S.Spacing[2]),Jw=b(qf).withConfig({displayName:"ThemedMaskedInput__MaterialButtonContainer",componentId:"sc-1fzoepq-8"})(["height:","px;"],vd),$f=({meta:{error:e,submitFailed:t},input:n,mask:r,label:o,secure:a=!0,serverError:s,styles:c,...l})=>{var T,E,V,D;const{inputStyle:u}=f.useContext(Ze),[d,{toggle:m,set:h}]=rt(a);f.useEffect(()=>{h(a)},[a,h]);const p=d?Xw((T=n.value)!=null?T:"",r):(E=n.value)!=null?E:"",g=t&&e||s,C=!!g,I=(D=(V=c==null?void 0:c["font-family"])==null?void 0:V.base)==null?void 0:D.base,[v,{enable:x,disable:R}]=rt(!1),_={"data-1p-ignore":!0};switch(u){case Tt.Material:return i.jsx(Zw,{children:i.jsxs(Ou,{children:[a&&i.jsx(Jw,{children:i.jsx(mo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:m,tabIndex:-1,"aria-label":d?"show value":"hide value",children:d?i.jsx(os,{"aria-hidden":!0,height:16,width:16}):i.jsx(as,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(zw,{...l,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:"",onFocus:x,onBlur:R,"aria-invalid":C,"aria-errormessage":`${l.id}--error`,"aria-describedby":`${l.id}--error`,$styles:c,$secured:!!d,..._}),i.jsx(Kw,{value:p,readOnly:!0,disabled:l.disabled,hasError:C,labelText:o!=null?o:"",tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",styles:c,$secured:!!d,focused:v}),i.jsx(sn,{id:`${l.id}--error`,hasError:C,errorMessage:g,styles:c})]})});default:return i.jsxs(Qw,{styles:c,children:[o&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:n.name},children:o}),i.jsxs(Ou,{children:[a&&i.jsx(qf,{children:i.jsx(mo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:m,tabIndex:-1,"aria-label":d?"show value":"hide value",children:d?i.jsx(os,{"aria-hidden":!0,height:16,width:16}):i.jsx(as,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(Ww,{...l,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholderChar:"",placeholder:void 0,"aria-invalid":C,"aria-errormessage":`${l.id}--error`,"aria-describedby":`${l.id}--error`,styles:c,$fontFamily:I,$secured:!!d,..._}),i.jsx(Yw,{value:p,readOnly:!0,disabled:l.disabled,hasError:C,placeholder:l.placeholder,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",styles:c,$fontFamily:I,$secured:!!d})]}),i.jsx(sn,{id:`${l.id}--error`,hasError:C,errorMessage:g,styles:c})]})}},Lu="";function Xw(e,t){return Array.isArray(t)?e.split("").map((n,r)=>t[r]instanceof RegExp?Lu:n).join(""):Lu.repeat(e.length)}const ey=b("div").withConfig({displayName:"ThemedFormInternationalDb__OutlinedLabelContainer",componentId:"sc-qpdgwp-0"})(["",""],({styles:e})=>Mn(e)),ty=({allowedIdTypes:e,countryOptions:t,idTypeOptions:n,hideCountryIfPrefilled:r,hideTypeIfPrefilled:o,hideCountryIfSingleChoice:a,hideTypeIfSingleChoice:s,fieldKeyIdbCountry:c,fieldKeyIdbType:l,fieldKeyIdbValue:u,label:d,labelIdbCountry:m,labelIdbType:h,labelIdbValue:p,placeholderIdbCountry:g,placeholderIdbType:C,placeholderIdbValue:I,validateIdbCountry:v,validateIdbType:x,validateIdbValue:R,serverErrorIdbCountry:_,serverErrorIdbType:T,serverErrorIdbValue:E,disabled:V,styles:D,setField:O,selectedCountry:U,selectedType:M,countryPrefilled:Y,typePrefilled:F})=>{var se,Se,Ee,he,de,Ie,ye,je,ce,Q;const H=f.useMemo(()=>{const K=e.find(le=>le["country-code"]===U&&le["id-type"]===M),be=K==null?void 0:K.placeholder,Oe=!!(K!=null&&K.secure),ze=K==null?void 0:K.description,re=(K==null?void 0:K.mask)!=null&&K.mask!==""?K.mask.split("").map(le=>{switch(le){case"#":return/\d/;case"@":return/[a-z]/i;case"*":return/\w/;default:return le}}):!1;return{description:ze,mask:re,placeholder:be,secure:Oe}},[e,U,M]),q=f.useMemo(()=>Y&&r||t.length===1&&a,[t,Y,r,a]),W=f.useMemo(()=>F&&o||n.length===1&&s,[n,F,o,s]),X=f.useCallback(()=>{O(u,""),O(l,"")},[l,u,O]),oe=f.useCallback(()=>{O(u,"")},[u,O]);return i.jsxs(i.Fragment,{children:[d&&i.jsx(ey,{styles:(Se=(se=D==null?void 0:D["input-select-style"])==null?void 0:se.base)==null?void 0:Se.base,children:i.jsx(te,{wrapper:"label",wrapperProps:{style:{marginBottom:0}},children:d})}),!q&&i.jsxs(Re.Field,{"data-test":"idb-country",id:c,name:c,component:fl,disabled:V,validate:v,label:m,styles:(he=(Ee=D==null?void 0:D["input-select-style"])==null?void 0:Ee.base)==null?void 0:he.base,serverError:_,onChange:X,children:[i.jsx("option",{value:"",disabled:!0,children:g!=null?g:""}),t.map(K=>i.jsx("option",{value:K.code,children:K.name},K.code))]}),!W&&i.jsxs(Re.Field,{"data-test":"idb-type",id:l,name:l,component:fl,disabled:V||!U,validate:x,label:h,styles:(Ie=(de=D==null?void 0:D["input-select-style"])==null?void 0:de.base)==null?void 0:Ie.base,serverError:T,onChange:oe,children:[i.jsx("option",{value:"",disabled:!0,children:C!=null?C:""}),n.map(K=>i.jsx("option",{value:K.idbType,children:K.idbName},K.idbType))]}),i.jsx(Re.Field,{"data-test":"idb-value",name:u,id:u,component:$f,disabled:V||!U||!M,parse:Jt,validate:R,label:p,mask:H==null?void 0:H.mask,placeholder:(H==null?void 0:H.placeholder)||I,secure:H==null?void 0:H.secure,styles:(je=(ye=D==null?void 0:D["input-text-style"])==null?void 0:ye.base)==null?void 0:je.base,serverError:E}),!!(H!=null&&H.description)&&i.jsx(at,{styles:(Q=(ce=D==null?void 0:D["text-style"])==null?void 0:ce.base)==null?void 0:Q.base,children:H==null?void 0:H.description})]})},ny=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const o=`${e.name}.idb_country`,a=`${e.name}.idb_type`,s=`${e.name}.idb_value`,{"allowed-id-types":c,"hide-country-if-prefilled":l,"hide-type-if-prefilled":u,"hide-country-if-single-choice":d,"hide-type-if-single-choice":m,"prefill-idb-country":h,"prefill-idb-type":p,"prefill-idb-value":g,"validations-idb-country":C,"validations-idb-type":I,"validations-idb-value":v,label:x,"label-idb-country":R,"label-idb-type":_,"label-idb-value":T,"placeholder-idb-country":E,"placeholder-idb-type":V,"placeholder-idb-value":D,"error-idb-country":O,"error-idb-type":U,"error-idb-value":M,disabled:Y,hidden:F,optional:H}=e.attributes,q=oi(t,r,o,h),W=oi(t,r,a,p),X=oi(t,r,s,g),oe=q&&W&&X,se=It("",t.attributes["next-step"].name),Se=se(F),Ee=mn({optional:H,validations:C}),he=mn({optional:H,validations:I}),de=mn({optional:H,validations:v}),Ie=t.attributes["next-step"].name,ye=ot(le=>Re.formValueSelector(Ie)(le,o)),je=ot(le=>Re.formValueSelector(Ie)(le,a)),ce=f.useMemo(()=>gp("country-code",c),[c]),Q=f.useMemo(()=>Object.keys(ce).map(le=>({name:ce[le][0]["country-name"],code:le})),[ce]),K=f.useMemo(()=>{var Ue;if(!ye)return[];const le=(Ue=ce[ye])==null?void 0:Ue.map(G=>({idbType:G["id-type"],idbName:G.name}));return le==null?[]:le},[ce,ye]),be=f.useMemo(()=>new Set(Q.map(({code:le})=>le)),[Q]),Oe=f.useMemo(()=>{var le;return h?new Set((le=ce[h])==null?void 0:le.map(({"id-type":Ue})=>Ue)):new Set},[h,ce]),ze=!!h&&be.has(h),re=!!p&&Oe.has(p);return f.useEffect(()=>{Se?(n.setField(o,""),n.setField(a,""),n.setField(s,"")):ze?(n.setField(o,h),re&&(n.setField(a,p),g&&n.setField(s,g))):Q.length===1&&n.setField(o,Q[0].code)},[Se]),f.useEffect(()=>{Se||K.length===1&&n.setField(a,K[0].idbType)},[Se,a,K]),Se?null:i.jsx(i.Fragment,{children:i.jsx(ty,{allowedIdTypes:c,countryOptions:Q,idTypeOptions:K,hideCountryIfPrefilled:l,hideTypeIfPrefilled:u,hideCountryIfSingleChoice:d,hideTypeIfSingleChoice:m,disabled:se(Y),fieldKeyIdbCountry:o,fieldKeyIdbType:a,fieldKeyIdbValue:s,label:x,labelIdbCountry:R,labelIdbType:_,labelIdbValue:T,placeholderIdbCountry:E,placeholderIdbType:V,placeholderIdbValue:D,validateIdbCountry:Ee,validateIdbType:he,validateIdbValue:de,serverErrorIdbCountry:oe?O:null,serverErrorIdbType:oe?U:null,serverErrorIdbValue:oe?M:null,styles:e.styles,setField:n.setField,selectedCountry:ye,selectedType:je,countryPrefilled:ze,typePrefilled:re})})},iy=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const{disabled:o,error:a,hidden:s,label:c,mask:l,optional:u,placeholder:d,prefill:m,secure:h,validations:p}=e.attributes,g=e.name,C=oi(t,n,g,m),I=f.useMemo(()=>l!=null?l.split("").map(_=>{switch(_){case"#":return/\d/;case"@":return/[a-z]/i;case"*":return/\w/;default:return _}}):!1,[l]),v=It(g,t.attributes["next-step"].name),x=mn({hidden:s,optional:u,validations:p}),R=v(s);return f.useEffect(()=>{R?r.setField(g,""):!R&&!Mt(m)&&r.setField(g,m)},[R]),R?null:i.jsx(Re.Field,{name:g,id:g,component:$f,disabled:v(o),parse:Jt,validate:x,label:c,secure:h,mask:I,placeholder:d,serverError:C?a:null,styles:e.styles})},ry=b.div.withConfig({displayName:"ThemedFormMultiSelect__Container",componentId:"sc-1rmccfo-0"})([""," ",""],Bi,Gs),oy=b(Gl).withConfig({displayName:"ThemedFormMultiSelect__StyledIconCaretDown",componentId:"sc-1rmccfo-1"})(["margin-right:",";display:inline-block;pointer-events:none;rect[fill],path[fill]{fill:",";}"],S.Spacing[4],e=>{var t;return(t=e.theme.colorFont)!=null?t:Le.gray50}),ay=(e,t,n)=>({...e,container:(r,o)=>({...r,width:"100%",...e.container!=null&&e.container({},o)}),control:(r,o)=>{var a;return{...r,backgroundColor:n.colorInputBackground,borderRadius:Math.min(parseInt((a=n.borderRadius)!=null?a:dn.base,10),parseInt(dn.rounded)),borderColor:o.menuIsOpen||o.isFocused?n.colorPrimary:n.colorInputBorder,width:"100%",minHeight:Ji.input,boxShadow:o.isFocused?`0 0 0 1px ${n.colorPrimary}`:`0 0 0 0 ${n.colorPrimary}`,"&:hover":{},transition:et.Fast,...t?{borderColor:Le.red100,color:Le.red100,boxShadow:o.isFocused?`0 0 0 1px ${Le.red100}`:`0 0 0 0 ${Le.red100}`}:void 0,...e.control!=null&&e.control({},o)}},clearIndicator:(r,o)=>({...r,paddingRight:11,...e.clearIndicator!=null&&e.clearIndicator({},o)}),indicatorSeparator:(r,o)=>({...r,display:"none",...e.indicatorSeparator!=null&&e.indicatorSeparator({},o)}),menu:(r,o)=>({...r,backgroundColor:n.colorDropdownBackground,boxShadow:Mi.High,zIndex:yt.dropdown,...e.menu!=null&&e.menu({},o)}),menuList:(r,o)=>({...r,padding:Sn,...e.menuList!=null&&e.menuList({},o)}),multiValue:(r,o)=>{var a;return{...r,backgroundColor:(a=n.colorButtonPrimary)!=null?a:n.colorPrimary,color:n.colorFontButtonPrimary,fontFamily:n.fontFamily,paddingLeft:Sn/2,paddingRight:o.isDisabled?Sn*1.5:0,...e.multiValue!=null&&e.multiValue({},o)}},multiValueLabel:(r,o)=>{var a;return{...r,color:n.colorFontButtonPrimary,fontWeight:parseInt((a=n.buttonFontWeight)!=null?a:an.medium),...e.multiValueLabel!=null&&e.multiValueLabel({},o)}},multiValueRemove:(r,o)=>{var a,s;return{...r,color:n.colorFontButtonPrimary,transitionDuration:et.Fast,":hover":{backgroundColor:gt((a=n.colorButtonPrimary)!=null?a:n.colorPrimary).mix(gt("white"),.2).hex()},":active":{backgroundColor:gt((s=n.colorButtonPrimary)!=null?s:n.colorPrimary).mix(gt("white"),.4).hex()},...e.multiValueRemove!=null&&e.multiValueRemove({},o)}},option:(r,o)=>{var l;const a={...r,backgroundColor:"transparent",borderRadius:dn.rounded,color:(l=n.colorFont)!=null?l:Le.gray20,display:"flex",fontFamily:n.fontFamily,alignItems:"center",padding:`${S.Spacing[3]} ${S.Spacing[2]}`,transitionDuration:et.Fast,":active":{backgroundColor:n.colorDropdownOption}},s=o.isFocused?{backgroundColor:n.colorDropdownOption,":active":{backgroundColor:n.colorDropdownOption}}:{},c=o.isDisabled?{backgroundColor:"transparent",color:Le.gray50,":active":{backgroundColor:"transparent"},overflow:"auto"}:{};return{...a,...s,...c,...e.option!=null&&e.option({},o)}},placeholder:(r,o)=>{var a;return{...r,color:(a=n.colorFont)!=null?a:Le.gray20,marginLeft:0,marginRight:0,opacity:.6,...t?{color:Le.red100}:void 0,...e.placeholder!=null&&e.placeholder({},o)}},valueContainer:(r,o)=>({...r,fontSize:parseInt(n.text.paragraph.md.fontSize,10),fontFamily:n.fontFamily,textDecoration:"none",outline:"0 !important",padding:`2px ${S.Spacing[4]}`,...e.valueContainer!=null&&e.valueContainer({},o)})}),sy=e=>f.useMemo(()=>({DropdownIndicator:t=>{const{value:n,isDisabled:r}=t.selectProps,o=f.useContext(Ze);return Array.isArray(n)&&n.length>0?null:i.jsx(oy,{theme:o,disabled:r})},MultiValueRemove:t=>{const{isDisabled:n}=t.selectProps;return n?null:i.jsx(S0.MultiValueRemove,{...t})},...e}),[]),Fu=1e3,cy=({className:e,components:t,id:n,input:{value:r,onBlur:o,onChange:a,...s},isOptionDisabled:c=v=>!!v.disabled,label:l,meta:{error:u,submitFailed:d},onFocusOption:m,options:h,placeholder:p,styles:g={},componentStyles:C,...I})=>{const v=f.useContext(Ze),x=sy(t),R=f.useMemo(()=>h.reduce((F,H,q)=>(F[H.value]=q,F),{}),[h]),_=f.useMemo(()=>r==null||r===""?[]:r.map(F=>R[F]).map(F=>h[F]),[r,R]),T=f.useMemo(()=>{const F={minMatchCharLength:1,threshold:.4,keys:[{name:"label",weight:.9},{name:"value",weight:.1}]};return new v0(h,F)},[h]),E=h.length>Fu,V=f.useCallback(F=>new Promise(H=>{setTimeout(()=>H(T.search(F).map(({item:q})=>q)),E?250:0)}),[T]),D=f.useMemo(()=>E?h.slice(0,Fu):h,[h]),O=f.useCallback(()=>o(void 0),[o,r]),U=f.useCallback(F=>{const H=(F!=null?F:[]).map(q=>R[q.value]).sort((q,W)=>q-W).map(q=>h[q].value);a(H)},[a,R,h]),M=!!(u&&d),Y=ay(g,M,v);return i.jsxs(ry,{children:[l&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:n},children:l}),i.jsx(I0,{...s,id:n,isMulti:!0,isSearchable:!0,menuPlacement:"auto",loadOptions:V,defaultOptions:D,...I,isDisabled:I.disabled||I.isDisabled,isOptionDisabled:c,onBlur:O,onChange:U,value:_,options:h,placeholder:p,className:e,styles:Y,components:x,onFocusOption:m,"aria-invalid":M,"aria-errormessage":`${n}--error`,"aria-describedby":`${n}--error`}),i.jsx(sn,{id:`${n}--error`,hasError:M,errorMessage:u,styles:C})]})},ly=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,placeholder:l,prefill:u,validations:d}=e.attributes,m=e.name,h=It(m,t.attributes["next-step"].name),p=mn({hidden:o,optional:s,validations:d}),g=h(o);return f.useEffect(()=>{g?n.setField(m,""):!g&&!Mt(u)&&n.setField(m,u)},[g]),g?null:i.jsx(Re.Field,{id:m,name:m,component:cy,disabled:h(r),validate:p,label:a,placeholder:l,options:c.map(C=>({label:C.text,value:C.value})),componentStyles:e.styles})},dy=/^-?\d*\.?\d*$/,uy=/\d+/g;function my(e){return dy.test(e)}const hy=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:u=[],precision:d}=e.attributes,m=e.name,h=It(m,t.attributes["next-step"].name),p=mn({hidden:o,optional:s,validations:u}),g=h(o),[C,I]=f.useState(null);f.useEffect(()=>{g?n.setField(m,""):!g&&!Mt(l)&&n.setField(m,l)},[g]);const v=f.useCallback((R,_)=>{var O;if(R==null||!R.trim())return I(null),null;if(!my(R))return _;const[T,E]=(O=R.match(uy))!=null?O:[];if((E==null?void 0:E.length)>d||[T,E].join("").length>16)return _;if(R.endsWith(".")||R.endsWith("0"))I(R);else{if(R==="-")return I(R),_;I(null)}const D=parseFloat(C==="-"?-R:R);return 0<D&&D<1e-6?1e-6:D},[]),x=f.useCallback(R=>C!=null?C:R==null?"":R,[C]);return g?null:i.jsx(Re.Field,{normalize:v,format:x,name:m,id:m,component:qi,disabled:h(r),parse:Jt,validate:p,label:a,placeholder:c,type:"text",inputmode:"decimal",styles:e.styles})},py=e=>e.includes("Android"),fy=({id:e,hasError:t,hasWarning:n,enableAutofocus:r,onBlur:o,onChange:a,styles:s,...c})=>{const l=f.useCallback(d=>d==null?a(""):a(d),[a]),u=f.useMemo(()=>!py(navigator.userAgent),[navigator.userAgent]);return i.jsx("div",{dir:"ltr",children:i.jsx(w0,{autoFocus:r,smartCaret:u,onChange:l,...c,onBlur:()=>o==null?void 0:o(void 0),"aria-invalid":t,"aria-errormessage":`${e}--error`,"aria-describedby":`${e}--error`,id:e,autoComplete:"tel-national"})})},Gf=b(fy).withConfig({displayName:"PhoneInput",componentId:"sc-1ug4ee2-0"})(["",";display:flex;padding:0;"," & .PhoneInputCountry{padding-left:","px;margin-right:0;","}}& .PhoneInputInput{",";height:","px;padding:"," "," "," ","px;&,&:not(:disabled){background-color:transparent;border:none;box-shadow:none;}&:disabled{background-color:",";}","}& .PhoneInputCountrySelectArrow{border-color:",";border-style:solid;border-width:0 0 2px 2px;color:transparent;content:'';display:block;height:8px;margin:-4px 0 0 8px;opacity:1;transform:rotate(-45deg);transition:transform 0.1s,border-color 0.2s ease;width:8px;}&:focus-within .PhoneInputCountrySelectArrow{border-color:",";}"],e=>Er(e,e.theme,e.styles),({disabled:e,styles:t})=>{var n,r;return e&&$(["border-color:",";"],t!=null?A((r=(n=t==null?void 0:t["border-color"])==null?void 0:n.base)==null?void 0:r.disabled):S.Color.CoreSlate200)},L.base*2,({disabled:e,styles:t})=>{var n,r,o,a,s;return e&&$(["&,select{background-color:",";border-color:",";"],(o=A((r=(n=t==null?void 0:t["background-color"])==null?void 0:n.base)==null?void 0:r.disabled))!=null?o:pl,t!=null?A((s=(a=t==null?void 0:t["border-color"])==null?void 0:a.base)==null?void 0:s.disabled):S.Color.CoreSlate200)},e=>Er(e,e.theme,e.styles),parseFloat(Ji.input)-2,L.inputPadding,L.inputPadding,L.inputPadding,L.base,({styles:e})=>{var t,n,r;return(r=A((n=(t=e==null?void 0:e["background-color"])==null?void 0:t.base)==null?void 0:n.disabled))!=null?r:pl},({styles:e,hasError:t})=>t&&$(["&:not(:focus-within){color:",";&::placeholder{color:",";}}"],({theme:n})=>{var r,o,a;return(a=A((o=(r=e==null?void 0:e["text-color"])==null?void 0:r.error)==null?void 0:o.base))!=null?a:n.colorError},({theme:n})=>{var r,o,a;return(a=A((o=(r=e==null?void 0:e["text-color"])==null?void 0:r.error)==null?void 0:o.base))!=null?a:n.colorError}),Le.gray20,e=>e.theme.colorPrimary),gy=b("div").withConfig({displayName:"PhoneInputField__Container",componentId:"sc-188oy23-0"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),by=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a,warning:s},autoFocus:c,label:l,placeholder:u,"data-test":d="form",defaultCountry:m,serverError:h,styles:p,...g}=e,C=a&&(o||s)||h,I=!!C;return i.jsxs(gy,{className:n,styles:p,children:[l&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:l}),i.jsx(Gf,{...r,...g,autoFocus:c,hasError:I,"aria-invalid":I,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,placeholder:u,defaultCountry:m,"data-test":d,styles:p}),i.jsx(sn,{id:`${t}--error`,"data-test":`${d}-error`,hasError:I,errorMessage:C,styles:p})]})},Cy=({component:e,inquiry:t,inquiryLoading:n,actionsApi:r})=>{const{disabled:o,error:a,hidden:s,label:c,optional:l,placeholder:u,prefill:d,validations:m,"country-code":h,"disable-country-code-selection":p,"phone-number-format":g}=e.attributes,C=e.name,I=oi(t,n,C,d),v=It(C,t.attributes["next-step"].name),x=mn({hidden:s,optional:l,validations:m}),R=v(s);if(f.useEffect(()=>{R?r.setField(C,""):!R&&!Mt(d)&&r.setField(C,d)},[R]),R)return null;let _;return g===ol.International?_=!0:g===ol.National?_=!1:_=void 0,i.jsx(Re.Field,{id:C,name:C,component:by,disabled:v(o),parse:Jt,validate:x,label:c,placeholder:u,defaultCountry:h,initialValueFormat:_?null:"national",countrySelectProps:p?xy:void 0,countries:p?[h]:void 0,addInternationalOption:!p,international:_,serverError:I?a:null,styles:e.styles})},xy={disabled:!0,arrowComponent:()=>null},vy=b("div").withConfig({displayName:"ThemedFormRadioGroup__Container",componentId:"sc-df00c1-0"})(["",""],Bi),Iy=b("div").withConfig({displayName:"ThemedFormRadioGroup__MaterialContainer",componentId:"sc-df00c1-1"})([""," padding-top:",";"],ko,S.Spacing[2]),Sy=b("fieldset").withConfig({displayName:"ThemedFormRadioGroup__ItemContainer",componentId:"sc-df00c1-2"})(["display:flex;flex-direction:column;"]),wy=b(te).attrs(()=>({wrapper:"legend"})).withConfig({displayName:"ThemedFormRadioGroup__Legend",componentId:"sc-df00c1-3"})(["",""],({styles:e})=>Mn(e)),yy=b("label").withConfig({displayName:"ThemedFormRadioGroup__LineItem",componentId:"sc-df00c1-4"})(["position:relative;display:flex;align-items:baseline;margin:0 ",";& + &{margin-top:",";}"],S.Spacing[2],S.Spacing[2]),_y=b("input").withConfig({displayName:"ThemedFormRadioGroup__RadioStyled",componentId:"sc-df00c1-5"})(["margin-top:-1px;margin-right:0.5em;"]),Ry=b(te).attrs(()=>({wrapper:"p"})).withConfig({displayName:"ThemedFormRadioGroup__InputRadioGroupOptionLabel",componentId:"sc-df00c1-6"})(["p + p{margin:0 !important;}",""],({styles:e,disabled:t})=>({display:"inline-block",marginBottom:0,fontFamily:Ht(e==null?void 0:e["font-family"].base.base),fontSize:k(e==null?void 0:e["font-size"].base.base),fontWeight:Fn(e==null?void 0:e["font-weight"].base.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].base.base),lineHeight:k(e==null?void 0:e["line-height"].base.base),color:t?Gi.color.text.disabled:A(e==null?void 0:e["text-color"].base.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}})),Ay=b(te).attrs(()=>({wrapper:"p"})).withConfig({displayName:"ThemedFormRadioGroup__InputRadioGroupOptionDescription",componentId:"sc-df00c1-7"})(["p + p{margin:0 !important;}",""],({styles:e,disabled:t})=>({display:"inline-block",marginBottom:0,fontFamily:Ht(e==null?void 0:e["font-family"].description.base),fontSize:k(e==null?void 0:e["font-size"].description.base),fontWeight:Fn(e==null?void 0:e["font-weight"].description.base),letterSpacing:k(e==null?void 0:e["letter-spacing"].description.base),lineHeight:k(e==null?void 0:e["line-height"].description.base),color:t?Gi.color.text.disabled:A(e==null?void 0:e["text-color"].description.base),a:{color:A(e==null?void 0:e["text-color-highlight"].base.base),outlineColor:A(e==null?void 0:e["text-color-highlight"].base.base)}})),Ty=e=>{const{id:t,disabled:n,options:r,input:o,meta:{error:a,submitFailed:s},label:c,styles:l,...u}=e,{inputStyle:d}=f.useContext(Ze),m=!!(a&&s),h=f.useCallback(g=>{o.onChange(g.currentTarget.value)},[o.onChange]),p=()=>i.jsxs(i.Fragment,{children:[i.jsxs(Sy,{id:t,"aria-invalid":m,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,children:[c&&i.jsx(wy,{styles:l,children:c}),r.map(({text:g,value:C,"description-text":I},v)=>{const x=`${o.name}_${v}`,R=o.value===C.toString();return i.jsxs(yy,{isSelected:R,htmlFor:x,children:[i.jsx(_y,{...o,...u,id:x,"aria-label":g,"aria-describedby":I?`${x}-description`:void 0,disabled:n,onChange:h,type:"radio",value:C,checked:C===o.value,"aria-invalid":m}),i.jsxs(Mf,{spacing:S.Spacing[0],children:[i.jsx(Ry,{styles:l,disabled:n,children:g}),I&&i.jsx(Ay,{id:`${x}-description`,styles:l,disabled:n,children:I})]})]},C)})]}),i.jsx(sn,{id:`${t}--error`,hasError:m,errorMessage:a,styles:l})]});switch(d){case Tt.Material:return i.jsx(Iy,{children:p()});case Tt.Outlined:default:return i.jsx(vy,{children:p()})}},Ey=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,prefill:l,validations:u}=e.attributes,d=e.name,m=It(d,t.attributes["next-step"].name),h=mn({hidden:o,optional:s,validations:u}),p=m(o);return f.useEffect(()=>{p?n.setField(d,""):!p&&!Mt(l)&&n.setField(d,l)},[p]),p?null:i.jsx(Re.Field,{id:d,name:d,component:Ty,options:c,disabled:m(r),validate:h,label:a,styles:e.styles})},ky=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,options:c,placeholder:l,prefill:u,validations:d}=e.attributes,m=e.name,h=It(m,t.attributes["next-step"].name),p=mn({hidden:o,optional:s,validations:d}),g=h(o);return f.useEffect(()=>{g?n.setField(m,""):!g&&!Mt(u)&&n.setField(m,u)},[g]),g?null:i.jsxs(Re.Field,{id:m,name:m,component:fl,disabled:h(r),validate:p,label:a,styles:e.styles,children:[i.jsx("option",{value:"",disabled:!0,children:l!=null?l:""}),c.map(C=>i.jsx("option",{value:C.value,children:C.text},C.value))]})},Ny={[na.Text]:"text",[na.Email]:"email",[na.NumberPad]:"number"},jy=({component:e,inquiry:t,actionsApi:n,inquiryLoading:r})=>{const{"input-type":o=na.Text,disabled:a,hidden:s,label:c,optional:l,placeholder:u,prefill:d,validations:m,error:h}=e.attributes,p=e.name,g=oi(t,r,e.name,d),C=It(p,t.attributes["next-step"].name),I=mn({hidden:s,optional:l,validations:m}),v=C(s);return f.useEffect(()=>{v?n.setField(p,""):!v&&!Mt(d)&&n.setField(p,d)},[v]),v?null:i.jsx(Re.Field,{name:p,id:p,component:qi,disabled:C(a),parse:Jt,validate:I,label:c,placeholder:u,type:Ny[o],serverError:g?h:null,styles:e.styles})},Py=b("textarea").withConfig({displayName:"MaterialTextArea__TextArea",componentId:"sc-e9r5pm-0"})([""," height:",";resize:",";"],xd,e=>e.rows?"unset":Ji.textArea,e=>e.resize||"none"),Dy=b(te).withConfig({displayName:"MaterialTextArea__StyledMarkdown",componentId:"sc-e9r5pm-1"})([""," ",";"],Cd,({hasError:e,hasValue:t})=>(e||t)&&$(["top:-14px;font-size:",";"],$t.small)),Oy=b("div").withConfig({displayName:"MaterialTextArea__Container",componentId:"sc-e9r5pm-2"})(["position:relative;background-color:",";"],({theme:e})=>e.colorModalBackground);function Ly({className:e,focused:t,hasError:n,hasWarning:r,labelText:o,styles:a,...s}){return i.jsxs(Oy,{className:e,children:[i.jsx(Py,{focused:t,hasError:n,hasWarning:r,spellCheck:!1,styles:a,...s}),i.jsx(Dy,{wrapper:"label",wrapperProps:{htmlFor:s.id},focused:t,hasError:n,hasValue:!!s.value,hasWarning:r,styles:a,children:o})]})}const Wf=b("textarea").attrs(()=>({spellCheck:!1})).withConfig({displayName:"TextArea",componentId:"sc-1yx2okk-0"})(["",";height:",";resize:",";"],e=>Er(e,e.theme,e.styles),e=>e.rows?"unset":Ji.textArea,e=>e.resize||"none"),Fy=b("div").withConfig({displayName:"ThemedFormTextArea__OutlinedContainer",componentId:"sc-kz4u3a-0"})([""," ",""],({styles:e})=>hr(e),({styles:e})=>Mn(e)),My=b("div").withConfig({displayName:"ThemedFormTextArea__MaterialContainer",componentId:"sc-kz4u3a-1"})(["",""],ko),Vy=e=>{const{id:t,className:n,input:r,meta:{error:o,submitFailed:a},autoFocus:s,label:c,placeholder:l,styles:u,"data-test":d="form",...m}=e,{inputStyle:h}=f.useContext(Ze),p=!!(o&&a);switch(h){case Tt.Material:return i.jsxs(My,{className:n,children:[i.jsx(Ly,{labelText:c||l,...r,...m,autoFocus:s,hasError:p,"aria-invalid":p,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,"data-test":d,styles:u}),i.jsx(sn,{id:`${t}--error`,"data-test":`${d}-error`,hasError:p,errorMessage:o,styles:u})]});case Tt.Outlined:default:return i.jsxs(Fy,{className:n,styles:u,children:[c&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:c}),i.jsx(Wf,{...r,...m,autoFocus:s,hasError:p,"aria-invalid":p,"aria-errormessage":`${t}--error`,"aria-describedby":`${t}--error`,id:t,placeholder:l,"data-test":d,styles:u}),i.jsx(sn,{id:`${t}--error`,"data-test":`${d}-error`,hasError:p,errorMessage:o,styles:u})]})}},By=({component:e,inquiry:t,actionsApi:n})=>{const{disabled:r,hidden:o,label:a,optional:s,placeholder:c,prefill:l,validations:u,"allow-resize":d,rows:m}=e.attributes,h=e.name,p=It(h,t.attributes["next-step"].name),g=mn({hidden:o,optional:s,validations:u}),C=p(o);return f.useEffect(()=>{C?n.setField(h,""):!C&&!Mt(l)&&n.setField(h,l)},[C]),C?null:i.jsx(Re.Field,{name:h,id:h,component:Vy,disabled:p(r),parse:Jt,validate:g,label:a,rows:m,resize:d?"vertical":"none",placeholder:c,styles:e.styles})},Uy=b.div.withConfig({displayName:"LanguageSelector__LanguageWrapper",componentId:"sc-nq5bg2-0"})(["position:relative;display:flex;align-items:center;select{appearance:none;background-color:transparent;color:#696a7b;font-size:",";margin:-",";padding:",";padding-right:",";&:focus-visible{outline:"," auto 1px;}}&::after{",";height:0;width:0;pointer-events:none;right:-",";}"],$t.h4,S.Spacing[2],S.Spacing[2],S.Spacing[4],({theme:e})=>e.colorPrimary,Ws,S.Spacing[2]),Hy=b.div.withConfig({displayName:"LanguageSelector__GlobeSpacer",componentId:"sc-nq5bg2-1"})(["padding-right:4px;svg{display:block;}"]),qy=e=>{const{component:t,inquiry:n}=e,[r,o]=z(),a=t.attributes["enabled-locales"];return a.length===1?i.jsx("div",{"data-test":"ui-component__language-selector","aria-disabled":!0}):i.jsxs(Uy,{children:[i.jsx(Hy,{children:i.jsx(Sp,{"aria-hidden":!0})}),i.jsx("select",{"aria-label":r("intro.language-select-label"),"data-test":"ui-component__language-selector",dir:"ltr",onChange:s=>e.actionsApi.handleLanguageChange(n,o,s.target.value),defaultValue:o.language,children:Object.keys(Tr).filter(s=>a.includes(s)).map(s=>i.jsx("option",{value:s,lang:s,children:Tr[s]},s))})]})},$y=({actionsApi:e,component:t,inquiryLoading:n})=>{const[r]=z(),{loading:o,error:a,callback:s}=vt(async()=>{try{const c=await Nh((await ne.postResourceSingletonActionNew(w.Persona,"authentication-initiate")).meta);await e.onSubmit(t.name,{[t.name]:{"client-key":c.response.userHandle,"public-key":c,"expected-origin":window.location.origin}})}catch(c){c.name!=="NotAllowedError"&&me(c,"info")}},[e.onSubmit,t.name]);return At({error:a,onNetworkError:()=>e.showMessage(r("errors.network")),onError:c=>{c.name!=="NotAllowedError"&&me(c,"info")}}),i.jsx(ge,{onClick:s,disabled:o||n,isPending:o,styles:{height:{base:{base:{unit:"px",value:48}}},width:{base:{base:{unit:"%",value:100}}},justify:{base:{base:Aa.Start}},margin:{base:{base:null}},padding:{base:{base:null}},translate:{base:{base:null,focused:{x:{unit:"px",value:0},y:{unit:"px",value:-2}},active:null,disabled:null}},"font-family":{base:{base:null}},"font-size":{base:{base:{unit:"px",value:16}}},"font-weight":{base:{base:Ql.Medium}},"letter-spacing":{base:{base:{unit:"px",value:0}}},"line-height":{base:{base:{unit:"px",value:24}}},"text-color":{base:{base:{unit:"hex",value:S.Color.PrimaryWhite},focused:{unit:"hex",value:S.Color.PrimaryWhite},active:{unit:"hex",value:S.Color.PrimaryWhite},disabled:{unit:"hex",value:"#9194a6"}}},"background-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-radius":{base:{base:{unit:"px",value:25}}},"border-width":{base:{base:{top:{unit:"px",value:2},bottom:{unit:"px",value:2},left:{unit:"px",value:2},right:{unit:"px",value:2}}}},"shadow-color":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-offset":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-radius":{base:{base:null,focused:null,active:null,disabled:null}}},children:t.attributes.label})},Gy=({actionsApi:e,component:t,inquiryLoading:n})=>{const[r]=z(),{loading:o,error:a,callback:s}=vt(async()=>{const c=(await ne.postResourceSingletonActionNew(w.Persona,"registration-initiate")).meta,l=await jh(c);await e.onSubmit(t.name,{[t.name]:{"client-key":c.user.id,"public-key":l,"expected-origin":window.location.origin}})},[e.onSubmit,t.name]);return At({error:a,onNetworkError:()=>e.showMessage(r("errors.network")),onError:c=>{c.name!=="NotAllowedError"&&me(c,"info")}}),i.jsx(ge,{onClick:s,disabled:o||n,isPending:o,styles:{height:{base:{base:{unit:"px",value:48}}},width:{base:{base:{unit:"%",value:100}}},justify:{base:{base:Aa.Start}},margin:{base:{base:null}},padding:{base:{base:null}},translate:{base:{base:null,focused:{x:{unit:"px",value:0},y:{unit:"px",value:-2}},active:null,disabled:null}},"font-family":{base:{base:null}},"font-size":{base:{base:{unit:"px",value:16}}},"font-weight":{base:{base:Ql.Medium}},"letter-spacing":{base:{base:{unit:"px",value:0}}},"line-height":{base:{base:{unit:"px",value:24}}},"text-color":{base:{base:{unit:"hex",value:S.Color.PrimaryWhite},focused:{unit:"hex",value:S.Color.PrimaryWhite},active:{unit:"hex",value:S.Color.PrimaryWhite},disabled:{unit:"hex",value:"#9194a6"}}},"text-transform":{base:{base:Zl.None}},"background-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-color":{base:{base:{unit:"hex",value:"#3f48fd"},focused:null,active:null,disabled:null}},"border-radius":{base:{base:{unit:"px",value:25}}},"border-width":{base:{base:{top:{unit:"px",value:2},bottom:{unit:"px",value:2},left:{unit:"px",value:2},right:{unit:"px",value:2}}}},"shadow-color":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-offset":{base:{base:null,focused:null,active:null,disabled:null}},"shadow-radius":{base:{base:null,focused:null,active:null,disabled:null}}},children:t.attributes.label})},Wy=b.div.withConfig({displayName:"PersonaBranding__Wordmark",componentId:"sc-mgcrqn-0"})(["padding-top:",";margin-bottom:-3px;float:right;"],S.Spacing[2]),Mu="persona-branding-title",Yy=e=>{const{t}=z();return i.jsx(Wy,{children:i.jsxs("svg",{role:"img",width:"82",height:"29",viewBox:"0 0 82 29",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":Mu,children:[i.jsx("title",{id:Mu,children:t("intro.persona-logo-label")}),i.jsxs("g",{clipPath:"url(#clip0)",children:[i.jsx("path",{d:"M0 18.3669C0 15.3419 2.214 13.0828 5.3464 13.0828C8.4542 13.0828 10.7338 15.3419 10.7338 18.4087C10.7338 21.4132 8.53702 23.651 5.2398 23.651H2.6937V27.6296C2.6937 27.7748 2.6732 27.7936 2.5297 27.7936H0.164C0.01886 27.7936 0 27.7731 0 27.6296V18.3669ZM8.0401 18.3874C8.0401 16.79 7.04544 15.5699 5.3464 15.5699C3.6244 15.5699 2.6937 16.7925 2.6937 18.3669V21.1647H5.24226C7.04544 21.1647 8.0401 19.9831 8.0401 18.3874Z",fill:"#696A7B"}),i.jsx("path",{d:"M18.5738 13.0828C15.4029 13.0828 13.1446 15.4034 13.1446 18.5325C13.1446 21.496 15.1749 23.8584 18.7395 23.8584C20.1072 23.8584 21.4127 23.5058 22.3475 22.7596C22.3649 22.7447 22.3765 22.7241 22.3803 22.7015C22.384 22.6788 22.3797 22.6556 22.368 22.6358L21.1043 21.0196C21.0823 20.9921 21.0503 20.9744 21.0153 20.9705C20.9803 20.9665 20.9451 20.9765 20.9174 20.9983C20.2777 21.3775 19.5479 21.5781 18.8042 21.5788C16.9387 21.5788 16.1105 20.7703 15.8203 19.6313H23.3421C23.3682 19.6336 23.3945 19.6304 23.4193 19.6222C23.4441 19.6138 23.467 19.6004 23.4864 19.5829C23.506 19.5654 23.5215 19.544 23.5324 19.5202C23.5433 19.4964 23.5491 19.4706 23.5496 19.4444C23.5701 19.2992 23.5906 18.7605 23.5906 18.4292C23.5881 15.2378 21.6406 13.0828 18.5738 13.0828ZM15.7555 17.683C15.9834 16.1914 16.8953 15.2796 18.4697 15.2796C20.0859 15.2796 20.9977 16.2324 21.1847 17.683H15.7555Z",fill:"#696A7B"}),i.jsx("path",{d:"M30.7615 13.0828C31.7561 13.0828 32.4835 13.3288 32.7295 13.6011C32.7713 13.6429 32.7713 13.6831 32.7295 13.7651L31.88 15.6511C31.839 15.7331 31.798 15.7544 31.7348 15.7544C31.6315 15.7544 31.383 15.6724 30.9894 15.6724C29.5799 15.6724 28.8755 16.7089 28.8755 18.1586V23.4886C28.8755 23.6338 28.855 23.6526 28.7115 23.6526H26.3474C26.2023 23.6526 26.1834 23.6321 26.1834 23.4886V17.7486C26.1818 14.927 28.0678 13.0828 30.7615 13.0828Z",fill:"#696A7B"}),i.jsx("path",{d:"M43.3181 20.6047C43.3181 22.366 41.9299 23.9413 39.0492 23.9413C36.7081 23.9413 35.2772 22.9048 34.677 22.1594C34.6578 22.1364 34.6472 22.1074 34.6472 22.0774C34.6472 22.0474 34.6578 22.0184 34.677 21.9954L35.7135 20.3792C35.734 20.3382 35.8168 20.3382 35.8586 20.3792C36.5835 21.0631 37.5576 21.8503 39.0492 21.8503C40.0234 21.8503 40.4998 21.5223 40.4998 20.9597C40.4998 20.4833 40.1267 20.1512 37.5781 19.4673C35.178 18.8228 34.6155 17.4551 34.6155 16.3366C34.6155 14.5752 36.0037 13 38.8836 13C41.2255 13 42.6556 14.0365 43.2558 14.7819C43.2753 14.8047 43.2861 14.8338 43.2861 14.8639C43.2861 14.8939 43.2753 14.923 43.2558 14.9459L42.2202 16.5645C42.1988 16.6055 42.116 16.6055 42.075 16.5645C41.3493 15.8807 40.376 15.0885 38.8836 15.0885C37.9094 15.0885 37.433 15.4206 37.433 15.9799C37.433 16.4563 37.8061 16.7884 40.3547 17.4723C42.7589 18.1184 43.3181 19.4862 43.3181 20.6047Z",fill:"#696A7B"}),i.jsx("path",{d:"M45.7011 18.471C45.7011 15.4452 47.9593 13.0828 51.109 13.0828C54.2176 13.0828 56.4759 15.4452 56.4759 18.471C56.4759 21.5165 54.2176 23.8584 51.109 23.8584C47.9593 23.8584 45.7011 21.5165 45.7011 18.471ZM51.086 21.3714C52.808 21.3714 53.7797 20.0873 53.7797 18.4915C53.7797 16.8958 52.808 15.5699 51.086 15.5699C49.364 15.5699 48.3923 16.8958 48.3923 18.4915C48.3923 20.0873 49.3689 21.3714 51.086 21.3714Z",fill:"#696A7B"}),i.jsx("path",{d:"M59.0662 23.4853V18.1594C59.0662 15.1968 60.6201 13.0828 63.9567 13.0828C67.0022 13.0828 68.8054 14.8442 68.8054 18.1594V23.4894C68.8054 23.6346 68.7841 23.6534 68.6414 23.6534H66.2773C66.1322 23.6534 66.1133 23.6329 66.1133 23.4894V18.5744C66.1133 16.9163 65.5951 15.6732 63.937 15.6732C62.279 15.6732 61.7616 16.9163 61.7616 18.5744V23.4853C61.7616 23.6305 61.7411 23.6493 61.5976 23.6493H59.2319C59.0867 23.651 59.0662 23.6305 59.0662 23.4853Z",fill:"#696A7B"}),i.jsx("path",{d:"M81.836 23.651H76.8422C73.6926 23.651 71.4302 21.4132 71.4302 18.3874C71.4302 15.3419 73.7098 13.0828 76.7602 13.0828C79.786 13.0828 82 15.3419 82 18.3669V23.4853C82 23.6305 81.9795 23.651 81.836 23.651ZM76.8422 21.1647H79.3079V18.3669C79.3079 16.7925 78.3756 15.5699 76.7594 15.5699C75.1194 15.5699 74.1272 16.7925 74.1272 18.3874C74.1272 19.9823 75.0997 21.1647 76.8406 21.1647H76.8422Z",fill:"#696A7B"})]}),i.jsx("path",{d:"M3.389 7.09C2.855 7.09 2.396 7.01 2.012 6.847C1.628 6.685 1.337 6.472 1.139 6.208C0.947826 5.96259 0.837738 5.66378 0.824 5.353C0.823165 5.32796 0.827482 5.303 0.836684 5.2797C0.845887 5.25639 0.859778 5.23522 0.877498 5.2175C0.895217 5.19978 0.916388 5.18589 0.939696 5.17668C0.963005 5.16748 0.987955 5.16316 1.013 5.164H1.814C1.886 5.164 1.94 5.179 1.976 5.209C2.02507 5.24039 2.06533 5.28375 2.093 5.335C2.153 5.539 2.291 5.71 2.507 5.848C2.723 5.986 3.017 6.055 3.389 6.055C3.815 6.055 4.136 5.986 4.352 5.848C4.45329 5.78603 4.53653 5.69855 4.59339 5.59431C4.65025 5.49006 4.67874 5.37271 4.676 5.254C4.67845 5.17682 4.66448 5.09999 4.635 5.02862C4.60552 4.95725 4.56121 4.89295 4.505 4.84C4.397 4.732 4.232 4.64 4.01 4.561C3.794 4.483 3.47 4.387 3.038 4.273C2.33 4.105 1.811 3.883 1.481 3.607C1.157 3.325 0.995 2.927 0.995 2.41C0.995 2.062 1.088 1.753 1.274 1.483C1.48347 1.19915 1.76673 0.978148 2.093 0.844001C2.453 0.688001 2.87 0.610001 3.344 0.610001C3.836 0.610001 4.262 0.697001 4.622 0.871001C4.982 1.045 5.255 1.264 5.441 1.528C5.633 1.786 5.735 2.044 5.747 2.302C5.74798 2.32713 5.74376 2.35219 5.73462 2.37561C5.72548 2.39904 5.71161 2.42033 5.69388 2.43816C5.67615 2.45599 5.65493 2.46997 5.63155 2.47924C5.60817 2.4885 5.58313 2.49284 5.558 2.492H4.721C4.66473 2.49551 4.60884 2.48063 4.56177 2.4496C4.51469 2.41858 4.47897 2.37309 4.46 2.32C4.424 2.128 4.304 1.97 4.1 1.843C3.896 1.711 3.644 1.645 3.344 1.645C3.008 1.645 2.744 1.708 2.552 1.835C2.4599 1.8928 2.38474 1.97394 2.33416 2.07019C2.28358 2.16644 2.25937 2.27437 2.264 2.383C2.25807 2.53422 2.30951 2.6821 2.408 2.797C2.504 2.905 2.654 3.001 2.858 3.085C3.068 3.169 3.368 3.262 3.758 3.365C4.286 3.485 4.706 3.619 5.018 3.769C5.336 3.919 5.57 4.109 5.72 4.336C5.87 4.564 5.945 4.856 5.945 5.209C5.945 5.593 5.837 5.929 5.621 6.217C5.411 6.499 5.111 6.715 4.721 6.865C4.337 7.015 3.893 7.09 3.389 7.09V7.09ZM8.542 7C8.51354 7.00053 8.48528 6.99521 8.45897 6.98437C8.43265 6.97353 8.40884 6.95741 8.389 6.937C8.36859 6.91716 8.35247 6.89335 8.34163 6.86703C8.3308 6.84072 8.32548 6.81246 8.326 6.784V0.925001C8.32353 0.866207 8.34275 0.808554 8.38 0.763001C8.40131 0.742047 8.42666 0.725655 8.45451 0.714823C8.48237 0.703992 8.51213 0.698948 8.542 0.700001H12.502C12.5319 0.698948 12.5616 0.703992 12.5895 0.714823C12.6173 0.725655 12.6427 0.742047 12.664 0.763001C12.685 0.784309 12.7013 0.809662 12.7122 0.837515C12.723 0.865367 12.7281 0.895135 12.727 0.925001V1.519C12.7281 1.54887 12.723 1.57863 12.7122 1.60649C12.7013 1.63434 12.685 1.65969 12.664 1.681C12.6184 1.71825 12.5608 1.73747 12.502 1.735H9.542V3.328H12.304C12.3339 3.32695 12.3636 3.33199 12.3915 3.34282C12.4193 3.35365 12.4447 3.37005 12.466 3.391C12.4874 3.4101 12.5041 3.43379 12.515 3.46028C12.5259 3.48678 12.5307 3.5154 12.529 3.544V4.102C12.5301 4.13187 12.525 4.16163 12.5142 4.18949C12.5033 4.21734 12.487 4.24269 12.466 4.264C12.4204 4.30125 12.3628 4.32047 12.304 4.318H9.541V5.965H12.574C12.6039 5.96395 12.6336 5.96899 12.6615 5.97982C12.6893 5.99065 12.7147 6.00705 12.736 6.028C12.757 6.04931 12.7733 6.07466 12.7842 6.10251C12.795 6.13037 12.8001 6.16013 12.799 6.19V6.784C12.8001 6.81387 12.795 6.84363 12.7842 6.87149C12.7733 6.89934 12.757 6.92469 12.736 6.946C12.6904 6.98325 12.6328 7.00247 12.574 7H8.542V7ZM17.652 7.09C16.824 7.09 16.182 6.877 15.726 6.451C15.276 6.025 15.036 5.425 15.006 4.651C14.9987 4.38707 14.9957 4.12303 14.997 3.859C14.997 3.487 15 3.217 15.007 3.049C15.037 2.281 15.279 1.684 15.735 1.259C16.197 0.826001 16.836 0.610001 17.652 0.610001C18.186 0.610001 18.652 0.703001 19.047 0.890001C19.443 1.07 19.749 1.318 19.965 1.636C20.181 1.948 20.295 2.302 20.307 2.698V2.716C20.307 2.764 20.287 2.806 20.244 2.842C20.2088 2.87178 20.1641 2.88777 20.118 2.887H19.263C19.191 2.887 19.137 2.872 19.101 2.842C19.065 2.812 19.035 2.755 19.011 2.672C18.915 2.293 18.756 2.029 18.534 1.879C18.312 1.723 18.015 1.645 17.644 1.645C16.779 1.645 16.329 2.128 16.294 3.095C16.2865 3.34359 16.2832 3.5923 16.284 3.841C16.284 4.177 16.287 4.432 16.294 4.606C16.329 5.572 16.779 6.056 17.644 6.056C18.015 6.056 18.312 5.977 18.534 5.821C18.762 5.665 18.921 5.401 19.011 5.029C19.029 4.945 19.056 4.889 19.092 4.859C19.1428 4.82615 19.2026 4.81006 19.263 4.813H20.118C20.172 4.813 20.218 4.831 20.253 4.867C20.295 4.903 20.313 4.948 20.307 5.002C20.2993 5.38461 20.1805 5.75672 19.965 6.073C19.749 6.385 19.443 6.634 19.047 6.82C18.651 7 18.187 7.09 17.652 7.09ZM25.236 7.09C24.426 7.09 23.796 6.883 23.346 6.47C22.896 6.055 22.671 5.428 22.671 4.588V0.925001C22.6685 0.866207 22.6877 0.808554 22.725 0.763001C22.7463 0.742047 22.7717 0.725655 22.7995 0.714823C22.8274 0.703992 22.8571 0.698948 22.887 0.700001H23.706C23.7346 0.698285 23.7632 0.703061 23.7897 0.713971C23.8162 0.724881 23.8399 0.741642 23.859 0.763001C23.88 0.784309 23.8963 0.809662 23.9072 0.837515C23.918 0.865367 23.9231 0.895135 23.922 0.925001V4.588C23.922 5.068 24.036 5.431 24.264 5.678C24.492 5.918 24.816 6.038 25.236 6.038C25.656 6.038 25.976 5.918 26.199 5.678C26.427 5.431 26.541 5.068 26.541 4.588V0.925001C26.5399 0.895135 26.545 0.865367 26.5558 0.837515C26.5667 0.809662 26.583 0.784309 26.604 0.763001C26.6253 0.742047 26.6507 0.725655 26.6785 0.714823C26.7064 0.703992 26.7361 0.698948 26.766 0.700001H27.576C27.6046 0.698285 27.6332 0.703061 27.6597 0.713971C27.6862 0.724881 27.7099 0.741642 27.729 0.763001C27.75 0.784309 27.7663 0.809662 27.7772 0.837515C27.788 0.865367 27.7931 0.895135 27.792 0.925001V4.588C27.792 5.428 27.567 6.055 27.117 6.469C26.673 6.883 26.046 7.09 25.236 7.09V7.09ZM30.707 7C30.6785 7.00053 30.6503 6.99521 30.624 6.98437C30.5976 6.97353 30.5738 6.95741 30.554 6.937C30.5336 6.91716 30.5175 6.89335 30.5066 6.86703C30.4958 6.84072 30.4905 6.81246 30.491 6.784V0.925001C30.4885 0.866207 30.5077 0.808554 30.545 0.763001C30.5663 0.742047 30.5917 0.725655 30.6195 0.714823C30.6474 0.703992 30.6771 0.698948 30.707 0.700001H33.037C33.77 0.700001 34.343 0.871001 34.757 1.213C35.177 1.555 35.387 2.041 35.387 2.671C35.387 3.109 35.279 3.478 35.063 3.778C34.853 4.072 34.559 4.285 34.181 4.418L35.495 6.712C35.5117 6.74277 35.5209 6.77702 35.522 6.812C35.5223 6.83764 35.5168 6.86301 35.5059 6.88622C35.4949 6.90943 35.4789 6.92986 35.459 6.946C35.4428 6.96311 35.4232 6.97673 35.4016 6.98601C35.3799 6.9953 35.3566 7.00006 35.333 7H34.513C34.4334 7.00453 34.3546 6.98236 34.289 6.937C34.2337 6.88544 34.188 6.8245 34.154 6.757L32.993 4.624H31.742V6.784C31.742 6.844 31.721 6.895 31.679 6.937C31.6599 6.95836 31.6362 6.97512 31.6097 6.98603C31.5832 6.99694 31.5546 7.00172 31.526 7H30.706H30.707ZM33.011 3.607C33.371 3.607 33.641 3.527 33.821 3.364C34.007 3.202 34.1 2.968 34.1 2.662C34.1 2.356 34.007 2.119 33.82 1.952C33.64 1.783 33.37 1.699 33.01 1.699H31.742V3.607H33.011ZM38.112 7C38.0835 7.00053 38.0553 6.99521 38.029 6.98437C38.0026 6.97353 37.9788 6.95741 37.959 6.937C37.9386 6.91716 37.9225 6.89335 37.9116 6.86703C37.9008 6.84072 37.8955 6.81246 37.896 6.784V0.925001C37.8935 0.866207 37.9127 0.808554 37.95 0.763001C37.9713 0.742047 37.9967 0.725655 38.0245 0.714823C38.0524 0.703992 38.0821 0.698948 38.112 0.700001H42.072C42.1019 0.698948 42.1316 0.703992 42.1595 0.714823C42.1873 0.725655 42.2127 0.742047 42.234 0.763001C42.255 0.784309 42.2713 0.809662 42.2822 0.837515C42.293 0.865367 42.2981 0.895135 42.297 0.925001V1.519C42.2981 1.54887 42.293 1.57863 42.2822 1.60649C42.2713 1.63434 42.255 1.65969 42.234 1.681C42.1884 1.71825 42.1308 1.73747 42.072 1.735H39.112V3.328H41.874C41.9039 3.32695 41.9336 3.33199 41.9615 3.34282C41.9893 3.35365 42.0147 3.37005 42.036 3.391C42.0574 3.4101 42.0741 3.43379 42.085 3.46028C42.0959 3.48678 42.1007 3.5154 42.099 3.544V4.102C42.1001 4.13187 42.095 4.16163 42.0842 4.18949C42.0733 4.21734 42.057 4.24269 42.036 4.264C41.9904 4.30125 41.9328 4.32047 41.874 4.318H39.111V5.965H42.144C42.1739 5.96395 42.2036 5.96899 42.2315 5.97982C42.2593 5.99065 42.2847 6.00705 42.306 6.028C42.327 6.04931 42.3433 6.07466 42.3542 6.10251C42.365 6.13037 42.3701 6.16013 42.369 6.19V6.784C42.3701 6.81387 42.365 6.84363 42.3542 6.87149C42.3433 6.89934 42.327 6.92469 42.306 6.946C42.2604 6.98325 42.2028 7.00247 42.144 7H38.112V7ZM45.06 7C45.0317 7.00039 45.0036 6.995 44.9775 6.98417C44.9514 6.97334 44.9277 6.95729 44.908 6.937C44.8876 6.91716 44.8715 6.89335 44.8606 6.86703C44.8498 6.84072 44.8445 6.81246 44.845 6.784V0.925001C44.8425 0.866207 44.8617 0.808554 44.899 0.763001C44.9202 0.742171 44.9454 0.72585 44.9731 0.715023C45.0007 0.704195 45.0303 0.699085 45.06 0.700001H47.256C49.02 0.700001 49.92 1.516 49.956 3.148C49.968 3.496 49.974 3.73 49.974 3.85C49.974 3.964 49.968 4.195 49.956 4.543C49.932 5.383 49.706 6.004 49.281 6.406C48.855 6.802 48.195 7 47.301 7H45.06V7ZM47.257 5.965C47.761 5.965 48.124 5.855 48.346 5.632C48.568 5.404 48.685 5.032 48.696 4.516C48.709 4.156 48.715 3.931 48.715 3.841C48.715 3.745 48.709 3.523 48.697 3.175C48.685 2.683 48.559 2.32 48.319 2.086C48.085 1.852 47.716 1.736 47.212 1.736H46.096V5.966H47.256L47.257 5.965ZM56.86 7C56.7812 7.00422 56.7037 6.97851 56.643 6.928C56.5871 6.87621 56.5519 6.80583 56.544 6.73L55.474 0.961001L55.464 0.889001C55.464 0.835001 55.482 0.790001 55.518 0.754001C55.5548 0.720031 55.6029 0.700809 55.653 0.700001H56.445C56.595 0.700001 56.679 0.760001 56.697 0.880001L57.444 4.957L58.254 2.32C58.314 2.17 58.414 2.095 58.551 2.095H59.037C59.187 2.095 59.283 2.17 59.325 2.32L60.145 4.948L60.89 0.880001C60.902 0.814001 60.926 0.770001 60.962 0.745001C61.0159 0.711795 61.0788 0.696077 61.142 0.700001H61.934C61.982 0.700001 62.024 0.718001 62.06 0.754001C62.0777 0.771619 62.0917 0.792688 62.101 0.815907C62.1103 0.839126 62.1147 0.864003 62.114 0.889001C62.114 0.919001 62.111 0.943001 62.105 0.961001L61.035 6.731C61.005 6.911 60.899 7.001 60.719 7.001H60.116C60.0417 7.00381 59.9687 6.98124 59.909 6.937C59.856 6.89651 59.818 6.83951 59.801 6.775L58.794 3.77L57.786 6.776C57.726 6.926 57.618 7.001 57.462 7.001H56.859L56.86 7ZM64.738 7C64.7095 7.00053 64.6813 6.99521 64.655 6.98437C64.6287 6.97353 64.6048 6.95741 64.585 6.937C64.5646 6.91716 64.5485 6.89335 64.5376 6.86703C64.5268 6.84072 64.5215 6.81246 64.522 6.784V0.916001C64.5203 0.887398 64.5251 0.858778 64.536 0.832282C64.5469 0.805787 64.5636 0.782102 64.585 0.763001C64.6048 0.742591 64.6287 0.726469 64.655 0.715632C64.6813 0.704796 64.7095 0.699475 64.738 0.700001H65.584C65.6126 0.698285 65.6412 0.703061 65.6677 0.713971C65.6942 0.724881 65.7179 0.741642 65.737 0.763001C65.7584 0.782102 65.7751 0.805787 65.786 0.832282C65.7969 0.858778 65.8017 0.887398 65.8 0.916001V6.784C65.8 6.844 65.779 6.895 65.737 6.937C65.7179 6.95836 65.6942 6.97512 65.6677 6.98603C65.6412 6.99694 65.6126 7.00172 65.584 7H64.738ZM70.163 7C70.1345 7.00053 70.1063 6.99521 70.08 6.98437C70.0536 6.97353 70.0298 6.95741 70.01 6.937C69.9896 6.91716 69.9735 6.89335 69.9626 6.86703C69.9518 6.84072 69.9465 6.81246 69.947 6.784V1.807H68.282C68.2535 1.80753 68.2253 1.80221 68.199 1.79137C68.1726 1.78053 68.1488 1.76441 68.129 1.744C68.1086 1.72416 68.0925 1.70035 68.0816 1.67403C68.0708 1.64772 68.0655 1.61946 68.066 1.591V0.925001C68.0635 0.866207 68.0828 0.808554 68.12 0.763001C68.1413 0.742047 68.1667 0.725655 68.1945 0.714823C68.2224 0.703992 68.2521 0.698948 68.282 0.700001H72.872C72.9019 0.698948 72.9316 0.703992 72.9595 0.714823C72.9873 0.725655 73.0127 0.742047 73.034 0.763001C73.055 0.784309 73.0713 0.809662 73.0822 0.837515C73.093 0.865367 73.0981 0.895135 73.097 0.925001V1.591C73.097 1.651 73.077 1.702 73.034 1.744C73.0127 1.76495 72.9873 1.78135 72.9595 1.79218C72.9316 1.80301 72.9019 1.80805 72.872 1.807H71.216V6.784C71.216 6.844 71.196 6.895 71.153 6.937C71.1317 6.95795 71.1063 6.97435 71.0785 6.98518C71.0506 6.99601 71.0209 7.00105 70.991 7H70.163V7ZM75.577 7C75.5485 7.00053 75.5203 6.99521 75.494 6.98437C75.4676 6.97353 75.4438 6.95741 75.424 6.937C75.4036 6.91716 75.3875 6.89335 75.3766 6.86703C75.3658 6.84072 75.3605 6.81246 75.361 6.784V0.925001C75.3585 0.866207 75.3777 0.808554 75.415 0.763001C75.4363 0.742047 75.4617 0.725655 75.4895 0.714823C75.5174 0.703992 75.5471 0.698948 75.577 0.700001H76.396C76.4246 0.698285 76.4532 0.703061 76.4797 0.713971C76.5062 0.724881 76.5299 0.741642 76.549 0.763001C76.57 0.784309 76.5863 0.809662 76.5972 0.837515C76.608 0.865367 76.6131 0.895135 76.612 0.925001V3.247H79.267V0.925001C79.2645 0.866207 79.2837 0.808554 79.321 0.763001C79.3423 0.742047 79.3677 0.725655 79.3955 0.714823C79.4234 0.703992 79.4531 0.698948 79.483 0.700001H80.293C80.3229 0.698948 80.3526 0.703992 80.3805 0.714823C80.4083 0.725655 80.4337 0.742047 80.455 0.763001C80.476 0.784309 80.4923 0.809662 80.5032 0.837515C80.514 0.865367 80.5191 0.895135 80.518 0.925001V6.785C80.5189 6.8147 80.5138 6.84428 80.503 6.87195C80.4921 6.89962 80.4758 6.92481 80.455 6.946C80.4094 6.98325 80.3518 7.00247 80.293 7H79.483C79.4545 7.00053 79.4263 6.99521 79.4 6.98437C79.3736 6.97353 79.3498 6.95741 79.33 6.937C79.3096 6.91716 79.2935 6.89335 79.2826 6.86703C79.2718 6.84072 79.2665 6.81246 79.267 6.784V4.372H76.612V6.784C76.612 6.844 76.591 6.895 76.549 6.937C76.5299 6.95836 76.5062 6.97512 76.4797 6.98603C76.4532 6.99694 76.4246 7.00172 76.396 7H75.576H75.577Z",fill:"#696A7B"}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0",children:i.jsx("rect",{width:"82",height:"16.4",fill:"white",transform:"translate(0 11)"})})})]})})},Yf=({component:e,inquiry:t})=>{var s;const{text:n,hidden:r}=e.attributes;return co(zs((s=e.styles)==null?void 0:s["font-family"].base.base)),It(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(Ks,{"data-test":e.type,styles:e.styles,children:i.jsx(te,{children:n})})},zy=({component:e,inquiry:t})=>i.jsx(Yf,{component:{...e,type:Fe.Text},inquiry:t}),Ky=b(Ph).withConfig({displayName:"QrCode__StyledQrCode",componentId:"sc-vi0n8g-0"})(({styles:e})=>{var t,n,r,o,a,s,c,l;return{marginTop:(n=k((t=e==null?void 0:e.margin.base.base)==null?void 0:t.top))!=null?n:0,marginBottom:(o=k((r=e==null?void 0:e.margin.base.base)==null?void 0:r.bottom))!=null?o:0,marginLeft:(s=k((a=e==null?void 0:e.margin.base.base)==null?void 0:a.left))!=null?s:0,marginRight:(l=k((c=e==null?void 0:e.margin.base.base)==null?void 0:c.right))!=null?l:0,alignSelf:e==null?void 0:e.justify.base.base}}),Qy=({component:e,inquiry:t})=>{var s,c,l;const{value:n,hidden:r}=e.attributes;return It(e.name,t.attributes["next-step"].name)(r)||!n?null:i.jsx(Ky,{"data-test":e.type,value:n,height:void 0,width:k((s=e.styles)==null?void 0:s.width.base.base),bgColor:A((c=e.styles)==null?void 0:c["fill-color"].base.base),fgColor:A((l=e.styles)==null?void 0:l["stroke-color"].base.base),styles:e.styles,includeMargin:!0})},Zy=b.div.attrs(()=>({"aria-hidden":!0})).withConfig({displayName:"Spacer__SpacerDiv",componentId:"sc-vj0pq0-0"})(({styles:e,height:t})=>{var n;return{height:(n=k(e==null?void 0:e.height.base.base))!=null?n:t,width:k(e==null?void 0:e.width.base.base),flex:"none"}}),Jy=({component:e,inquiry:t})=>{const{hidden:n}=e.attributes;return It(e.name,t.attributes["next-step"].name)(n)?null:i.jsx(Zy,{"data-test":e.type,height:e.attributes.height,styles:e.styles})},Xy=b.span.withConfig({displayName:"TableStatic__TableStaticContainer",componentId:"sc-fy6bs8-0"})(["font-family:",";color:",";font-size:",";line-height:",";"],({theme:{fontFamilyTitle:e}})=>Ht(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody),e_=b.table.withConfig({displayName:"TableStatic__Table",componentId:"sc-fy6bs8-1"})(["th,td{padding:",";}"],S.Spacing[2]),Vu=({tag:e="td",children:t})=>e==="td"?i.jsx("td",{children:i.jsx(te,{children:t})}):i.jsx("th",{children:i.jsx(te,{children:t})}),t_=({component:{attributes:{header:e,rows:t}}})=>i.jsx(Xy,{children:i.jsxs(e_,{children:[e&&e.length>0&&i.jsx("thead",{children:i.jsx("tr",{children:e.map(n=>i.jsx(Vu,{tag:"th",children:n},n))})}),i.jsx("tbody",{children:t.map(n=>i.jsx("tr",{children:n.map(r=>i.jsx(Vu,{children:r},r))},n.join()))})]})}),n_=({component:e,inquiry:t})=>{var s;const{text:n,hidden:r}=e.attributes;return co(zs((s=e.styles)==null?void 0:s["font-family"].base.base)),It(e.name,t.attributes["next-step"].name)(r)?null:i.jsx(wd,{"data-test":e.type,styles:e.styles,children:i.jsx(te,{children:n})})};function jo(e){const{component:t,inquiry:n,actionsApi:r,inquiryLoading:o}=e;switch(t.type){case Fe.ButtonAction:return i.jsx(fI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Fe.ButtonCancel:return i.jsx(gI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.ButtonComplete:return i.jsx(bI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.ButtonCreatePersona:return i.jsx(RI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.ButtonDeviceHandoff:return i.jsx(AI,{component:t,actionsApi:r,inquiryLoading:o});case Fe.ButtonLink:return i.jsx(TI,{inquiry:n,component:t});case Fe.ButtonSubmit:return i.jsx(EI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Fe.ButtonVerifyWithPersona:return i.jsx(NI,{inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Fe.Footer:return i.jsx(OI,{...e,component:t});case Fe.QrCode:return i.jsx(Qy,{component:t,inquiry:n});case Fe.Spacer:return i.jsx(Jy,{component:t,inquiry:n});case Fe.HorizontalStack:return i.jsx(FI,{...e,component:t});case Fe.ClickableStack:return i.jsx(PI,{...e,inquiry:n,component:t,actionsApi:r,inquiryLoading:o});case Fe.ImageLocal:return i.jsx(qI,{component:t,inquiry:n});case Fe.ImageRemote:return i.jsx(Tf,{component:t,inquiry:n});case Fe.LanguageSelector:return i.jsx(qy,{component:t,inquiry:n,actionsApi:r});case Fe.PersonaBranding:return i.jsx(Yy,{component:t});case Fe.PrivacyPolicy:return i.jsx(zy,{component:t,inquiry:n});case Fe.TableStatic:return i.jsx(t_,{component:t});case Fe.Text:return i.jsx(Yf,{component:t,inquiry:n});case Fe.Title:return i.jsx(n_,{component:t,inquiry:n});case Fe.InputAddress:return i.jsx(yS,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Fe.InputCheckbox:return i.jsx(FS,{component:t,inquiry:n,actionsApi:r});case Fe.InputCheckboxGroup:return i.jsx(qS,{component:t,inquiry:n,actionsApi:r});case Fe.InputConfirmationCode:return i.jsx(ZS,{component:t,inquiry:n,actionsApi:r});case Fe.InputCurrency:return i.jsx(rw,{component:t,inquiry:n,actionsApi:r});case Fe.InputDate:return i.jsx(gw,{component:t,inquiry:n,actionsApi:r});case Fe.InputMaskedText:return i.jsx(iy,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Fe.InputMultiSelect:return i.jsx(ly,{component:t,inquiry:n,actionsApi:r});case Fe.InputNumber:return i.jsx(hy,{component:t,inquiry:n,actionsApi:r});case Fe.InputPhoneNumber:return i.jsx(Cy,{component:t,inquiry:n,inquiryLoading:o,actionsApi:r});case Fe.InputRadioGroup:return i.jsx(Ey,{component:t,inquiry:n,actionsApi:r});case Fe.InputSelect:return i.jsx(ky,{component:t,inquiry:n,actionsApi:r});case Fe.InputText:return i.jsx(jy,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.InputTextArea:return i.jsx(By,{component:t,inquiry:n,actionsApi:r});case Fe.PasskeyAuthentication:return i.jsx($y,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.PasskeyRegistration:return i.jsx(Gy,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.InputESignature:return i.jsx(Vw,{component:t,inquiry:n,actionsApi:r});case Fe.InputFileUpload:return i.jsx(qw,{component:t,inquiry:n,actionsApi:r});case Fe.InputInternationalDb:return i.jsx(ny,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.GovernmentIdNfcScan:return i.jsx(LI,{component:t,inquiry:n,actionsApi:r,inquiryLoading:o});case Fe.CombinedStepButton:case Fe.CombinedStepImagePreview:return null;case Fe.Stepper:return null;case Fe.GovernmentIdTypeSelect:return null;default:$e("Unknown UI component","warning",{component:t.type,inquiry:n.id}),ut(t)}}const i_=b("div").withConfig({displayName:"InquiryCompleteView__Header",componentId:"sc-yruq5d-0"})(["margin-bottom:","px;"],Sn*8),r_=({onComplete:e,hasCompleteAction:t,isChildFlow:n,config:r})=>{var s,c,l,u,d,m;const[o]=z(),a=t&&!n;return f.useEffect(()=>{a&&e()},[]),a?null:n?i.jsxs("div",{"data-test":"inquiry-complete-view",children:[i.jsxs(i_,{children:[i.jsx(dt,{children:(l=(c=(s=r.localizations)==null?void 0:s["child-flow-page"])==null?void 0:c.title)!=null?l:o("success.title-exchange-flow")}),i.jsx(at,{children:i.jsx(te,{children:(m=(d=(u=r.localizations)==null?void 0:u["child-flow-page"])==null?void 0:d.prompt)!=null?m:o("success.prompt-exchange-flow")})})]}),i.jsx(Ye,{"aria-label":"return to original device pictograph",children:i.jsx(pe,{vectorEffect:"initial",children:i.jsx(Hh,{})})})]}):i.jsx("div",{"data-test":"inquiry-complete-view",children:i.jsx(jo,{component:{name:"success_animated_checkmark",type:Fe.ImageLocal,attributes:{"image-key":ue.AnimatedCheck}},inquiry:null,inquiryLoading:!1,actionsApi:null})})},o_=b.form.withConfig({displayName:"InquiryUiView__Form",componentId:"sc-e8wtsw-0"})(["display:flex;flex-direction:column;"]),Br=f.memo(({inquiry:e,nextStep:t=e.attributes["next-step"],currentSession:n,handleLanguageChange:r,showMessage:o,onTransitionSubmit:a,onTransitionAction:s,onComplete:c,onCancel:l,route:u,setComponent:d})=>{switch(t.type){case Ae.Ui:return i.jsx(c_,{inquiry:e,nextStep:t,form:t.name,onTransitionSubmit:a,onTransitionAction:s,onComplete:c,onCancel:l,handleLanguageChange:r,showMessage:o,route:u,setComponent:d});case Ae.Document:return i.jsx(Hi,{to:"/inquiry/documents/prompt"});case Ae.Integration:return i.jsx(Hi,{to:"/inquiry/integration"});case Ae.GovernmentId:return i.jsx(Hi,{to:"/inquiry/government-id/select"});case Ae.Selfie:return i.jsx(Hi,{to:"/inquiry/selfie/center/prompt"});case Ae.SelfieReflection:return i.jsx(Hi,{to:"/inquiry/selfie-reflection/prompt"});case Ae.VerifyWithPersona:return i.jsx(Hi,{to:"/inquiry/verify-with-persona/passkey-authentication"});case Ae.Complete:return i.jsx(r_,{config:t.config,onComplete:c,hasCompleteAction:vo(e),isChildFlow:(n==null?void 0:n.relationships["parent-session"].data)!=null});default:return $e("Unsupported step type for InquiryUiView","warning",{type:t.type}),j.onError({status:400,code:"invalid_config"}),i.jsx(Hi,{to:"/verify/invalid/config"})}},a_);Br.displayName="InquiryUiView";function a_(e,t){var s,c;if(((s=e.inquiry.attributes["wait-for-transition"])==null?void 0:s["polling-mode"])!==Xt.NONE&&((c=t.inquiry.attributes["wait-for-transition"])==null?void 0:c["polling-mode"])===Xt.NONE&&e.inquiry.attributes["next-step"].name===t.inquiry.attributes["next-step"].name)return!1;const r=[on.Transitioning,on.Blocked].includes(e.uiStatus);return t.uiStatus===on.Ready&&r}const s_=({inquiry:e,nextStep:t,handleLanguageChange:n,showMessage:r,onTransitionSubmit:o,onTransitionAction:a,onComplete:s,onCancel:c,handleSubmit:l,change:u,route:d,setComponent:m})=>{const{components:h}=t.config,p=ot(v=>{var x,R;return(R=(x=v.ui)==null?void 0:x.status)!=null?R:on.Ready}),g=p===on.Transitioning||p===on.Blocked,C=f.useCallback((v,x={})=>l(async R=>{for(const _ in x)u(_,x[_]);await o({...R,...x},v)})(),[l,o,u]),I=f.useMemo(()=>({handleLanguageChange:n,showMessage:r,setField:u,onSubmit:C,onActionButtonClick:a,onComplete:s,onCancel:c,route:d,setComponent:m}),[n,r,u,C,a,s,c,d,m]);return i.jsx(o_,{"data-test":"inquiry-ui-view__form",children:h.map(v=>i.jsx(jo,{component:v,inquiry:e,inquiryLoading:g,actionsApi:I},v.name))})},c_=Re.reduxForm({})(s_);function zf(e){var c,l,u,d,m,h,p,g,C,I,v,x,R,_,T,E,V,D,O,U,M,Y,F,H,q,W,X,oe,se,Se,Ee,he,de,Ie,ye,je,ce,Q,K,be,Oe,ze,re,le,Ue,G,xe,Ke,_e,we,De,Me,nt,St,Qt,Ft,Vt,Vn,ei,lt;const t=(c=e==null?void 0:e.attributes)!=null?c:{},n=(l=t["color-primary"])!=null?l:S.Color.CorePurple700,r=(u=t["icon-color-primary"])!=null?u:gt(n).mix(gt("white"),.4).hex(),o=t["font-size-body"]?`calc(${t["font-size-body"]} * 1.5);`:"",a=t["font-size-header"]?`calc(${t["font-size-header"]} * 1.25);`:"",s=t["font-size-small"]?`calc(${t["font-size-small"]} * 1.5);`:"";return{...Gi,borderRadius:(d=t["border-radius"])!=null?d:dn.rounded,borderRadiusModal:(m=t["border-radius-modal"])!=null?m:"1px",borderWidth:(h=t["border-width"])!=null?h:"2px",buttonBackgroundImage:t["button-background-image"],buttonFontWeight:(p=t["button-font-weight"])!=null?p:ul.Medium,buttonPosition:(g=t["button-position"])!=null?g:Cs.Inline,buttonShadowStrength:t["button-shadow-strength"],buttonTextTransform:t["button-text-transform"],colorButtonPrimary:(C=t["color-button-primary"])!=null?C:n,colorButtonSecondary:(I=t["color-button-secondary"])!=null?I:n,colorButtonSecondaryFill:t["color-button-secondary-fill"],colorButtonPrimaryFillDisabled:(v=t["color-button-primary-fill-disabled"])!=null?v:S.Color.CoreSlate300,colorButtonSecondaryFillDisabled:(x=t["color-button-secondary-fill-disabled"])!=null?x:S.Color.CoreSlate300,colorError:(R=t["color-error"])!=null?R:S.Color.CoreRed900,colorFont:(_=t["color-font"])!=null?_:S.Color.CoreSlate1000,colorFontButtonPrimary:(T=t["color-font-button-primary"])!=null?T:S.Color.CoreSlate50,colorFontButtonSecondary:t["color-font-button-secondary"],colorFontSmall:(E=t["color-font-small"])!=null?E:S.Color.CoreSlate1000,colorFontTitle:(V=t["color-font-title"])!=null?V:S.Color.CoreSlate1000,colorIconHeader:(D=t["color-icon-header"])!=null?D:S.Color.CoreSlate700,colorInputBackground:(U=(O=t["color-input-background"])!=null?O:t["color-modal-background"])!=null?U:S.Color.PrimaryWhite,colorInputBorder:(M=t["color-input-border"])!=null?M:S.Color.CoreSlate500,colorFooterBackground:(Y=t["color-modal-background"])!=null?Y:S.Color.CoreSlate50,colorLink:(F=t["color-link"])!=null?F:n,colorDropdownBackground:(H=t["color-dropdown-background"])!=null?H:S.Color.PrimaryWhite,colorDropdownOption:(q=t["color-dropdown-option"])!=null?q:S.Color.CoreSlate50,colorModalBackground:(W=t["color-modal-background"])!=null?W:S.Color.PrimaryWhite,colorPrimary:n,colorProgressBar:(X=t["color-progress-bar"])!=null?X:n,colorSuccess:(oe=t["color-success"])!=null?oe:S.Color.CoreGreen500,colorWarning:(se=t["color-warning"])!=null?se:S.Color.CoreYellow900,colorDivider:(Se=t["color-divider"])!=null?Se:S.Color.CoreSlate200,fontFamily:(Ee=t["font-family"])!=null?Ee:Gi.text.fontFamily.base,fontFamilyTitle:(he=t["font-family-title"])!=null?he:Gi.text.fontFamily.base,fontUrl:t["font-url"],fontSizeBody:(de=t["font-size-body"])!=null?de:$t.p,fontSizeHeader:(Ie=t["font-size-header"])!=null?Ie:$t.h2,fontSizeSmall:(ye=t["font-size-small"])!=null?ye:"10px",headerFontWeight:(je=t["header-font-weight"])!=null?je:ul.Medium,headerMarginBottom:(ce=t["header-margin-bottom"])!=null?ce:S.Spacing[4],iconColorPrimary:r,iconColorHighlight:(Q=t["icon-color-highlight"])!=null?Q:gt(r).mix(gt("white"),.85).hex(),iconColorStroke:(K=t["icon-color-stroke"])!=null?K:gt(n).mix(gt("black"),.71).saturate(.3).hex(),iconColorBackground:(be=t["icon-color-background"])!=null?be:S.Color.PrimaryWhite,iconColorGovernmentIdType:(Oe=t["icon-color-government-id-type"])!=null?Oe:n,inputStyle:(ze=t["input-style"])!=null?ze:Tt.Outlined,lineHeightBody:(re=t["line-height-body"])!=null?re:o,lineHeightHeader:(le=t["line-height-header"])!=null?le:a,lineHeightSmall:(Ue=t["line-height-small"])!=null?Ue:s,logoData:t["logo-data"],logoFilename:t["logo-filename"],logoHeight:t["logo-height"],logoUrl:t["logo-url"],logoWidth:t["logo-width"],pageTransition:(G=t["page-transition"])!=null?G:Ti.Slide,textAlign:(xe=t["text-align"])!=null?xe:qs.Default,textDecorationLineLink:(Ke=t["text-decoration-line-link"])!=null?Ke:hf.Underline,usStateInputMethod:(_e=t["us-state-input-method"])!=null?_e:Hs.Input,navbarLogoDisplay:(we=t["navbar-logo-display"])!=null?we:Ni.None,navbarLogoHeight:t["navbar-logo-height"],iconStyle:(De=t["icon-style"])!=null?De:Vr.Default,processingDisplayStyle:(Me=t["processing-display-style"])!=null?Me:Ea.Default,verticalOptionsStyle:(nt=t["vertical-options-style"])!=null?nt:zi.Default,governmentIdPictographPosition:(St=t["government-id-pictograph-position"])!=null?St:Gt.Center,idBackPictographHeight:t["id-back-pictograph-height"],idBackPictographUrl:t["id-back-pictograph-url"],idFrontPictographHeight:t["id-front-pictograph-height"],idFrontPictographUrl:t["id-front-pictograph-url"],passportFrontPictographHeight:t["passport-front-pictograph-height"],passportFrontPictographUrl:t["passport-front-pictograph-url"],passportSignaturePictographHeight:t["passport-signature-pictograph-height"],passportSignaturePictographUrl:t["passport-signature-pictograph-url"],governmentIdSelectPictographHeight:(Qt=t["government-id-select-pictograph-height"])!=null?Qt:"none",governmentIdSelectPictographUrl:t["government-id-select-pictograph-url"],deviceHandoffTermsTextPosition:(Ft=t["device-handoff-terms-text-position"])!=null?Ft:xn.BelowButton,selfiePictographUrl:t["selfie-pictograph-url"],selfiePictographHeight:t["selfie-pictograph-height"],selfieCenterPictographUrl:t["selfie-center-pictograph-url"],selfieCenterPictographHeight:t["selfie-center-pictograph-height"],selfieLeftPictographUrl:t["selfie-left-pictograph-url"],selfieLeftPictographHeight:t["selfie-left-pictograph-height"],selfieRightPictographUrl:t["selfie-right-pictograph-url"],selfieRightPictographHeight:t["selfie-right-pictograph-height"],documentPictographHeight:t["document-pictograph-height"],documentPictographPosition:(Vt=t["document-pictograph-position"])!=null?Vt:Gt.Center,documentPictographUrl:t["document-pictograph-url"],failedPictographHeight:t["failed-pictograph-height"],failedPictographPosition:(Vn=t["failed-pictograph-position"])!=null?Vn:Gt.Center,failedPictographUrl:t["failed-pictograph-url"],successPictographHeight:t["success-pictograph-height"],successPictographPosition:(ei=t["success-pictograph-position"])!=null?ei:Gt.Center,successPictographUrl:t["success-pictograph-url"],exitPictographHeight:t["exit-pictograph-height"],exitPictographPosition:(lt=t["exit-pictograph-position"])!=null?lt:Gt.Center,exitPictographUrl:t["exit-pictograph-url"],loadingPictographHeight:t["loading-pictograph-height"],loadingPictographUrl:t["loading-pictograph-url"],cameraSupportPictographHeight:t["camera-support-pictograph-height"],cameraSupportPictographUrl:t["camera-support-pictograph-url"]}}const Kf=zf(),l_=e=>{var v,x,R;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,setCreatePersonaStatus:c}=e,l=Ot(),[u]=z(),d=n.type===Fe.ButtonCreatePersona?(x=(v=n==null?void 0:n.attributes)==null?void 0:v.pages)==null?void 0:x["passkey-registration"]:null,m=n.type===Fe.ButtonCreatePersona?(R=n==null?void 0:n.attributes)==null?void 0:R["auto-complete-on-dismiss"]:!1,h=d==null?void 0:d["ui-step"],p=d==null?void 0:d["component-name-mapping"];f.useEffect(()=>{ee.logAmplitude("reusable-persona.create.passkey-registration-page.entered")},[]);const g=f.useCallback(()=>{Ro(t,a)},[t,a]),{error:C,callback:I}=vt(async(_,T)=>{var E;if(T===(p==null?void 0:p["confirm-button"])){ee.logAmplitude("reusable-persona.create.passkey-registration-page.confirm-btn-clicked");const V=(await ne.postResourceSingletonActionNew(w.Persona,"registration-initiate")).meta,D=await jh(V);ee.logAmplitude("reusable-persona.create.passkey-registration-page.submitted"),await ne.postResourceSingletonActionNew(w.Persona,"registration-submit",void 0,{meta:{"registration-params":{"client-key":V.user.id,"public-key":D,"expected-origin":window.location.origin}}}),c(Hn.PersonaCreated),j.isReusablePersonaPopup&&window.opener&&window.opener.postMessage(ps.CREATED),l.push("/inquiry/create-persona/success")}else T===(p==null?void 0:p["cancel-button"])&&(ee.logAmplitude("reusable-persona.create.passkey-registration-page.not-now-btn-clicked"),c(Hn.CtaDismissed),j.isReusablePersonaPopup?window.opener?(window.opener.postMessage(ps.DISMISSED),setTimeout(()=>window.close(),100)):((E=window.opener)==null||E.focus(),window.close()):m?g():l.goBack())},[h,p,m,g]);return At({error:C,onError:()=>{e.showMessage(u("error.message"))},onNetworkError:()=>e.showMessage(u("errors.network"))}),h==null||t==null?null:i.jsx(El,{theme:Kf,children:i.jsx(Br,{inquiry:t,nextStep:h,currentSession:r,uiStatus:o,onTransitionSubmit:I,onTransitionAction:async()=>{},onComplete:g,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:l.push,showMessage:e.showMessage,setComponent:e.setComponent})})};function d_(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const u_={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,showMessage:ae,setCreatePersonaStatus:Qo},m_=Te(d_,u_),h_=m_(l_);function Qf(e,t,n={}){const r=n.maxWait,o=f.useRef(null),a=f.useRef([]),s=n.leading,c=n.trailing==null?!0:n.trailing,l=f.useRef(!1),u=f.useRef(null),d=f.useRef(!1),m=f.useRef(e);m.current=e;const h=f.useCallback(()=>{clearTimeout(u.current),clearTimeout(o.current),o.current=null,a.current=[],u.current=null,l.current=!1},[]);f.useEffect(()=>()=>{d.current=!0},[]);const p=f.useCallback((...C)=>{a.current=C,clearTimeout(u.current),l.current&&(l.current=!1),u.current==null&&s&&!l.current&&(m.current(...C),l.current=!0),u.current=window.setTimeout(()=>{let I=!0;s&&l.current&&(I=!1),h(),!d.current&&c&&I&&m.current(...C)},t),r!=null&&!o.current&&c&&(o.current=window.setTimeout(()=>{const I=a.current;h(),d.current||m.current(...I)},r))},[r,t,h,s,c]),g=f.useCallback(()=>{u.current!=null&&(m.current.apply(null,a.current),h())},[h]);return[p,h,g]}const Ur=({loader:e,deps:t,onError:n,onNetworkError:r,skip:o,abortController:a,options:s={}})=>{const{error:c,loading:l,callback:u}=vt(e,t,{defaultLoading:!o,...s});At({error:c,onError:n,onNetworkError:r});const[d]=Qf(u,500,{leading:!0,trailing:!0});return f.useEffect(()=>{if(!o&&d(),a)return()=>a.abort()},t),{error:c,loading:l,callback:u}},p_=({assetUrl:e,height:t,fallback:n,"aria-label":r})=>{const[o,a]=f.useState(),[s,c]=f.useState(0);switch(Ur({loader:async()=>{if(Ep(e)!=="json"){c(2);return}try{const{data:l}=await ci.get(e);a(l)}catch(l){ar({error:l,method:"GET",uri:e})}c(1)},deps:[e],onError:()=>c(2),onNetworkError:()=>c(2)}),s){case 0:return null;case 2:return n;case 1:return i.jsx(qn,{role:"img","aria-label":r,animationData:o,style:{height:`min(${t}, 1000px)`,width:"auto"}})}},f_="none",g_=b.div.withConfig({displayName:"CustomizablePictograph__ImageContainer",componentId:"sc-1x7saia-0"})([""," > img,svg{","}"],({height:e})=>e!=null&&`height: ${e};`,({height:e})=>e!=null&&`height: ${e};`),Yt=({url:e,children:t,className:n,height:r,vectorEffect:o,"aria-label":a,themed:s=!0,primaryColor:c,highlightColor:l,backgroundColor:u,strokeColor:d})=>{const m=f.useContext(Ze),h=m==null?void 0:m[e];if(h===f_)return null;if(!h){if(t==null)return null;const p=f.cloneElement(t,{"aria-label":a});return s?i.jsx(pe,{vectorEffect:o,className:n,$primaryColor:c,$highlightColor:l,$backgroundColor:u,$strokeColor:d,children:p}):i.jsx("div",{className:n,children:p})}switch(Ep(h)){case"png":case"svg":case"jpg":case"gif":return i.jsx(g_,{height:m[r],children:i.jsx("img",{src:h,"aria-label":a,alt:a})});case"json":return i.jsx(f.Suspense,{fallback:null,children:i.jsx(p_,{assetUrl:h,height:m[r],fallback:t!=null&&f.cloneElement(t,{"aria-label":a}),"aria-label":a})});default:throw new Error(`Invalid pictograph ${m[e]}. Valid extensions are: .png, .svg, .jpg, .gif, .json.`)}},b_=Ln(["from{transform:translate(-50%,-50%) rotate(0deg);}to{transform:translate(-50%,-50%) rotate(360deg);}"]),C_=b(pe).withConfig({displayName:"LoadingSpinner__ThemedContainer",componentId:"sc-qbuihf-0"})(["position:relative;"]),x_=b("div").withConfig({displayName:"LoadingSpinner__Loop",componentId:"sc-qbuihf-1"})(["img,svg{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:"," 5s linear infinite;}"],b_),v_=b("div").withConfig({displayName:"LoadingSpinner__Scanner",componentId:"sc-qbuihf-2"})(["display:inline-flex;align-items:center;position:absolute;top:-16px;left:50%;transform:translateX(-50%);"]),I_=()=>{const e=f.useContext(Ze);return(e==null?void 0:e.loadingPictographUrl)?i.jsx(Yt,{url:"loadingPictographUrl",height:"loadingPictographHeight"}):i.jsxs(C_,{id:"loading-spinner","aria-busy":!0,"aria-live":"polite",role:"alert",children:[i.jsx(x_,{children:i.jsx(F1,{})}),i.jsxs(v_,{children:[i.jsx(M1,{}),i.jsx(V1,{})]})]})},S_=Ln(["0%{opacity:0;}49.9999%{opacity:0;}50%{opacity:1;}100%{opacity:1;}"]),w_=b("div").withConfig({displayName:"LoadingSpinner__FullScreenSpinnerContainer",componentId:"sc-qbuihf-3"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);animation:"," ",";"],S_,ya.medium),In=()=>i.jsx(w_,{children:i.jsx(I_,{})}),y_=e=>({uiStatus:e.ui.status}),__={loadCreatePersonaPopupFromCode:Ov,setUiReady:ct,showMessage:ae},R_=Te(y_,__);function A_(e){const{i18n:t,t:n}=z();return Ur({loader:async()=>{const{uiStatus:r,loadCreatePersonaPopupFromCode:o,setUiReady:a}=e;await o(t,j.inquiryParams.code,j.inquiryParams.component),r===on.Initializing&&(j.onEvent(Pe.Ready),a())},deps:[],onError:()=>e.showMessage(n("errors.network")),onNetworkError:()=>e.showMessage(n("errors.network"))}),i.jsx(In,{})}const T_=R_(A_),E_=e=>{var C,I,v;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s}=e,c=Ot(),l=n.type===Fe.ButtonCreatePersona?(I=(C=n==null?void 0:n.attributes)==null?void 0:C.pages)==null?void 0:I.success:null,u=n.type===Fe.ButtonCreatePersona?(v=n==null?void 0:n.attributes)==null?void 0:v["auto-complete-on-dismiss"]:!1,d=l==null?void 0:l["ui-step"],m=l==null?void 0:l["component-name-mapping"];f.useEffect(()=>{ee.logAmplitude("reusable-persona.create.success-page.entered")},[]);const h=f.useCallback(()=>{Ro(t,a)},[t,a]),{error:p,callback:g}=vt(async(x,R)=>{var _;R===(m==null?void 0:m["continue-button"])&&(ee.logAmplitude("reusable-persona.create.success-page.dismissed"),j.isReusablePersonaPopup?((_=window.opener)==null||_.focus(),window.close()):u?h():c.go(-2))},[d,m,u,h]);return At({error:p,onError:()=>{e.showMessage("Unexpected error, please try again.")},onNetworkError:()=>e.showMessage("Unexpected error, please try again.")}),d==null||t==null?null:i.jsx(El,{theme:Kf,children:i.jsx(Br,{inquiry:t,nextStep:d,currentSession:r,uiStatus:o,onTransitionSubmit:g,onTransitionAction:async()=>{},onComplete:h,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:c.push,showMessage:e.showMessage,setComponent:e.setComponent})})};function k_(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const N_={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,showMessage:ae,transitionInquiry:mf,pollInquiry:kn},j_=Te(k_,N_),P_=j_(E_),Pa=f.createContext(void 0),Zf=()=>f.useContext(Pa),Jf=f.createContext(ja()),pr=()=>f.useContext(Jf),Hr=({children:e,value:t})=>{const n=f.useMemo(()=>ja(t),[t]);return i.jsx(Jf.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n==null?void 0:n.buttons,children:e})})},qe=({customImage:e,children:t=null,onLoad:n,environment:r,alt:o})=>{const[a,s]=f.useState(!1),c=f.useMemo(()=>{var l;if(e)return o?{...e,attributes:{...e.attributes,alt:(l=e.attributes.alt)!=null?l:o}}:e},[e,o]);return c&&!a?i.jsx(Tf,{component:c,onLoad:n,onError:()=>s(!0),environment:r}):(n==null||n(),i.jsx(i.Fragment,{children:t}))},D_=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,yd=new RegExp(D_.source,"i"),O_=/^\d{5}(-\d{4})?$/,L_=/^[A-Z]([A-Z]?\d[A-Z]|\d{1,2}|[A-Z]\d{1,2}) \d[A-Z][A-Z]$/i,Xf=Re.Field,si=b("div").withConfig({displayName:"FormGroup",componentId:"sc-qe6azv-0"})(["margin-bottom:",";label{",";font-weight:500;font-family:inherit;margin-bottom:",";transition-duration:",";}&:focus-within label{color:",";}"],S.Spacing[4],Di.sm,S.Spacing[2],et.Fast,e=>e.theme.colorPrimary);function F_(){const[e,t]=f.useState(Bu());return f.useEffect(()=>{function n(){t(Bu())}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),e}function Bu(){var e,t;return{height:((e=document==null?void 0:document.documentElement)==null?void 0:e.clientHeight)||(window==null?void 0:window.innerHeight),width:((t=document==null?void 0:document.documentElement)==null?void 0:t.clientWidth)||(window==null?void 0:window.innerWidth)}}const M_=b("div").withConfig({displayName:"Footer__Container",componentId:"sc-16qv69m-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;margin:0 auto;position:absolute;z-index:",";left:0;right:0;bottom:0;@media ","{position:fixed;}padding-top:","px;padding-bottom:",";padding-left:",";padding-right:",";padding-left:calc("," + env(safe-area-inset-left));padding-right:calc("," + env(safe-area-inset-right));"],yt.footer,jt.isMobile,L.base,L.widgetPadding,L.widgetPadding,L.widgetPadding,L.widgetPadding,L.widgetPadding),eg=({children:e,className:t})=>{const[n,r]=f.useState(L.base*7),o=f.useRef();return f.useLayoutEffect(()=>{var s;const a=((s=o.current)==null?void 0:s.getBoundingClientRect().height)-parseInt(L.widgetPadding);a>=0&&r(Math.floor(a))}),i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-hidden":!0,style:{height:n}}),i.jsx(M_,{"data-test":"footer",ref:o,className:t,children:e})]})},mt=({children:e})=>{const t=f.useContext(Ze),[n,r]=f.useState(!1),{height:o}=F_();switch(f.useEffect(()=>{r(window.matchMedia(jt.isSmallVertical).matches)},[o]),t==null?void 0:t.buttonPosition){case Cs.Bottom:return n?i.jsx(i.Fragment,{children:e}):i.jsx(eg,{children:e});case Cs.Inline:default:return i.jsx(i.Fragment,{children:e})}},V_=b("div").withConfig({displayName:"ThemedFormInput__OutlinedContainer",componentId:"sc-19frg26-0"})(["margin-bottom:","px;"],L.base*2),B_=b("div").withConfig({displayName:"ThemedFormInput__MaterialContainer",componentId:"sc-19frg26-1"})(["margin-bottom:","px;position:relative;padding-top:","px;"],L.base,L.base*2),Uu=b("div").withConfig({displayName:"ThemedFormInput__FormError",componentId:"sc-19frg26-2"})(["color:",";font-size:",";margin-top:","px;"],e=>{var t;return((t=e==null?void 0:e.theme)==null?void 0:t.colorError)||Le.red100},$t.small,L.base),Yn=e=>{const{className:t,input:n,meta:{error:r,submitFailed:o},autoFocus:a,label:s,placeholder:c,id:l,"data-test":u="form",...d}=e,{inputStyle:m}=f.useContext(Ze),h=!!(r&&o);switch(m){case Tt.Material:return i.jsxs(B_,{className:t,children:[i.jsx(lr,{labelText:s||c,...n,...d,autoFocus:a,hasError:h,"aria-invalid":h?"true":void 0,id:l,"data-test":u}),i.jsx(Uu,{"data-test":`${u}-error`,role:"alert",props:e,children:h&&r})]});case Tt.Outlined:default:return i.jsxs(V_,{className:t,children:[s&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:l},children:s}),i.jsx(Ki,{...n,...d,autoFocus:a,hasError:h,"aria-invalid":h?"true":void 0,id:l,placeholder:c,"data-test":u}),i.jsx(Uu,{"data-test":`${u}-error`,role:"alert",props:e,children:h&&r})]})}},U_=b("p").withConfig({displayName:"ThemedParagraph__Paragraph",componentId:"sc-2v8g2c-0"})(["font-family:",";color:",";font-size:",";line-height:",";text-align:",";"],({theme:{fontFamily:e}})=>Ht(e),({theme:e})=>e.colorFont,({theme:e})=>e.fontSizeBody,({theme:e})=>e.lineHeightBody,({theme:e})=>e.textAlign),Ve=({styles:e,...t})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(Ks,{...t,styles:e}):i.jsx(U_,{...t})}),Hu=b.div.withConfig({displayName:"FormEmailAddress__DisclaimerContainer",componentId:"sc-1ocvk5j-0"})(["display:block;margin-top:","px;",""],L.base,({position:e,theme:t})=>e===xn.AboveButton&&$(["padding-bottom:","px;border-bottom:1px solid ",";margin-bottom:","px;"],L.base*2,t.colorDivider,L.base*2)),H_=b(Ve).withConfig({displayName:"FormEmailAddress__Disclaimer",componentId:"sc-1ocvk5j-1"})(["color:",";font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],({theme:e})=>e.colorFontSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall);function q_({handleSubmit:e,labelContinue:t,pristine:n,submitting:r,buttonStyle:o,disclaimerStyle:a,disclaimerText:s,disclaimerPosition:c=xn.BelowButton,disabled:l}){const[u]=z(),d=f.useMemo(()=>({emailAddress:[pt(u("database.form.validate-email-valid"),dr(yd)),pt(u("database.form.validate-email-required"),vn)]}),[u]),m=i.jsx(i.Fragment,{children:a!=null?i.jsx(Ve,{styles:a,children:i.jsx(te,{children:s!=null?s:u("to-email.disclaimer")})}):i.jsx(H_,{children:i.jsx(te,{children:s!=null?s:u("to-email.disclaimer")})})});return i.jsxs("form",{onSubmit:e,"data-test":"form-email-address",children:[i.jsxs(si,{children:[i.jsx("label",{htmlFor:"email-address",children:u("email-address.form.label")}),i.jsx(Xf,{autoComplete:"email",id:"email-address",name:"email-address",component:Yn,disabled:l||r,inputMode:"email",placeholder:"you@example.com",validate:d.emailAddress})]}),c===xn.AboveButton&&i.jsx(Hu,{position:xn.AboveButton,children:m}),i.jsxs(mt,{children:[i.jsx(ge,{type:"submit",buttonType:Z.Primary,styles:o,disabled:r,isPending:r,tabIndex:n||r?-1:0,children:t}),c===xn.BelowButton&&i.jsx(Hu,{position:xn.BelowButton,children:m})]})]})}const _d=Re.reduxForm({form:"email-address"})(q_),$_=b("div").withConfig({displayName:"InquiryDeviceHandoffEmailPromptView__Header",componentId:"sc-3sr1jl-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]);function G_({assets:e,handleEmailOneTimeLink:t,localizations:n,prefill:r,disabled:o}){var u,d,m;const[a]=z(),{base:s,buttons:c}=pr(),{deviceHandoffTermsTextPosition:l=xn.BelowButton}=f.useContext(Ze);return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs($_,{children:[i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:i.jsx(te,{children:(u=n==null?void 0:n.title)!=null?u:a("to-mobile.title")})}),i.jsx(at,{styles:s==null?void 0:s.textStyle,children:i.jsx(te,{children:(d=n==null?void 0:n.prompt)!=null?d:a("to-email.prompt")})})]}),i.jsx(_d,{onSubmit:t,labelContinue:(m=n==null?void 0:n["btn-submit"])!=null?m:a("to-email.btn-submit"),buttonStyle:c==null?void 0:c.primary,disclaimerStyle:s==null?void 0:s.disclaimerStyle,disclaimerText:n==null?void 0:n.disclaimer,disclaimerPosition:l,disabled:o,initialValues:{"email-address":r}})]})}var gl=(e=>(e.SavePhoneNumber="one-time-link/SAVE_PHONE_NUMBER",e.SaveEmailAddress="one-time-link/SAVE_EMAIL_ADDRESS",e))(gl||{});function Qs(e){return{payload:{phoneNumber:e},type:"one-time-link/SAVE_PHONE_NUMBER"}}function Zs(e){return{payload:{emailAddress:e},type:"one-time-link/SAVE_EMAIL_ADDRESS"}}function W_(e){var u;const[t]=z(),{error:n,callback:r}=vt(async d=>{const m=d["email-address"],{inquiry:h}=e,p={attributes:{"email-address":m},id:h.id,type:h.type};e.saveEmailAddress(m),await ne.postResourceAction(p,"email-one-time-link"),ee.logAmplitude("one-time-link.sent",{method:"email"}),j.onEvent(Pe.OneTimeLinkSent,{method:"email"}),e.history.push("/inquiry/device-handoff/email/sent")},[e.inquiry,e.history]);At({error:n,onError:d=>{d.status===409?e.showMessage(t("errors.inquiry-conflict")):e.showMessage(t("errors.network"))},onNetworkError:()=>e.showMessage(t("errors.network"))});const o=(u=e.inquiry)==null?void 0:u.attributes["next-step"],{assets:a,localizations:s,prefill:c,disabled:l}=f.useMemo(()=>{var d;return((d=e.component)==null?void 0:d.type)===Fe.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-email-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-email-prompt-page"],prefill:e.component.attributes["device-handoff-email-prefill"],disabled:e.component.attributes["device-handoff-email-disabled"]}:o!=null&&xo(o)?{assets:o.config.assets["device-handoff-email-prompt-page"],localizations:o.config.localizations["device-handoff-email-prompt-page"],prefill:o.config["device-handoff-email-prefill"],disabled:o.config["device-handoff-email-disabled"]}:{assets:{"header-pictograph":null},localizations:void 0,prefill:"",disabled:!1}},[o,e.component]);return e.inquiry==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(G_,{assets:a,handleEmailOneTimeLink:r,localizations:s,prefill:c,disabled:l})})}function Y_(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:Ii(e)}}const z_={saveEmailAddress:Zs,showMessage:ae},K_=Te(Y_,z_),Q_=K_(W_),Z_=b("div").withConfig({displayName:"InquiryDeviceHandoffEmailSentView__Header",componentId:"sc-1o129vd-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function J_({assets:e,localizations:t,emailAddress:n,resendOneTimeLink:r}){var d,m,h,p,g;const[o]=z(),{base:a,buttons:s}=pr(),[c,{enable:l}]=rt(),u=()=>{c||(r(),l())};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(Z_,{children:[i.jsx(dt,{styles:a==null?void 0:a.titleStyle,children:i.jsx(te,{children:(d=t==null?void 0:t.title)!=null?d:o("mobile-sent.title")})}),i.jsx(at,{styles:a==null?void 0:a.textStyle,children:i.jsx(te,{children:t!=null&&t.prompt?Dh.compile(t.prompt,{data:!1,knownHelpersOnly:!0})({client:{emailAddress:n}}):o("mobile-sent.prompt-email",{emailAddress:n})})})]}),i.jsx(Ye,{"aria-label":"email pictograph",children:i.jsx(qe,{customImage:e["email-pictograph"],alt:"email pictograph",children:i.jsx(pe,{$primaryColor:A((m=a==null?void 0:a.fill)==null?void 0:m.color),$highlightColor:A((h=a==null?void 0:a.fill)==null?void 0:h.highlightColor),$backgroundColor:A((p=a==null?void 0:a.fill)==null?void 0:p.backgroundColor),$strokeColor:A((g=a==null?void 0:a.stroke)==null?void 0:g.color),children:i.jsx(Es,{})})})}),t!=null&&t["btn-resend"]?i.jsxs(i.Fragment,{children:[i.jsx(Je,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-email-sent__resend-btn",onClick:u,type:"button",buttonType:Z.Secondary,styles:s==null?void 0:s[Z.Secondary],children:t["btn-resend"]})]}):i.jsx(at,{styles:a==null?void 0:a.textStyle,children:i.jsxs(Pn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-email__resend-link",onClick:u,children:"resend the secure link"})]})})]})}const qu=3e3;let Rc;function X_(e){var u;const[t]=z(),n=(u=e.inquiry)==null?void 0:u.attributes["next-step"],{assets:r,localizations:o}=f.useMemo(()=>{var d;return((d=e.component)==null?void 0:d.type)===Fe.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-email-sent-page"],localizations:e.component.attributes.localizations["device-handoff-email-sent-page"]}:n!=null&&xo(n)?{assets:n.config.assets["device-handoff-email-sent-page"],localizations:n.config.localizations["device-handoff-email-sent-page"]}:{assets:{"header-pictograph":null,"email-pictograph":null},localizations:void 0}},[n,e.component]);f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),l(),()=>clearTimeout(Rc)),[]);const{inquiry:a,emailAddress:s}=e,c=f.useCallback(async()=>{e.clearMessages();try{const d={attributes:{"email-address":s},id:a.id,type:a.type};await ne.postResourceAction(d,"email-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch{e.showMessage(t("mobile-sent.failed-to-resend"))}},[a,e.showMessage,e.clearMessages]),l=f.useCallback(async()=>{try{const{data:d,meta:m}=await ne.getResource(Zt(e.inquiry.type),e.inquiry.id);if((m==null?void 0:m["device-handed-off-at"])!=null){e.saveInquiry(d),e.history.push("/inquiry/device-handoff/started");return}switch(d.attributes.status){case Ce.Created:case Ce.Pending:Rc=window.setTimeout(l,qu);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(d),e.routeToNextStep(d);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ut(d.attributes.status)}}catch(d){if(d instanceof Ct)Rc=window.setTimeout(l,qu);else if(d instanceof ht&&d.status!==401)e.showMessage(t("errors.session-expired"));else throw d}},[a]);return a==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(J_,{assets:r,localizations:o,emailAddress:s,resendOneTimeLink:c})})}function eR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,emailAddress:e.oneTimeLink.emailAddress,styles:Ii(e)}}const tR={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,routeToNextStep:Rt,saveEmailAddress:Zs},nR=Te(eR,tR),iR=nR(X_),rR=On()(iR),oR=async e=>{try{return"clipboard"in navigator?(await navigator.clipboard.writeText(e),!0):document.execCommand("copy",!0,e)}catch(t){return $e("Copying to clipboard was unsuccessful","warning",{error:t}),!1}},aR=b.button.withConfig({displayName:"VerticalOption__OptionBlock",componentId:"sc-78m1oi-0"})(["border:0;margin:0;padding:0;background:transparent;box-sizing:border-box;color:inherit;text-align:inherit;display:flex;justify-content:space-between;align-items:center;cursor:pointer;"," ",""],()=>{const e=j.isInline?"0px":`-${j.widgetPadding.left}px`,t=j.isInline?"0px":`-${j.widgetPadding.right}px`;return`
      width: calc(100% - ${e} - ${t});
      margin-left: ${e};
      margin-right: ${t};
    `},({styles:e,buttonType:t})=>{const n=r=>(e==null?void 0:e.border)!=null?`${k(e.border.width.top)} solid ${A(e.border.color)}`:`1px solid ${r}`;switch(t){case"outline":return $(["padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";border-top:",";:last-of-type{border-bottom:",";}:hover,:focus{background-color:",";}"],S.Spacing[4],S.Spacing[4],S.Spacing[5],S.Spacing[5],n(Le.gray50),n(Le.gray50),({theme:r})=>e!=null&&e.backgroundColor?A(e.backgroundColor.focused):r.colorDropdownOption);case"outline_light":return $(["padding-top:18px;padding-bottom:18px;padding-left:0;padding-right:",";border-top:",";border-bottom:",";& + &{border-top:none;}color:",";margin-left:0;width:calc(100% + ","px);font-weight:500;:focus-within{background-color:",";}"],S.Spacing[5],({theme:r})=>n(r.colorDivider),({theme:r})=>n(r.colorDivider),({theme:r})=>r.colorFontTitle,j.widgetPadding.left,({theme:r})=>e!=null&&e.backgroundColor?A(e.backgroundColor.focused):r.colorDropdownOption)}}),sR=b("span").withConfig({displayName:"VerticalOption__Text",componentId:"sc-78m1oi-1"})(["flex-grow:1;"]),cR=b($l).withConfig({displayName:"VerticalOption__StyledChevron",componentId:"sc-78m1oi-2"})(["path{stroke:",";}"],({styles:e,theme:t})=>{var n;return((n=e==null?void 0:e.stroke)==null?void 0:n.color)!=null?A(e.stroke.color):t.colorFontTitle});function Rd({id:e,"data-test":t,buttonType:n="outline",onClick:r,icon:o,children:a,styles:s}){return i.jsxs(aR,{id:e,"data-test":t,onClick:r,type:"button",buttonType:n,styles:{backgroundColor:s==null?void 0:s.backgroundColor,border:s==null?void 0:s.border},children:[o,i.jsx(sR,{children:s!=null?i.jsx(Ks,{styles:s.textStyle,children:a}):a}),i.jsx(cR,{styles:s==null?void 0:s.chevron})]})}const tg=({value:e,accessibleTitle:t,"data-test":n,bgColor:r,fgColor:o})=>e==null?null:i.jsx(Ph,{value:e,title:t,"data-test":n,includeMargin:!0,bgColor:r!=null?r:S.Color.PrimaryWhite,fgColor:o}),Ad=132,lR=256,dR=b("div").withConfig({displayName:"InquiryDeviceHandoffPromptView__Header",componentId:"sc-1plfyk1-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),uR=b(ge).withConfig({displayName:"InquiryDeviceHandoffPromptView__OptionButton",componentId:"sc-1plfyk1-1"})(["width:100%;",""],({styles:e})=>e==null&&$(["& + &{margin-top:",";}"],S.Spacing[4])),mR=b(ge).withConfig({displayName:"InquiryDeviceHandoffPromptView__CopyToClipboardButton",componentId:"sc-1plfyk1-2"})(({styles:e,textStyles:t})=>({backgroundColor:"transparent !important",border:0,borderBottom:"1px solid",borderRadius:0,boxShadow:"unset !important",margin:0,padding:0,textTransform:"unset",transform:"none !important",width:"initial",borderColor:`${A(e==null?void 0:e["text-color"].base.base)} !important`,fontFamily:Ht(t==null?void 0:t["font-family"].base.base),fontSize:k(t==null?void 0:t["font-size"].base.base),fontWeight:Fn(t==null?void 0:t["font-weight"].base.base),letterSpacing:k(t==null?void 0:t["letter-spacing"].base.base),lineHeight:k(t==null?void 0:t["line-height"].base.base),svg:{height:k(t==null?void 0:t["font-size"].base.base),width:k(t==null?void 0:t["font-size"].base.base)}})),hR=b.div.withConfig({displayName:"InquiryDeviceHandoffPromptView__QrCodeContainer",componentId:"sc-1plfyk1-3"})(["height:","px;margin-bottom:",";display:flex;flex-direction:column;align-items:center;"],Ad,S.Spacing[6]),pR=b.span.withConfig({displayName:"InquiryDeviceHandoffPromptView__IconContainer",componentId:"sc-1plfyk1-4"})(["line-height:0;margin-right:10px;"]),fR=b.div.withConfig({displayName:"InquiryDeviceHandoffPromptView__Container",componentId:"sc-1plfyk1-5"})(["display:flex;flex-direction:column;"]);function gR({assets:e,deviceHandoffOptions:t,deviceHandoffListStyle:n="button",handleEmailDeviceHandoff:r,handleSmsDeviceHandoff:o,link:a,shortlink:s,copyShortlink:c,localizations:l}){var v,x,R,_,T;const[u]=z(),{base:d,buttons:m}=pr(),h=n==="button"?mt:f.Fragment,p=l==null?void 0:l["qr-code"],g=p?CR(p.length):Ad,C=p||a,I=s!=null&&j.canCopyToClipboard;return i.jsxs(fR,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(dR,{children:[i.jsx(dt,{styles:d==null?void 0:d.titleStyle,children:i.jsx(te,{children:(v=l==null?void 0:l.title)!=null?v:u("to-mobile.title")})}),i.jsx(at,{styles:d==null?void 0:d.textStyle,children:i.jsx(te,{children:(x=l==null?void 0:l.description)!=null?x:u("to-mobile.description")})})]}),t.includes(tn.Qr)&&i.jsx(hR,{style:{height:`${g}px`},children:!!C&&i.jsxs(i.Fragment,{children:[i.jsx(Ye,{height:g,width:g,"aria-label":u("qr-code.prompt"),role:"img",marginBottom:s?"0":void 0,children:i.jsx(tg,{value:C,accessibleTitle:u("qr-code.prompt"),"data-test":"device-handoff-qr__qr-code",bgColor:A(d==null?void 0:d.backgroundColor),fgColor:A((T=(_=(R=d==null?void 0:d.textStyle)==null?void 0:R["text-color"])==null?void 0:_.base)==null?void 0:T.base)})}),I&&i.jsx(mR,{onClick:c,id:"device-handoff-qr__copy-shortlink",suffixIcon:i.jsx(y0,{}),styles:m==null?void 0:m.secondary,textStyles:d==null?void 0:d.disclaimerStyle,children:s})]})}),i.jsx(h,{children:(t!=null?t:[]).map((E,V)=>i.jsx(bR,{isPrimary:V===0,option:E,assets:e,deviceHandoffOptions:t,handleEmailDeviceHandoff:r,handleSmsDeviceHandoff:o,localizations:l,deviceHandoffListStyle:n},E))})]})}function bR({assets:e,handleSmsDeviceHandoff:t,handleEmailDeviceHandoff:n,isPrimary:r,localizations:o,option:a,deviceHandoffListStyle:s}){var l,u;const[c]=z();switch(a){case tn.Sms:return i.jsx($u,{id:"button__sms",isPrimary:r,"data-test":"to-mobile__via-sms",onClick:t,icon:i.jsx(qe,{customImage:e["icon-sms"],alt:"mobile phone icon"}),deviceHandoffListStyle:s,children:(l=o==null?void 0:o["via-sms"])!=null?l:c("to-mobile.via-sms")});case tn.Email:return i.jsx($u,{id:"button__email",isPrimary:r,"data-test":"to-mobile__via-email",onClick:n,icon:i.jsx(qe,{customImage:e["icon-email"],alt:"email icon"}),deviceHandoffListStyle:s,children:(u=o==null?void 0:o["via-email"])!=null?u:c("to-mobile.via-email")});case tn.Qr:return null;default:ut(a)}}const $u=({"data-test":e,children:t,icon:n,id:r,isPrimary:o,onClick:a,deviceHandoffListStyle:s="outline"})=>{const{buttons:c}=pr(),l={id:r,"data-test":e,onClick:a},u=o?Z.Primary:Z.Secondary;return s==="button"?i.jsx(uR,{...l,type:"button",styles:c==null?void 0:c[u],buttonType:u,children:t}):i.jsx(Rd,{...l,buttonType:s,icon:n!=null&&i.jsx(pR,{"data-test":"option-vertical__pictograph",children:n}),children:t})};function CR(e){return vC(Ad,lR,Math.floor(Math.sqrt(e)*16))}const Gu=3e3,xR=e=>{var I;const t=Ot(),n=en("inquiry:hide-sms-device-handoff-option-inverse"),[r]=z(),[o,a]=f.useState({long:void 0,short:void 0}),[s,{disable:c}]=rt(!0);let l;Ur({loader:async()=>{var x,R;const v=await ne.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"generate-one-time-link");a({long:(x=v==null?void 0:v.meta)==null?void 0:x["one-time-link-url"],short:(R=v==null?void 0:v.meta)==null?void 0:R["one-time-link-url-short"]}),ee.logAmplitude("one-time-link.sent",{method:"qr"}),j.onEvent(Pe.OneTimeLinkSent,{method:"qr"})},deps:[],onError:v=>{var x;v.status===403&&((x=v.errors[0])==null?void 0:x.code)==="max_session_limit_error"?t.push("/verify/invalid/inquiry"):v.status===409?e.showMessage(r("errors.inquiry-conflict")):e.showMessage(r("errors.network"))},onNetworkError:()=>e.showMessage(r("errors.network"))}),f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}return u(),()=>{clearTimeout(l),c()}},[]);const u=f.useCallback(async()=>{try{const{data:v,meta:x}=await ne.getResource(Zt(e.inquiry.type),e.inquiry.id);if((x==null?void 0:x["device-handed-off-at"])!=null){e.saveInquiry(v),e.history.push("/inquiry/device-handoff/started");return}switch(v.attributes.status){case Ce.Created:case Ce.Pending:s&&(l=window.setTimeout(u,Gu));return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(v),e.routeToNextStep(v);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(r("errors.session-expired"));return;default:ut(v.attributes.status)}}catch(v){if(v instanceof Ct)l=window.setTimeout(u,Gu);else if(v instanceof ht&&v.status!==401)e.showMessage(r("errors.session-expired"));else throw v}},[e.inquiry,s]),d=f.useCallback(async()=>{o.short!=null&&await oR(o.short)&&e.showMessage(r("to-mobile.link-copied"))},[o.short]),m=(I=e.inquiry)==null?void 0:I.attributes["next-step"],{assets:h,localizations:p,deviceHandoffOptions:g,deviceHandoffListStyle:C}=f.useMemo(()=>{var v;if(((v=e.component)==null?void 0:v.type)===Fe.ButtonDeviceHandoff){let x=e.component.attributes["device-handoff-options"];return n||(x=x.filter(R=>R!==tn.Sms)),{assets:e.component.attributes.assets["device-handoff-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-prompt-page"],deviceHandoffOptions:x,deviceHandoffListStyle:e.component.attributes["device-handoff-list-style"]}}else if(m!=null&&xo(m)){let x=m.config["device-handoff-options"];return n||(x=x.filter(R=>R!==tn.Sms)),{assets:m.config.assets["device-handoff-prompt-page"],localizations:m.config.localizations["device-handoff-prompt-page"],deviceHandoffOptions:x,deviceHandoffListStyle:m.config["device-handoff-list-style"]}}else return{assets:{"header-pictograph":null,"icon-email":null,"icon-sms":null},localizations:void 0,deviceHandoffOptions:[],deviceHandoffListStyle:void 0}},[m,e.component,n]);return e.inquiry==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(gR,{link:o.long?`${o.long}&device-handoff-method=${tn.Qr}`:void 0,shortlink:o.short,copyShortlink:d,localizations:p,handleSmsDeviceHandoff:()=>t.push("/inquiry/device-handoff/sms"),handleEmailDeviceHandoff:()=>t.push("/inquiry/device-handoff/email"),deviceHandoffOptions:g,deviceHandoffListStyle:C,assets:h})})};function vR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:Ii(e)}}const IR={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,routeToNextStep:Rt},SR=Te(vR,IR),wR=SR(xR),yR=b("div").withConfig({displayName:"FormControl__Container",componentId:"sc-1gbm02v-0"})(["margin-bottom:","px;"],L.base*2),_R=b("div").withConfig({displayName:"FormControl__FormError",componentId:"sc-1gbm02v-1"})(["color:",";font-size:",";margin-top:","px;white-space:pre-line;"],({theme:e})=>e.colorError,$t.small,L.base),RR=e=>typeof e=="string"?e:e.displayName||"Component";function Td(e){var t;return t=class extends f.Component{constructor(r){super(r)}render(){const{className:r,input:o,meta:{error:a,warning:s,submitFailed:c,touched:l},autoFocus:u,...d}=this.props,m=!!((a||s)&&(c||l));return i.jsxs(yR,{className:r,children:[i.jsx(e,{...o,...d,hasError:m,warning:s,id:this.id}),m&&i.jsx(_R,{id:this.errorId,role:"alert",children:a})]})}get id(){const{id:r,input:{name:o}}=this.props;return r||o}get errorId(){return`${this.id}--error`}},t.displayName=`FormControl(${RR(e)})`,t}const Wu=Td(Ki),AR=Td(Wf),ng=Td(Gf),Yu=b.div.withConfig({displayName:"FormPhoneNumber__DisclaimerContainer",componentId:"sc-iqabde-0"})(["display:block;margin-top:","px;",""],L.base,({position:e,theme:t})=>e===xn.AboveButton&&$(["padding-bottom:","px;border-bottom:1px solid ",";margin-bottom:","px;"],L.base*2,t.colorDivider,L.base*2)),TR=b(Ve).withConfig({displayName:"FormPhoneNumber__Disclaimer",componentId:"sc-iqabde-1"})(["color:",";font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],({theme:e})=>e.colorFontSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),ER=b(Ve).withConfig({displayName:"FormPhoneNumber__ThemedDisclaimer",componentId:"sc-iqabde-2"})(["",""],({styles:e})=>{const t=e;return{fontSize:k(t["font-size"].base.base),lineHeight:k(t["line-height"].base.base),"& , a":{fontSize:k(t["font-size"].base.base),lineHeight:k(t["line-height"].base.base)}}});function kR(e){const{defaultCountry:t,handleSubmit:n,labelContinue:r,pristine:o,submitting:a,onCountryChange:s=()=>null,buttonStyle:c,disclaimerStyle:l,disclaimerText:u,disclaimerPosition:d=xn.BelowButton,disabled:m}=e,[h]=z(),p=f.useMemo(()=>({phoneNumber:[pt(h("database.form.validate-phone-number-valid"),Pf),pt(h("database.form.validate-phone-number-required"),vn)]}),[h]),g=i.jsx(i.Fragment,{children:l!=null?i.jsx(ER,{styles:l,children:i.jsx(te,{children:u!=null?u:h("to-mobile.disclaimer")})}):i.jsx(TR,{children:i.jsx(te,{children:u!=null?u:h("to-mobile.disclaimer")})})});return i.jsxs("form",{onSubmit:n,children:[i.jsxs(si,{children:[i.jsx("label",{htmlFor:"phone-number",children:h("phone-number.form.label")}),i.jsx(Re.Field,{autoComplete:"phone",component:ng,disabled:m||a,id:"phone-number",name:"phone-number",type:"tel",defaultCountry:t,validate:p.phoneNumber,onCountryChange:s})]}),d===xn.AboveButton&&i.jsx(Yu,{position:xn.AboveButton,children:g}),i.jsxs(mt,{children:[i.jsx(ge,{type:"submit",buttonType:Z.Primary,styles:c,disabled:a,isPending:a,tabIndex:o||a?-1:0,children:r}),d===xn.BelowButton&&i.jsx(Yu,{position:xn.BelowButton,children:g})]})]})}const Ed=Re.reduxForm({form:"phone-number"})(kR),NR=b("div").withConfig({displayName:"InquiryDeviceHandoffSmsPromptView__Header",componentId:"sc-5qwbcz-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function jR({assets:e,defaultCountry:t,handleSmsOneTimeLink:n,localizations:r,prefill:o,disabled:a}){var d,m,h;const[s]=z(),{base:c,buttons:l}=pr(),{deviceHandoffTermsTextPosition:u=xn.BelowButton}=f.useContext(Ze);return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(NR,{children:[i.jsx(dt,{styles:c==null?void 0:c.titleStyle,children:i.jsx(te,{children:(d=r==null?void 0:r.title)!=null?d:s("to-mobile.title")})}),i.jsx(at,{styles:c==null?void 0:c.textStyle,children:i.jsx(te,{children:(m=r==null?void 0:r.prompt)!=null?m:s("to-mobile.prompt")})})]}),i.jsx(Ed,{onSubmit:n,labelContinue:(h=r==null?void 0:r["btn-submit"])!=null?h:s("to-mobile.btn-submit"),defaultCountry:t,disclaimerStyle:c==null?void 0:c.disclaimerStyle,disclaimerText:r==null?void 0:r.disclaimer,buttonStyle:l==null?void 0:l.primary,disclaimerPosition:u,disabled:a,initialValues:{"phone-number":o}})]})}function PR(e){var u;const[t]=z(),{error:n,callback:r}=vt(async d=>{const m=d["phone-number"],{inquiry:h}=e,p={attributes:{"phone-number":m},id:h.id,type:h.type};e.savePhoneNumber(m),await ne.postResourceAction(p,"sms-one-time-link"),ee.logAmplitude("one-time-link.sent",{method:"sms"}),j.onEvent(Pe.OneTimeLinkSent,{method:"sms"}),e.history.push("/inquiry/device-handoff/sms/sent")},[e.inquiry,e.history]);At({error:n,onError:d=>{var m,h,p,g,C,I,v,x;d.status===409?e.showMessage(t("errors.inquiry-conflict")):d.status===400&&((h=(m=d.errors)==null?void 0:m[0])==null?void 0:h.code)==="unsubscribed_error"?e.showMessage(t("mobile-sent.sms-unsubscribed")):d.status===422&&(((g=(p=d.errors)==null?void 0:p[0])==null?void 0:g.code)==="invalid_number_error"||((I=(C=d.errors)==null?void 0:C[0])==null?void 0:I.details)==="landline_detected_error")?e.showMessage(t("mobile-sent.invalid-number")):d.status===422&&((x=(v=d.errors)==null?void 0:v[0])==null?void 0:x.code)==="region_not_supported_error"?e.showMessage(t("mobile-sent.region-not-supported")):e.showMessage(t("mobile-sent.failed-to-resend"))},onNetworkError:()=>e.showMessage(t("errors.network"))});const o=(u=e.inquiry)==null?void 0:u.attributes["next-step"],{assets:a,localizations:s,prefill:c,disabled:l}=f.useMemo(()=>{var d;return((d=e.component)==null?void 0:d.type)===Fe.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-sms-prompt-page"],localizations:e.component.attributes.localizations["device-handoff-sms-prompt-page"],prefill:e.component.attributes["device-handoff-phone-number-prefill"],disabled:e.component.attributes["device-handoff-phone-number-disabled"]}:o!=null&&xo(o)?{assets:o.config.assets["device-handoff-sms-prompt-page"],localizations:o.config.localizations["device-handoff-sms-prompt-page"],prefill:o.config["device-handoff-phone-number-prefill"],disabled:o.config["device-handoff-phone-number-disabled"]}:{assets:{"header-pictograph":null},localizations:void 0,prefill:"",disabled:!1}},[o,e.component]);return e.inquiry==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(jR,{assets:a,defaultCountry:e.defaultCountry,handleSmsOneTimeLink:r,localizations:s,prefill:c,disabled:l})})}function DR(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:Ii(e)}}const OR={savePhoneNumber:Qs,showMessage:ae},LR=Te(DR,OR),FR=LR(PR),MR=b("div").withConfig({displayName:"InquiryDeviceHandoffSmsSentView__Header",componentId:"sc-dx6akj-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function VR({assets:e,localizations:t,phoneNumber:n,resendOneTimeLink:r}){var m,h,p,g,C;const o=Dl(n,"National"),[a]=z(),{base:s,buttons:c}=pr(),[l,{enable:u}]=rt(),d=()=>{l||(r(),u())};return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(MR,{children:[i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:i.jsx(te,{children:(m=t==null?void 0:t.title)!=null?m:a("mobile-sent.title")})}),i.jsx(at,{styles:s==null?void 0:s.textStyle,children:t!=null&&t.prompt?i.jsx(te,{children:Dh.compile(t.prompt,{data:!1,knownHelpersOnly:!0})({client:{phoneNumber:o}})}):i.jsx(Pn,{i18nKey:"mobile-sent.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{phoneNumber:o}})})]}),i.jsx(Ye,{"aria-label":"SMS pictograph",children:i.jsx(qe,{customImage:e["sms-pictograph"],alt:"SMS pictograph",children:i.jsx(pe,{$primaryColor:A((h=s==null?void 0:s.fill)==null?void 0:h.color),$highlightColor:A((p=s==null?void 0:s.fill)==null?void 0:p.highlightColor),$backgroundColor:A((g=s==null?void 0:s.fill)==null?void 0:g.backgroundColor),$strokeColor:A((C=s==null?void 0:s.stroke)==null?void 0:C.color),children:i.jsx(Es,{})})})}),t!=null&&t["btn-resend"]?i.jsxs(i.Fragment,{children:[i.jsx(Je,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-sms-sent__resend-btn",onClick:d,type:"button",buttonType:Z.Secondary,styles:c==null?void 0:c[Z.Secondary],children:t["btn-resend"]})]}):i.jsx(at,{styles:s==null?void 0:s.textStyle,children:i.jsxs(Pn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-sms__resend-link",onClick:d,children:"resend the secure link"})]})})]})}const zu=3e3;let Ac;function BR(e){var u;const[t]=z();f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),a(),()=>clearTimeout(Ac)),[]);const{inquiry:n,phoneNumber:r}=e,o=f.useCallback(async()=>{var d;e.clearMessages();try{const m={attributes:{"phone-number":r},id:n.id,type:n.type};await ne.postResourceAction(m,"sms-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch(m){m.status===400&&((d=m.errors)==null?void 0:d[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const{data:d,meta:m}=await ne.getResource(Zt(e.inquiry.type),e.inquiry.id);if((m==null?void 0:m["device-handed-off-at"])!=null){e.saveInquiry(d),e.history.push("/inquiry/device-handoff/started");return}switch(d.attributes.status){case Ce.Created:case Ce.Pending:Ac=window.setTimeout(a,zu);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(d),e.routeToNextStep(d);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ut(d.attributes.status)}}catch(d){if(d instanceof Ct)Ac=window.setTimeout(a,zu);else if(d instanceof ht&&d.status!==401)e.showMessage(t("errors.session-expired"));else throw d}},[n]),s=(u=e.inquiry)==null?void 0:u.attributes["next-step"],{assets:c,localizations:l}=f.useMemo(()=>{var d;return((d=e.component)==null?void 0:d.type)===Fe.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-sms-sent-page"],localizations:e.component.attributes.localizations["device-handoff-sms-sent-page"]}:s!=null&&xo(s)?{assets:s.config.assets["device-handoff-sms-sent-page"],localizations:s.config.localizations["device-handoff-sms-sent-page"]}:{assets:{"header-pictograph":null,"sms-pictograph":null},localizations:void 0}},[s,e.component]);return n==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(VR,{assets:c,localizations:l,phoneNumber:r,resendOneTimeLink:o})})}function UR(e){return{inquiry:e.inquiry.inquiry,phoneNumber:e.oneTimeLink.phoneNumber,component:e.inquiry.component,styles:Ii(e)}}const HR={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,savePhoneNumber:Qs,routeToNextStep:Rt},qR=Te(UR,HR),$R=qR(BR),GR=On()($R),WR=b("div").withConfig({displayName:"InquiryDeviceHandoffStartedView__Header",componentId:"sc-yj3xbg-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function YR({assets:e,localizations:t,resumeOnDevice:n}){var s,c,l,u,d,m;const[r]=z(),{base:o,buttons:a}=pr();return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(WR,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(te,{children:(s=t==null?void 0:t.title)!=null?s:r("handed-off.title")})}),i.jsx(at,{styles:o==null?void 0:o.textStyle,children:i.jsx(te,{children:(c=t==null?void 0:t.prompt)!=null?c:r("handed-off.prompt")})})]}),i.jsx(Ye,{"aria-label":"return to original device pictograph",children:i.jsx(qe,{customImage:e["device-pictograph"],alt:"device pictograph",children:i.jsx(pe,{$primaryColor:A((l=o==null?void 0:o.fill)==null?void 0:l.color),$highlightColor:A((u=o==null?void 0:o.fill)==null?void 0:u.highlightColor),$backgroundColor:A((d=o==null?void 0:o.fill)==null?void 0:d.backgroundColor),$strokeColor:A((m=o==null?void 0:o.stroke)==null?void 0:m.color),children:i.jsx(B1,{})})})}),t!=null&&t["btn-resume"]?i.jsxs(i.Fragment,{children:[i.jsx(Je,{height:2}),i.jsx(ge,{id:"inquiry-device-handoff-started__resume-btn",onClick:n,type:"button",buttonType:Z.Secondary,styles:a==null?void 0:a[Z.Secondary],children:t["btn-resume"]})]}):i.jsx(at,{styles:o==null?void 0:o.textStyle,children:i.jsx("a",{id:"device-handoff-started__resume-link",onClick:n,children:i.jsx(Pn,{i18nKey:"handed-off.btn-resume",children:"Fallback Resume Button"})})})]})}const Ku=3e3;let Tc;function zR(e){var u;const t=Ot(),[n]=z(),r=(u=e.inquiry)==null?void 0:u.attributes["next-step"],{assets:o,localizations:a}=f.useMemo(()=>{var d;return((d=e.component)==null?void 0:d.type)===Fe.ButtonDeviceHandoff?{assets:e.component.attributes.assets["device-handoff-started-page"],localizations:e.component.attributes.localizations["device-handoff-started-page"]}:r!=null&&xo(r)?{assets:r.config.assets["device-handoff-started-page"],localizations:r.config.localizations["device-handoff-started-page"]}:{assets:{"header-pictograph":null,"device-pictograph":null},localizations:void 0}},[r,e.component]);f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),l(),()=>clearTimeout(Tc)),[]);const{inquiry:s}=e,c=f.useCallback(async()=>{e.clearMessages(),await ne.postResourceSingletonActionNew(w.CurrentInquirySession,"resume");const d=(await ne.getResource(Zt(s.type),s.id)).data;e.saveInquiry(d),e.routeToNextStep(d,{historyToClear:t})},[s,e,t]),l=f.useCallback(async()=>{try{const d=(await ne.getResource(Zt(s.type),s.id)).data;switch(d.attributes.status){case Ce.Created:case Ce.Pending:Tc=window.setTimeout(l,Ku);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(d),e.routeToNextStep(d,{historyToClear:t});return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ut(d.attributes.status)}}catch(d){if(d instanceof Ct)Tc=window.setTimeout(l,Ku);else if(d instanceof ht&&d.status!==401)e.showMessage(n("errors.session-expired"));else throw d}},[s]);return s==null?null:i.jsx(Hr,{value:e.styles,children:i.jsx(YR,{assets:o,localizations:a,resumeOnDevice:c})})}function KR(e){return{inquiry:e.inquiry.inquiry,component:e.inquiry.component,styles:Ii(e)}}const QR={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,routeToNextStep:Rt},ZR=Te(KR,QR),JR=ZR(zR),XR=On()(JR),ig=f.createContext(bf()),qr=()=>f.useContext(ig),Js=({children:e,value:t})=>{const n=f.useMemo(()=>bf(t),[t]);return i.jsx(ig.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})};var Dt=(e=>(e[e.Prompt=0]="Prompt",e[e.TakePhoto=1]="TakePhoto",e[e.Check=2]="Check",e[e.Review=3]="Review",e[e.Pending=4]="Pending",e[e.Failed=5]="Failed",e))(Dt||{});const ha=e=>{switch(e){case Dt.Prompt:return"/inquiry/documents/prompt";case Dt.TakePhoto:return"/inquiry/documents/capture";case Dt.Check:return"/inquiry/documents/check";case Dt.Review:return"/inquiry/documents/review";case Dt.Pending:return"/inquiry/documents/pending";case Dt.Failed:return"/inquiry/documents/failed";default:ut(e)}},e3=[0,1,0,1,-4,1,0,1,0];function Qu(e){var c;const t=Math.max(Math.max(e.width,e.height)/75,1),n=(c=Ns(e))==null?void 0:c.data;if(!n)return 0;const r=new Uint8ClampedArray(5625);let o=0;for(let l=0;l<n.length;l+=4*Math.floor(t)){const u=n[l],d=n[l+1],m=n[l+2],h=(u+d+m)/3;r[o]=h,o++}const a=t3(r,e3,75,75);return n3(a)}function t3(e,t,n,r){const o=Math.round(Math.sqrt(t.length)),a=Math.floor(o/2),s=new Uint8ClampedArray(5625);for(let c=0;c<r;c++)for(let l=0;l<n;l++){const u=c*n+l;let d=0;for(let m=0;m<o;m++)for(let h=0;h<o;h++){const p=Math.min(r-1,Math.max(0,c+m-a)),g=Math.min(n-1,Math.max(0,l+h-a)),C=p*n+g,I=t[m*o+h];d+=e[C]*I}s[u]=d}return s}function n3(e){const t=IC(e);return e.reduce((r,o)=>r+(o-t)**2,0)/e.length}function i3(e,t,n=1,r=99){const o=Math.floor(n/100*t),a=Math.floor(r/100*t);let s,c,l=0;for(let d=0,m=e.length;d<m;d++)if(l+=e[d],l>o){s=d;break}const u=t-a;l=0;for(let d=e.length-1;d>=0;d--)if(l+=e[d],l>u){c=d;break}return c-s}function yr(e,t={x:0,y:0,width:e.width,height:e.height}){var m;const n=e.getContext("2d",{willReadFrequently:!0});if(n==null)return null;let r;try{if(r=(m=n.getImageData(t.x,t.y,t.width,t.height))==null?void 0:m.data,!r)return null}catch(h){if(h instanceof RangeError||h instanceof DOMException||h instanceof Error&&h.name==="NS_ERROR_OUT_OF_MEMORY")return null;throw h}const o=r.length/4;let a=0;const s=new Array(256).fill(0);for(let h=0,p=r.length;h<p;h+=4){const g=r[h],C=r[h+1],I=r[h+2],v=(g+C+I)/3,x=Math.floor(v);s[x]++,a+=v}const c=a/o;let l=0;for(let h=0,p=r.length;h<p;h+=4){const g=r[h],C=r[h+1],I=r[h+2],x=((g+C+I)/3-c)/255;l+=x**2}const u=Math.sqrt(l/o),d=i3(s,o);return{luminosity:c/255,rmsContrast:u/.5,lowHighContrast:d/255}}const r3=254;function eo(e,t=r3){var c;const n=(c=Ns(e))==null?void 0:c.data;if(n==null)return 0;let r=0;const o=e.height,a=e.width,s=Math.max(Math.max(o,a)/150,1);for(let l=0;l<o;l+=s)for(let u=0;u<a;u+=s){const d=(l*a+u)*4,m=1-Math.abs(u-a/2)/a*2,h=1-Math.abs(l-o/2)/o*2,p=m*h;n[d]>=t&&n[d+1]>=t&&n[d+2]>=t&&(r+=p*p)}return r/(o/s*(a/s))}class zn{constructor(t){this.showTriggeredCount=0,this.hideTriggeredCount=0,this.config=t}get isShowing(){return this.showTriggeredCount>=this.config.showAfterFrames}runTick(t){this.isShowing?this.config.shouldShow(t)?this.hideTriggeredCount=0:(this.hideTriggeredCount++,this.hideTriggeredCount>=this.config.hideAfterFrames&&(this.showTriggeredCount=0)):this.config.shouldShow(t)?(this.showTriggeredCount++,this.showTriggeredCount>=this.config.showAfterFrames&&(this.hideTriggeredCount=0)):this.showTriggeredCount=0}getType(){return this.config.type}getPrompt({t,localizations:n}){return this.config.getPrompt({t,localizations:n})}}class kd{constructor(t){this.triggers=t}runTick(t){for(const n of this.triggers)n.runTick(t)}getTriggered(){for(const t of this.triggers)if(t.isShowing)return t}}const Is=300,ho="image/jpeg",Ss=.95,Zu=6,Ju=2;class bl{constructor({canvasBuffer:t,filter:n,frameBufferSize:r,skipBlankCaptureCheck:o}){if(this.blankCanvasDataUri="",this.capturedFrames=[],this.filter=Qu,this.frameBufferSize=Zu,this.capture=()=>{const a=this.canvasBuffer.toDataURL(ho,Ss);a.length<=this.blankCanvasDataUri.length||this.captureFrame({clarityScore:this.filter(this.canvasBuffer),dateRecorded:new Date().getTime(),dataUri:a})},this.manualCapture=a=>{this.captureFrame({clarityScore:Number.MAX_SAFE_INTEGER,dateRecorded:new Date().getTime(),dataUri:a})},this.canvasBuffer=t,this.filter=n!=null?n:Qu,this.frameBufferSize=r!=null?r:Zu,!o){const[a,s]=fi();a.height=t.height,a.width=t.width,this.blankCanvasDataUri=a.toDataURL(ho,Ss),s()}}hasCaptures(){return this.capturedFrames.length>0}captureCount(){return this.capturedFrames.length}leastBlurryImages(){const t=el(this.capturedFrames),n=SC(this.capturedFrames,1),r=Xc(n,a=>{var s;return((s=a==null?void 0:a.clarityScore)!=null?s:0)*-1}),o=Xc(r.slice(0,Ju),[a=>a.dateRecorded,a=>this.capturedFrames.indexOf(a)]);return t!=null&&o.push(t),o.map(a=>a.dataUri)}async processLastFrame(t){const n=el(this.capturedFrames);if(n)return await t(n.dataUri)}captureFrame(t){this.capturedFrames.length>Ju&&t.dataUri.length<Lr&&t.clarityScore===0||(this.capturedFrames.push(t),this.capturedFrames.length>this.frameBufferSize&&this.capturedFrames.shift())}}function rg(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().forEach(t=>t.stop()),e.getAudioTracks().forEach(t=>t.stop())):e.getTracks?e.getTracks().forEach(t=>t.stop()):e.stop&&e.stop())}let o3=class{async prepare(t,n){if(this.stream!=null)return;if(this.stream=await navigator.mediaDevices.getUserMedia(t),aC()||Ul()||j.isWebView||n!=null&&n["inquiry:dispose-video-client-early-all-web-clients"]){this.dispose();return}const r=document.createElement("video");let o;r.srcObject!==void 0?r.srcObject=this.stream:(o=window.URL.createObjectURL(this.stream),r.src=o),new Promise(a=>{const s=()=>{window.URL.revokeObjectURL(o),r.removeEventListener("loadedmetadata",s),a()};r.addEventListener("loadedmetadata",s)})}dispose(){rg(this.stream),this.stream=void 0}};const Dn=new o3,a3=.92,Nd=()=>{const e=f.useRef([]),t=f.useRef(!0),n=f.useRef({...rp});return{logCameraInspectionSnapshot:r=>{if(r)try{const o=e.current;if(o.length>=5)return;if(t.current){const a=op(r==null?void 0:r.toDataURL("image/jpeg",a3));a!=null&&(o.push(a),t.current=!1)}else t.current=!0}catch(o){me(o)}},logCameraInspectionFromStream:async r=>{if(!r||n.current.kind)return;let o={...n.current,...ap(r)};n.current=o,o={...o,...await sp(r)},n.current=o},getCameraInspectionData:({includeSmallImages:r})=>({...n.current,streamStability:cp({snapshots:e.current,includeSmallImages:r})})}},s3=b("div").withConfig({displayName:"HintPrompt__Wrapper",componentId:"sc-om4c1v-0"})(["color:",";text-align:center;display:flex;flex:auto;align-items:center;justify-content:space-around;padding-left:",";padding-right:",";height:",";"],e=>e.color?e.color:e.theme.colorFont,S.Spacing[6],S.Spacing[6],S.Spacing[8]);function c3({activeTrigger:e,color:t,localizations:n}){const[r]=z();return i.jsx(s3,{color:t,children:i.jsx("p",{role:"alert",children:e.getPrompt({t:r,localizations:n})})})}const l3=b.button.withConfig({displayName:"PreviewThumbnail__PreviewButton",componentId:"sc-19w4k11-0"})(["position:relative;background:white;display:flex;align-items:center;justify-content:center;height:40px;width:40px;padding:2px;border-radius:",";flex:none;min-height:0;"],dn.rounded),d3=b.div.withConfig({displayName:"PreviewThumbnail__FileCount",componentId:"sc-19w4k11-1"})(["position:absolute;top:-8px;right:-8px;height:16px;width:16px;border-radius:",";background-color:",";color:",";font-size:10px;font-weight:",";"],dn.circle,({theme:e,styles:t})=>{var n,r,o,a;return(a=(o=A((r=(n=t==null?void 0:t["background-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.colorButtonPrimary)!=null?a:e.colorPrimary},({theme:e,styles:t})=>{var n,r,o;return(o=A((r=(n=t==null?void 0:t["text-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.colorFontButtonPrimary},an.medium),u3=b.img.withConfig({displayName:"PreviewThumbnail__Thumbnail",componentId:"sc-19w4k11-2"})(["height:100%;width:100%;object-fit:cover;image-orientation:from-image;border-radius:",";"],dn.rounded),m3=b(pe).withConfig({displayName:"PreviewThumbnail__StyledThemedSvg",componentId:"sc-19w4k11-3"})(["display:flex;align-items:center;justify-content:center;"]);function h3(e){var t;return(t=e==null?void 0:e.includes("image"))!=null?t:!1}const p3=({files:e=[],onClick:t})=>{const n=Zf();if(e.length===0)return null;const r=Wt(e);return i.jsxs(l3,{onClick:t,id:"preview-thumbnail__button","data-test":"preview-thumbnail__button",children:[i.jsx(d3,{styles:n==null?void 0:n.primary,children:e.length}),r!=null&&h3(r["file-type"])?i.jsx(u3,{src:r.url,"data-test":"preview-thumbnail__image"}):i.jsx(m3,{"data-test":"preview-thumbnail__icon-file",children:i.jsx(Ps,{})})]})},f3=b("div").withConfig({displayName:"BaseScanner__VideoWrapper",componentId:"sc-17olqux-0"})(["background:",";overflow:hidden;position:relative;width:100%;&::after{content:'';display:block;padding-bottom:75%;}video{position:absolute;top:50%;transform-origin:top;transform:scaleX(",") scaleY(",") translateY(-50%);}"],Le.black,e=>(e.mirrored?-1:1)*(e.zoomFactor||1),e=>e.zoomFactor||1),g3=b.button.withConfig({displayName:"BaseScanner__TorchButton",componentId:"sc-17olqux-1"})(["background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;height:40px;width:40px;svg{height:100%;width:100%;}",""],({active:e})=>e&&$(["svg path{fill:white;}"])),b3=b("div").withConfig({displayName:"BaseScanner__HintWrapper",componentId:"sc-17olqux-2"})(["background-color:",";margin-bottom:","px;padding:","px ","px;display:flex;align-items:center;"," ",""],Le.black,L.base*2,L.base,L.base*4,({hasTorch:e})=>e&&`padding-right: ${L.base}px;`,({hasCaptures:e})=>e&&`padding-left: ${L.base}px;`);function Xs(e){var F,H,q;const t=Zf(),n=f.useRef(void 0),r=f.useRef(void 0),o=f.useRef(),a=f.useRef();f.useEffect(()=>{const[W,X]=fi();return a.current=W,e.disableCaptureClient||(g.current=new bl({canvasBuffer:a.current})),X},[]);const{logCameraInspectionFromStream:s,logCameraInspectionSnapshot:c,getCameraInspectionData:l}=Nd(),u=f.useRef(new kd(e.triggerConfigs.map(W=>new zn(W)))),[d,m]=f.useState(u.current.getTriggered()),[h,p]=f.useState(!1),g=f.useRef(null),C=f.useRef(),[I,{toggle:v}]=rt(),[x,R]=f.useState(!1),[_,T]=f.useState(!1),[E,V]=f.useState(e.delayUntilManualCaptureMs===0||_n()),D=(F=e.renderButton)!=null?F:W=>i.jsx(ge,{...W,buttonType:Z.Primary,styles:t==null?void 0:t[Z.Primary]});f.useEffect(()=>{let W;return e.delayUntilManualCaptureMs>0&&(W=window.setTimeout(()=>V(!0),e.delayUntilManualCaptureMs)),()=>{clearTimeout(W)}},[]);const O=()=>{var W,X,oe;if(((X=(W=o.current)==null?void 0:W.video)==null?void 0:X.videoWidth)>0)try{ao({source:o.current.video,precreatedCanvas:a.current,zoomFactor:e.zoomFactor}),(oe=g.current)==null||oe.capture()}catch(se){se.name!=="NS_ERROR_NOT_AVAILABLE"&&e.handleFailed(se,"capture")}r.current!=null&&(r.current=window.setTimeout(O,Is))},U=async(W,X)=>{var oe,se;o.current.video&&(ao({source:o.current.video,precreatedCanvas:a.current,zoomFactor:e.zoomFactor}),(oe=g.current)==null||oe.capture(),X||(X=await e.paramsFromVideoFrame(o.current.video,a.current,g.current,u.current)),await e.handleCapture({imageSrcs:(se=g.current)==null?void 0:se.leastBlurryImages(),captureMethod:W,params:X,cameraInspectionData:l({includeSmallImages:!1})}))},M=async()=>{var X,oe;const W=new Date().getTime();if(((oe=(X=o.current)==null?void 0:X.video)==null?void 0:oe.videoWidth)>0){const se=await e.paramsFromVideoFrame(o.current.video,a.current,g.current,u.current);if(c(a.current),u.current.runTick(se),m(u.current.getTriggered()),e.shouldSubmit(se,u.current)){U(bt.Auto,se);return}}if(n.current!=null){const se=Math.max(0,e.detectInterval-(new Date().getTime()-W));n.current=window.setTimeout(M,se)}};f.useEffect(()=>(n.current=window.setTimeout(M,e.detectInterval),e.disableCaptureClient||(r.current=window.setTimeout(O,Is)),()=>{clearTimeout(n.current),n.current=null,clearTimeout(r.current),r.current=null,Dn.dispose()}),[]),f.useEffect(()=>{var W;try{if(((W=C.current)==null?void 0:W.readyState)==="live"&&x){const X={torch:I};_&&(X.focusMode="continuous"),C.current.applyConstraints({advanced:[X]})}}catch(X){$e("Failed to enable torch","warning",{error:X})}},[I]);const Y=W=>{W&&(o.current=W,o.current.video.defaultMuted=!0,o.current.video.muted=!0,o.current.video.addEventListener("loadedmetadata",async()=>{const X=o.current.stream;if(X&&typeof ImageCapture<"u"){const oe=X.getVideoTracks()[0];if(oe==null){e.handleFailed("Video track is null","load");return}if(oe.readyState!=="live")return;try{if(await new ImageCapture(oe).getPhotoCapabilities(),oe.readyState!=="live")return;const se=oe.getCapabilities();oe.applyConstraints.toString().includes("function")&&(se.focusMode!=null&&oe.applyConstraints({advanced:[{focusMode:"continuous"}]}),C.current=oe,R(se.torch!=null),T(se.focusMode!=null))}catch(se){se.name!=="OperationError"&&me(se,"warning")}}}),o.current.video.addEventListener("canplay",async()=>{if(o.current.video&&(p(!0),o.current.video.paused))try{await o.current.video.play()}catch(X){e.handleFailed(X,"load")}}))};return i.jsxs("div",{"data-test":"scanner","data-scanner-type":e.scannerType,children:[i.jsxs(f3,{mirrored:e.videoConstraints.facingMode==="user",zoomFactor:e.zoomFactor,children:[i.jsx(oa,{audio:!1,width:"100%",height:"initial",ref:Y,"data-test":"base-scanner__verify",videoConstraints:e.videoConstraints,onUserMedia:s,onUserMediaError:W=>e.handleFailed(W,"load")}),e.overlay]}),i.jsxs(b3,{hasCaptures:((H=e.captures)==null?void 0:H.length)>0,hasTorch:x,children:[i.jsx(p3,{files:e.captures}),i.jsx(c3,{activeTrigger:(q=e.triggerOverride)!=null?q:d,color:Le.white}),x&&i.jsx(g3,{id:"scanner__button--torch",onClick:v,active:I,title:I?"Flash ON":"Flash OFF",children:i.jsx(wp,{})})]}),D({disabled:!h||!E,id:"scanner__button--capture","data-test":"scanner__button--capture",onClick:()=>U(bt.Manual,null),children:e.labelTakePhoto}),i.jsx(Je,{height:1})]})}function ec(e){if(e==null||e.rmsContrast===0&&e.luminosity===0)return!1;const t=e.rmsContrast<.2||e.lowHighContrast<.2,n=e.rmsContrast>.3&&e.lowHighContrast>.5;return e.luminosity<.34&&!n||e.luminosity<.45&&t}const C3=100,x3=[{type:0,shouldShow:v3,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("document-scanner.hint.detected-low-light")},{type:1,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("document-scanner.hint.default")}];function v3(e){return ec(e.luminosityData)}function Cl({delayUntilManualCaptureMs:e=0,handleCapture:t,handleError:n,labelTakePhoto:r,videoConstraints:o,captures:a,renderButton:s}){const c=en("inquiry:enable-low-light-detection-web"),l=async(d,m,h,p)=>{ao({source:d,precreatedCanvas:m});try{return{luminosityData:c?yr(m):null}}catch(g){n(g,"capture")}return{luminosityData:null}},u=(d,m)=>!1;return i.jsx(Xs,{delayUntilManualCaptureMs:e,handleCapture:({imageSrcs:d,captureMethod:m})=>t(d,m),handleFailed:n,detectInterval:C3,labelTakePhoto:r,videoConstraints:o,triggerConfigs:x3,paramsFromVideoFrame:l,shouldSubmit:u,captures:a,scannerType:"document",renderButton:s,zoomFactor:1})}function I3({documentFiles:e,documentFileLimit:t,handleCapture:n,handleError:r,handleFinish:o,localizations:a,videoConstraints:s}){const{buttons:c}=qr(),l=e.length>=t;return e.length===0?i.jsxs(i.Fragment,{children:[i.jsx(ri,{tabIndex:-1,children:a.prompt}),i.jsx(Cl,{handleCapture:n,handleError:r,labelTakePhoto:a["btn-take-photo"],videoConstraints:s,captures:[]})]}):i.jsxs(i.Fragment,{children:[i.jsx(ri,{tabIndex:-1,children:a.prompt}),i.jsx(Cl,{handleCapture:n,handleError:r,labelTakePhoto:a["btn-additional-photo"],videoConstraints:s,captures:e.map(u=>u.attributes.originals[0]),renderButton:u=>i.jsxs(i.Fragment,{children:[l?null:i.jsxs(i.Fragment,{children:[i.jsx(ge,{...u,buttonType:Z.Primary,styles:c==null?void 0:c[Z.Primary]}),c==null&&i.jsx(Je,{height:1})]}),i.jsx(ge,{id:"documents-capture__submit",buttonType:Z.Secondary,styles:c==null?void 0:c[Z.Secondary],onClick:o,children:a["btn-finish"]})]})})]})}var Un=(e=>(e.SetDocument="document/SET_DOCUMENT",e.SetDocumentFiles="document_files/SET_DOCUMENT_FILES",e.ClearDocument="document/CLEAR_DOCUMENT",e.SetVideoConstraints="document/SET_VIDEO_CONSTRAINTS",e.UploadFile="document/UPLOAD_FILE",e.SetUploadProgress="document/SET_UPLOAD_PROGRESS",e.AddUploadedFile="document/ADD_UPLOADED_FILE",e.ClearUploadedFiles="document/CLEAR_UPLOADED_FILES",e.ClearUpload="document/CLEAR_UPLOAD",e.ClearAllUploads="document/CLEAR_ALL_UPLOADS",e.AddPendingDeletion="document/ADD_PENDING_DELETION",e.ClearPendingDeletion="document/CLEAR_PENDING_DELETION",e))(Un||{});function og(e){return{payload:{document:e},type:"document/SET_DOCUMENT"}}function ag(){return{payload:{},type:"document/CLEAR_DOCUMENT"}}function sg(e){return{payload:{documentFiles:e},type:"document_files/SET_DOCUMENT_FILES"}}function cg(e){return{payload:{videoConstraints:e},type:"document/SET_VIDEO_CONSTRAINTS"}}function tc(e){return{payload:{file:e},type:"document/UPLOAD_FILE"}}function ws(e,t){return{payload:{file:e,progress:t},type:"document/SET_UPLOAD_PROGRESS"}}function S3(){return{payload:{},type:"document/CLEAR_UPLOADED_FILES"}}function w3(e){return{payload:{uploadedFile:e},type:"document/ADD_UPLOADED_FILE"}}function nc(e){return{payload:{file:e},type:"document/CLEAR_UPLOAD"}}function y3(e){return{payload:{fileId:e},type:"document/ADD_PENDING_DELETION"}}function _3(e){return{payload:{fileId:e},type:"document/CLEAR_PENDING_DELETION"}}const R3=e=>{const{inquiry:t,config:n,document:r,documentFiles:o,videoConstraints:a,styles:s,featureFlags:c}=e,l=Ot(),[u]=z();f.useEffect(()=>{if(t==null||r==null){j.redirectToStart();return}},[]),f.useEffect(()=>{try{c!=null&&c["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("documents.capture-page.entered",{})}catch{}},[]);const d=async(p,g)=>{var I;e.saveCaptureMethod(g),p=p.filter(v=>v!=null);const C=p[p.length-1];ee.logAmplitude("document.camera.capture",{imageSize:C.length});try{e.uploadFile({filename:`${new Date().toISOString()}_0_${(I=n==null?void 0:n.kind)!=null?I:"generic"}.jpg`,fileType:"image/jpeg",dataUrl:C}),l.replace(ha(Dt.Check))}catch(v){m(v,"capture")}},m=(p,g)=>{g==="capture"&&e.showMessage(u("documents.capture.failed-screenshot")),p instanceof Error?(me(p,"error",{state:g},{jira:"PER-10182"}),g==="load"&&(j.onEvent(Pe.LoadCameraFailed,{error:p.name,message:p.message}),l.push("/inquiry/support/camera"))):($e(p,"error",{state:g},{jira:"PER-10182"}),g==="load"&&(j.onEvent(Pe.LoadCameraFailed,{message:p}),l.push("/inquiry/support/camera")))},h=()=>{l.replace(ha(Dt.Prompt))};return t==null||r==null||n==null?null:i.jsx(Js,{value:s,children:i.jsx(I3,{documentFiles:o,documentFileLimit:n["document-file-limit"],handleCapture:d,handleError:m,handleFinish:h,localizations:n.localizations["capture-page"],videoConstraints:a})})};function A3(e){return{inquiry:e.inquiry.inquiry,documentFiles:e.document.documentFiles,config:ka(e),document:$s(e),videoConstraints:e.document.videoConstraints,styles:Na(e.inquiry),featureFlags:e.inquiry.featureFlags}}const T3={saveCaptureMethod:mr,showMessage:ae,uploadFile:tc},E3=Te(A3,T3),k3=On()(E3(R3)),N3=({children:e,color:t,...n})=>i.jsx("span",{...n,children:e}),jd=b(N3).withConfig({displayName:"Text__Span",componentId:"sc-1yv5kz8-0"})(["color:",";",";"],({color:e="primary",theme:t})=>e==null?"inherit":t.color.text[e],px);b(jd).attrs(()=>({as:"h1"})).withConfig({displayName:"Text__Display",componentId:"sc-1yv5kz8-1"})(["",""],({size:e})=>fx[e]);b(jd).withConfig({displayName:"Text__HeadingComponent",componentId:"sc-1yv5kz8-2"})(["",""],({size:e})=>gx[e]);const j3=b(jd).attrs(({as:e="p"})=>({as:e})).withConfig({displayName:"Text__Paragraph",componentId:"sc-1yv5kz8-3"})([""," color:",";"],({size:e="md",weight:t="normal"})=>{if(t!=="normal"){if(["md","lg"].includes(e))return Di[e+t.charAt(0).toUpperCase()+t.slice(1)];console.error(`Weight '${t}' does not exist for size '${e}'.`)}return Di[e]},({color:e="secondary",theme:t})=>t.color.text[e]),P3=b(j3).attrs({as:"label"}).withConfig({displayName:"Text__Label",componentId:"sc-1yv5kz8-4"})(["color:",";"],({color:e="primary",theme:t})=>t.color.text[e]);function Pd(e){const t=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];let n=0;for(;e>=1e3;)++n,e=e/1e3;return e.toFixed(e<10&&n>0?1:0)+" "+t[n]}var Jo=(e=>(e.Initiated="initiated",e.Submitted="submitted",e.Processed="processed",e.Errored="errored",e))(Jo||{});const D3=1e3,O3=1e3,Ec=3,lg=999999,dg=3;function L3(e){return async t=>{const n={attributes:{...e},type:y.VerificationEmailAddress},r=(await ne.postResourceCreate(n)).data;t(gi(r)),await ne.postResourceAction(r,"email-confirmation-code"),t(jn("/verify/email-address/confirm"))}}function F3(e,t,n){return async r=>{const o={attributes:{...t},id:e.id,type:e.type},a=(await ne.postResourceAction(o,"submit")).data;r(gi(a)),await r(ic(a,n))}}function M3(e,t,n){return async r=>{const o={attributes:{"country-code":e,...n},type:y.VerificationPhoneNumber},a=(await ne.postResourceCreate(o,{meta:{"debug-forced-status":t}})).data;r(gi(a)),await ne.postResourceAction(a,"sms-confirmation-code"),r(jn("/verify/phone-number/confirm"))}}function V3(e,t,n,r){return async o=>{const a={attributes:{...n},id:e.id,type:e.type};e=(await ne.postResourceAction(a,"confirm")).data,o(gi(e)),e.attributes.status===kt.Confirmed&&t!==id.None?o(jn("/verify/phone-number/info")):await o(ic(e,r))}}function B3(e,t,n){return async r=>{const o={attributes:{...t},id:e.id,type:e.type};e=(await ne.postResourceAction(o,"submit")).data,r(gi(e)),await r(ic(e,n))}}function U3(e,t,n,r,o){return async a=>{const s={id:e.id,attributes:n,type:y.Inquiry};Pt((await ne.updateResource(s)).data);const c=(await ne.postResourceCreate({type:y.VerificationDatabase},{meta:{"debug-forced-status":t}})).data;a(gi(c));const l=(await ne.postResourceAction(c,"submit")).data;a(gi(c)),o["verify:database-failed-screen"]?await a(hg(l,r,"/verify/database/pending","/verify/database/failed")):await a(ic(l,r))}}function ug(){return e=>{e(ad())}}function Kr(e,t,n,r){const o=mi(e,t);if(o)return r?{"capture-method":o.captureMethod,data:cd({filename:n,fileType:"image/jpeg",dataUrl:o.dataUrl})}:{"capture-method":o.captureMethod,data:{filename:n,data:nf(o.dataUrl)}}}function mg(e,t,n,r,o){return async a=>{let s;const c={"center-photo":Kr(t,fe.Center,"center_photo.jpeg",!0),"left-photo":Kr(t,fe.Left,"left_photo.jpeg",!0),"right-photo":Kr(t,fe.Right,"right_photo.jpeg",!0),"camera-properties":n};try{s=(await ne.postResourceCreate({attributes:c,type:y.VerificationSelfie},{meta:{"debug-forced-status":o},contentType:"multipart/form-data"})).data}catch{s=(await ne.postResourceCreate({attributes:{"center-photo":Kr(t,fe.Center,"center_photo.jpeg",!1),"left-photo":Kr(t,fe.Left,"left_photo.jpeg",!1),"right-photo":Kr(t,fe.Right,"right_photo.jpeg",!1),"camera-properties":n},type:y.VerificationSelfie},{meta:{"debug-forced-status":o}})).data}try{[fe.Center,fe.Left,fe.Right].forEach(l=>{const u=mi(t,l);if(u==null)return;const{dataUrl:d,captureMethod:m}=u;d.length<Lr&&$e("Selfie verification contains potentially blank image","warning",{},{captureMethod:m,side:l})})}catch(l){me(l,"warning")}try{s=(await ne.postResourceAction(s,"submit")).data}catch(l){throw $e("[PER-8408] Selfie created but failed to submit","error",{id:s.id,error:l}),l}a(gi(s)),await a(Po({verification:s,history:r,handleFailed:l=>{const u=l.included.find(d=>d.id===l.data.relationships.inquiry.data.id);a(Pt(u)),u.attributes["next-step"].type===y.VerificationSelfie?a(jn("/verify/selfie/failed")):a(zt(u))}}))}}function H3(e,t,n,r,o,a,s,c){return async l=>{var I,v,x,R;let u=xu(t,n,r,o),d="multipart/form-data";l(pi(0));const m=_=>{var T;l(pi((T=_.progress)!=null?T:0))},h=new Date().getTime();let p,g;for(g=0;g<Ec;g++)try{p=await ne.postResourceCreate(u,{meta:{"debug-forced-status":s},contentType:d,onUploadProgress:m});break}catch(_){if(_ instanceof ht)switch(_.status){case 502:l(ae(c("errors.network-upload")));return;case 413:l(ae(c("errors.image-upload-too-large")));return;case 422:if(g===0)u=xu(t,n,r,o,!1),d="application/json";else{const T=(I=_.errors)==null?void 0:I[0].code;switch(T){case An.DOCUMENT_GOVERNMENT_ID_DIMENSION_SIZE_ERROR:{const V=((v=_.errors)==null?void 0:v[0]).details.min_dimension_size;Nn(a),a.push(Oi(0,We.Prompt)),l(ae(c("government-id.prompt.dimension-size-too-small",{minDimensionSize:V})));return}case An.DOCUMENT_GOVERNMENT_ID_TOO_SMALL:case An.DOCUMENT_GOVERNMENT_ID_ALL_BLACK_IMAGE:{Nn(a),a.push(Oi(0,We.Prompt)),l(ae(c("government-id.prompt.failed-black-image")));return}default:{if(T&&/must be under \d+ bytes/.test(T)){const E=T.match(/must be under (\d+) bytes/);if(E){const V=Pd(parseInt(E[1]));l(ae(c("documents.errors.file-size-exceeded",{fileSizeLimit:V})));return}}l(ae(c("government-id.prompt.failed-select-image")));return}}}}else _ instanceof Ct||me(_,"error",{attempt:g});if(g===Ec-1)throw ee.logAmplitude("government-id.submit.failed",{attempts:g,duration:new Date().getTime()-h}),_}try{[B.Front,B.Back,B.BarcodePdf417,B.FrontOrBack,B.PassportSignature].forEach(_=>{var T;(T=n[_])==null||T.forEach(E=>{if(E==null)return;const{dataUrl:V,fileType:D,captureMethod:O,captureFlow:U}=E;V.length<Lr&&$e("Government ID verification contains potentially blank image","warning",{},{captureMethod:O,side:_,fileType:D,captureFlow:U})})})}catch(_){me(_,"warning")}if((p==null?void 0:p.data)==null){me(new Error("No data returned from create verification saga"),"warning",{response:p,governmentIdClass:t,captureMethod:Xr(n).map(_=>{var T;return(T=Wt(_))==null?void 0:T.captureMethod}),captureFlow:Xr(n).map(_=>{var T;return(T=Wt(_))==null?void 0:T.captureFlow}),uploads:{backSizes:(x=n.back)==null?void 0:x.map(_=>{var T;return(T=_.dataUrl)==null?void 0:T.length}),frontSizes:(R=n.front)==null?void 0:R.map(_=>{var T;return(T=_.dataUrl)==null?void 0:T.length})}}),l(ae(c("government-id.prompt.failed-select-image")));return}const C=(await ne.postResourceAction(p.data,"submit",{retryOptions:{retries:Ec,retryCondition:_=>{var T;return((T=_==null?void 0:_.response)==null?void 0:T.status)===409}}})).data;try{ee.logAmplitude("government-id.submit.completed",{duration:new Date().getTime()-h,attempts:g+1,governmentIdClass:t,captureMethod:Xr(n).map(_=>{var T;return(T=Wt(_))==null?void 0:T.captureMethod}),captureFlow:Xr(n).map(_=>{var T;return(T=Wt(_))==null?void 0:T.captureFlow})})}catch{}l(gi(C)),await l(hg(C,a,"/verify/government-id/pending","/verify/government-id/failed"))}}function hg(e,t,n,r){return async o=>{await o(Po({verification:e,history:t,handleFailed:a=>{const s=a.included.find(c=>c.id===a.data.relationships.inquiry.data.id);o(Pt(s)),s.attributes["next-step"].type===e.type?o(jn(r)):o(zt(s))},handleIncomplete:()=>o(jn(n)),attemptsLeft:dg}))}}function ic(e,t){return async n=>{await n(Po({verification:e,history:t,handleFailed:r=>n(ll(r))}))}}function q3({documentId:e,history:t,forcedStatus:n,handleFailed:r,handlePassed:o,handleIncomplete:a,totalAttempts:s=dg}){return async c=>{const l=(await ne.postResourceCreate({attributes:{"document-id":e},type:y.VerificationDocument},{meta:{"debug-forced-status":n},retryOptions:{retryCondition:d=>ji.isNetworkError(d)||ji.isRetryableError(d)}})).data,u=(await ne.postResourceAction(l,"submit")).data;c(gi(u)),await c(Po({verification:u,history:t,attemptsLeft:s,handleFailed:r,handleIncomplete:a,handlePassed:o}))}}function Po({verification:e,history:t,handleFailed:n,handlePassed:r,handleSkipped:o,handleIncomplete:a,attemptsLeft:s=lg}){return c=>new Promise((l,u)=>{const d=()=>{a?(a(),l()):u()},m=C=>{Nn(t),r?r(C):c(ll(C)),l()},h=C=>{Nn(t),n?(n(C),l()):u()},p=C=>{Nn(t),o?o(C):c(ll(C)),l()},g=(C,I,v)=>{I<=0?d():setTimeout(()=>{c($3(C,I-1,v+O3,g,u,m,h,p))},v)};g(e,s,D3)})}function $3(e,t,n,r,o,a,s,c){return async l=>{try{const u=await ne.getResource(Zt(e.type),e.id),d=u.data,m=e.attributes&&e.attributes.status;switch(d.attributes.status!==m&&l(gi(d)),d.attributes.status){case kt.Initiated:case kt.Confirmed:case kt.Submitted:r(d,t,n);return;case kt.Passed:a(u);return;case kt.RequiresRetry:case kt.Failed:case kt.Canceled:s(u);return;case kt.Skipped:c(u);return;default:ut(d.attributes.status)}}catch(u){u instanceof Ct||u instanceof ht&&u.status===502?r(e,t,n):o(u)}}}const Li=(e,t)=>{switch(t){case Dt.Prompt:return`/verify/documents/${e}/prompt`;case Dt.TakePhoto:return`/verify/documents/${e}/capture`;case Dt.Check:return`/verify/documents/${e}/check`;case Dt.Review:throw new Error("Documents review step is not permitted in Inquiry 2.0.");case Dt.Pending:return`/verify/documents/${e}/pending`;case Dt.Failed:return`/verify/documents/${e}/failed`;default:ut(t)}},Do=["image/jpeg","image/png"],G3=1e3,Xu=3,pg=90,W3=3;function Dd(e,t,n){return r=>{n+1>=t.length?r(zt(e)):(r(Pt(e)),r(jn(Li(n+1,Dt.Prompt))))}}function Y3({stepName:e,documentsToVerify:t,documentNumber:n,history:r,fileToUpload:o,t:a,forcedStatus:s}){return async c=>{const l=t[n],u={type:y.DocumentGeneric,attributes:{kind:l.kind,files:[cd(o)]}};c(ws(o,0));const d=C=>{var I;c(ws(o,(I=C.progress)!=null?I:0))},m=new Date().getTime();let h,p;for(p=0;p<Xu;p++)try{h=(await ne.postResourceCreate(u,{contentType:"multipart/form-data",onUploadProgress:d})).data;break}catch(C){if(C instanceof ht)switch(C.status){case 502:c(ae(a("errors.network-upload")));return;case 413:c(ae(Do.includes(o.fileType)?a("errors.image-upload-too-large"):a("errors.file-upload-too-large")));return;case 422:c(ae(a("documents.prompt.failed-select-image")));return}else C instanceof Ct||me(C,"error",{attempt:p});if(p===Xu-1)throw ee.logAmplitude("document.submit.failed",{duration:new Date().getTime()-m}),C}const g=(await ne.postResourceAction({id:h.id,type:h.type},"submit")).data;ee.logAmplitude("document.submit.completed",{duration:new Date().getTime()-m,attempts:p+1}),c(ca(g,n)),await c(fg({document:g,stepName:e,documentsToVerify:t,documentNumber:n,history:r,forcedStatus:s,attemptsLeft:W3})),c(nc(o))}}function fg({document:e,stepName:t,documentsToVerify:n,documentNumber:r,history:o,forcedStatus:a,attemptsLeft:s=pg}){return c=>c(z3({document:e,documentsToVerify:n,documentNumber:r,history:o,attemptsLeft:s,onSuccess:async l=>{const u=m=>{const h=m.included.find(p=>p.id===m.data.relationships.inquiry.data.id);h.attributes["next-step"].name===t?(c(Pt(h)),c(jn(Li(r,Dt.Failed)))):c(zt(h))},d=m=>{const h=m.included.find(g=>g.id===m.data.relationships.document.data.id),p=m.included.find(g=>g.id===m.data.relationships.inquiry.data.id);c(ca(h,r)),c(Dd(p,n,r))};await c(q3({documentId:l.data.id,history:o,forcedStatus:a,handleFailed:u,handlePassed:d,totalAttempts:lg}))},onIncomplete:()=>{Nn(o),c(jn(Li(r,Dt.Pending)))}}))}function z3({document:e,documentsToVerify:t,documentNumber:n,history:r,onSuccess:o,onIncomplete:a,attemptsLeft:s=pg}){return c=>new Promise((l,u)=>{const d=()=>{a?(a(),l()):u()},m=async g=>{Nn(r),c(ca(g.data,n)),o?await o(g):c(Dd(em(g),t,n)),l()},h=g=>{Nn(r),c(ca(g.data,n)),c(Pt(em(g))),l(),c(jn(Li(n,Dt.Failed)))},p=(g,C)=>{C<=0?d():setTimeout(()=>{K3(g,C-1,p,u,m,h)},G3)};p(e,s)})}async function K3(e,t,n,r,o,a){try{const s=await ne.getResource(w.DocumentGeneric,e.id),c=s.data;switch(c.attributes.status){case Jo.Initiated:case Jo.Submitted:n(c,t);return;case Jo.Processed:o(s);return;case Jo.Errored:a(s);return;default:ut(c.attributes.status)}}catch(s){s instanceof Ct||s instanceof ht&&s.status===502?n(e,t):r(s)}}function em(e){const t=e.data;return e.included.find(r=>r.id===t.relationships.inquiry.data.id)}const tm=3;function Q3({kind:e,fileLimit:t,fieldKey:n}){return async r=>{const o=await ne.postResourceCreate({type:y.Document,attributes:{kind:e,"file-limit":t}},{meta:{"field-key-document":n}}),a=o.data,s=o.included.find(c=>c.id===a.relationships.inquiry.data.id);if(s==null)throw new Error("Document fetch expected an inquiry to be returned, but no inquiry was sent.");_0.unstable_batchedUpdates(()=>{r(Pt(s)),r(og(a)),r(sg([])),r(S3())})}}function gg(e){return async t=>{const{data:n,included:r}=await ne.getResource(w.Document,e);t(og(n));const o=r.filter(a=>a.type===y.DocumentFile);t(sg(o))}}function bg({file:e,captureMethod:t,document:n,t:r}){return async o=>{var l,u,d,m,h,p,g,C,I,v;o(ws(e,0));const a=x=>{var R;o(ws(e,(R=x.progress)!=null?R:0))},s=new Date().getTime();let c;for(c=0;c<tm;c++)try{const x=await ne.postResourceCreate({type:y.DocumentFile,attributes:{"document-id":n.id,"capture-method":t,originals:[ld(e)],name:e.filename}},{contentType:"multipart/form-data",onUploadProgress:a});j.inquiryParams["send-client-side-collected-data-in-events"]&&o(w3({file:e,fileId:x.data.id}));break}catch(x){if(x instanceof ht)switch(x.status){case 502:throw o(ae(r("errors.network-upload"))),new fn({method:"POST"});case 413:throw o(ae(Do.includes(e.fileType)?r("errors.image-upload-too-large"):r("errors.file-upload-too-large"))),new fn({method:"POST"});case 422:if(((l=x.errors)==null?void 0:l[0].code)===An.DOCUMENT_GENERIC_DISABLED_FILE_TYPE_ERROR){const _=((u=x.errors)==null?void 0:u[0]).details,T=cr(_.uploaded_file_type).toUpperCase(),E=_.enabled_file_types.map(V=>cr(V).toUpperCase());o(ae(r("documents.errors.disabled-file-type",{uploadedFileExtension:T,acceptedFileExtensions:E.join(", "),count:E.length})))}else if(((d=x.errors)==null?void 0:d[0].code)===An.DOCUMENT_GENERIC_FILE_SIZE_EXCEEDED_ERROR){const R=(m=x.errors)==null?void 0:m[0],_=Pd(R.details.file_size_limit);o(ae(r("documents.errors.file-size-exceeded",{fileSizeLimit:_})))}else if(((h=x.errors)==null?void 0:h[0].code)===An.DOCUMENT_GENERIC_FILE_LIMIT_EXCEEDED_ERROR)o(ae(r("documents.errors.file-limit-exceeded")));else if(((p=x.errors)==null?void 0:p[0].code)===An.DOCUMENT_GENERIC_PAGE_LIMIT_EXCEEDED_ERROR){const _=((g=x.errors)==null?void 0:g[0]).details.page_limit;o(ae(r("documents.errors.page-limit-exceeded",{pageLimit:_,count:_})))}else((C=x.errors)==null?void 0:C[0].code)===An.DOCUMENT_GENERIC_MALFORMED_PDF_ERROR?o(ae(r("documents.errors.malformed-pdf"))):((I=x.errors)==null?void 0:I[0].code)===An.DOCUMENT_GENERIC_MALFORMED_IMAGE_ERROR||((v=x.errors)==null?void 0:v[0].code)===An.DOCUMENT_GENERIC_MALFORMED_FILE_ERROR?o(ae(r("documents.errors.malformed-file"))):o(ae(r("documents.prompt.failed-select-image")));throw new fn({method:"POST"})}else x instanceof Ct||me(x,"error",{attempt:c});if(c===tm-1)throw ee.logAmplitude("document.submit.failed",{duration:new Date().getTime()-s}),x}}}function Z3(e){return async()=>{await ne.deleteResource(w.DocumentFile,e)}}function pa(e,t,n,r,o){var c,l,u,d,m;if(Od(e,n,r))return B.Front;if((e==null?void 0:e.idclasses)==null&&(o==null?void 0:o["id-configs"])==null)return;if(t==null)return n===0?B.Front:void 0;const s=(c=o==null?void 0:o["id-configs"].find(h=>h.class===t))!=null?c:e==null?void 0:e.idclasses.find(h=>h.class===t);if(s==null){const h=(l=e==null?void 0:e.idclasses)!=null?l:o==null?void 0:o["id-configs"];throw new Error(`No configuration for id class: ${t} out of: ${h==null?void 0:h.map(p=>p.class).join(", ")}`)}return(m=(d=(u=s["capture-page-configs"])==null?void 0:u[n])==null?void 0:d.side)!=null?m:s["requires-sides"][n]}function Ut(e,t){switch(t){case We.CaptureLeadInAnimation:return`/inquiry/government-id/${e}/capture-lead-in-animation`;case We.Prompt:return`/inquiry/government-id/${e}/prompt`;case We.TakePhoto:return`/inquiry/government-id/${e}/capture`;case We.Check:return`/inquiry/government-id/${e}/check`;case We.CheckUpload:return`/inquiry/government-id/${e}/check-upload`;case We.AutoclassificationFailure:return"/inquiry/government-id/autoclassification-failure";case We.AutoclassificationSelect:return"/inquiry/government-id/autoclassification-select";default:ut(t)}}function J3(e,t,n,r){var s;const o=(s=r==null?void 0:r["id-configs"])!=null?s:e==null?void 0:e.idclasses;return o&&o.find(c=>{var l,u;return c.class===t&&((u=(l=c["capture-page-configs"])==null?void 0:l.length)!=null?u:c["requires-sides"].length)>n})?n>=2:n>=1}function Qi(e,t,n={}){const{localizations:r,"localization-overrides":o=[],"selected-country-code":a}=e,{idClass:s=null,side:c=null}=n,l=o.filter(m=>m.page===t&&(m["country-code"]===a||m["country-code"]==null)&&(m["id-class"]===s||m["id-class"]==null)&&(m.side===c||m.side==null)),u=wC(m=>-((m["country-code"]==null?0:100)+(m["id-class"]==null?0:10)+(m.side==null?0:1)),l),d=r==null?void 0:r[t];return Object.fromEntries(Object.keys(d!=null?d:{}).map(m=>{var g;const h=d[m],p=u.find(C=>C.key===m);return[m,(g=p==null?void 0:p.text)!=null?g:h]}))}function xl(e){var n;const t=Object.values(e);return t!=null&&t.length?((n=Wt(t[0]))==null?void 0:n.captureMethod)===bt.Upload:!1}function Od(e,t,n){var r;return((r=e==null?void 0:e["auto-classification-config"])==null?void 0:r["is-enabled"])&&t===0&&!n}function rc(e,t,n,r,o,a,s){var h,p;const c=s&&Od(e,t,n),l=c?void 0:r;let u=e==null?void 0:e["selected-country-code"];!c&&s&&((h=e==null?void 0:e["auto-classification-config"])!=null&&h["is-enabled"])&&(u=o);const d=s&&((p=e==null?void 0:e["auto-classification-config"])!=null&&p["is-enabled"])?a.find(g=>g["country-code"]===o):void 0;return{governmentIdClass:l,selectedCountryCode:u,autoclassificationIdClassesConfigState:d,autoclassificationIdClassesConfig:c?void 0:d}}const Cg=1e6,X3=5e3;class xg{constructor(){this.params=null,this.timeout=null,this.startTime=null,this.subscribers={},this.onStartedRecording=()=>{const t=!!this.startTime;this.startTime=Date.now(),this.notify("start",t)},this.onStoppedRecording=t=>{this.notify("stop",t,this.getElapsedTime()),this.destroy()},this.getElapsedTime=()=>this.startTime?Date.now()-this.startTime:0,this.stopRecording=()=>{var t,n;if(!this.timeout){const r=this.startTime!=null?Date.now()-this.startTime:0,o=(n=(t=this.params)==null?void 0:t.minRecordingTime)!=null?n:X3,a=r<o?o-r:0;this.timeout=setTimeout(()=>{this.stopCapture()},a)}return this},this.clearTimeouts=()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},this.clearSubscribers=()=>{this.subscribers={}},this.notify=(t,...n)=>{Object.values(this.subscribers).flat().filter(o=>o.event===t).forEach(o=>{var a;return(a=o.callback)==null?void 0:a.apply(null,n)})}}subscribe(t){const n=R0(),r=[];return t.onStart&&r.push({event:"start",callback:t.onStart}),t.onRecordingComplete&&r.push({event:"stop",callback:t.onRecordingComplete}),t.onError&&r.push({event:"error",callback:t.onError}),t.onTimeExceeded&&r.push({event:"time-exceeded",callback:t.onTimeExceeded}),this.subscribers[n]=r,n}unsubscribe(t){return t&&delete this.subscribers[t],this}get stream(){var t;return(t=this.params)==null?void 0:t.stream}}const eA=200,tA=12e4,nA=64e3;function iA(){return window.MediaRecorder?[cl.VideoWebm,cl.VideoMp4].find(t=>MediaRecorder.isTypeSupported(t)):null}let rA=class extends xg{constructor(){super(...arguments),this.chunks=[],this.dataAvailableCalled=!1,this.type="upload",this.handleDataAvailable=t=>{var n,r;this.dataAvailableCalled=!0,((n=t.data)==null?void 0:n.size)>0&&(this.chunks.push(t.data),this.getElapsedTime()>((r=this.params.maxRecordingTime)!=null?r:tA)&&this.notify("time-exceeded"))},this.handleComplete=()=>{this.onStoppedRecording({chunks:this.chunks,mimeType:this.mimeType,type:this.type})},this.handleError=t=>{var r;let n;t instanceof Event?n=`Event: ${(r=t.error)==null?void 0:r.name}`:n=JSON.stringify(t),this.notify("error",n)}}init(t){this.params=t;const{stream:n,onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s}=t;if(!this.isSupported()){o==null||o("MediaRecorder error: MediaRecorder is not supported");return}if(!n){o==null||o("MediaRecorder error: stream must be provided");return}if(this.mimeType=iA(),!this.mimeType){o==null||o("MediaRecorder error: mimetype not supported");return}return this.subscribe({onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s})}isRecording(){return!!this.mediaRecorder}isSupported(){return!!window.MediaRecorder}startRecording(){var t;this.createMediaRecorder(),this.mediaRecorder&&this.mediaRecorder.state!=="recording"&&this.mediaRecorder.start((t=this.params.timeSlice)!=null?t:eA)}stopCapture(){this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop()}get stream(){var t;return(t=this.params)==null?void 0:t.stream}destroy(){this.stopCapture(),this.cleanUpMediaRecorder(),this.clearSubscribers(),this.dataAvailableCalled=!1}cleanUpMediaRecorder(){if(!this.isRecording())return this;this.chunks=[],this.mediaRecorder&&(this.mediaRecorder.removeEventListener("start",this.onStartedRecording),this.mediaRecorder.removeEventListener("dataavailable",this.handleDataAvailable),this.mediaRecorder.removeEventListener("error",this.handleError),this.mediaRecorder.removeEventListener("stop",this.handleComplete),this.mediaRecorder=null),this.clearTimeouts()}createMediaRecorder(){var t,n;try{this.mediaRecorder=new MediaRecorder(this.params.stream,{mimeType:this.mimeType,videoBitsPerSecond:(n=(t=this.params)==null?void 0:t.bitRate)!=null?n:Cg,audioBitsPerSecond:nA}),this.mediaRecorder.addEventListener("start",this.onStartedRecording),this.mediaRecorder.addEventListener("dataavailable",this.handleDataAvailable),this.mediaRecorder.addEventListener("error",this.handleError),this.mediaRecorder.addEventListener("stop",this.handleComplete)}catch(r){this.notify("error",r)}}};const oA=new rA,aA="https://webrtc-consumer.withpersona.com",vg="Couldn't gather enough ICE Candidates",sA=1e3,nm=2;let cA=class extends xg{constructor(){super(...arguments),this.hasStarted=!1,this.type="stream",this.setEncodings=()=>{var t,n;(n=(t=this.peerConnection).getSenders)==null||n.call(t).forEach(r=>{var o;if(((o=r.track)==null?void 0:o.kind)==="video"){const a=r.track.getSettings(),s=r.getParameters();s.encodings.forEach(c=>{var l,u;c.maxBitrate=(u=(l=this.params)==null?void 0:l.bitRate)!=null?u:Cg,a.width&&a.height&&(a.width>1024||a.height>720)&&(c.scaleResolutionDownBy=2)}),r.setParameters(s)}})},this.handleMessage=t=>{switch(t.message_type){case"server_connected":this.onStartedRecording();break;case"uploaded_assets":{const n=t.object_id;this.handleComplete(n),this.closePeerConnection();break}case"timed_out":this.handleTimeExceeded();break}},this.sendMessage=t=>{var n,r;try{this.dataChannel.send(JSON.stringify({message:t}))}catch(o){me(o,"warning",{dataChannelReadyState:(n=this.dataChannel)==null?void 0:n.readyState}),((r=this.dataChannel)==null?void 0:r.readyState)==="open"&&this.handleError(o)}},this.closePeerConnection=()=>{var t,n,r,o;if(((t=this.peerConnection)==null?void 0:t.connectionState)!=="closed"){(n=this.dataChannel)==null||n.close(),(r=this.peerConnection)!=null&&r.getTransceivers&&this.peerConnection.getTransceivers().forEach(a=>{try{a.stop()}catch{}});try{(o=this.peerConnection)==null||o.close()}catch{}}},this.handleComplete=t=>{this.notify("stop",{objectId:t,type:this.type})},this.handleError=t=>{var n;((n=He.currentClient)==null?void 0:n.type)===this.type&&this.notify("error",t)},this.handleTimeExceeded=()=>{this.notify("time-exceeded")},this.sendStatsToSentry=async t=>{var n;(n=t.getStats)==null||n.call(t).then(r=>{const o=[],a=[],s=[],c=[],l=[],u=[],d=[],m=[],h=[];let p=[];try{r.forEach(g=>{switch(g.type){case"media-source":{o.push(`${g.id}-${g.kind}`);break}case"transport":{p=[g.dtlsState,g.iceState,g.iceRole,g.packetsSent,g.packetsRecieved];break}case"candidate-pair":{const C=g.id;s.push(`${C}-${g.bytesSent}`),c.push(`${C}-${g.bytesReceived}`),l.push(`${C}-${g.state}`),u.push(`${C}-cp-${g.currentRoundTripTime}`);break}case"outbound-rtp":{d.push([g.id,g.framesEncoded,g.nackCount,g.firCount,g.averageRtcpInterval,g.totalPacketSendDelay].join("-"));break}case"remote-inbound-rtp":{m.push([g.localId,g.roundTripTime,g.totalRoundTripTime,g.fractionLost].join("-"));break}case"remote-outbound-rtp":{h.push([g.localId,g.roundTripTime,g.totalRoundTripTime].join("-"));break}case"codec":{a.push(g.mimeType);break}default:}})}catch{}me(new Error("Webrtc: stats collected on connection failed"),"info",{kinds:o.join(","),transport:p.join(","),bytesSent:s.join(","),bytesReceived:c.join(","),candidatePairState:l.join(","),roundTripTimes:u.join(","),mimeTypes:a.join(","),outboundRtp:d.join(","),remoteInboundRtp:m.join(","),remoteOutboundRtp:h.join(",")})}).catch(r=>{})}}init(t){this.params=t;const{stream:n,onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s}=t;if(!this.isSupported()){o==null||o("MediaRecorder error: MediaRecorder is not supported");return}if(!n){o==null||o("MediaRecorder error: stream must be provided");return}if(!t.jwt){o==null||o("MediaRecorder error: jwt must be provided");return}return this.subscribe({onStart:r,onError:o,onRecordingComplete:a,onTimeExceeded:s})}isConnected(){var t,n;return((t=this.peerConnection)==null?void 0:t.connectionState)==="connected"||((n=this.peerConnection)==null?void 0:n.iceConnectionState)==="connected"}get state(){var t,n;return((t=this.peerConnection)==null?void 0:t.connectionState)||((n=this.peerConnection)==null?void 0:n.iceConnectionState)}isSupported(){return!!window.RTCPeerConnection}isRecording(){return this.isConnected()}startRecording(){if(!this.hasStarted)return this.hasStarted=!0,this.getServerConfig(this.params.jwt).then(t=>this.createPeerConnection(t,this.params.jwt)).catch(t=>this.handleError(t)),this}stopCapture(){return this.isConnected()&&this.dataChannel&&this.sendMessage({message_type:"stop_recording"}),this}destroy(){this.closePeerConnection(),this.clearTimeouts(),this.clearSubscribers(),this.hasStarted=!1}getBaseUrl(t){const n=hs(t);return!n||(n==null?void 0:n.aud)==="persona"?aA:n.aud}getServerConfig(t){return ci.get(`${this.getBaseUrl(t)}/server-config?jwt=${t}`).then(n=>n.data)}createPeerConnection(t,n){const r={iceTransportPolicy:"relay",iceServers:[{urls:[t.server_url],username:t.username,credential:t.credential}]};return this.peerConnection=new RTCPeerConnection(r),this.peerConnection.createDataChannel("clientChannel",{ordered:!0}),this.params.stream.getTracks().forEach(o=>{if(this.peerConnection.addTrack(o,this.params.stream),o.kind==="video"&&RTCRtpSender.getCapabilities){const{codecs:a}=RTCRtpSender.getCapabilities("video"),s=a.filter(c=>c.mimeType.includes("video/VP"));if(s.length&&this.peerConnection.getTransceivers){const c=this.peerConnection.getTransceivers().find(l=>l.sender&&l.sender.track===o);c&&c.setCodecPreferences&&c.setCodecPreferences(s)}}}),this.peerConnection.onconnectionstatechange=()=>{switch(this.peerConnection.connectionState){case"new":case"disconnected":case"closed":break;case"connected":this.setEncodings();break;case"failed":this.handleError(new Error("Connection failed")),this.sendStatsToSentry(this.peerConnection);break}},this.peerConnection.ondatachannel=o=>{this.dataChannel=o.channel,this.dataChannel.onmessage=a=>{try{const s=JSON.parse(a.data);this.handleMessage(s.message)}catch(s){this.handleError(s)}},this.dataChannel.addEventListener("open",()=>{this.sendMessage({message_type:"client_connected"})})},this.peerConnection.createOffer({offerToReceiveVideo:!1,offerToReceiveAudio:!1}).then(o=>this.peerConnection.setLocalDescription(o)).then(()=>new Promise((o,a)=>{if(this.peerConnection.iceGatheringState==="complete")o();else{let s=0;const c=bp(250,()=>{s>=nm&&(h(),o())}),l=setTimeout(()=>{s>=nm?(h(),o()):(h(),a(new Error(vg)))},sA),u=()=>{this.peerConnection.iceGatheringState==="complete"&&(h(),o())},d=p=>{$e("WebrtcMediaRecorderClient: ICECandidateError","info",{errorCode:p==null?void 0:p.errorCode,errorText:p==null?void 0:p.errorText,url:p==null?void 0:p.url,host:p==null?void 0:p.hostCandidate})},m=()=>{s++,c()},h=()=>{c.cancel(),clearTimeout(l),this.peerConnection.removeEventListener("icegatheringstatechange",u),this.peerConnection.removeEventListener("icecandidateerror",d),this.peerConnection.removeEventListener("icecandidate",m)};this.peerConnection.addEventListener("icegatheringstatechange",u),this.peerConnection.addEventListener("icecandidateerror",d),this.peerConnection.addEventListener("icecandidate",m)}})).then(()=>{const o=this.peerConnection.localDescription,a=this.params.stream.getVideoTracks()[0].getSettings();return ci.post(`${this.getBaseUrl(n)}/connect`,{sdp:o.sdp,type:o.type,width:a.width,height:a.height,jwt:this.params.jwt})}).then(({data:{answer:o}})=>this.peerConnection.setRemoteDescription(o))}};const lA=new cA,dA=4,im=["stream","upload"];class uA{constructor(){this.attempts=0,this.current=void 0,this.lastSuccessfulClient=void 0,this.maxAttempts=dA}getNewClient(t){let n;if(t||(t=im),this.videoAttempts>0){const r=this.getClientFromAttempts(this.videoAttempts-1,t);this.destroyClient(r,!0)}return this.lastSuccessfulClient?n=this.lastSuccessfulClient:n=this.getClientFromAttempts(this.videoAttempts,t),this.current=n,this.lastSuccessfulClient=void 0,n}get currentClient(){return this.current}get videoAttempts(){return this.attempts}decrementAttempts(){this.attempts--}destroy(t,n=!1){var r;t&&ee.logAmplitude(`${t}.video.destroy-client`,{type:(r=this.current)==null?void 0:r.type}),this.destroyClient(this.current,n),this.current=void 0}recordVideoAttempt(){this.attempts++}markClientSuccess(){this.lastSuccessfulClient=this.currentClient,this.decrementAttempts()}shouldInitializeVideo(t){return!!(t!=null&&t.includes("video"))&&this.videoAttempts<this.maxAttempts}videoCanBeReattempted(){return this.videoAttempts<this.maxAttempts}shouldReinitializeWithUpload(t,n){var r;return((r=this.currentClient)==null?void 0:r.type)==="stream"&&t instanceof Error&&(t==null?void 0:t.message)===vg&&(n||im).includes("upload")&&this.videoCanBeReattempted()}getClientFromAttempts(t,n){return n[t%n.length]==="stream"?lA:oA}destroyClient(t,n=!1){n&&(t!=null&&t.stream)&&rg(t.stream),t==null||t.destroy()}}const He=new uA;function $i(e){return e?(e==null?void 0:e["audio-enabled"])&&(e==null?void 0:e["enabled-capture-file-types"].includes("video"))&&j.canRequestMicrophone:!1}function Ig(e,t){if(e==="stream"&&t["inquiry:lower-bitrate-video-stream"])return 5e5}function Sg(e,t,n){var r,o,a;if(!(!e||e.indexOf("video")<0)){if((t==null?void 0:t.type)==="stream"&&(t==null?void 0:t.objectId)!=null){ee.logAmplitude(`${n}.video.submit-success`,{type:t==null?void 0:t.type});return}if((t==null?void 0:t.type)==="upload"&&(t==null?void 0:t.chunks)!=null){ee.logAmplitude(`${n}.video.submit-success`,{type:t==null?void 0:t.type,chunks:(r=t==null?void 0:t.chunks)==null?void 0:r.length,mimeType:t==null?void 0:t.mimeType});return}ee.logAmplitude(`${n}.video.submit-failed`,{attempts:He.videoAttempts,clientType:(o=He.currentClient)==null?void 0:o.type,isDataAvailableCalled:((a=He.currentClient)==null?void 0:a.type)==="upload"?He.currentClient.dataAvailableCalled:void 0})}}function ia(e,t){if(e==null)throw new Error("nullthrows: unexpected null or undefined");return e}async function rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:r=!0}){const o=t["selfie-type"],{capturedVideoData:a}=n;let{capturedSelfies:s}=n;if(o===un.ProfileAndCenter&&(s=[mi(s,fe.Center),mi(s,fe.Left),mi(s,fe.Right)].filter(Boolean),s.length<3)){const u=n.capturedSelfies;$e("Selfie ProfileAndCenter but client captured less than 3 poses","warning",{capturedSelfiesMetadata:u==null?void 0:u.map(d=>({capturedAt:d==null?void 0:d.capturedAt,captureMethod:d==null?void 0:d.captureMethod,pose:d==null?void 0:d.pose})),capturedVideoDataType:a==null?void 0:a.type},{jira:"PER-28421"})}let c=s.map(u=>{const d=o===un.OnlyCenter&&u.pose===fe.Center?"photo":`${u.pose}_photo`;return{name:d,type:"image","capture-method":u.captureMethod,"captured-at":u.capturedAt,frames:Ar([{filename:`${d}.jpeg`,fileType:"image/jpeg",dataUrl:u.dataUrl}],r)}});(a==null?void 0:a.type)==="stream"?c=c.concat([{name:"video",type:"video","capture-method":bt.Auto,frames:[],"object-id":a.objectId}]):(a==null?void 0:a.type)==="upload"&&(c=c.concat([{name:"video",type:"video","capture-method":bt.Auto,frames:[rf(a.chunks,`video.${cr(a.mimeType)}`,a.mimeType)]}]));const l={type:o,files:c,"camera-properties":n.cameraInspectionData};return n.captureStartedAt&&(l["capture-started-at"]=n.captureStartedAt),{id:e.id,type:e.type,attributes:{fields:{[t["field-key-selfie"]]:l},"flow-type":j.flowType}}}function wg({inquiry:e,config:t,capturedSelfiesSubmitData:n,debugForcedStatus:r,history:o,t:a}){return async s=>{var C,I,v,x,R,_;let c=await rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:!0}),l="multipart/form-data";gv(n.capturedSelfies)||Sg(t==null?void 0:t["enabled-capture-file-types"],n.capturedVideoData,"selfie"),s(pi(0));const u=T=>{var E;s(pi((E=T.progress)!=null?E:0))},d=new Date().getTime();s(yn());let m,h;for(h=0;h<Fi;h++)try{m=await ne.postResourceAction(c,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":r}},contentType:l,onUploadProgress:u}),j.inquiryParams["send-client-side-collected-data-in-events"]&&s(Ta({name:e.attributes["next-step"].name,type:Ae.Selfie,data:n.capturedSelfies}));break}catch(T){if(T instanceof ht){let E=!1;switch(T.status){case 502:s(ae(a("errors.network-upload")));break;case 409:if(((C=T.errors)==null?void 0:C[0].code)==="inconsistent_transition_error"){const{data:V}=await ne.getResource(w.Inquiry,e.id);s(Rt(V))}else((I=T.errors)==null?void 0:I[0].code)==="pending_transition_error"?s(ae(a("errors.network"))):s(ae(a("errors.inquiry-conflict")));break;case 413:s(ae(a("errors.image-upload-too-large")));break;case 422:if(h===0)c=await rm({inquiry:e,config:t,capturedSelfiesSubmitData:n,multipart:!1}),l="application/json";else{s(ae(a("government-id.prompt.failed-select-image")));break}default:E=!0}if(E===!1)throw s(ct()),new fn({method:"POST"})}else T instanceof Ct||me(T,"error",{attempt:h});if(h===Fi-1)throw s(ct()),ee.logAmplitude("selfie.submit.failed",{attempts:h,duration:new Date().getTime()-d}),T}try{[fe.Center,fe.Left,fe.Right].forEach(T=>{var O,U;const E=mi(n.capturedSelfies,T);if(E==null)return;const{dataUrl:V,captureMethod:D}=E;V.length<Lr&&$e("Selfie verification contains potentially blank image","warning",{},{captureMethod:D,side:T,videoEnabled:(n.capturedVideoData!=null).toString(),videoCaptureMethod:(U=(O=n.capturedVideoData)==null?void 0:O.type)!=null?U:""})})}catch(T){me(T,"warning")}if((m==null?void 0:m.data)==null){const T=t["selfie-type"];throw me(new Error("No data returned from create verification saga"),"warning",{response:m,selfieType:T,captureMethod:(v=mi(n.capturedSelfies,fe.Center))==null?void 0:v.captureMethod,uploads:{centerSize:(x=mi(n.capturedSelfies,fe.Center))==null?void 0:x.dataUrl.length,leftSize:(R=mi(n.capturedSelfies,fe.Left))==null?void 0:R.dataUrl.length,rightSize:(_=mi(n.capturedSelfies,fe.Right))==null?void 0:_.dataUrl.length}}),s(ae(a("government-id.prompt.failed-select-image"))),s(ct()),new fn({method:"POST"})}ee.logAmplitude("selfie.submit.completed",{duration:new Date().getTime()-d,attempts:h+1});const{data:p}=m;s(Pt(p)),s(pi(0)),n.capturedVideoData&&He.markClientSuccess(),xi(p)===Xt.BLOCKING?await s(kn(p,{historyToClear:o})):(s(ct()),s(Rt(p)))}}function om({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:u=!0}){var I,v,x,R,_,T;const d=o[B.Front]||o[B.FrontOrBack],m=o[B.Back]||o[B.BarcodePdf417],h=o[B.PassportSignature],p=[{page:B.Front,"capture-method":(I=Wt(d))==null?void 0:I.captureMethod,"capture-flow":(v=Wt(d))==null?void 0:v.captureFlow,frames:Ar(d,u)},{page:B.Back,"capture-method":(x=Wt(m))==null?void 0:x.captureMethod,"capture-flow":(R=Wt(m))==null?void 0:R.captureFlow,frames:Ar(m,u)},{page:B.PassportSignature,"capture-method":(_=Wt(h))==null?void 0:_.captureMethod,"capture-flow":(T=Wt(h))==null?void 0:T.captureFlow,frames:Ar(h,u)}];l&&(l.type==="stream"?p.push({page:"front_and_back",type:"video","capture-flow":void 0,"capture-method":void 0,frames:[],"object-id":l.objectId}):l.type==="upload"&&p.push({page:"front_and_back",type:"video","capture-flow":void 0,"capture-method":void 0,frames:[rf(l.chunks,`video.${cr(l.mimeType)}`,l.mimeType)]}));const g={"client-extraction-source":s,"client-extraction-raws":a,"camera-properties":c,files:p.filter(E=>E.frames.length!==0||E["object-id"]!=null)},C={[t["field-key-idclass"]]:n,[t["field-key-document"]]:g};return r!=null&&t["field-key-country"]!=null&&(C[t["field-key-country"]]=r.toUpperCase()),{id:e.id,type:e.type,attributes:{fields:C,"flow-type":j.flowType}}}const Fi=3;function mA({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,manuallyClassifiedInAutoclassificationFlow:u,debugForcedStatus:d,history:m,t:h,opts:p={}}){return async g=>{var V,D,O;let C=om({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:!0}),I="multipart/form-data";xl(o)||Sg(t==null?void 0:t["enabled-capture-file-types"],l,"government-id"),g(pi(0));const v=U=>{var M;g(pi((M=U.progress)!=null?M:0))},x=new Date().getTime();g(yn());let R,_;for(_=0;_<Fi;_++)try{R=await ne.postResourceAction(C,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"manually-classified-in-autoclassification-flow":u,"workflow-initial-variables":{"debug-forced-status":d}},contentType:I,onUploadProgress:v}),j.inquiryParams["send-client-side-collected-data-in-events"]&&g(Ta({name:e.attributes["next-step"].name,type:Ae.GovernmentId,data:o}));break}catch(U){if(U instanceof ht){let M=!1;switch(U.status){case 502:g(ae(h("errors.network-upload")));break;case 401:return;case 409:switch((V=U.errors)==null?void 0:V[0].code){case"inconsistent_transition_error":{const{data:Y}=await ne.getResource(w.Inquiry,e.id);g(Rt(Y));break}case"pending_transition_error":{g(ae(h("errors.network")));break}default:g(ae(h("errors.inquiry-conflict")))}break;case 413:g(ae(h("errors.image-upload-too-large")));break;case 422:_===0?(C=om({inquiry:e,config:t,governmentIdClass:n,countryCode:r,uploads:o,clientExtractionRaws:a,clientExtractionSource:s,cameraInspectionData:c,videoData:l,multipart:!1}),I="application/json",M=!0):yg(U,m,g,h);break;default:M=!0}if(M===!1)throw g(ct()),new fn({method:"POST"})}else U instanceof Ct||me(U,"error",{attempt:_});if(_===Fi-1)throw g(ct()),ee.logAmplitude("government-id.submit.failed",{attempts:_,duration:new Date().getTime()-x}),U}try{[B.Front,B.Back,B.BarcodePdf417,B.FrontOrBack,B.PassportSignature].forEach(U=>{var M;(M=o[U])==null||M.forEach(Y=>{var X;if(Y==null)return;const{dataUrl:F,fileType:H,captureMethod:q,captureFlow:W}=Y;F.length<Lr&&$e("Government ID verification contains potentially blank image","warning",{},{captureMethod:q,side:U,fileType:H,captureFlow:W,videoEnabled:(l!=null).toString(),videoCaptureMethod:(X=l==null?void 0:l.type)!=null?X:""})})})}catch(U){me(U,"warning")}if((R==null?void 0:R.data)==null)throw me(new Error("No data returned from create verification saga"),"warning",{response:R,governmentIdClass:n,captureMethod:Xr(o).map(U=>{var M;return(M=Wt(U))==null?void 0:M.captureMethod}),captureFlow:Xr(o).map(U=>{var M;return(M=Wt(U))==null?void 0:M.captureFlow}),uploads:{backSizes:(D=o.back)==null?void 0:D.map(U=>{var M;return(M=U.dataUrl)==null?void 0:M.length}),frontSizes:(O=o.front)==null?void 0:O.map(U=>{var M;return(M=U.dataUrl)==null?void 0:M.length})}}),g(ae(h("government-id.prompt.failed-select-image"))),g(ct()),new fn({method:"POST"});ee.logAmplitude("government-id.submit.completed",{duration:new Date().getTime()-x,attempts:_+1});const{data:T}=R;g(Pt(T)),g(pi(0)),l&&He.markClientSuccess(),xi(T)===Xt.BLOCKING?g(jn("/inquiry/government-id/pending",{transition:p.transition})):(g(ct()),g(Rt(T)))}}var ra=(e=>(e.ACCEPTED="id_accepted",e.REJECTED="id_rejected",e.FAILED="classification_failed",e))(ra||{});function hA({inquiry:e,uploads:t,history:n,t:r,debugForcedStatus:o}){return async a=>{var d,m;const s=t[B.Front],c=ld(ia(Wt(s)),!0);let l=null,u;for(u=0;u<Fi;u++)try{l=await ne.postResourceAction({attributes:{image:c},id:e.id,type:e.type},"government-id-classification",{meta:{"workflow-initial-variables":{"debug-forced-status":o}},contentType:"multipart/form-data"});break}catch(h){if(h instanceof ht){let p=!1;switch(h.status){case 502:a(ae(r("errors.network-upload")));break;case 409:switch((d=h.errors)==null?void 0:d[0].code){case"inconsistent_transition_error":{const{data:g}=await ne.getResource(w.Inquiry,e.id);a(Rt(g));break}default:a(ae(r("errors.inquiry-conflict")))}break;case 413:a(ae(r("errors.image-upload-too-large")));break;case 422:yg(h,n,a,r);break;default:p=!0}if(p===!1)throw a(ct()),new fn({method:"POST"})}else h instanceof Ct||me(h,"error",{attempt:u});if(u===Fi-1)throw a(ct()),h}try{return l!=null&&l["country-code"]&&(l["country-code"]=l["country-code"].toUpperCase()),(m=l==null?void 0:l["id-classes-by-countries"])==null||m.forEach(h=>{h["country-code"]=h["country-code"].toUpperCase()}),ia(l)}catch(h){throw me(h,"warning"),new fn({method:"POST"})}}}function yg(e,t,n,r){var a,s,c,l;const o=(a=e.errors)==null?void 0:a[0].code;switch(o){case An.DOCUMENT_GOVERNMENT_ID_DIMENSION_SIZE_ERROR:{const d=(c=((s=e.errors)==null?void 0:s[0]).details)==null?void 0:c.min_dimension_size;Nn(t),t.push(Ut(0,We.Prompt)),n(ae(r("government-id.prompt.dimension-size-too-small",{minDimensionSize:d}))),n(ct());return}case An.DOCUMENT_GOVERNMENT_ID_TOO_SMALL:case An.DOCUMENT_GOVERNMENT_ID_ALL_BLACK_IMAGE:{Nn(t),t.push(Ut(0,We.Prompt)),n(ae(r("government-id.prompt.failed-black-image"))),n(ct());return}case An.DOCUMENT_GOVERNMENT_ID_DISABLED_FILE_TYPE_ERROR:{const d=((l=e.errors)==null?void 0:l[0]).details,m=cr(d.uploaded_file_type).toUpperCase(),h=d.enabled_file_types.map(p=>cr(p).toUpperCase());Nn(t),t.push(Ut(0,We.Prompt)),n(ae(r("documents.errors.disabled-file-type",{uploadedFileExtension:m,acceptedFileExtensions:h.join(", "),count:h.length}))),n(ct());return}default:{if(o&&/must be under \d+ bytes/.test(o)){const u=o.match(/must be under (\d+) bytes/);if(u){const d=Pd(parseInt(u[1]));n(ae(r("documents.errors.file-size-exceeded",{fileSizeLimit:d})));return}}n(ae(r("government-id.prompt.failed-select-image")));break}}}function _g({inquiry:e,debugForcedStatus:t,t:n,uploadedFiles:r}){return async o=>{var m,h;o(pi(0));const a=p=>{var g;o(pi((g=p.progress)!=null?g:0))},s=new Date().getTime();o(yn());let c,l;for(l=0;l<Fi;l++)try{c=await ne.postResourceAction({type:e.type,id:e.id,attributes:{"flow-type":j.flowType}},"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":t}},onUploadProgress:a}),j.inquiryParams["send-client-side-collected-data-in-events"]&&o(Ta({name:e.attributes["next-step"].name,type:Ae.Document,data:(r||[]).map(p=>p.file)}));break}catch(p){if(p instanceof ht){let g=!1;switch(p.status){case 502:o(ae(n("errors.network-upload")));break;case 409:if(((m=p.errors)==null?void 0:m[0].code)==="inconsistent_transition_error"){const{data:C}=await ne.getResource(w.Inquiry,e.id);o(Rt(C))}else((h=p.errors)==null?void 0:h[0].code)==="pending_transition_error"?o(ae(n("errors.network"))):o(ae(n("errors.inquiry-conflict")));break;case 413:o(ae(n("errors.image-upload-too-large")));break;case 422:o(ae(n("government-id.prompt.failed-select-image")));break;default:g=!0}if(g===!1)throw o(ct()),new fn({method:"POST"})}else p instanceof Ct||me(p,"error",{attempt:l});if(l===Fi-1)throw o(ct()),ee.logAmplitude("document.submit.failed",{attempts:l,duration:new Date().getTime()-s}),p}if((c==null?void 0:c.data)==null)throw me(new Error("No data returned from create document verification saga"),"warning",{response:c}),o(ae(n("government-id.prompt.failed-select-image"))),o(ct()),new fn({method:"POST"});ee.logAmplitude("document.submit.completed",{duration:new Date().getTime()-s,attempts:l+1});const{data:u}=c;o(Pt(u)),o(ag()),xi(u)===Xt.BLOCKING?o(jn("/inquiry/documents/pending")):(o(ct()),o(Rt(u)))}}function hB({inquiry:e,config:t,sessionId:n,debugForcedStatus:r,history:o,t:a}){return async s=>{var g,C;const c={id:e.id,type:e.type,attributes:{fields:{[t["field-key-selfie"]]:{type:"reflection","reflection-session-id":n,files:[]}},"flow-type":j.flowType}},l=new Date().getTime();s(yn());const u="multipart/form-data";let d,m;for(m=0;m<Fi;m++)try{d=await ne.postResourceAction(c,"transition",{meta:{"from-component":e.attributes["next-step"].name,"from-step":e.attributes["next-step"].name,"workflow-initial-variables":{"debug-forced-status":r}},contentType:u});break}catch(I){if(I instanceof ht){let v=!1;switch(I.status){case 502:s(ae(a("errors.network-upload")));break;case 409:if(((g=I.errors)==null?void 0:g[0].code)==="inconsistent_transition_error"){const{data:x}=await ne.getResource(w.Inquiry,e.id);s(Rt(x))}else((C=I.errors)==null?void 0:C[0].code)==="pending_transition_error"?s(ae(a("errors.network"))):s(ae(a("errors.inquiry-conflict")));break;case 413:s(ae(a("errors.image-upload-too-large")));break;case 422:s(ae(a("government-id.prompt.failed-select-image")));break;default:v=!0}if(v===!1)throw s(ct()),new fn({method:"POST"})}else I instanceof Ct||me(I,"error",{attempt:m});if(m===Fi-1)throw s(ct()),ee.logAmplitude("selfie-reflection.submit.failed",{attempts:m,duration:new Date().getTime()-l}),I}if((d==null?void 0:d.data)==null){const I=t["selfie-type"];throw me(new Error("No data returned from create verification saga"),"warning",{response:d,selfieType:I}),s(ae(a("government-id.prompt.failed-select-image"))),s(ct()),new fn({method:"POST"})}ee.logAmplitude("selfie-reflection.submit.completed",{duration:new Date().getTime()-l,attempts:m+1});const{data:h}=d;s(Pt(h)),s(pi(0)),xi(h)===Xt.BLOCKING?await s(kn(h,{historyToClear:o})):(s(ct()),s(Rt(h)))}}const pA=b.div.withConfig({displayName:"ConfirmFileUploadView__Container",componentId:"sc-1t7pp0y-0"})(["display:flex;flex-direction:column;"]),fA=b("div").withConfig({displayName:"ConfirmFileUploadView__Header",componentId:"sc-1t7pp0y-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),gA=b("div").withConfig({displayName:"ConfirmFileUploadView__ConfirmFileContainer",componentId:"sc-1t7pp0y-2"})(["background-color:",";border-radius:",";margin-bottom:","px;min-height:80px;padding:0px ","px;display:flex;flex-direction:row;justify-content:start;align-items:center;"],Le.gray4,dn.rounded,L.base*8,L.base*2),bA=b.div.withConfig({displayName:"ConfirmFileUploadView__IconContainer",componentId:"sc-1t7pp0y-3"})(["margin-right:","px;display:flex;"],L.base),CA=b("div").withConfig({displayName:"ConfirmFileUploadView__FileNameContainer",componentId:"sc-1t7pp0y-4"})(["color:",";font-weight:",";word-break:break-all;"],Le.black,an.semiBold),xA=b("div").withConfig({displayName:"ConfirmFileUploadView__Minify",componentId:"sc-1t7pp0y-5"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function Rg({customFileIcon:e,fileName:t,isProcessing:n,handleContinue:r,handleRetry:o,titleStyles:a,textStyles:s,buttonStyles:c,title:l,prompt:u,uploading:d,btnSubmit:m,btnRetake:h}){return i.jsxs(pA,{children:[i.jsxs(fA,{children:[i.jsx(dt,{styles:a,children:i.jsx(te,{children:l})}),i.jsx(at,{styles:s,children:i.jsx(te,{children:u})})]}),i.jsxs(gA,{children:[i.jsx(bA,{children:i.jsx(qe,{customImage:e,alt:"file icon",children:i.jsx(pe,{children:i.jsx(Ps,{})})})}),i.jsx(CA,{children:t})]}),i.jsxs(mt,{children:[i.jsx(ge,{buttonType:Z.Primary,styles:c==null?void 0:c[Z.Primary],disabled:n,onClick:r,"data-test":"confirm-file-upload__continue",children:n?i.jsxs("span",{children:[d,i.jsx(xA,{children:i.jsx(er,{})})]}):m}),c==null&&i.jsx(Je,{height:2}),i.jsx(ge,{buttonType:Z.Secondary,styles:c==null?void 0:c[Z.Secondary],onClick:o,disabled:n,"data-test":"confirm-file-upload__retry",children:h})]})]})}const kc={},oc=f.memo(function({contentType:t,src:n,"data-test":r="image",environment:o,...a}){var C,I;const[s,{disable:c}]=rt(!0);let l;try{l=new URL(n).pathname}catch{l=n}const[u,d]=f.useState(kc[l]),m=l==null?void 0:l.toLowerCase(),h=(m==null?void 0:m.endsWith(".png"))||(m==null?void 0:m.endsWith(".gif"))||(m==null?void 0:m.endsWith(".jpg"))||(m==null?void 0:m.endsWith(".jpeg"))||(n==null?void 0:n.startsWith("data:image/png;"))||(n==null?void 0:n.startsWith("data:image/jpeg;"))||(n==null?void 0:n.startsWith("blob:"))||t==="image/png"||t==="image/gif"||t==="image/jpg"||t==="image/jpeg",p=t==="image/svg+xml"||(m==null?void 0:m.endsWith(".svg"))||(n==null?void 0:n.startsWith("data:image/svg+xml")),g=(m==null?void 0:m.endsWith(".json"))||t==="application/json";return f.useEffect(()=>{if((!o||o==="production")&&!(n!=null&&n.startsWith("https://files.withpersona.com/")||n!=null&&n.startsWith("https://files.withpersona-staging.com/"))){c();return}p?ci.get(n).then(({data:v})=>{const x=`data:image/svg+xml;base64,${btoa(v)}`;kc[l]=x,d(x)}).catch(v=>ar({error:v,method:"GET",uri:n})).finally(c):g&&ci.get(n).then(({data:v})=>{var x;kc[l]=v,d(v),(x=a.onLoad)==null||x.call(a)}).catch(v=>{var x;(x=a.onError)==null||x.call(a),ar({error:v,method:"GET",uri:n})}).finally(c)},[n,h,g,p]),n?h?i.jsx("img",{...a,src:n,"data-test":r}):p&&u!=null?i.jsx("img",{...a,src:u,"data-test":r}):g&&u!=null?i.jsx(qn,{role:"img",animationData:u,style:{height:(C=a.height)!=null?C:"auto",width:(I=a.width)!=null?I:"auto"}}):i.jsx("div",{"aria-label":s?"loading image":"no image","data-test":`${r}__${s?"loading":"empty"}`,className:a.className}):null});function Ag(e){return i.jsx(oc,{src:e.src,style:{imageOrientation:"from-image"},alt:e.alt})}const vA=b.div.withConfig({displayName:"InquiryDocumentsCheckView__Container",componentId:"sc-o0bjv1-0"})(["display:flex;flex-direction:column;"]),IA=b("div").withConfig({displayName:"InquiryDocumentsCheckView__Header",componentId:"sc-o0bjv1-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),SA=b("div").withConfig({displayName:"InquiryDocumentsCheckView__ImagePositioner",componentId:"sc-o0bjv1-2"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],L.base*2),wA=b("div").withConfig({displayName:"InquiryDocumentsCheckView__Minify",componentId:"sc-o0bjv1-3"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function yA(e){const{base:t,buttons:n}=qr(),{currentUpload:r,currentUploadCaptureMethod:o,localizations:a,handleContinue:s,handleRetry:c,isProcessing:l}=e;return!Do.includes(r.fileType)||o===bt.Upload?i.jsx(Rg,{fileName:r.filename,isProcessing:l,handleContinue:s,handleRetry:c,title:a["confirm-upload-title"],prompt:a["confirm-upload-prompt"],uploading:a["confirm-upload-uploading"],btnSubmit:a["confirm-upload-btn-submit"],btnRetake:a["confirm-upload-btn-retake"],titleStyles:t==null?void 0:t.titleStyle,textStyles:t==null?void 0:t.textStyle,buttonStyles:n}):i.jsxs(vA,{children:[i.jsxs(IA,{children:[i.jsx(dt,{styles:t==null?void 0:t.titleStyle,children:i.jsx(te,{children:a.title})}),i.jsx(at,{styles:t==null?void 0:t.textStyle,children:i.jsx(te,{children:a.prompt})})]}),i.jsx(SA,{children:i.jsx(Ag,{src:r.dataUrl,alt:"upload preview"})}),i.jsxs(mt,{children:[i.jsx(ge,{id:"documents-check__use-image",buttonType:Z.Primary,styles:n==null?void 0:n[Z.Primary],disabled:l,onClick:s,"data-test":"documents-check__continue",children:l?i.jsxs("span",{children:[a.uploading,i.jsx(wA,{children:i.jsx(er,{})})]}):a["btn-submit"]}),n==null&&i.jsx(Je,{height:2}),i.jsx(ge,{id:"documents-check__retake",buttonType:Z.Secondary,styles:n==null?void 0:n[Z.Secondary],disabled:l,onClick:c,"data-test":"documents-check__retake",children:a["btn-retake"]})]})]})}const _A=e=>e.inquiry.currentStep,RA=e=>e.inquiry.documents,AA=e=>e.inquiry.verifications,ac=Zn([_A],e=>e.type===Ae.DocumentsUpload?e.config:null),Da=Zn([ac,RA,AA],(e,t,n)=>{if(e==null)return[];const r=yC(c=>c.relationships.document.data.id,n==null?void 0:n.filter(c=>c.type===y.VerificationDocument)),o=mp(t).filter(c=>{var l;return((l=r[c.id])==null?void 0:l.attributes.status)===kt.Passed}),a=_C(c=>c.attributes.kind,o);return e.required.reduce((c,l)=>(a[l.kind]>0?(a[l.kind]-=1,c.push({...l,submitted:!0})):c.push({...l,submitted:!1}),c),[])}),TA=Zn([ac],e=>(e||{})["intro-screen"]),EA=Zn([ac],e=>(e||{})["skip-intro-screen"]),Tg=e=>{var t;return(t=Wt(e.document.uploads))==null?void 0:t.file};function kA(e){const{captureMethod:t,config:n,debugForcedStatus:r,document:o,fileToUpload:a,inquiry:s,uploadedFiles:c,styles:l,featureFlags:u}=e,d=(n==null?void 0:n["document-file-limit"])>1,m=Ot();f.useEffect(()=>{if(s==null||o==null||a==null){j.redirectToStart();return}return e.fileToUpload||(e.showMessage(h("errors.network")),m.goBack()),()=>{e.clearUpload(a)}},[]),f.useEffect(()=>{try{u!=null&&u["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("documents.check-page.entered",{})}catch{}},[]);const[h]=z(),{error:p,loading:g,callback:C}=vt(async()=>{e.clearMessages(),a.dataUrl.length>Us&&e.showMessage(Do.includes(a.fileType)?n.localizations["check-page"]["large-image-upload"]:n.localizations["check-page"]["large-file-upload"]),await e.createDocumentFile({file:a,captureMethod:t,document:o,t:h}),d?(e.loadDocument(o.id),m.replace(ha(Dt.TakePhoto))):await e.documentSubmit({inquiry:s,debugForcedStatus:r,t:h,uploadedFiles:c})},[s,a,r,h,d,c]);At({error:p,onError:()=>e.showMessage(h("documents.prompt.failed-select-image")),onNetworkError:()=>e.showMessage(h("errors.network"))});const I=()=>{g||(m.goBack(),e.clearUpload(a))};return s==null||n==null||o==null||a==null?null:i.jsx(Js,{value:l,children:i.jsx(yA,{currentUpload:a,currentUploadCaptureMethod:t,handleContinue:C,handleRetry:I,isProcessing:g,localizations:n.localizations["check-page"]})})}function NA(e){return{captureMethod:e.verification.captureMethod,config:ka(e),debugForcedStatus:e.test.forcedStatus,document:$s(e),fileToUpload:Tg(e),inquiry:e.inquiry.inquiry,uploadedFiles:pf(e),styles:Na(e.inquiry),featureFlags:e.inquiry.featureFlags}}const jA={clearMessages:Lt,clearUpload:nc,createDocumentFile:bg,documentSubmit:_g,loadDocument:gg,showMessage:ae},PA=Te(NA,jA),DA=PA(kA),Oo=({icon:e,...t})=>{const n=f.useContext(Ze);if(n==null?void 0:n.loadingPictographUrl)return i.jsx(Yt,{url:"loadingPictographUrl",height:"loadingPictographHeight"});{let o;switch(e){case"document":o=H1;break;case"verification":o=U1;break;default:ut(e)}return i.jsx(pe,{...t,role:"img","aria-label":"loading animation",children:i.jsx(qn,{"aria-busy":!0,"aria-live":"polite",role:"alert",animationData:o,style:{height:"160px",width:"auto"}})})}},OA=b.div.withConfig({displayName:"InquiryDocumentsPendingView__Container",componentId:"sc-tvw84p-0"})(["display:flex;flex-direction:column;"]),LA=b("div").withConfig({displayName:"InquiryDocumentsPendingView__Header",componentId:"sc-tvw84p-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),FA=b("div").withConfig({displayName:"InquiryDocumentsPendingView__AnimationContainer",componentId:"sc-tvw84p-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function MA({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=qr(),a=i.jsxs(LA,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(te,{children:t.title})}),i.jsx(at,{styles:o==null?void 0:o.textStyle,children:i.jsx(te,{children:t.description})})]});return i.jsxs(OA,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),n!=="end"&&a,i.jsx(FA,{children:i.jsx(qe,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Oo,{icon:"document",$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})}function VA(e){const{inquiry:t,config:n,styles:r,featureFlags:o}=e,[a]=z(),s=Ot();return f.useEffect(()=>{if(t==null){j.redirectToStart();return}},[]),va(async()=>{t!=null&&e.pollInquiry(t,{historyToClear:s}).catch(()=>{e.showMessage(a("errors.network"),!0),s.goBack()})},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("documents.pending-page.entered",{})}catch{}},[]),t==null||n==null?null:i.jsx(Js,{value:r,children:i.jsx(MA,{assets:n.assets["pending-page"],localizations:n.localizations["pending-page"],textVerticalPosition:n["pending-page-text-vertical-position"]})})}const BA=e=>({document:$s(e),inquiry:e.inquiry.inquiry,config:ka(e),featureFlags:e.inquiry.featureFlags,styles:Na(e.inquiry)}),UA={showMessage:ae,pollInquiry:kn},HA=Te(BA,UA),qA=HA(VA);function Eg({onSelectImage:e,capture:t,disabled:n}){const r=f.useCallback(l=>{var d;const u=(d=l.target.files)==null?void 0:d[0];e(u)},[e]),o=f.useCallback(()=>{var l;(l=a.current)==null||l.click()},[]),a=f.useRef(null),s=f.useMemo(()=>({accept:"image/*",capture:t!=null?t:"environment",disabled:n!=null?n:!1,onChange:r,ref:a,style:{display:"none"},type:"file","data-cy":"file-upload"}),[t,n,r]),c=f.useMemo(()=>({disabled:n||a==null,onClick:o}),[n,o]);return{inputCaptureProps:s,buttonProps:c}}const $A=b(ge).withConfig({displayName:"ButtonInputCapture__StyledButton",componentId:"sc-1fq0gkp-0"})(["margin-bottom:","px;:last-of-type{margin-bottom:0;}"],L.base*2),Lo=({buttonType:e,capture:t,children:n,disabled:r,id:o,isPending:a,handleSelectImage:s,styles:c,"aria-label":l,"data-test":u})=>{const{inputCaptureProps:d,buttonProps:m}=Eg({onSelectImage:s,capture:t,disabled:r});return c!=null?i.jsxs(i.Fragment,{children:[i.jsx("input",{...d,id:o}),i.jsx(ua,{...m,"data-test":u,styles:c,isPending:a,"aria-label":l,children:n})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{...d,id:o}),i.jsx($A,{...m,"data-test":u,buttonType:e,isPending:a,"aria-label":l,children:n})]})};var it=(e=>(e.SelectCamera="SelectCamera",e.DeviceHandoff="DeviceHandoff",e.UploadImage="UploadImage",e))(it||{});const GA=b.div.withConfig({displayName:"DocumentsPrompt__Container",componentId:"sc-nw222o-0"})(["display:flex;flex-direction:column;"]),WA=b("div").withConfig({displayName:"DocumentsPrompt__Header",componentId:"sc-nw222o-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),YA=b(Yt).withConfig({displayName:"DocumentsPrompt__StyledCustomizablePictograph",componentId:"sc-nw222o-2"})(["width:100%;"]);function zA({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,handleDeviceHandoff:r,handleDrop:o,handleDropRejected:a,handleInputCapture:s,handleSelectCamera:c,isProcessing:l,loading:u,localizations:d,multiFileSupported:m}){const{documentPictographPosition:h}=f.useContext(Ze),{base:p}=qr(),g=i.jsx(Ye,{height:null,width:null,"aria-label":"document pictograph",children:i.jsx(qe,{customImage:n["document-pictograph"],alt:"document pictograph",children:i.jsx(YA,{url:"documentPictographUrl",height:"documentPictographHeight","aria-label":"document pictograph",vectorEffect:"initial",primaryColor:A(p==null?void 0:p.fill.color),highlightColor:A(p==null?void 0:p.fill.highlightColor),backgroundColor:A(p==null?void 0:p.fill.backgroundColor),strokeColor:A(p==null?void 0:p.stroke.color),children:i.jsx(gn,{backgroundColor:A(p==null?void 0:p.fill.highlightColor),children:i.jsx(Ml,{height:80,width:"100%"})})})})});return i.jsxs(GA,{"data-test":"documents-prompt",children:[i.jsx(qe,{customImage:n["header-pictograph"],alt:"header pictograph"}),h===Gt.Start&&g,i.jsxs(WA,{children:[i.jsx(dt,{styles:p==null?void 0:p.titleStyle,children:i.jsx(te,{children:d.title})}),i.jsx(at,{"data-test":"documents-prompt__capture-options",styles:p==null?void 0:p.textStyle,children:i.jsx(te,{children:e.length>0?d.prompt:d["no-capture-options-prompt"]})})]}),h===Gt.Center&&g,i.jsx(mt,{children:i.jsx(KA,{allowedCaptureOptions:e,acceptedFileTypes:t,handleDeviceHandoff:r,handleDrop:o,handleDropRejected:a,handleInputCapture:s,handleSelectCamera:c,isProcessing:l,loading:u,localizations:d,multiFileSupported:m})})]})}function KA({allowedCaptureOptions:e,acceptedFileTypes:t,handleDeviceHandoff:n,handleDrop:r,handleDropRejected:o,handleInputCapture:a,handleSelectCamera:s,isProcessing:c,loading:l,localizations:u,multiFileSupported:d}){return i.jsx(ZA,{id:"document-prompt__view",children:e.map((m,h)=>i.jsx(QA,{isPrimary:h===0,option:m,handleDeviceHandoff:n,handleDrop:r,handleDropRejected:o,handleInputCapture:a,handleSelectCamera:s,isProcessing:c,loading:l,localizations:u,multiFileSupported:d,acceptedFileTypes:t},m))})}function QA({handleDeviceHandoff:e,handleDrop:t,handleDropRejected:n,handleInputCapture:r,handleSelectCamera:o,isPrimary:a,isProcessing:s,loading:c,localizations:l,option:u,multiFileSupported:d,acceptedFileTypes:m}){const{getRootProps:h,getInputProps:p}=Ia({onDrop:t,onDropRejected:n,multiple:!!d,accept:m}),{buttons:g}=qr(),C=a?Z.Primary:Z.Secondary,I=s!=null||c;switch(u){case"web_camera":return i.jsx(Nc,{id:"document-prompt__button--web-camera","data-test":"document-prompt__button--web-camera",buttonType:Z.Primary,disabled:I,styles:g==null?void 0:g[Z.Primary],onClick:o,isPending:s===it.SelectCamera,children:i.jsx(am,{children:l["btn-capture"]})});case"mobile_camera":return i.jsx(Lo,{id:"document-prompt__button--mobile-camera","data-test":"document-prompt__button--mobile-camera",buttonType:Z.Primary,disabled:I,styles:g==null?void 0:g[Z.Primary],handleSelectImage:r,isPending:s===it.UploadImage,children:i.jsx(am,{children:l["btn-capture"]})});case"upload":return i.jsxs(Nc,{id:"document-prompt__button--upload","data-test":"document-prompt__button--upload",buttonType:a?Z.Primary:Z.Secondary,disabled:I,styles:g==null?void 0:g[C],...h(),children:[i.jsx("input",{...p(),"data-cy":"file-upload","data-test":"document-prompt__input--upload"}),l["btn-upload"]]});case"device_handoff":return i.jsx(Nc,{id:"document-prompt__button--device-handoff","data-test":"document-prompt__button--device-handoff",buttonType:a?Z.Primary:Z.Secondary,disabled:I,styles:g==null?void 0:g[C],onClick:e,isPending:s===it.DeviceHandoff,children:l["btn-device-handoff"]});default:ut(u)}}const ZA=b.div.withConfig({displayName:"DocumentsPrompt__CaptureOptionsContainer",componentId:"sc-nw222o-3"})(["width:100%;"]),Nc=b(ge).withConfig({displayName:"DocumentsPrompt__OptionButton",componentId:"sc-nw222o-4"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],S.Spacing[4]),JA=b(Fr).withConfig({displayName:"DocumentsPrompt__ImgCamera",componentId:"sc-nw222o-5"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),am=({children:e})=>e?i.jsx("span",{children:e}):i.jsx(JA,{"data-test":"document-prompt__image--camera"}),Uo=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,fill:"none",viewBox:"0 0 32 32",...e},f.createElement("circle",{cx:16,cy:16,r:16,fill:"#631FFF"}),f.createElement("path",{stroke:"#fff",d:"M16 9v14M9 16h14"})),XA=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20",...e},f.createElement("path",{stroke:"currentColor",d:"m13.335 6.667-6.667 6.667M6.668 6.667l6.667 6.667"})),fa=160,ga=120,eT=fa*2.25+Sn*3,tT=ga*2.25+Sn*3,nT=b.div.withConfig({displayName:"ImageGallery__ImageGalleryContainer",componentId:"sc-biogau-0"})(["display:grid;grid-gap:",";justify-content:center;grid-auto-flow:row;grid-auto-rows:","px;grid-template-columns:repeat(2,","px);overflow-x:auto;max-height:50vh;",";@media ","{max-height:60vh;}@media ","{grid-auto-rows:","px;grid-template-columns:repeat(2,","px);max-height:50vh;",";}"],S.Spacing[3],fa,fa,({multiRow:e})=>e&&`min-height: ${eT}px`,jt.isMobile,jt.isMobileSmall,ga,ga,({multiRow:e})=>e&&`min-height: ${tT}px`),kg=$(["height:","px;width:","px;border-radius:4px;border:1px solid ",";@media ","{height:","px;width:","px;}"],fa,fa,S.Color.CoreSlate300,jt.isMobileSmall,ga,ga),Ho=b.div.withConfig({displayName:"ImageGallery__AddImageContainer",componentId:"sc-biogau-1"})([""," "," "," transition:background ",",border-color ",";"],kg,({disabled:e})=>{if(!e)return $([":hover{background:",";}:focus-within{background:",";}"],S.Color.CoreSlate50,S.Color.CoreSlate50)},({disabled:e,isDragActive:t,isDragReject:n})=>{if(!e){if(n)return $(["border-color:",";background:",";"],S.Color.CoreRed400,S.Color.CoreRed100);if(t)return $(["background:",";"],S.Color.CoreSlate50)}},et.Fast,et.Fast),qo=b.button.withConfig({displayName:"ImageGallery__AddButton",componentId:"sc-biogau-2"})(["height:100%;width:100%;background:none;cursor:pointer;circle{fill:",";}path{stroke:",";}",""],({theme:e,styles:t})=>{var n;return(n=A(t==null?void 0:t.fill.color))!=null?n:e.colorButtonPrimary},({styles:e})=>{var t;return(t=A(e==null?void 0:e.stroke.color))!=null?t:S.Color.PrimaryWhite},({disabled:e})=>{if(e)return $(["cursor:default;circle{fill:",";}path{stroke:#898d9e;}"],S.Color.CoreSlate200)}),iT=b.figure.withConfig({displayName:"ImageGallery__PreviewImageContainer",componentId:"sc-biogau-3"})([""," background-color:",";position:relative;display:flex;flex-direction:column;"],kg,({styles:e})=>{var t;return(t=A(e==null?void 0:e.fill.color))!=null?t:S.Color.CoreSlate50}),rT=b.button.withConfig({displayName:"ImageGallery__RemoveButton",componentId:"sc-biogau-4"})(["position:absolute;top:",";right:",";border-radius:10px;height:20px;width:20px;cursor:pointer;transition:background ",",box-shadow ",";background:",";svg{color:",";}&:disabled{cursor:not-allowed;background:",";}&:hover:not(:disabled){background:",";}&:focus-visible:not(:disabled){box-shadow:0 0 0 2px ",";}"],S.Spacing[2],S.Spacing[2],et.Fast,et.Fast,({styles:e})=>{var t;return(t=A(e==null?void 0:e.fill.color))!=null?t:S.Color.PrimaryWhite},({styles:e})=>{var t;return(t=A(e==null?void 0:e.stroke.color))!=null?t:S.Color.CoreSlate700},S.Color.CoreSlate200,S.Color.CoreSlate100,({styles:e})=>{var t;return(t=A(e==null?void 0:e.stroke.color))!=null?t:S.Color.CoreSlate700}),oT=b.div.withConfig({displayName:"ImageGallery__PreviewImageInner",componentId:"sc-biogau-5"})(["padding:",";flex:auto;min-height:0;display:flex;align-items:center;justify-content:center;"],S.Spacing[3]),aT=b.div.withConfig({displayName:"ImageGallery__AspectRatioGuard",componentId:"sc-biogau-6"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;"]),sT=b.img.withConfig({displayName:"ImageGallery__Thumbnail",componentId:"sc-biogau-7"})(["height:auto;width:auto;max-height:100%;max-width:100%;image-orientation:from-image;"]),cT=b(pe).withConfig({displayName:"ImageGallery__StyledThemedSvg",componentId:"sc-biogau-8"})(["display:flex;align-items:center;justify-content:center;svg{height:48px;width:48px;}"]),lT=b.figcaption.withConfig({displayName:"ImageGallery__Caption",componentId:"sc-biogau-9"})(["height:32px;width:100%;flex:none;display:flex;align-items:center;background-color:",";border-bottom-left-radius:4px;border-bottom-right-radius:4px;padding:"," ",";"],S.Color.PrimaryWhite,S.Spacing[2],S.Spacing[3]),dT=b(at).withConfig({displayName:"ImageGallery__CaptionText",componentId:"sc-biogau-10"})(["overflow-x:hidden;white-space:nowrap;text-overflow:ellipsis;"]);function uT(e){return(e==null?void 0:e.includes("image"))&&e!=="image/heic"}const mT=["application/pdf","image/jpeg","image/png","image/heic"],hT=({files:e,onChange:t,onRemove:n,onAddClick:r,onAddError:o,onDeviceHandoff:a,acceptedImageFormats:s=mT,allowedCaptureOptions:c,disabled:l,addFileDisabled:u,"data-test":d,captureOptionsDialogTitle:m,webCameraBtnLabel:h,mobileCameraBtnLabel:p,uploadBtnLabel:g,deviceHandoffBtnLabel:C,deleteDialogTitle:I,cancelBtnLabel:v,deleteBtnLabel:x,noCaptureOptionsPrompt:R,styles:_})=>{const T=f.useCallback(async E=>{const V=e[E];V.type==="uploaded"&&await n(V.id)},[n,e]);return i.jsx(i.Fragment,{children:i.jsxs(nT,{"data-test":d,multiRow:e.length>1,children:[e.slice().map((E,V)=>i.jsx(xT,{disabled:l,file:E,index:V,loading:!1,onRemove:T,deleteDialogTitle:I,cancelBtnLabel:v,deleteBtnLabel:x,styles:_},E.id)),u?null:i.jsx(pT,{onAdd:t,onAddClick:r,onAddError:o,onDeviceHandoff:a,acceptedImageFormats:s,allowedCaptureOptions:c,disabled:l,captureOptionsDialogTitle:m,webCameraBtnLabel:h,mobileCameraBtnLabel:p,uploadBtnLabel:g,deviceHandoffBtnLabel:C,noCaptureOptionsPrompt:R,styles:_})]})})},pT=({onAdd:e,onAddClick:t,onAddError:n,onDeviceHandoff:r,disabled:o,acceptedImageFormats:a,allowedCaptureOptions:s,captureOptionsDialogTitle:c,webCameraBtnLabel:l,mobileCameraBtnLabel:u,uploadBtnLabel:d,deviceHandoffBtnLabel:m,noCaptureOptionsPrompt:h,styles:{base:p,imagePreview:g,buttons:C}})=>{const[I,{enable:v,disable:x}]=rt(),{getRootProps:R,getInputProps:_,isDragActive:T,isDragReject:E}=Ia({onDrop:U=>{e(U),x()},onDropRejected:n,multiple:!0,accept:a}),V=f.useCallback(U=>e([U]),[e]),{inputCaptureProps:D,buttonProps:O}=Eg({onSelectImage:U=>{V(U),x()},capture:"environment",disabled:o});if(s.length===1)switch(s[0]){case"web_camera":return i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__web-camera",children:i.jsx(qo,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:t,disabled:O.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})});case"mobile_camera":return i.jsxs(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__mobile-camera",children:[i.jsx("input",{...D}),i.jsx(qo,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",styles:g==null?void 0:g.plusIcon,...O,children:i.jsx(Uo,{})})]});case"upload":return i.jsx(Ho,{isDragActive:T,isDragReject:E,disabled:o,"data-test":"add-image__upload",children:i.jsxs(qo,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",...R(),disabled:o,styles:g==null?void 0:g.plusIcon,children:[i.jsx("input",{..._(),"data-cy":"file-upload"}),i.jsx(Uo,{})]})});case"device_handoff":return i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image__device-handoff",children:i.jsx(qo,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:r,disabled:O.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})});default:ut(s[0])}else return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:I,onClose:x,"data-test":"capture-options-dialog","aria-labelledby":"capture-options-dialog__title","aria-describedby":"capture-options-dialog__description",styles:p==null?void 0:p.modal,children:[i.jsx(dt,{styles:p==null?void 0:p.titleStyle,children:i.jsx(te,{children:c})}),i.jsx(Je,{height:1}),s.length===0&&i.jsx(at,{styles:p==null?void 0:p.textStyle,children:i.jsx(te,{children:h})}),s.includes("web_camera")&&i.jsxs(i.Fragment,{children:[i.jsx(ge,{id:"add-image__dialog--btn-web-camera","data-test":"add-image__dialog--btn-web-camera",buttonType:Z.Primary,styles:C==null?void 0:C[Z.Primary],onClick:()=>{t(),x()},disabled:o,children:i.jsx(sm,{children:l})}),C==null&&i.jsx(Je,{height:1.5})]}),s.includes("mobile_camera")&&i.jsxs(i.Fragment,{children:[i.jsx("input",{...D}),i.jsx(ge,{id:"add-image__dialog--btn-mobile-camera","data-test":"add-image__dialog--btn-mobile-camera",buttonType:Z.Primary,styles:C==null?void 0:C[Z.Primary],disabled:o,...O,children:i.jsx(sm,{children:u})}),C==null&&i.jsx(Je,{height:1.5})]}),s.includes("upload")&&i.jsxs(i.Fragment,{children:[i.jsxs(ge,{id:"add-image__dialog--btn-upload","data-test":"add-image__dialog--btn-upload",buttonType:Z.Secondary,styles:C==null?void 0:C[Z.Secondary],disabled:o,...R(),children:[i.jsx("input",{..._(),"data-cy":"file-upload"}),d]}),C==null&&i.jsx(Je,{height:1.5})]}),s.includes("device_handoff")&&i.jsx(i.Fragment,{children:i.jsx(ge,{id:"add-image__dialog--btn-device-handoff","data-test":"add-image__dialog--btn-device-handoff",buttonType:Z.Secondary,styles:C==null?void 0:C[Z.Secondary],onClick:()=>{r(),x()},disabled:o,children:m})})]}),i.jsx(Ho,{isDragActive:!1,isDragReject:!1,disabled:o,"data-test":"add-image--multiple-capture-options",children:i.jsx(qo,{id:"add-image__add-btn","data-test":"add-image__add-btn","aria-label":"Add image",onClick:v,disabled:O.disabled,styles:g==null?void 0:g.plusIcon,children:i.jsx(Uo,{})})})]})},fT=b.div.withConfig({displayName:"ImageGallery__LoadingContainer",componentId:"sc-biogau-11"})(["position:absolute;cursor:default;height:100%;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;"]),gT=b.div.withConfig({displayName:"ImageGallery__LoadingBackdrop",componentId:"sc-biogau-12"})(["position:absolute;height:100%;width:100%;background:",";opacity:0.8;border-radius:4px;.fade-enter-done &{opacity:0.8;}.fade-exit &{opacity:0.8;}"],S.Color.PrimaryWhite),bT=Ln(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),CT=b(Eh).withConfig({displayName:"ImageGallery__AnimatedLoaderIcon",componentId:"sc-biogau-13"})(["z-index:1;margin:",";animation:"," 1s linear infinite;"],S.Spacing[2],bT),xT=({file:e,disabled:t,index:n,loading:r,onRemove:o,deleteDialogTitle:a,deleteBtnLabel:s,cancelBtnLabel:c,styles:{base:l,imagePreview:u,buttons:d}})=>{var x;const[m,{enable:h,disable:p}]=rt(),g=!r&&e.type==="uploaded",C=f.useCallback(async()=>{p(),await o(n)},[o,n]),I=e.type==="uploading"&&e.progress<100,v=e.type==="uploaded"&&e.deleting;return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:m,onClose:p,"data-test":"delete-dialog","aria-labelledby":"delete-dialog__title","aria-describedby":"delete-dialog__description",styles:l==null?void 0:l.modal,children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:a}),i.jsx(Je,{height:1}),i.jsx(ge,{buttonType:Z.Primary,styles:d==null?void 0:d[Z.Primary],id:"delete-dialog__btn-delete","data-test":"delete-dialog__btn-delete",onClick:C,children:s}),d==null&&i.jsx(Je,{height:1.5}),i.jsx(ge,{buttonType:Z.Secondary,styles:d==null?void 0:d[Z.Secondary],id:"delete-dialog__btn-cancel","data-test":"delete-dialog__btn-cancel",onClick:p,children:c})]}),i.jsxs(iT,{styles:u==null?void 0:u.cropArea,children:[g&&!v&&i.jsx(rT,{id:"preview-image__remove-btn","data-test":"preview-image__remove-btn","aria-label":"Remove image",disabled:t,onClick:h,styles:u==null?void 0:u.xIcon,children:i.jsx(XA,{})}),(I||v)&&i.jsxs(fT,{children:[i.jsx(CT,{}),i.jsx(gT,{})]}),i.jsx(oT,{children:uT(e.fileType)?i.jsx(aT,{children:i.jsx(sT,{src:e.url,"data-test":"preview-image__thumbnail"})}):i.jsx(cT,{"data-test":"preview-image__icon-file",children:i.jsx(Ps,{})})}),i.jsx(lT,{title:e.filename,"data-test":"preview-image__caption",children:i.jsx(dT,{styles:(x=u==null?void 0:u.imageName)==null?void 0:x.textStyle,children:e.filename})})]})]})},vT=b(Fr).withConfig({displayName:"ImageGallery__ImgCamera",componentId:"sc-biogau-14"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),sm=({children:e})=>e?i.jsx(i.Fragment,{children:e}):i.jsx(vT,{"data-test":"government-id-prompt__image--camera"}),IT=b.div.withConfig({displayName:"DocumentsReview__Container",componentId:"sc-12z5v8n-0"})(["display:flex;flex-direction:column;"]),ST=b("div").withConfig({displayName:"DocumentsReview__Header",componentId:"sc-12z5v8n-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),wT=b(ge).withConfig({displayName:"DocumentsReview__SubmitButton",componentId:"sc-12z5v8n-2"})(["position:static;"]);function yT({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,documentFiles:r,documentFileLimit:o,handleAddError:a,handleAddFiles:s,handleDeviceHandoff:c,handleRemoveFile:l,handleSelectCamera:u,handleSubmit:d,loading:m,localizations:h,submitting:p,uploads:g,pendingDeletions:C}){const I=qr(),{base:v,buttons:x}=I,R=r.length>0&&g.length===0&&C.length===0&&!m&&!p,_=f.useMemo(()=>{const T=r.map(({id:V,attributes:{name:D,originals:O}})=>({type:"uploaded",filename:D,url:O[0].url,fileType:O[0]["file-type"],id:V,deleting:C.includes(V)})),E=g.map(V=>({type:"uploading",filename:V.file.filename,url:V.file.dataUrl,fileType:V.file.fileType,progress:V.progress,id:String(V.id)}));return[...T,...E]},[r,g,C]);return i.jsxs(IT,{"data-test":"documents-review",children:[i.jsx(qe,{customImage:n["header-pictograph"],alt:"header pictograph"}),i.jsxs(ST,{children:[i.jsx(dt,{styles:v==null?void 0:v.titleStyle,children:i.jsx(te,{children:h.title})}),i.jsx(at,{styles:v==null?void 0:v.textStyle,children:i.jsx(te,{children:h.prompt})})]}),i.jsx(hT,{"data-test":"documents-review__image-gallery",disabled:m,addFileDisabled:g.length>0||C.length>0||_.length>=o,allowedCaptureOptions:e,acceptedImageFormats:t,files:_,onAddClick:u,onAddError:a,onChange:s,onDeviceHandoff:c,onRemove:l,captureOptionsDialogTitle:h["capture-options-dialog-title"],webCameraBtnLabel:h["btn-capture"],mobileCameraBtnLabel:h["btn-capture"],uploadBtnLabel:h["btn-upload"],deviceHandoffBtnLabel:h["btn-device-handoff"],deleteDialogTitle:h["delete-dialog-title"],cancelBtnLabel:h["btn-cancel"],deleteBtnLabel:h["btn-delete"],noCaptureOptionsPrompt:h["no-capture-options-prompt"],styles:I}),i.jsx(Je,{height:4}),i.jsx(mt,{children:i.jsx(wT,{id:"documents-review__btn-submit","data-test":"documents-review__btn-submit",buttonType:Z.Primary,styles:x==null?void 0:x[Z.Primary],onClick:d,isPending:p,disabled:!R,children:h["btn-submit"]})})]})}function _T({allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,documentFiles:r,documentFileLimit:o,handleAddFiles:a,handleDeviceHandoff:s,handleDrop:c,handleDropRejected:l,handleInputCapture:u,handleRemoveFile:d,handleSelectCamera:m,handleSubmit:h,hideCameraPermissionsDialog:p,isProcessing:g,loading:C,localizations:I,openCameraPermissionsDialog:v,page:x,showCameraPermissionsDialog:R,submitting:_,uploads:T,pendingDeletions:E,multiFileSupported:V,skipPromptPage:D}){const{base:O,buttons:U}=qr(),M=f.useCallback(async()=>{try{await m()}catch{v()}},[]);if(D&&e.length===0)return i.jsx(In,{});const Y=x==="review"||V&&r.length+T.length>0;return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:R,onClose:p,styles:O==null?void 0:O.modal,"data-test":"camera-permissions-dialog","aria-labelledby":"camera-permissions-dialog__title","aria-describedby":"camera-permissions-dialog__description",children:[i.jsx(dt,{id:"camera-permissions-dialog__title",styles:O==null?void 0:O.titleStyle,children:i.jsx(te,{children:I["camera-permissions-title"]})}),i.jsx(at,{id:"camera-permissions-dialog__description",styles:O==null?void 0:O.textStyle,children:i.jsx(te,{children:I["camera-permissions-prompt"]})}),i.jsx(Je,{height:2}),i.jsx(ge,{type:"button",id:"camera-permissions-dialog__btn",styles:U==null?void 0:U[Z.Primary],onClick:p,children:I["camera-permissions-btn-continue-web"]})]}),Y?i.jsx(yT,{assets:n,allowedCaptureOptions:e,acceptedFileTypes:t,documentFiles:r,documentFileLimit:o,handleAddError:l,handleAddFiles:a,handleDeviceHandoff:s,handleRemoveFile:d,handleSelectCamera:M,handleSubmit:h,loading:C,localizations:I,submitting:_,uploads:T,pendingDeletions:E}):i.jsx(zA,{allowedCaptureOptions:e,acceptedFileTypes:t,assets:n,handleDeviceHandoff:s,handleDrop:c,handleDropRejected:l,handleInputCapture:u,handleSelectCamera:M,isProcessing:g,loading:C,localizations:I,multiFileSupported:V})]})}const RT=1.5;function Ld(){return Ul()?RT:1}function Ng({currentSide:e,facingMode:t,isGovidRedesign:n=!1,isMicroblink:r=!1,enableVideoRecording:o=!1,featureFlags:a={}}){const s=Ld();if(n){const c=o&&Ul()?{min:1}:void 0;let l={min:480,ideal:2160,max:2160},u={min:640,ideal:1350,max:1350};return a["inquiry:use-low-resolution-govid-redesign"]&&(r?(l={min:480,ideal:1920,max:1920},u={min:640,ideal:1080,max:1920}):(l={ideal:1280},u={ideal:960})),Jn()?{facingMode:t,width:u,height:l,aspectRatio:c}:{facingMode:t,height:u,width:l,aspectRatio:c}}if(r||s>1)return{facingMode:t,width:{min:640,ideal:1920*s,max:1920*s},height:{min:480,ideal:1080*s,max:1920*s},aspectRatio:1};switch(e){case B.Back:case B.BarcodePdf417:return{facingMode:t,width:{ideal:1280*s},height:{ideal:960*s}};default:return{facingMode:t,width:{ideal:1280*s},height:{ideal:960*s}}}}function jg({facingMode:e}){return{facingMode:e,width:{ideal:1280},height:{ideal:960}}}function Pg({highResolution:e=!1}){const t={facingMode:"user"};return e?{...t,width:{min:720,max:1920},height:{min:720,max:1080}}:t}const AT=e=>{var ce;const{config:t,debugForcedStatus:n,document:r,documentFiles:o,featureFlags:a,hasCamera:s,inquiry:c,uploads:l,uploadedFiles:u,pendingDeletions:d,addPendingDeletion:m,clearPendingDeletion:h,styles:p}=e,g=((ce=t==null?void 0:t["document-file-limit"])!=null?ce:0)>1,[C,I]=f.useState(void 0),[v,x]=f.useState([]),[R,{enable:_,disable:T}]=rt(),[E,{enable:V}]=rt(!1),{t:D}=z(),O=Ot();f.useEffect(()=>{if(c==null){j.redirectToStart();return}},[]),f.useEffect(()=>{if(t!=null)if(s==null)e.checkCamera();else{const Q=sI(t,s);Q.length===1?je(Q[0]):x(Q)}},[s,t]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("documents.prompt-page.entered",{})}catch{}},[]);const{loading:U}=Ur({loader:async()=>{t!=null&&((r==null?void 0:r.id)!==t["document-id"]&&e.clearDocument(),t["document-id"]!=null?await e.loadDocument(t["document-id"]):await e.createDocument({kind:t.kind,fileLimit:t["document-file-limit"],fieldKey:t["field-key-document"]}))},deps:[],skip:t==null,onError:Q=>{throw Q},onNetworkError:Q=>{throw Q}}),{error:M,callback:Y}=vt(async Q=>{if(r!=null)try{await e.createDocumentFile({file:Q,captureMethod:bt.Upload,document:r,t:D})}catch(K){throw e.clearUpload(Q),K}},[r,D]);At({error:M,onError:()=>e.showMessage(D("documents.prompt.failed-select-image")),onNetworkError:()=>e.showMessage(D("errors.network"))});const{error:F,callback:H}=vt(async Q=>{await e.deleteDocumentFile(Q),r!=null&&await e.loadDocument(r.id)},[r]);At({error:F,onError:()=>e.showMessage(D("errors.network")),onNetworkError:()=>e.showMessage(D("errors.network"))});const{loading:q,error:W,callback:X}=vt(async()=>{e.clearMessages(),await e.documentSubmit({inquiry:c,debugForcedStatus:n,t:D,uploadedFiles:u})},[c,n,D,u]);At({error:W,onError:()=>e.showMessage(D("errors.network")),onNetworkError:()=>e.showMessage(D("errors.network"))});const oe=async(Q,K)=>{try{const be=await wo(Q),Oe={filename:`${new Date().toISOString()}_${K}_${Q.name}`,fileType:Q.type,dataUrl:be};return e.uploadFile(Oe),Oe}catch(be){switch(ee.logAmplitude("document.upload.errored",{file:{type:Q==null?void 0:Q.type}}),be.name){case"NotReadableError":e.showMessage(D("documents.prompt.failed-select-image-permissions"));break;default:e.showMessage(D("documents.prompt.failed-select-image"))}}},se=async Q=>{m(Q);try{await H(Q)}finally{h(Q)}},Se=async Q=>{if(Q.length<Q.length&&(ee.logAmplitude("document.upload.invalid",{detail:"wrong file type"}),e.showMessage(D("documents.prompt.failed-invalid-type")),Q.length===0)){I(void 0);return}j.onEvent(Pe.DocumentUpload);const K=(await Promise.all(Q.map((be,Oe)=>oe(be,Oe)))).filter(be=>be!=null);if(K.length===0){I(void 0);return}if(g)try{await Promise.all(K.map(Y)),r!=null&&e.loadDocument(r.id).then(()=>K.map(e.clearUpload))}finally{I(void 0)}else e.saveCaptureMethod(bt.Upload),O.push(ha(Dt.Check))},Ee=async Q=>{e.clearMessages(),I(it.SelectCamera),ee.logAmplitude("document.camera.preload");try{const K=jg({facingMode:js()});e.setVideoConstraints(K),await Dn.prepare({video:K},a),Q(ha(Dt.TakePhoto))}catch(K){const be=K;throw ee.logAmplitude("document.camera.errored",{error:{name:be.name,message:be.message}}),j.onEvent(Pe.LoadCameraFailed,{error:be.name,message:be.message}),I(void 0),be}},he=Q=>{e.clearMessages(),I(it.UploadImage),ee.logAmplitude("document.upload",{method:"drop",files:Q.map(K=>({name:K==null?void 0:K.name,type:K==null?void 0:K.type,size:K==null?void 0:K.size}))}),Se(Q)},de=Q=>{if(t==null)return;e.clearMessages();const K=t["accepted-file-types"],be=Q.filter(({file:Oe})=>!K.includes(Oe.type));be.length>0?e.showMessage(D("documents.errors.disabled-file-type",{uploadedFileExtension:cr(be[0].file.type),acceptedFileExtensions:K.map(cr).join(", "),count:K.length})):e.showMessage(D("documents.prompt.failed-select-image")),I(void 0)},Ie=Q=>{e.clearMessages(),I(it.UploadImage),ee.logAmplitude("document.camera.upload",{method:"input_capture",files:[{name:Q==null?void 0:Q.name,type:Q==null?void 0:Q.type,size:Q==null?void 0:Q.size}]}),Se([Q])},ye=Q=>{C==null&&(e.clearMessages(),I(it.DeviceHandoff),Q("/inquiry/device-handoff/prompt"))},je=async Q=>{switch(Q){case"web_camera":if(a["verify:skip-gov-id-prompt-web-camera-only-by-org"])try{V(),await Ee(O.replace)}catch{x([Q]),_()}else x([Q]);break;case"device_handoff":ye(O.replace);break;case"mobile_camera":case"upload":x([Q]);break;default:ut(Q)}};return c==null||t==null||s==null?null:i.jsx(Js,{value:p,children:i.jsx(_T,{allowedCaptureOptions:v,acceptedFileTypes:t["accepted-file-types"],assets:t.assets["prompt-page"],documentFiles:o,documentFileLimit:t["document-file-limit"],handleAddFiles:Se,handleDeviceHandoff:()=>ye(O.push),handleDrop:he,handleDropRejected:de,handleInputCapture:Ie,handleRemoveFile:se,handleSelectCamera:()=>Ee(O.push),handleSubmit:X,hideCameraPermissionsDialog:T,isProcessing:C,loading:U,localizations:t.localizations["prompt-page"],openCameraPermissionsDialog:_,page:t["start-page"],showCameraPermissionsDialog:R,submitting:q,uploads:l,pendingDeletions:d,multiFileSupported:g,skipPromptPage:E})})};function TT(e){return{config:ka(e),debugForcedStatus:e.test.forcedStatus,document:$s(e),documentFiles:e.document.documentFiles,featureFlags:e.inquiry.featureFlags,hasCamera:e.ui.hasCamera,inquiry:e.inquiry.inquiry,uploads:e.document.uploads,pendingDeletions:e.document.pendingDeletions,uploadedFiles:pf(e),styles:Na(e.inquiry)}}const ET={createDocumentFile:bg,checkCamera:Mr,clearDocument:ag,clearMessages:Lt,clearUpload:nc,createDocument:Q3,documentSubmit:_g,loadDocument:gg,deleteDocumentFile:Z3,saveCaptureMethod:mr,setVideoConstraints:cg,showMessage:ae,uploadFile:tc,addPendingDeletion:y3,clearPendingDeletion:_3},kT=Te(TT,ET),NT=kT(AT),Dg=f.createContext(Cf()),Rn=()=>f.useContext(Dg),Zi=({children:e,value:t})=>{const n=f.useMemo(()=>Cf(t),[t]);return i.jsx(Dg.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})},jT=b.div.withConfig({displayName:"InquiryGovernmentIdAutoclassificationFailureView__FailureReasonPictograph",componentId:"sc-15hry4i-0"})(["display:flex;flex-direction:column;align-items:",";"],({justify:e})=>e!=null?e:"center");function PT({localizations:e,autoclassificationFailureReason:t,handleContinue:n}){var E,V,D,O,U,M,Y,F,H,q,W,X,oe,se,Se,Ee,he,de,Ie,ye,je,ce,Q,K,be,Oe,ze,re,le;const{base:r,buttons:o,imageLocal:a}=Rn(),s=t===ra.REJECTED,c=k((V=(E=a==null?void 0:a.illustration)==null?void 0:E.height)==null?void 0:V.base.base),l=k((O=(D=a==null?void 0:a.illustration)==null?void 0:D.width)==null?void 0:O.base.base),u=k((Y=(M=(U=a==null?void 0:a.illustration)==null?void 0:U.margin)==null?void 0:M.base.base)==null?void 0:Y.top),d=k((q=(H=(F=a==null?void 0:a.illustration)==null?void 0:F.margin)==null?void 0:H.base.base)==null?void 0:q.bottom),m=k((oe=(X=(W=a==null?void 0:a.illustration)==null?void 0:W.margin)==null?void 0:X.base.base)==null?void 0:oe.left),h=k((Ee=(Se=(se=a==null?void 0:a.illustration)==null?void 0:se.margin)==null?void 0:Se.base.base)==null?void 0:Ee.right),p=(he=a==null?void 0:a.illustration)==null?void 0:he.justify.base.base,g=A((ye=(Ie=(de=a==null?void 0:a.illustration)==null?void 0:de["fill-color"])==null?void 0:Ie.base)==null?void 0:ye.base),C=A((ce=(je=a==null?void 0:a.illustration)==null?void 0:je["fill-color"])==null?void 0:ce.background.base),I=A((K=(Q=a==null?void 0:a.illustration)==null?void 0:Q["fill-color"])==null?void 0:K.highlight.base),v=A((ze=(Oe=(be=a==null?void 0:a.illustration)==null?void 0:be["stroke-color"])==null?void 0:Oe.base)==null?void 0:ze.base),x={$primaryColor:g,$backgroundColor:C,$highlightColor:I,$strokeColor:v},R=Rf[ue.IdFrontIcon],_=(re=s?e==null?void 0:e["id-class-rejected-title"]:e==null?void 0:e["unable-to-classify-document-title"])!=null?re:"Failed to autoclassify",T=(le=s?e==null?void 0:e["id-class-rejected-continue-button-text"]:e==null?void 0:e["unable-to-classify-document-continue-button-text"])!=null?le:"Continue";return i.jsxs(i.Fragment,{children:[i.jsx(dt,{id:"autoclassification-failure__title",styles:r==null?void 0:r.titleStyle,children:i.jsx(te,{children:_})}),i.jsx(jT,{role:"img","aria-label":"Failed icon",justify:p,children:i.jsx(pe,{...x,children:i.jsx(Bh,{style:{width:l!=null?l:k(R.width),height:c!=null?c:k(R.height),marginTop:u,marginBottom:d,marginLeft:m,marginRight:h}})})}),i.jsx(Je,{height:6}),i.jsx(ge,{type:"button",id:"autoclassification-failure__btn",buttonType:Z.Primary,styles:o==null?void 0:o[Z.Primary],onClick:n,children:T})]})}const DT=e=>{const{autoclassificationFailureReason:t,history:n,config:r,styles:o}=e,a=()=>{n.push(Ut(0,We.AutoclassificationSelect))},s=r?Qi(r,"auto-classification-page"):void 0;return i.jsx(Zi,{value:o,children:i.jsx(PT,{localizations:s,autoclassificationFailureReason:t,handleContinue:a})})};function OT(e){return{styles:Xi(e.inquiry),inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,autoclassificationFailureReason:e.verification.autoclassificationFailureReason,uiStatus:e.ui.status}}const LT={showMessage:ae},FT=Te(OT,LT),MT=FT(DT),VT=b("div").withConfig({displayName:"InquiryGovernmentIdAutoclassificationSelectView__Container",componentId:"sc-hjv5m4-0"})([""," text-transform:capitalize;"],Bi),BT=b("div").withConfig({displayName:"InquiryGovernmentIdAutoclassificationSelectView__OutlinedLabelContainer",componentId:"sc-hjv5m4-1"})(["",""],({styles:e})=>Mn(e));function UT({localizations:e,governmentIdClassLocalizations:t,idClassesByCountries:n,selectIdTypeAndContinue:r,defaultCountry:o}){var T,E,V,D;const{base:a,buttons:s,inputSelect:c}=Rn(),[l,u]=f.useState(()=>n.map(O=>O["country-code"]).includes(o)?o:""),[d,m]=f.useState(""),h=f.useMemo(()=>n.map(O=>({text:O["country-name"],value:O["country-code"]})),[n]),p=f.useMemo(()=>{const O=n.filter(U=>U["country-code"]===l);return O.length===0?[]:O[0]["id-configs"].map(U=>{var M;return{text:(M=ml(t,l===""?void 0:l,U.class))!=null?M:U.class,value:U.class}})},[n,t,l]),g=()=>{l!==""&&d!==""&&r(l,d)},C=O=>{O!==l&&m(""),u(O)},I=O=>{m(O)},v=(T=e==null?void 0:e["manual-classification-title"])!=null?T:"Select your country and ID type",x=(E=e==null?void 0:e["country-input-title"])!=null?E:"Country",R=(V=e==null?void 0:e["id-class-input-title"])!=null?V:"Accepted IDs",_=(D=e==null?void 0:e["manual-classification-continue-button-text"])!=null?D:"Continue";return i.jsxs(i.Fragment,{children:[i.jsx(dt,{id:"autoclassification-select__title",styles:a==null?void 0:a.titleStyle,children:i.jsx(te,{children:v})}),i.jsx(cm,{styles:c==null?void 0:c.base,id:"autoclassification-select__country",label:x,value:l,options:h,handleChange:C}),l&&i.jsx(cm,{styles:c==null?void 0:c.base,id:"autoclassification-select__id_class",label:R,value:d,options:p,handleChange:I}),i.jsx("div",{children:i.jsx(ge,{type:"button",id:"autoclassification-select__continue_btn",buttonType:Z.Primary,styles:s==null?void 0:s[Z.Primary],disabled:l===""||d==="",onClick:g,children:_})})]})}function cm({styles:e,id:t,label:n,value:r,options:o,handleChange:a}){return i.jsxs(BT,{styles:e,children:[i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:t},children:n}),i.jsx(VT,{children:i.jsxs(Sd,{value:r,onChange:s=>a(s.target.value),id:t,styles:e,children:[i.jsx("option",{value:""}),o.map(s=>i.jsx("option",{value:s.value,children:s.text},s.value))]})})]})}const HT=e=>{const{idClassesByCountries:t,history:n,config:r,styles:o}=e;f.useEffect(()=>{e.resetAutoclassificationState()},[]);const a=(l,u)=>{e.saveAutoclassificationIdSelection(l,u),n.push(Ut(0,We.Prompt))},s=r?Qi(r,"auto-classification-page"):void 0,c=r?Qi(r,"select-page"):void 0;return i.jsx(Zi,{value:o,children:i.jsx(UT,{localizations:s,governmentIdClassLocalizations:c,idClassesByCountries:t,selectIdTypeAndContinue:a,defaultCountry:e.defaultCountry})})};function qT(e){return{styles:Xi(e.inquiry),inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,idClassesByCountries:e.verification.idClassesByCountries,defaultCountry:e.locale.localeInfo.country_code}}const $T={saveAutoclassificationIdSelection:Sv,resetAutoclassificationState:tf},GT=Te(qT,$T),WT=GT(HT),YT=b("nav").withConfig({displayName:"Navbar__Nav",componentId:"sc-hxvjv3-0"})(["position:absolute;z-index:",";pointer-events:none;top:0;top:env(safe-area-inset-top);left:0;right:0;box-sizing:content-box;display:flex;flex-wrap:none;align-items:center;justify-content:space-between;height:",";margin:0;padding:",";padding-bottom:",";padding-left:calc("," + env(safe-area-inset-left));padding-right:calc("," + env(safe-area-inset-right));border-bottom:",";background-color:",";"],yt.navbar,S.Spacing[5],L.widgetPadding,S.Spacing[4],L.widgetPadding,L.widgetPadding,({styles:e})=>e!=null?`${e.borderWidth} solid ${e.borderColor}`:"",({styles:e})=>e==null?void 0:e.backgroundColor),lm=b(mo).withConfig({displayName:"Navbar__NavOption",componentId:"sc-hxvjv3-1"})(["height:",";width:",";margin:-",";padding:",";svg{color:",";}"],S.Spacing[5],S.Spacing[5],S.Spacing[1],S.Spacing[1],({iconColor:e,theme:t})=>e!=null?e:t.colorIconHeader),zT=b(oc).withConfig({displayName:"Navbar__OrganizationLogo",componentId:"sc-hxvjv3-2"})(["display:block;object-fit:contain;height:",";"],({theme:e})=>{var t;return(t=e.navbarLogoHeight)!=null?t:`${S.Spacing[5]}`}),KT=b.div.withConfig({displayName:"Navbar__LogoContainer",componentId:"sc-hxvjv3-3"})(["flex:auto;display:flex;max-width:100%;max-height:100%;",";"],({logoDisplay:e})=>{switch(e){case Ni.None:return $(["visibility:hidden;"]);case Ni.Start:return $(["&:not(:first-child){margin-left:",";}justify-content:flex-start;"],S.Spacing[5]);case Ni.End:return $(["&:not(:last-child){margin-right:",";}justify-content:flex-end;"],S.Spacing[5]);case Ni.Center:return $(["&:not(:first-child){margin-right:",";}&:not(:last-child){margin-left:",";}justify-content:center;"],S.Spacing[5],S.Spacing[5])}}),Og=({onBack:e,onClose:t,showBackButton:n,showCloseButton:r,styles:o,colorIconHeader:a,logoContentType:s,logoDisplay:c=Ni.None,logoUrl:l,loading:u,id:d,"data-test":m="navbar"})=>i.jsxs(YT,{id:d,"data-test":m,styles:o,children:[n&&i.jsx(lm,{onClick:e,id:"navbar__back-link","data-test":"navbar__back-link",disabled:u,iconColor:a,"aria-label":"back",children:i.jsx(UC,{"aria-hidden":!0})}),i.jsx(KT,{logoDisplay:c,role:"presentation",children:c!==Ni.None&&l!=null&&i.jsx(zT,{contentType:s,"data-test":"navbar__logo",alt:"logo",src:l})}),r&&i.jsx(lm,{onClick:t,id:"navbar__close-link","data-test":"navbar__close-link",disabled:u,iconColor:a,"aria-label":"close",children:i.jsx(Cp,{"aria-hidden":!0})})]}),Fd="navbar__inquiry-dynamic-flow",QT=["/widget","/verify","/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error"],ZT=["/widget","/verify","/inquiry/device-handoff/email","/inquiry/device-handoff/prompt","/inquiry/device-handoff/sms","/inquiry/device-handoff/sms/sent","/inquiry/documents/capture","/inquiry/documents/check","/inquiry/documents/pending","/inquiry/documents/prompt","/inquiry/government-id/:step/capture","/inquiry/government-id/:step/check","/inquiry/government-id/:step/prompt","/inquiry/government-id/pending","/inquiry/government-id/select","/inquiry/selfie/center/prompt","/inquiry/selfie/record","/inquiry/selfie-reflection","/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error"],JT=["/inquiry/ui","/inquiry/documents/prompt","/inquiry/government-id/select","/inquiry/selfie/center/prompt"],XT=["/inquiry/create-persona/passkey-registration","/inquiry/create-persona/success","/inquiry/verify-with-persona/passkey-authentication","/inquiry/verify-with-persona/success","/inquiry/verify-with-persona/error"],e4=["/inquiry/inactive","/verify/invalid"],t4=()=>{var Y,F,H,q,W,X,oe,se,Se,Ee,he,de,Ie,ye,je,ce,Q,K,be,Oe,ze,re,le,Ue;const e=ot(G=>G.ui.status),t=ot(G=>G.inquiry.inquiry),n=ot(G=>!!G.inquiry.popupUrl),r=(H=(F=(Y=t.attributes["next-step"])==null?void 0:Y.config)==null?void 0:F.localizations)==null?void 0:H["cancel-dialog"],o=ot(Ii),a=ot(G=>G.ui.showConfirmCancelDialog),s=jl(),{t:c}=z(),l=Ot(),u=Dr(),[d,{enable:m,disable:h}]=rt(!1);f.useEffect(()=>{m();const G=setTimeout(h,500);return()=>{clearTimeout(G)}},[u]);const p=f.useMemo(()=>!(l.index==null||l.index<=0||JT.some(G=>bn(u.pathname,{path:G,exact:!0,strict:!1}))||XT.some(G=>bn(u.pathname,{path:G,exact:!0,strict:!1}))),[l.index,u.pathname]),g=f.useMemo(()=>t.attributes["next-step"].config["back-step-enabled"]?!p:!1,[t,p]),{error:C,callback:I}=vt(async()=>{g?s(Vv(t)):p?l.goBack():$e("Tried to navigate back when neither transition nor history back permitted","warning")},[u.pathname,g,p,t]),v=f.useRef(Date.now());f.useEffect(()=>{v.current=Date.now()},[u.pathname]),At({error:C,onError:()=>{s(ae("Unexpected error, please try again."))},onNetworkError:()=>s(ae("Unexpected error, please try again."))});const x=()=>{e4.some(G=>bn(u.pathname,{path:G,exact:!1,strict:!1}))?R():s(Or())},R=()=>{hd(),j.onEvent(Pe.Exit,{inquiryId:t.id,sessionToken:ne.accessToken},{inquiry:t}),Nn(l),l.push("/widget"),s(bc())},_=e===on.Blocked,T=e===on.Transitioning,E=t.attributes["next-step"].config["cancel-button-enabled"]&&!j.isHosted&&!j.isInline&&!gd(t)&&!QT.some(G=>bn(u.pathname,{path:G,exact:!0,strict:!1}))&&!_&&!n,V=(g||p)&&!_&&!j.isReusablePersonaPopup,D=t.attributes.logo;let O=D==null?void 0:D.display;(!O||ZT.some(G=>bn(u.pathname,{path:G,exact:!0,strict:!1})))&&(O=Ni.None);const U={backgroundColor:A((W=(q=o==null?void 0:o["background-color"])==null?void 0:q.header)==null?void 0:W.base),borderColor:A((oe=(X=o==null?void 0:o["border-color"])==null?void 0:X.header)==null?void 0:oe.base),borderWidth:k((Ee=(Se=(se=o==null?void 0:o["border-width"])==null?void 0:se.header)==null?void 0:Se.base)==null?void 0:Ee.bottom)},M={backgroundColor:(de=(he=o==null?void 0:o["background-color"])==null?void 0:he.base)==null?void 0:de.base,padding:(ye=(Ie=o==null?void 0:o.padding)==null?void 0:Ie.modal)==null?void 0:ye.base,border:{radius:(ce=(je=o==null?void 0:o["border-radius"])==null?void 0:je.modal)==null?void 0:ce.base}};return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:a,onClose:()=>s(bc()),styles:M,"data-test":"confirm-exit-dialog","aria-labelledby":"confirm-exit-dialog__title","aria-describedby":"confirm-exit-dialog__description",children:[i.jsx(dt,{id:"confirm-exit-dialog__title",styles:(Q=o==null?void 0:o["title-style"])==null?void 0:Q.base.base,children:i.jsx(te,{children:(K=r==null?void 0:r.title)!=null?K:c("exit.title")})}),i.jsx(at,{id:"confirm-exit-dialog__description",styles:(be=o==null?void 0:o["text-style"])==null?void 0:be.base.base,children:i.jsx(te,{children:(Oe=r==null?void 0:r.prompt)!=null?Oe:c("exit.prompt")})}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"confirm-exit-dialog__button--close","data-test":"confirm-exit-dialog__button--close",buttonType:Z.Primary,styles:(ze=o==null?void 0:o["button-primary-style"])==null?void 0:ze.base.base,onClick:R,children:(re=r==null?void 0:r["btn-submit"])!=null?re:c("exit.btn-submit")}),o==null&&i.jsx(Je,{height:1.5}),i.jsx(ge,{id:"confirm-exit-dialog__button--resume","data-test":"confirm-exit-dialog__button--resume",buttonType:Z.Secondary,styles:(le=o==null?void 0:o["button-secondary-style"])==null?void 0:le.base.base,onClick:()=>s(bc()),children:(Ue=r==null?void 0:r["btn-resume"])!=null?Ue:i.jsx(Pn,{i18nKey:"exit.or-go-back",defaults:"Or <0>click here to resume</0>",components:[i.jsx(f.Fragment,{children:"click here to resume"},0)],children:"Or click here to resume"})})]}),i.jsx(Og,{id:Fd,"data-test":"navbar__inquiry-dynamic-flow",onBack:I,onClose:x,styles:U,showBackButton:V,showCloseButton:E,colorIconHeader:A(o==null?void 0:o["text-color"]["header-button"].base),logoContentType:D==null?void 0:D["content-type"],logoDisplay:O,logoUrl:D==null?void 0:D.url,loading:T||d})]})},n4=b.div.withConfig({displayName:"AboveFrameHint__AboveFrameHintContainer",componentId:"sc-1eqi7b5-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:-16px;transform:translateY(-100%);border-radius:4px;padding:8px 16px;background-color:rgba(255,255,255,0.15);color:",";width:100%;text-align:center;font-size:14px;line-height:150%;z-index:1;transition:opacity ",";opacity:",";"],S.Color.PrimaryWhite,et.Fast,({visible:e})=>e?1:0),i4=({text:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{e&&n(e)},[e]),i.jsx(n4,{visible:!!e,children:i.jsx("div",{role:"alert",children:e||t})})},r4=1,o4=1,a4=14,s4=b.div.withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelFrame",componentId:"sc-1quv8d1-0"})(["position:relative;align-items:flex-start;background:rgb(230,230,230);color:",";padding:","px 12px;display:flex;border-radius:",";height:",";width:100%;transition:",";"],({styles:e})=>e!=null?A(e==null?void 0:e["text-color"].base.base):S.Color.CoreSlate800,a4,({borderRadius:e})=>e,({height:e})=>e!=null?e:"auto",({collapsed:e})=>`height ${o4}s,
    border-radius ${r4}s steps(1, ${e?"jump-end":"jump-start"})`),c4=b.div.withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelContents",componentId:"sc-1quv8d1-1"})(["display:flex;align-items:center;font-size:14px;line-height:150%;img,svg{height:auto !important;width:40px !important;}svg{path{mix-blend-mode:normal !important;}}"]),l4=b("div").withConfig({displayName:"CaptureFrameLabel__CaptureFrameLabelText",componentId:"sc-1quv8d1-2"})(["align-self:center;margin-left:12px;"]),d4=b.span.withConfig({displayName:"CaptureFrameLabel__PictographContainer",componentId:"sc-1quv8d1-3"})(["flex:1 0 auto;height:auto !important;width:40px !important;"]),u4=(e,t,n)=>{var o,a,s,c,l;let r;return n==="pp"||n==="ipp"?t===B.PassportSignature?r=e["passport-signature-pictograph"]:r=e["passport-front-pictograph"]:t===B.Back?r=e["id-back-pictograph"]:t===B.BarcodePdf417?r=e["barcode-pdf417-pictograph"]:t===B.Front||t===B.FrontOrBack?r=e["id-front-pictograph"]:t===B.PassportSignature&&(r=e["passport-signature-pictograph"]),((c=(s=(a=(o=r==null?void 0:r.styles)==null?void 0:o.width)==null?void 0:a.base)==null?void 0:s.base)==null?void 0:c.value)===0||((l=r==null?void 0:r.attributes)==null?void 0:l.width)==="0px"},m4=({assets:e,currentSide:t,governmentIdClass:n,styles:r})=>{if(n==="pp"||n==="ipp")switch(t){case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(ss,{})})});default:return i.jsx(qe,{customImage:e["passport-front-pictograph"],alt:"passport front pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(qh,{})})})}switch(t){case B.Back:return i.jsx(qe,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Wh,{style:{height:"46px",width:"74px"}})})});case B.BarcodePdf417:return i.jsx(qe,{customImage:e["barcode-pdf417-pictograph"],alt:"Barcode PDF417 pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Gh,{style:{height:"46px",width:"74px"}})})});case B.Front:case B.FrontOrBack:return i.jsx(qe,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx($h,{style:{height:"46px",width:"74px"}})})});case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(ss,{})})});default:return null}},h4=(e,t)=>{var o;const{captureHintIcon:n}=Rn(),r=!u4(e.assets,e.side,e.idClass);return i.jsx(s4,{collapsed:!1,height:(o=e.height)!=null?o:"auto",styles:e.styles,borderRadius:e.borderRadius,children:i.jsxs(c4,{ref:t,children:[r&&i.jsx(d4,{"aria-hidden":"true",children:i.jsx(m4,{assets:e.assets,currentSide:e.side,governmentIdClass:e.idClass,styles:n})}),i.jsx(l4,{children:e.text})]})})},Lg=f.forwardRef(h4),p4=b.div.withConfig({displayName:"InFrameHint__InFrameHintContainer",componentId:"sc-rbdkd8-0"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";text-align:center;font-size:14px;line-height:150%;z-index:1;width:80%;transition:opacity ",";opacity:",";"],S.Color.PrimaryWhite,et.Fast,({visible:e})=>e?1:0),f4=b.div.withConfig({displayName:"InFrameHint__InFrameHintContainerInner",componentId:"sc-rbdkd8-1"})(["background-color:rgba(0,0,0,0.5);border-radius:4px;padding:8px 16px;min-width:50%;"]),g4=({text:e})=>{const[t,n]=f.useState("");return f.useEffect(()=>{e&&n(e)},[e]),i.jsx(p4,{visible:!!e,children:i.jsx(f4,{role:"alert",children:e||t})})},b4=b(ks).withConfig({displayName:"IdCornersGuide__CornerTopLeft",componentId:"sc-1mt1yfs-0"})(["position:absolute;top:",";left:",";path{stroke:",";transition:stroke ",";}"],S.Spacing[3],S.Spacing[3],({$highlightCorners:e})=>e?S.Color.CoreGreen400:null,et.Fast),C4=b(ks).withConfig({displayName:"IdCornersGuide__CornerTopRight",componentId:"sc-1mt1yfs-1"})(["position:absolute;top:",";right:",";transform:rotate(90deg);path{stroke:",";transition:stroke ",";}"],S.Spacing[3],S.Spacing[3],({$highlightCorners:e})=>e?S.Color.CoreGreen400:null,et.Fast),x4=b(ks).withConfig({displayName:"IdCornersGuide__CornerBottomRight",componentId:"sc-1mt1yfs-2"})(["position:absolute;bottom:",";right:",";transform:rotate(180deg);path{stroke:",";transition:stroke ",";}"],S.Spacing[3],S.Spacing[3],({$highlightCorners:e})=>e?S.Color.CoreGreen400:null,et.Fast),v4=b(ks).withConfig({displayName:"IdCornersGuide__CornerBottomLeft",componentId:"sc-1mt1yfs-3"})(["position:absolute;bottom:",";left:",";transform:rotate(270deg);path{stroke:",";transition:stroke ",";}"],S.Spacing[3],S.Spacing[3],({$highlightCorners:e})=>e?S.Color.CoreGreen400:null,et.Fast);function sc({highlightCorners:e}){return i.jsxs(i.Fragment,{children:[i.jsx(b4,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(C4,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(v4,{$highlightCorners:e,"aria-hidden":!0}),i.jsx(x4,{$highlightCorners:e,"aria-hidden":!0})]})}const I4=b("div").withConfig({displayName:"IdBackGuide__Positioner",componentId:"sc-ojzxwa-0"})(["",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function vl({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(I4,{"data-test":"id-back-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(sc,{highlightCorners:n}),i.jsx(Yh,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${et.Fast}`}})]})})}const S4=b("div").withConfig({displayName:"IdBarcodeGuide__Positioner",componentId:"sc-1bbdq8d-0"})(["",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function Il({mirrored:e=!1,hideGuide:t=!1}){return i.jsx(S4,{"data-test":"id-back-guide",mirrored:e,children:i.jsx("div",{style:{paddingBottom:"35%",position:"relative",width:"100%"},children:i.jsx("div",{style:{position:"absolute",inset:"17.75%"},children:i.jsx(q1,{style:{height:"100%",objectFit:"cover",opacity:t?0:1,position:"absolute",transition:`opacity ${et.Fast}`,width:"100%"}})})})})}const w4=b("div").withConfig({displayName:"IdCornersOnlyGuide__Positioner",componentId:"sc-1ico4mx-0"})(["",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"])),y4=b("div").withConfig({displayName:"IdCornersOnlyGuide__SimpleGuide",componentId:"sc-1ico4mx-1"})(["padding-bottom:65.97%;width:100%;"]);function Fg({mirrored:e=!1,highlightCorners:t=!1}){return i.jsx(w4,{"data-test":"id-corners-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(sc,{highlightCorners:t}),i.jsx(y4,{})]})})}const _4=b("div").withConfig({displayName:"IdFrontGuide__Positioner",componentId:"sc-ezk9hl-0"})(["",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function Sl({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(_4,{"data-test":"id-front-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(sc,{highlightCorners:n}),i.jsx(zh,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${et.Fast}`}})]})})}const R4=b("div").withConfig({displayName:"IdFrontRightPortraitGuide__Positioner",componentId:"sc-2hpaxj-0"})(["",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function Mg({mirrored:e=!1,hideGuide:t=!1,highlightCorners:n=!1}){return i.jsx(R4,{"data-test":"id-front-guide",mirrored:e,children:i.jsxs("div",{style:{position:"relative"},children:[i.jsx(sc,{highlightCorners:n}),i.jsx($1,{style:{objectFit:"cover",opacity:t?0:1,transition:`opacity ${et.Fast}`}})]})})}const A4=b("div").withConfig({displayName:"MrzTwoLineGuide__Positioner",componentId:"sc-1thhldn-0"})(["position:relative;left:0;right:0;top:100%;bottom:100%;",";visibility:",";width:100%;"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]),({hideGuide:e})=>e?"hidden":"visible");function wl({mirrored:e=!1,hideGuide:t=!1}){return i.jsx(A4,{"data-test":"mrz-two-line-guide",mirrored:e,hideGuide:t,children:i.jsx(Kh,{})})}const T4=Ln(["0%{opacity:100;}100%{opacity:0;}"]),E4=b("div").withConfig({displayName:"OverlayImage__Flash",componentId:"sc-1sy16p7-0"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";opacity:0;animation:"," 1s;"],S.Color.PrimaryWhite,T4),k4=b("div").withConfig({displayName:"OverlayImage__Positioner",componentId:"sc-1sy16p7-1"})(["transform:translate(-50%,-50%);width:100%;position:absolute;top:50%;left:50%;& > div,& > img{margin:auto;}"]),dm=b("div").withConfig({displayName:"OverlayImage__SimpleGuide",componentId:"sc-1sy16p7-2"})(["padding-bottom:65.97%;width:100%;"]),N4=b("div").withConfig({displayName:"OverlayImage__BarcodeImageContainer",componentId:"sc-1sy16p7-3"})(["position:absolute;margin-left:20%;margin-right:20%;padding-top:17%;width:60%;top:50%;transform:translateY(-50%);"]),j4=b(Bl).withConfig({displayName:"OverlayImage__IdBarcodeGenericGuideStyled",componentId:"sc-1sy16p7-4"})(["top:0;left:0;position:absolute;width:100%;height:100%;"]),P4=e=>{const{captureOverlay:t,hideGuide:n,highlightCorners:r,isShortBarcodeOverlay:o,showFlash:a}=e,s=()=>{switch(t==null?void 0:t["overlay-fallback"]){case wn.Passport:return i.jsx(wl,{hideGuide:n});case wn.IdFront:return i.jsx(Sl,{hideGuide:n,highlightCorners:r});case wn.IdFrontRightPortrait:return i.jsx(Mg,{hideGuide:n,highlightCorners:r});case wn.IdBack:return i.jsx(vl,{hideGuide:n,highlightCorners:r});case wn.Barcode:return o?i.jsx(Il,{}):i.jsx(dm,{children:i.jsx(N4,{children:i.jsx(j4,{preserveAspectRatio:"none"})})});case wn.CornersOnly:return i.jsx(Fg,{highlightCorners:r});case wn.Empty:default:return i.jsx(dm,{})}};return i.jsxs(i.Fragment,{children:[i.jsx(k4,{children:i.jsx(qe,{customImage:t==null?void 0:t.overlay,alt:"ID capture overlay",children:s()})}),a&&i.jsx(E4,{})]})},Vg=1,D4=1,O4=8,L4=3,Bg=e=>{var t,n;return(n=k((t=e==null?void 0:e.border)==null?void 0:t.radius))!=null?n:`${O4}px`},to=e=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e.border)==null?void 0:t.width)==null?void 0:n.top))!=null?r:`${L4}px`},F4=e=>{var t,n;return(n=A((t=e==null?void 0:e.border)==null?void 0:t.color))!=null?n:S.Color.PrimaryWhite},Ug=e=>`calc(${Bg(e)} - ${to(e)})`,M4=.8,V4=.8,B4=.4242,Qr=14,um=window.requestIdleCallback!=null,U4=b("div").withConfig({displayName:"ScannerOverlayNew__FullscreenPage",componentId:"sc-1dti9f8-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;display:flex;flex-direction:column;"]),Md=e=>{var r,o,a,s;const t=f.useRef(),n=A((a=(o=(r=e==null?void 0:e.styles)==null?void 0:r.captureOverlayHeaderButton)==null?void 0:o.stroke)==null?void 0:a.color);return i.jsxs(i.Fragment,{children:[i.jsx(H4,{svgColor:n}),i.jsx(U4,{ref:(s=e.overlayRef)!=null?s:t,children:i.jsx(J4,{...e})})]})},H4=Co(["nav#","{background-color:unset;svg{path{","}}}"],Fd,({svgColor:e})=>`stroke: ${e!=null?e:S.Color.PrimaryWhite};`),q4=b.div.withConfig({displayName:"ScannerOverlayNew__ImageContainerWrapper",componentId:"sc-1dti9f8-1"})(["position:relative;"]),$4=b.div.withConfig({displayName:"ScannerOverlayNew__ImageContainer",componentId:"sc-1dti9f8-2"})(["height:",";position:relative;transform:",";transition:all ","s;"],({height:e})=>e,({mirrored:e})=>e?"scale(-1, 1)":null,Vg),G4=b("div").withConfig({displayName:"ScannerOverlayNew__ImageContainerSizer",componentId:"sc-1dti9f8-3"})(["top:0;left:0;padding-bottom:",";overflow:hidden;"],({isShortBarcodeOverlay:e})=>e?"35%":"66%"),Hg=b("div").withConfig({displayName:"ScannerOverlayNew__CaptureFrame",componentId:"sc-1dti9f8-4"})(["backface-visibility:hidden;height:100%;width:100%;overflow:hidden;transform:",";position:",";top:",";"],({isAnimated:e,isReverseSide:t})=>t?"rotateY(180deg)":e?"scale(1)":null,({isReverseSide:e})=>e?"absolute":null,({isReverseSide:e})=>e?0:null),W4=b("div").withConfig({displayName:"ScannerOverlayNew__VerticalPositioner",componentId:"sc-1dti9f8-5"})(["position:absolute;top:calc( "," - "," );background:",";width:calc(80% + 2 * (","));margin-left:calc(10% - ",");margin-right:calc(10% - ",");perspective:",";transform:",";transition:",";"],({collapsed:e,isShortBarcodeOverlay:t})=>e?"50%":t?"35%":"25%",({styles:e})=>to(e),({collapsed:e})=>e?"black":"transparent",({styles:e})=>to(e),({styles:e})=>to(e),({styles:e})=>to(e),({animated:e})=>e?"1000px":null,({animated:e,collapsed:t,collapsedVerticalOffset:n})=>e&&t?`translate3d(0, ${n!=null?n:"-50%"}, 0)`:null,({animated:e})=>e?`all ${Vg}s`:null),Y4=b("div").withConfig({displayName:"ScannerOverlayNew__FlipCard",componentId:"sc-1dti9f8-6"})(["border:",";border-radius:",";position:relative;width:100%;height:100%;overflow:",";transform-style:",";transform:",";transition:",";"],({styles:e})=>`${to(e)} solid ${F4(e)}`,({styles:e})=>Bg(e),({flipped:e})=>e?null:"hidden",({animated:e})=>e?"preserve-3d":null,({animated:e,flipped:t})=>e&&t?"rotateY(180deg)":null,({animated:e})=>e?`transform ${D4}s`:null),z4=b("div").withConfig({displayName:"ScannerOverlayNew__UnderOverlayComponentsWrapper",componentId:"sc-1dti9f8-7"})(["position:absolute;bottom:-16px;transform:translateY(100%);z-index:1;transition:opacity ",";opacity:",";width:100%;"],et.Fast,({visible:e})=>e?1:0),K4=b.div.withConfig({displayName:"ScannerOverlayNew__RealCaptureWindow",componentId:"sc-1dti9f8-8"})(["position:absolute;overflow:hidden;top:","%;height:","%;left:","%;width:","%;video{object-fit:cover;height:100%;width:100%;}"],({visibleToRealCaptureWindowHeightRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowHeightRatio:e})=>100/e,({visibleToRealCaptureWindowWidthRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowWidthRatio:e})=>100/e),Q4=e=>{var t,n,r,o;return i.jsxs(Hg,{isReverseSide:!1,isAnimated:e.isAnimated,children:[i.jsxs(q4,{children:[i.jsxs($4,{ref:e.previewViewfinderRef,mirrored:e.mirrored,height:e.imageContainerHeight,onTransitionEnd:()=>{var a;(a=e.onTransitionEnd)==null||a.call(e)},children:[i.jsx(K4,{ref:e.overlayCaptureWindowRef,visibleToRealCaptureWindowWidthRatio:M4,visibleToRealCaptureWindowHeightRatio:e.isShortBarcodeOverlay?B4:V4,children:(t=e.renderCaptureWindowContents)==null?void 0:t.call(e)}),i.jsx(G4,{ref:e.imageContainerSizerRef,isShortBarcodeOverlay:e.isShortBarcodeOverlay}),i.jsx(P4,{captureOverlay:(n=e.captureOverlay)!=null?n:null,isShortBarcodeOverlay:e.isShortBarcodeOverlay,hideGuide:e.hideGuide,highlightCorners:!!e.hasDetectedQuad,showFlash:e.capturing})]}),!e.isShortBarcodeOverlay&&i.jsx(g4,{text:e.inFrameText})]}),i.jsx(Lg,{collapsed:!1,borderRadius:Ug((r=e.styles)==null?void 0:r.captureBox),ref:e.captureFrameLabelRef,styles:(o=e.styles)==null?void 0:o.hint,assets:e.assets,side:e.requiresSide,idClass:e.governmentIdClass,text:e.captureFrameLabel,height:e.captureFrameLabelHeight})]})},Z4=e=>{var t,n;return e.reverseSide?i.jsx(Hg,{isReverseSide:!0,isAnimated:e.isAnimated,"aria-hidden":"true",children:i.jsx(Lg,{ref:e.captureFrameLabelRef,collapsed:!1,borderRadius:Ug((t=e.styles)==null?void 0:t.captureBox),styles:(n=e.styles)==null?void 0:n.hint,assets:e.assets,side:e.reverseSide,idClass:e.governmentIdClass,text:e.reverseCaptureFrameLabel})}):null},J4=e=>{var T,E;const t=f.useRef(null),[n,r]=f.useState(e.collapsed||e.expandOnMount),[o,a]=f.useState(n?0:"auto"),s=f.useRef(null),c=f.useRef(null),[l,u]=f.useState(e.flipped),[d,m]=f.useState("auto"),[h,p]=f.useState(null),g=f.useRef(null),C=(T=e.previewViewfinderRef)!=null?T:g;f.useEffect(()=>{var D,O,U,M;const V=e.captureOverlay?(D=t.current)==null?void 0:D.clientHeight:(O=C.current)==null?void 0:O.scrollHeight;I()?e.collapsed&&!n?(a(V+"px"),um?window.requestIdleCallback(()=>{var Y;a(0),p(`${-(((Y=s.current)==null?void 0:Y.scrollHeight)+Qr*2)/2}px`),r(!0)},{timeout:500}):setTimeout(()=>{var Y;a(0),p(`${-(((Y=s.current)==null?void 0:Y.scrollHeight)+Qr*2)/2}px`),r(!0)},50)):(a(e.collapsed?0:V||"auto"),e.collapsed&&p(`${-(((U=s.current)==null?void 0:U.scrollHeight)+Qr*2)/2}px`),r(e.collapsed)):e.expandOnMount?(a(V+"px"),r(!1)):(M=e.onReady)==null||M.call(e)},[e.collapsed]),f.useEffect(()=>{var V;I()&&e.flipped&&!l&&(m(`${((V=s.current)==null?void 0:V.scrollHeight)+Qr*2}px`),um?window.requestIdleCallback(()=>{var O;const D=((O=c.current)==null?void 0:O.scrollHeight)+Qr*2;m(`${D}px`),p(`-${D/2}px`),u(!0)},{timeout:500}):setTimeout(()=>{var O;const D=((O=c.current)==null?void 0:O.scrollHeight)+Qr*2;m(`${D}px`),p(`-${D/2}px`),u(!0)},50))},[e.flipped]);const I=Vi(),v=e.isShortBarcodeOverlay&&e.hint||e.prompt,x=e.isShortBarcodeOverlay?null:e.hint,R=e.capturing||e.hasDetectedQuad||!!x,_=e.isAnimated||e.expandOnMount||e.collapsed||e.flipped;return i.jsxs(W4,{animated:_,collapsed:n,collapsedVerticalOffset:h,isShortBarcodeOverlay:e.isShortBarcodeOverlay,children:[i.jsx(i4,{text:n?null:v}),i.jsxs(Y4,{animated:_,flipped:l,styles:(E=e.styles)==null?void 0:E.captureBox,children:[i.jsx(Q4,{...e,previewViewfinderRef:C,imageContainerSizerRef:t,captureFrameLabelRef:s,captureFrameLabelHeight:d,imageContainerHeight:o,hideGuide:R,inFrameText:x,onTransitionEnd:()=>{var V;a(n?0:"auto"),(V=e.onReady)==null||V.call(e)},isAnimated:_}),i.jsx(Z4,{...e,captureFrameLabelRef:c,captureFrameLabelHeight:d,reverseSide:e.reverseSide,isAnimated:_})]}),e.renderUnderOverlayComponents&&i.jsx(z4,{visible:!0,children:e.renderUnderOverlayComponents()})]})};function bi(e,t,n,r,o){const a=n==null?void 0:n.toLowerCase(),s=r,c=(u=>{switch(u){case B.Back:return"back";case B.BarcodePdf417:return"barcode";case B.Front:return"front";case B.FrontOrBack:return"front-or-back";case B.PassportSignature:return"passport-signature"}})(o),l=wa(t.map(u=>RC([a&&s&&c?`${u}.${a}.${s}.${c}`:null,a&&s?`${u}.${a}.${s}.default`:null,a&&c?`${u}.${a}.unknown.${c}`:null,a?`${u}.${a}.unknown.default`:null,a&&s?`${u}.${a}.${s}`:null,a?`${u}.${a}.unknown`:null,s&&c?`${u}.${s}.${c}`:null,s?`${u}.${s}.default`:null,c?`${u}.unknown.${c}`:null,`${u}.unknown.default`,s?`${u}.${s}`:null,`${u}.unknown`])));return e(l)}function Ei(e,t,n){return(t==="pp"||t==="ipp")&&n===B.Front?e["passport-portrait-capture-frame-label"]:(t==="pp"||t==="ipp")&&n===B.PassportSignature?e["passport-signature-capture-frame-label"]:n===B.BarcodePdf417?e["barcode-capture-frame-label"]:n===B.Back?e["id-back-capture-frame-label"]:e["id-front-capture-frame-label"]}const X4=720,eE=b("div").withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__VideoWrapperFullscreen",componentId:"sc-117p6m6-0"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],S.Color.PrimaryBlack,Ra,({flowType:e})=>e===wt.Inline?`
      height: ${X4}px;
    `:`
      @media ${jt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }
    `,j.isDashboardFLE&&"height: 100%;"),tE=450,nE=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__VideoWrapperColumnSizer",componentId:"sc-117p6m6-1"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${tE}px`:null),iE=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureLeadInAnimationView__TitlePositioner",componentId:"sc-117p6m6-2"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],S.Color.PrimaryWhite,yt.navbar);function rE({assets:e,localizations:t,featureFlags:n,governmentIdClass:r,requiresSide:o,handleRouteToCaptureView:a}){const{base:s,captureFeedBox:c,captureHint:l,captureOverlayHeaderButton:u}=Rn(),d=o===B.BarcodePdf417,m=()=>i.jsx(Md,{styles:{base:s,captureBox:c,captureOverlayHeaderButton:u,hint:l==null?void 0:l.textStyle},assets:e,isShortBarcodeOverlay:d,governmentIdClass:r,requiresSide:o,captureFrameLabel:Ei(t,r,o),isAnimated:!0,collapsed:!0,expandOnMount:!0,onReady:a}),h=()=>t.title?i.jsx(iE,{children:i.jsx(dt,{styles:s==null?void 0:s.titleStyle,children:t.title})}):null;return i.jsx(eE,{flowType:j.flowType,children:i.jsxs(nE,{restrictInlineColumnWidth:j.isInline,children:[h(),m()]})})}const oE=e=>{const{config:t,featureFlags:n,inquiry:r,match:o,history:a,governmentIdClass:s,autoclassificationCountryCode:c,didAutoclassificationIdSelection:l,idClassesByCountries:u,styles:d}=e,m=parseInt(o.params.step,10),h=en("inquiry:auto-classification"),{governmentIdClass:p,selectedCountryCode:g,autoclassificationIdClassesConfig:C}=rc(t,m,l,s,c,u,h),I=n["inquiry:enable-experimental-govid-perf-improvements"]&&n["inquiry:enable-experimental-govid-perf-improvements-percentage"],v=pa(t,p,m,l,C);f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.capture-page-animation.entered",{currentSide:v,selectedCountryCode:g,governmentIdClass:p})}catch{}},[]);const x=f.useCallback(()=>{a.replace(Ut(m,We.TakePhoto))},[]);f.useEffect(()=>{const _=setTimeout(()=>{x()},1e3);return()=>clearTimeout(_)},[x]);const R=(t==null?void 0:t["govid-design-version"])===_o.V1;if(r==null||r.attributes["next-step"].type!==Ae.GovernmentId)return null;if(R&&I){const _=Qi(t,"capture-page",{idClass:p,side:v});return i.jsx(Zi,{value:d,children:i.jsx(rE,{assets:t.assets["capture-page"],localizations:_,requiresSide:v,featureFlags:n,governmentIdClass:p,handleRouteToCaptureView:x})})}return i.jsx(Hi,{to:Ut(m,We.TakePhoto)})};function aE(e){return{styles:Xi(e.inquiry),inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries}}const sE=Te(aE),cE=sE(oE),lE=b("div").withConfig({displayName:"IdBackGuide__Positioner",componentId:"sc-rt087u-0"})(["position:relative;right:0;top:100%;bottom:100%;"]);function dE(){return i.jsx(lE,{"data-test":"id-back__guide",children:i.jsx(Yh,{})})}const uE=b("div").withConfig({displayName:"IdFrontGuide__Positioner",componentId:"sc-1y06jqx-0"})(["position:relative;right:0;top:100%;bottom:100%;",";"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function mE({mirrored:e=!1}){return i.jsx(uE,{"data-test":"id-front__guide",mirrored:e,children:i.jsx(zh,{})})}const hE=b("div").withConfig({displayName:"MrzTwoLineGuide__Positioner",componentId:"sc-vy0g9h-0"})(["position:relative;left:0;right:0;top:100%;bottom:100%;",";"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]));function pE({mirrored:e=!1}){return i.jsx(hE,{"data-test":"mrz-two-line__guide",mirrored:e,children:i.jsx(Kh,{})})}const fE=b("div").withConfig({displayName:"ScannerOverlay__CropPositioner",componentId:"sc-e4tdwi-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;"]),gE=b("div").withConfig({displayName:"ScannerOverlay__OverlayCrop",componentId:"sc-e4tdwi-1"})(["position:relative;height:100%;width:100%;overflow:hidden;"]),qg=e=>i.jsx(fE,{children:i.jsx(gE,{children:i.jsx(SE,{...e})})}),bE=b("div").withConfig({displayName:"ScannerOverlay__OverlayBarcode",componentId:"sc-e4tdwi-2"})(["position:absolute;margin:30% 20%;padding-bottom:17%;width:60%;"]),CE=b("div").withConfig({displayName:"ScannerOverlay__ImageStyled",componentId:"sc-e4tdwi-3"})(["svg{position:absolute;width:100%;height:100%;}"]),xE=b("div").withConfig({displayName:"ScannerOverlay__SimpleGuide",componentId:"sc-e4tdwi-4"})(["padding-bottom:65.97%;width:100%;"]),vE=b(Bl).withConfig({displayName:"ScannerOverlay__IdBarcodeGenericGuideStyled",componentId:"sc-e4tdwi-5"})(["position:absolute;width:100%;height:100%;"]),Ga=b("div").withConfig({displayName:"ScannerOverlay__OverlayWhole",componentId:"sc-e4tdwi-6"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:13% 10%;padding-bottom:48%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.5);"],dn.base,Le.white),mm=b("div").withConfig({displayName:"ScannerOverlay__OverlayPortrait",componentId:"sc-e4tdwi-7"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:10% 10%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.5);"],dn.base,Le.white),IE=b("div").withConfig({displayName:"ScannerOverlay__OverlayMrzTwoLine",componentId:"sc-e4tdwi-8"})(["position:absolute;border-radius:",";border:2px dashed ",";margin:12% 10% 8% 10%;width:80%;box-shadow:0 0 1px 1000px rgba(0,0,0,0.7);"],dn.base,Le.white),SE=e=>e.governmentIdClass==null||e.simple?i.jsx(Ga,{}):e.requiresSide===B.PassportSignature?i.jsx(Ga,{}):["nric"].includes(e.governmentIdClass)?i.jsx(Ga,{}):["pp","visa","ipp"].includes(e.governmentIdClass)?i.jsx(IE,{children:i.jsx(pE,{mirrored:e.mirrored})}):e.requiresSide===B.Front?i.jsx(mm,{children:i.jsx(mE,{mirrored:e.mirrored})}):e.requiresSide===B.Back?i.jsx(mm,{children:e.hideBackOverlay?i.jsx(xE,{}):i.jsx(dE,{})}):e.requiresSide===B.BarcodePdf417?i.jsxs(bE,{children:[i.jsx(CE,{children:i.jsx(G1,{})}),i.jsx(vE,{})]}):i.jsx(Ga,{});async function cc(e,t,n=1){const{maxAttempts:r=3,onRetry:o,onRetriesExhausted:a=s=>{throw s}}={};try{return await Promise.resolve(e())}catch(s){if(n<r)return o==null||o(s,n),await cc(e,t,n+1);a(s)}}let wE=class{constructor(){this.loaded=!1,this.tfOptimizationFlagsSet=!1,this.wasmPathSet=!1}isMediaLoaded(t){return $C(t)}isLoaded(){return this.loaded}async initTensorflow(){if(!this.isTestMode())try{if(!this.wasmPathSet){const t=ro("tfjs-backend-wasm")+"/";vr.setWasmPaths(t),this.wasmPathSet=!0}this.setTfOptimizationFlags(),await vr.ready(),this.loaded||ee.logAmplitude("inquiry.tf.loaded",{backend:vr.getBackend()})}catch(t){me(t,"warning",{source:"FaceApiClient.loadModels",wasmPathSet:this.wasmPathSet})}}async loadModels(){this.isTestMode()||(await this.initTensorflow(),await cc(async()=>{if(this.promiseTinyFaceDetector==null){const t=ro("tiny_face_detector_model");t!=null&&(this.promiseTinyFaceDetector=GC(t))}if(this.promiseFaceLandmarkTiny==null){const t=ro("face_landmark_68_tiny_model");t!=null&&(this.promiseFaceLandmarkTiny=WC(t))}await Promise.all([this.promiseTinyFaceDetector,this.promiseFaceLandmarkTiny]),this.loaded=!0}))}async detectFaces(t,{inputSize:n,scoreThreshold:r}){return await YC(t,new zC({inputSize:n!=null?n:416,scoreThreshold:r!=null?r:.4}))}async detectLandmarks(t){return await KC(t)}resetLoadStatus(){this.promiseTinyFaceDetector=void 0,this.promiseFaceLandmarkTiny=void 0}isTestMode(){return _n()||!1}setTfOptimizationFlags(){if(!this.tfOptimizationFlagsSet){try{vr.ENV.set("WEBGL_DELETE_TEXTURE_THRESHOLD",0)}catch(t){me(t,"warning")}try{vr.ENV.set("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",!0)}catch(t){me(t,"warning")}try{vr.ENV.set("WEBGL_EXP_CONV",!0)}catch(t){me(t,"warning")}this.tfOptimizationFlagsSet=!0}}};const _t=new wE;var $g=(e=>(e[e.FrontSide=0]="FrontSide",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.None=3]="None",e))($g||{});const yE=300,hm=.3,_E=.27,RE=.32,AE=[{type:0,shouldShow:TE,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.back-side")},{type:1,shouldShow:e=>e.requiresSide===B.BarcodePdf417?e.detectedGuards>=2:e.detectedGuards>=1,showAfterFrames:3,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:2,shouldShow:e=>e.detectedGuards>=1,showAfterFrames:1,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:3,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function TE(e){if(e.faceBoundingBox==null)return!1;const t=e.faceBoundingBox.left+e.faceBoundingBox.width/2;return(t<hm||t>1-hm)&&e.faceBoundingBox.width<_E+.05&&e.faceBoundingBox.height<RE+.05}async function EE(e,t){const n=Ns(e);if(n==null)return{detectedGuards:0};const r=window.ZXing;if(r){const o=new r.BitmapLuminanceSource(n),a=new r.Common.HybridBinarizer(o),s=new r.BinaryBitmap(a);return kE(e,s,t)}else return{detectedGuards:0}}function kE(e,t,n){const r=window.ZXing;for(const o of n){switch(o){case 90:t=t.rotateCounterClockwise();break;case 180:t=t.rotateCounterClockwise().rotateCounterClockwise();break}const a=r.PDF417.Internal.Detector.detectSingle(t,null,!1);if(a.Points.length>0){const s=r.PDF417.PDF417Reader.decode(t,null,!1);return{decodedResult:s.length>0&&s[0].Text,detectedGuards:a.Points[0].filter(Boolean).length/4,scannedImage:e.toDataURL("image/jpeg")}}}return{detectedGuards:0}}function NE(e){const t=/\d{6}(\d{2})\w+/.exec(e),n=t&&t[1],r={firstName:["02","03"].indexOf(n)!==-1?"DCT":"DAC",lastName:n==="01"?"DAB":"DCS",middleName:"DAD",dateOfBirth:"DBB",street1:"DAG",street2:"DAH",city:"DAI",state:"DAJ",postalCode:"DAK",issuingCountry:"DCG"},o={};for(const a of Object.keys(r)){const s=r[a],c=new RegExp(`\\s*${s}(.+)(\\n|$)`).exec(e);o[a]=c&&c[1].trim()}return o}const jE=8e3,PE=.3,Gg=({delayUntilManualCaptureMs:e=jE,handleCapture:t,handleError:n,labelTakePhoto:r,overlay:o,requiresSide:a,zoomFactor:s,videoConstraints:c})=>{f.useEffect(()=>{_t.loadModels()},[]);const[l,u]=f.useState(!1),d=f.useRef([]),m=async(p,g,C,I)=>{ao({source:p,precreatedCanvas:g,zoomFactor:s});const v=await EE(g,[0]);let x=!1;if(v.decodedResult&&v.scannedImage){const T=NE(v.decodedResult);if(T.firstName&&T.lastName&&T.middleName&&T.dateOfBirth){const E=JSON.stringify({firstName:T.firstName,lastName:T.lastName,middleName:T.middleName,dateOfBirth:T.dateOfBirth});x=d.current.includes(E),x?C==null||C.manualCapture(v.scannedImage):d.current=[...d.current,E]}}let R=[];if(!l&&!x)try{R=await _t.detectFaces(g,{scoreThreshold:PE})}catch(T){n(T,"capture"),u(!0)}let _;return R.length===1&&(_=R[0].box.rescale({width:1/g.width,height:1/g.height})),{successfullyScanned:x,detectedGuards:v.detectedGuards,requiresSide:a,faceBoundingBox:_}},h=(p,g)=>p.successfullyScanned||g.getTriggered().getType()===$g.Capture;return i.jsx(Xs,{handleCapture:({imageSrcs:p,captureMethod:g})=>t(p,g),handleFailed:n,detectInterval:yE,labelTakePhoto:r,videoConstraints:c,triggerConfigs:AE,paramsFromVideoFrame:m,shouldSubmit:h,overlay:o,delayUntilManualCaptureMs:e,zoomFactor:s,scannerType:"barcode"})};class nn extends Error{constructor(t){super(t.message),this.name="MicroblinkError",this.originalError=t}static fromString(t){return new nn({message:t})}}let DE=class{constructor(){this.recognizer=null,this.fullDocumentRecognizer=null,this.recognizerRunner=null,this.initializingRunner=!1,this.captureSide=null,this.idClass=null,this.currentQuad=null,this.currentFullDocumentQuad=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.requireFullBack=!1,this.allowIncompleteBarcode=!1,this.currentInstanceNumber=0}async preload(t="advanced",n=null){if(!_n()&&!this.isLoaded()){if(this.loadSDKPromise==null){const r=new T0(Wg(window.location.host));r.engineLocation=ro("microblink-6-7-2"),r.workerLocation=`${lo}/microblink/6-7-2`,r.allowHelloMessage=!1,r.wasmType=n,r.blinkIdVariant=t==="advanced"?"full":"lightweight",this.loadSDKPromise=cc(async()=>E0(r).then(o=>(this.wasmSDK=o,this.wasmSDK)).catch(o=>{throw this.loadSDKPromise=null,typeof o=="string"?nn.fromString(o):new nn(o)}))}await this.loadSDKPromise}}isLoaded(){return this.wasmSDK!=null}async initialize(t,n=void 0,r={requireFullBack:!1,allowIncompleteBarcode:!1}){return _n()?-1:(this.currentQuad=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.recognizer&&this.recognizerRunner&&this.captureSide===t&&this.idClass===n?this.currentInstanceNumber:(this.currentInstanceNumber++,this.captureSide=t,this.idClass=n,this.requireFullBack=t===B.Back&&r.requireFullBack,this.allowIncompleteBarcode=t===B.Back&&r.allowIncompleteBarcode,new Promise(o=>{this.preload().then(()=>clearTimeout(this.faceApiFallbackTimeout)).then(()=>this.startRunner()).then(()=>o(this.currentInstanceNumber)).catch(a=>typeof a=="string"?nn.fromString(a):new nn(a))})))}async startRunner(){var n;if(!this.captureSide||this.initializingRunner)return;this.initializingRunner=!0;const t=performance.now();if(await this.tearDown(!1),!!this.captureSide){if(this.captureSide===B.Back&&this.allowIncompleteBarcode){this.recognizer=await fc(this.wasmSDK);const r=await this.recognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!0,r.recognitionModeFilter.enableMrzPassport=!1,r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.recognitionModeFilter.enablePhotoId=!1,r.recognitionModeFilter.enableFullDocumentRecognition=!0,r.enableBlurFilter=!0,r.enableGlareFilter=!0,await this.recognizer.updateSettings(r)}else if(this.captureSide===B.BarcodePdf417||this.captureSide===B.Back)this.recognizer=await k0(this.wasmSDK);else if(this.captureSide===B.Front){this.recognizer=await fc(this.wasmSDK);const r=await this.recognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!1,r.recognitionModeFilter.enableMrzPassport=this.idClass==="pp",r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.classifierCallback=o=>{var a;return(a=this.onClassifiedCallback)==null?void 0:a.call(this,o)},r.enableBlurFilter=!0,r.enableGlareFilter=!0,await((n=this.recognizer)==null?void 0:n.updateSettings(r))}else $e(`Unsupported side for Microblink Client: ${this.captureSide}`,"warning");if(this.requireFullBack){this.fullDocumentRecognizer=await fc(this.wasmSDK);const r=await this.fullDocumentRecognizer.currentSettings();r.recognitionModeFilter.enableBarcodeId=!1,r.recognitionModeFilter.enableMrzPassport=!1,r.recognitionModeFilter.enableMrzVisa=!1,r.recognitionModeFilter.enableMrzId=!1,r.recognitionModeFilter.enablePhotoId=!1,r.recognitionModeFilter.enableFullDocumentRecognition=!0,r.enableBlurFilter=!0,r.enableGlareFilter=!0,await this.fullDocumentRecognizer.updateSettings(r)}if(this.requireFullBack||this.allowIncompleteBarcode){const r={onQuadDetection:o=>{this.currentQuad?gm(o)>gm(this.currentQuad)?this.currentFullDocumentQuad=o:(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=o):this.currentQuad=o}};this.recognizerRunner=await iu(this.wasmSDK,(this.requireFullBack?[this.recognizer,this.fullDocumentRecognizer]:[this.recognizer]).filter(o=>o!=null),!0,r)}else{const r={onQuadDetection:o=>{(this.captureSide===B.Front||!this.currentQuad)&&(this.currentQuad=o)}};this.recognizerRunner=await iu(this.wasmSDK,[this.recognizer].filter(o=>o!=null),!1,r)}this.initializingRunner=!1,ee.logAmplitude("government-id.microblink.initialize-runners",{durationSeconds:(performance.now()-t)/1e3,side:this.captureSide,idClass:this.idClass})}}async processImage(t,n){var s,c,l,u,d,m,h,p,g,C,I;if(!this.recognizerRunner||!this.recognizer)return null;this.currentQuad=null,this.currentFullDocumentQuad=null,this.onClassifiedCallback=n;const r=Ns(t);if(r==null)return null;const o=new N0(r,j0.NoRotation,!0);if(!o.imageData)return null;await this.recognizerRunner.processImage(o).catch(async v=>{const x=typeof v=="string"?v:v.message;if((x.indexOf(ru.WORKER_IMAGE_PROCESS_FAILURE)!==-1||x.indexOf(ru.WORKER_RUNNER_DELETED)!==-1)&&!this.attemptedReset)return this.attemptedReset=!0,await this.tearDown(!1),await this.startRunner(),null;throw typeof v=="string"?nn.fromString(v):new nn(v)});const a=(c=(s=this.recognizer)==null?void 0:s.recognizerName)!=null?c:"MicroblinkUnknown";if(this.requireFullBack){const v=await((l=this.recognizer)==null?void 0:l.getResult()),x=await((u=this.fullDocumentRecognizer)==null?void 0:u.getResult());!this.currentFullDocumentQuad&&this.currentQuad&&(v==null?void 0:v.state)===_r.Empty&&(x==null?void 0:x.state)!==_r.Empty&&Wa(this.currentQuad,null)&&(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=null);const R=Wa(this.currentFullDocumentQuad,this.currentQuad)?this.currentFullDocumentQuad:null,_=(v==null?void 0:v.state)!=null&&(v==null?void 0:v.state)!==_r.Empty&&!R;return{recognitionResult:v,detectedQuad:R,hasBlur:(m=(d=x==null?void 0:x.imageAnalysisResult)==null?void 0:d.blurDetected)!=null?m:!1,hasGlare:(p=(h=x==null?void 0:x.imageAnalysisResult)==null?void 0:h.glareDetected)!=null?p:!1,hasIncompleteBack:_,recognizerName:a}}else{const v=await((g=this.recognizer)==null?void 0:g.getResult());let x=this.currentQuad;this.allowIncompleteBarcode&&(x=Wa(this.currentFullDocumentQuad,null)?this.currentFullDocumentQuad:Wa(this.currentQuad,null)?this.currentQuad:null);const R=v!=null&&"imageAnalysisResult"in v?v.imageAnalysisResult:void 0;return{recognitionResult:v,detectedQuad:x,hasBlur:(C=R==null?void 0:R.blurDetected)!=null?C:!1,hasGlare:(I=R==null?void 0:R.glareDetected)!=null?I:!1,hasIncompleteBack:null,recognizerName:a}}}needsTeardown(){return this.recognizerRunner!=null||this.recognizer!=null||this.fullDocumentRecognizer!=null}async tearDownInstance(t){t===this.currentInstanceNumber&&this.tearDown()}async tearDown(t=!0){const n=this.recognizerRunner,r=this.recognizer,o=this.fullDocumentRecognizer;this.recognizer=null,this.recognizerRunner=null,this.fullDocumentRecognizer=null,t&&(this.captureSide=null,this.requireFullBack=!1,this.allowIncompleteBarcode=!1),this.currentQuad=null,this.currentFullDocumentQuad=null;try{await Promise.allSettled([n==null?void 0:n.delete(),r==null?void 0:r.delete(),o==null?void 0:o.delete()])}catch{}}};const pm=[B.Front,B.Back,B.BarcodePdf417],OE=["pp"];let yl={"withpersona.com":{key:null,expiresAt:null},"withpersona-staging.com":{key:null,expiresAt:null},"*.withpersona.com":{key:null,expiresAt:null},"*.withpersona-staging.com":{key:null,expiresAt:null}};try{yl=JSON.parse('{"withpersona.com":{"key":"sRwAAAYPd2l0aHBlcnNvbmEuY29thpUVKHnfmIvdibPDhhXCoq2b8v+l6XteggRLjtZIG/6cdFhQRDWSyQMJRKt1/uBjdWqzh/PNxJcDgpcA2RFxOI9hwsswppr0QJ0qsM6uReNIId3InngR4q4jn15UA/P7MT2okOJg6lnf/0BETmwtliRLI1uKsm8fC5XxxaBvvfVQYV0nBQW/GPGY9KpRJvmYFrfaL0Z6bvowFBV1ivKyK2RY6jnKEA==","expiresAt":"2025-07-30"},"*.withpersona.com":{"key":"sRwAAAYRKi53aXRocGVyc29uYS5jb22q2VqlctXIE+DL6va9pIVBYDMqJu6BCIKcb7LD9fSCMztfF8rD802Ra+xNfBeJB7yxKb+9he18NtOAtgW17bg3CWIZ2D0Nn2sKcL2xwAce1UeeUBQ5OUdK4Bsw6gHFBd3pr5XtoN41zv7rCHSqlJLHQSlLNNLoXEys7lCOGTQTtMZEkRFxJ1B8RKX+mvMvvvPPzmaC+dEbyjvElNxRQhpR1TYZVqQIY+B1","expiresAt":"2025-07-30"},"withpersona-staging.com":{"key":"sRwAAAYXd2l0aHBlcnNvbmEtc3RhZ2luZy5jb22+UDZGEA8YgF3AvK+ukP5gRK2kh/9OnwsB/7ccb2Mlhs6WRQ8osyJdKur51WsEPnrP4blrooTXiF6uLpF6wHfU/sw/4PVFa0wKd4exHBPevosZj7RHxE3y/VRgm/aTBF+Ko8yA+uX6+b/fV5WNt4bnB7conG7Eh3QCsSIWdrkTPz3Od3U6Yg1t+J45HNJk1dm30tdGYWxt32oeEgDUL4n1Fs0h1rMUBJo=","expiresAt":"2025-07-30"},"*.withpersona-staging.com":{"key":"sRwAAAYZKi53aXRocGVyc29uYS1zdGFnaW5nLmNvbd8DgK6h/E1CelG5jE9+jT5ixlAs4qF2PbdWLdXdFMRGFltKBhys2Yb72m6qK9+4JKD+dHQrL8zeFgn3gaTQKWMp0pDoLqsL2THeMDS9nejFY1yuBdOmvibRoCV+YKNRNvDj/cISQfgWvXZJ73ZepsTdPrhApEB6ryabBYJhsceeHp9KL+U5LsVzGBzfNMrVT4jR0u9eSF2dDAUHV+EIDdVZgejZTsxg1w==","expiresAt":"2025-07-30"}}')}catch{}const LE=14*24*60*60*1e3,Wg=e=>{var o;let t=e.split(":")[0];if(!yl[t]&&t.split(".").length===3){const a=t.split(".");a[0]="*",t=a.join(".")}const{key:n,expiresAt:r}=(o=yl[t])!=null?o:{};try{r!=null&&(t==="withpersona.com"||t==="*.withpersona.com")&&new Date(r).getTime()-new Date().getTime()<LE&&$e("Microblink license key is expiring in less than 14 days. Request a renewal in #microblink-persona and update MICROBLINK_LICENSES in .env.","error",{expiresAt:r,domain:t})}catch(a){me(a)}return n},ba=e=>Wg(e)!=null&&A0(),Ca=(e,t=void 0,n,r)=>{if(OE.includes(n)&&e===B.Front||r["inquiry:enable-microblink-web-front-everywhere"]&&e===B.Front||r["inquiry:enable-microblink-web-back-everywhere"]&&e===B.Back)return!0;switch(t){case"US":switch(n){case"dl":case"id":return pm.includes(e);default:return!1}case"CA":if(!r["inquiry:enable-microblink-canada"])return!1;switch(n){case"dl":case"id":return pm.includes(e);default:return!1}case"JP":return!1;default:return!1}},FE={[N.NONE]:"NONE",[N.ALBANIA]:"ALBANIA",[N.ALGERIA]:"ALGERIA",[N.ARGENTINA]:"ARGENTINA",[N.AUSTRALIA]:"AUSTRALIA",[N.AUSTRIA]:"AUSTRIA",[N.AZERBAIJAN]:"AZERBAIJAN",[N.BAHRAIN]:"BAHRAIN",[N.BANGLADESH]:"BANGLADESH",[N.BELGIUM]:"BELGIUM",[N.BOSNIA_AND_HERZEGOVINA]:"BOSNIA_AND_HERZEGOVINA",[N.BRUNEI]:"BRUNEI",[N.BULGARIA]:"BULGARIA",[N.CAMBODIA]:"CAMBODIA",[N.CANADA]:"CANADA",[N.CHILE]:"CHILE",[N.COLOMBIA]:"COLOMBIA",[N.COSTA_RICA]:"COSTA_RICA",[N.CROATIA]:"CROATIA",[N.CYPRUS]:"CYPRUS",[N.CZECHIA]:"CZECHIA",[N.DENMARK]:"DENMARK",[N.DOMINICAN_REPUBLIC]:"DOMINICAN_REPUBLIC",[N.EGYPT]:"EGYPT",[N.ESTONIA]:"ESTONIA",[N.FINLAND]:"FINLAND",[N.FRANCE]:"FRANCE",[N.GEORGIA]:"GEORGIA",[N.GERMANY]:"GERMANY",[N.GHANA]:"GHANA",[N.GREECE]:"GREECE",[N.GUATEMALA]:"GUATEMALA",[N.HONG_KONG]:"HONG_KONG",[N.HUNGARY]:"HUNGARY",[N.INDIA]:"INDIA",[N.INDONESIA]:"INDONESIA",[N.IRELAND]:"IRELAND",[N.ISRAEL]:"ISRAEL",[N.ITALY]:"ITALY",[N.JORDAN]:"JORDAN",[N.KAZAKHSTAN]:"KAZAKHSTAN",[N.KENYA]:"KENYA",[N.KOSOVO]:"KOSOVO",[N.KUWAIT]:"KUWAIT",[N.LATVIA]:"LATVIA",[N.LITHUANIA]:"LITHUANIA",[N.MALAYSIA]:"MALAYSIA",[N.MALDIVES]:"MALDIVES",[N.MALTA]:"MALTA",[N.MAURITIUS]:"MAURITIUS",[N.MEXICO]:"MEXICO",[N.MOROCCO]:"MOROCCO",[N.NETHERLANDS]:"NETHERLANDS",[N.NEW_ZEALAND]:"NEW_ZEALAND",[N.NIGERIA]:"NIGERIA",[N.PAKISTAN]:"PAKISTAN",[N.PANAMA]:"PANAMA",[N.PARAGUAY]:"PARAGUAY",[N.PHILIPPINES]:"PHILIPPINES",[N.POLAND]:"POLAND",[N.PORTUGAL]:"PORTUGAL",[N.PUERTO_RICO]:"PUERTO_RICO",[N.QATAR]:"QATAR",[N.ROMANIA]:"ROMANIA",[N.RUSSIA]:"RUSSIA",[N.SAUDI_ARABIA]:"SAUDI_ARABIA",[N.SERBIA]:"SERBIA",[N.SINGAPORE]:"SINGAPORE",[N.SLOVAKIA]:"SLOVAKIA",[N.SLOVENIA]:"SLOVENIA",[N.SOUTH_AFRICA]:"SOUTH_AFRICA",[N.SPAIN]:"SPAIN",[N.SWEDEN]:"SWEDEN",[N.SWITZERLAND]:"SWITZERLAND",[N.TAIWAN]:"TAIWAN",[N.THAILAND]:"THAILAND",[N.TUNISIA]:"TUNISIA",[N.TURKEY]:"TURKEY",[N.UAE]:"UAE",[N.UGANDA]:"UGANDA",[N.UK]:"UK",[N.UKRAINE]:"UKRAINE",[N.USA]:"USA",[N.VIETNAM]:"VIETNAM",[N.BRAZIL]:"BRAZIL",[N.NORWAY]:"NORWAY",[N.OMAN]:"OMAN",[N.ECUADOR]:"ECUADOR",[N.EL_SALVADOR]:"EL_SALVADOR",[N.SRI_LANKA]:"SRI_LANKA",[N.PERU]:"PERU",[N.URUGUAY]:"URUGUAY",[N.BAHAMAS]:"BAHAMAS",[N.BERMUDA]:"BERMUDA",[N.BOLIVIA]:"BOLIVIA",[N.CHINA]:"CHINA",[N.EUROPEAN_UNION]:"EUROPEAN_UNION",[N.HAITI]:"HAITI",[N.HONDURAS]:"HONDURAS",[N.ICELAND]:"ICELAND",[N.JAPAN]:"JAPAN",[N.LUXEMBOURG]:"LUXEMBOURG",[N.MONTENEGRO]:"MONTENEGRO",[N.NICARAGUA]:"NICARAGUA",[N.SOUTH_KOREA]:"SOUTH_KOREA",[N.VENEZUELA]:"VENEZUELA",[N.AFGHANISTAN]:"AFGHANISTAN",[N.ALAND_ISLANDS]:"ALAND_ISLANDS",[N.AMERICAN_SAMOA]:"AMERICAN_SAMOA",[N.ANDORRA]:"ANDORRA",[N.ANGOLA]:"ANGOLA",[N.ANGUILLA]:"ANGUILLA",[N.ANTARCTICA]:"ANTARCTICA",[N.ANTIGUA_AND_BARBUDA]:"ANTIGUA_AND_BARBUDA",[N.ARMENIA]:"ARMENIA",[N.ARUBA]:"ARUBA",[N.BAILIWICK_OF_GUERNSEY]:"BAILIWICK_OF_GUERNSEY",[N.BAILIWICK_OF_JERSEY]:"BAILIWICK_OF_JERSEY",[N.BARBADOS]:"BARBADOS",[N.BELARUS]:"BELARUS",[N.BELIZE]:"BELIZE",[N.BENIN]:"BENIN",[N.BHUTAN]:"BHUTAN",[N.BONAIRE_SAINT_EUSTATIUS_AND_SABA]:"BONAIRE_SAINT_EUSTATIUS_AND_SABA",[N.BOTSWANA]:"BOTSWANA",[N.BOUVET_ISLAND]:"BOUVET_ISLAND",[N.BRITISH_INDIAN_OCEAN_TERRITORY]:"BRITISH_INDIAN_OCEAN_TERRITORY",[N.BURKINA_FASO]:"BURKINA_FASO",[N.BURUNDI]:"BURUNDI",[N.CAMEROON]:"CAMEROON",[N.CAPE_VERDE]:"CAPE_VERDE",[N.CARIBBEAN_NETHERLANDS]:"CARIBBEAN_NETHERLANDS",[N.CAYMAN_ISLANDS]:"CAYMAN_ISLANDS",[N.CENTRAL_AFRICAN_REPUBLIC]:"CENTRAL_AFRICAN_REPUBLIC",[N.CHAD]:"CHAD",[N.CHRISTMAS_ISLAND]:"CHRISTMAS_ISLAND",[N.COCOS_ISLANDS]:"COCOS_ISLANDS",[N.COMOROS]:"COMOROS",[N.CONGO]:"CONGO",[N.COOK_ISLANDS]:"COOK_ISLANDS",[N.CUBA]:"CUBA",[N.CURACAO]:"CURACAO",[N.DEMOCRATIC_REPUBLIC_OF_THE_CONGO]:"DEMOCRATIC_REPUBLIC_OF_THE_CONGO",[N.DJIBOUTI]:"DJIBOUTI",[N.DOMINICA]:"DOMINICA",[N.EAST_TIMOR]:"EAST_TIMOR",[N.EQUATORIAL_GUINEA]:"EQUATORIAL_GUINEA",[N.ERITREA]:"ERITREA",[N.ESWATINI]:"ESWATINI",[N.ETHIOPIA]:"ETHIOPIA",[N.FALKLAND_ISLANDS]:"FALKLAND_ISLANDS",[N.FAROE_ISLANDS]:"FAROE_ISLANDS",[N.FEDERATED_STATES_OF_MICRONESIA]:"FEDERATED_STATES_OF_MICRONESIA",[N.FIJI]:"FIJI",[N.FRENCH_GUIANA]:"FRENCH_GUIANA",[N.FRENCH_POLYNESIA]:"FRENCH_POLYNESIA",[N.FRENCH_SOUTHERN_TERRITORIES]:"FRENCH_SOUTHERN_TERRITORIES",[N.GABON]:"GABON",[N.GAMBIA]:"GAMBIA",[N.GIBRALTAR]:"GIBRALTAR",[N.GREENLAND]:"GREENLAND",[N.GRENADA]:"GRENADA",[N.GUADELOUPE]:"GUADELOUPE",[N.GUAM]:"GUAM",[N.GUINEA]:"GUINEA",[N.GUINEA_BISSAU]:"GUINEA_BISSAU",[N.GUYANA]:"GUYANA",[N.HEARD_ISLAND_AND_MCDONALD_ISLANDS]:"HEARD_ISLAND_AND_MCDONALD_ISLANDS",[N.IRAN]:"IRAN",[N.IRAQ]:"IRAQ",[N.ISLE_OF_MAN]:"ISLE_OF_MAN",[N.IVORY_COAST]:"IVORY_COAST",[N.JAMAICA]:"JAMAICA",[N.KIRIBATI]:"KIRIBATI",[N.KYRGYZSTAN]:"KYRGYZSTAN",[N.LAOS]:"LAOS",[N.LEBANON]:"LEBANON",[N.LESOTHO]:"LESOTHO",[N.LIBERIA]:"LIBERIA",[N.LIBYA]:"LIBYA",[N.LIECHTENSTEIN]:"LIECHTENSTEIN",[N.MACAU]:"MACAU",[N.MADAGASCAR]:"MADAGASCAR",[N.MALAWI]:"MALAWI",[N.MALI]:"MALI",[N.MARSHALL_ISLANDS]:"MARSHALL_ISLANDS",[N.MARTINIQUE]:"MARTINIQUE",[N.MAURITANIA]:"MAURITANIA",[N.MAYOTTE]:"MAYOTTE",[N.MOLDOVA]:"MOLDOVA",[N.MONACO]:"MONACO",[N.MONGOLIA]:"MONGOLIA",[N.MONTSERRAT]:"MONTSERRAT",[N.MOZAMBIQUE]:"MOZAMBIQUE",[N.MYANMAR]:"MYANMAR",[N.NAMIBIA]:"NAMIBIA",[N.NAURU]:"NAURU",[N.NEPAL]:"NEPAL",[N.NEW_CALEDONIA]:"NEW_CALEDONIA",[N.NIGER]:"NIGER",[N.NIUE]:"NIUE",[N.NORFOLK_ISLAND]:"NORFOLK_ISLAND",[N.NORTHERN_CYPRUS]:"NORTHERN_CYPRUS",[N.NORTHERN_MARIANA_ISLANDS]:"NORTHERN_MARIANA_ISLANDS",[N.NORTH_KOREA]:"NORTH_KOREA",[N.NORTH_MACEDONIA]:"NORTH_MACEDONIA",[N.PALAU]:"PALAU",[N.PALESTINE]:"PALESTINE",[N.PAPUA_NEW_GUINEA]:"PAPUA_NEW_GUINEA",[N.PITCAIRN]:"PITCAIRN",[N.REUNION]:"REUNION",[N.RWANDA]:"RWANDA",[N.SAINT_BARTHELEMY]:"SAINT_BARTHELEMY",[N.SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA]:"SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA",[N.SAINT_KITTS_AND_NEVIS]:"SAINT_KITTS_AND_NEVIS",[N.SAINT_LUCIA]:"SAINT_LUCIA",[N.SAINT_MARTIN]:"SAINT_MARTIN",[N.SAINT_PIERRE_AND_MIQUELON]:"SAINT_PIERRE_AND_MIQUELON",[N.SAINT_VINCENT_AND_THE_GRENADINES]:"SAINT_VINCENT_AND_THE_GRENADINES",[N.SAMOA]:"SAMOA",[N.SAN_MARINO]:"SAN_MARINO",[N.SAO_TOME_AND_PRINCIPE]:"SAO_TOME_AND_PRINCIPE",[N.SCHENGEN_AREA]:"SCHENGEN_AREA",[N.SENEGAL]:"SENEGAL",[N.SEYCHELLES]:"SEYCHELLES",[N.SIERRA_LEONE]:"SIERRA_LEONE",[N.SINT_MAARTEN]:"SINT_MAARTEN",[N.SOLOMON_ISLANDS]:"SOLOMON_ISLANDS",[N.SOMALIA]:"SOMALIA",[N.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS]:"SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS",[N.SOUTH_SUDAN]:"SOUTH_SUDAN",[N.SUDAN]:"SUDAN",[N.SURINAME]:"SURINAME",[N.SVALBARD_AND_JAN_MAYEN]:"SVALBARD_AND_JAN_MAYEN",[N.SYRIA]:"SYRIA",[N.TAJIKISTAN]:"TAJIKISTAN",[N.TANZANIA]:"TANZANIA",[N.TOGO]:"TOGO",[N.TOKELAU]:"TOKELAU",[N.TONGA]:"TONGA",[N.TRINIDAD_AND_TOBAGO]:"TRINIDAD_AND_TOBAGO",[N.TURKMENISTAN]:"TURKMENISTAN",[N.TURKS_AND_CAICOS_ISLANDS]:"TURKS_AND_CAICOS_ISLANDS",[N.TUVALU]:"TUVALU",[N.UNITED_STATES_MINOR_OUTLYING_ISLANDS]:"UNITED_STATES_MINOR_OUTLYING_ISLANDS",[N.UZBEKISTAN]:"UZBEKISTAN",[N.VANUATU]:"VANUATU",[N.VATICAN_CITY]:"VATICAN_CITY",[N.VIRGIN_ISLANDS_BRITISH]:"VIRGIN_ISLANDS_BRITISH",[N.VIRGIN_ISLANDS_US]:"VIRGIN_ISLANDS_US",[N.WALLIS_AND_FUTUNA]:"WALLIS_AND_FUTUNA",[N.WESTERN_SAHARA]:"WESTERN_SAHARA",[N.YEMEN]:"YEMEN",[N.YUGOSLAVIA]:"YUGOSLAVIA",[N.ZAMBIA]:"ZAMBIA",[N.ZIMBABWE]:"ZIMBABWE",[N.COUNT]:"???"},Yg=e=>FE[e],ME={[J.NONE]:"NONE",[J.ALABAMA]:"ALABAMA",[J.ALASKA]:"ALASKA",[J.ALBERTA]:"ALBERTA",[J.ARIZONA]:"ARIZONA",[J.ARKANSAS]:"ARKANSAS",[J.AUSTRALIAN_CAPITAL_TERRITORY]:"AUSTRALIAN_CAPITAL_TERRITORY",[J.BRITISH_COLUMBIA]:"BRITISH_COLUMBIA",[J.CALIFORNIA]:"CALIFORNIA",[J.COLORADO]:"COLORADO",[J.CONNECTICUT]:"CONNECTICUT",[J.DELAWARE]:"DELAWARE",[J.DISTRICT_OF_COLUMBIA]:"DISTRICT_OF_COLUMBIA",[J.FLORIDA]:"FLORIDA",[J.GEORGIA]:"GEORGIA",[J.HAWAII]:"HAWAII",[J.IDAHO]:"IDAHO",[J.ILLINOIS]:"ILLINOIS",[J.INDIANA]:"INDIANA",[J.IOWA]:"IOWA",[J.KANSAS]:"KANSAS",[J.KENTUCKY]:"KENTUCKY",[J.LOUISIANA]:"LOUISIANA",[J.MAINE]:"MAINE",[J.MANITOBA]:"MANITOBA",[J.MARYLAND]:"MARYLAND",[J.MASSACHUSETTS]:"MASSACHUSETTS",[J.MICHIGAN]:"MICHIGAN",[J.MINNESOTA]:"MINNESOTA",[J.MISSISSIPPI]:"MISSISSIPPI",[J.MISSOURI]:"MISSOURI",[J.MONTANA]:"MONTANA",[J.NEBRASKA]:"NEBRASKA",[J.NEVADA]:"NEVADA",[J.NEW_BRUNSWICK]:"NEW_BRUNSWICK",[J.NEW_HAMPSHIRE]:"NEW_HAMPSHIRE",[J.NEW_JERSEY]:"NEW_JERSEY",[J.NEW_MEXICO]:"NEW_MEXICO",[J.NEW_SOUTH_WALES]:"NEW_SOUTH_WALES",[J.NEW_YORK]:"NEW_YORK",[J.NORTHERN_TERRITORY]:"NORTHERN_TERRITORY",[J.NORTH_CAROLINA]:"NORTH_CAROLINA",[J.NORTH_DAKOTA]:"NORTH_DAKOTA",[J.NOVA_SCOTIA]:"NOVA_SCOTIA",[J.OHIO]:"OHIO",[J.OKLAHOMA]:"OKLAHOMA",[J.ONTARIO]:"ONTARIO",[J.OREGON]:"OREGON",[J.PENNSYLVANIA]:"PENNSYLVANIA",[J.QUEBEC]:"QUEBEC",[J.QUEENSLAND]:"QUEENSLAND",[J.RHODE_ISLAND]:"RHODE_ISLAND",[J.SASKATCHEWAN]:"SASKATCHEWAN",[J.SOUTH_AUSTRALIA]:"SOUTH_AUSTRALIA",[J.SOUTH_CAROLINA]:"SOUTH_CAROLINA",[J.SOUTH_DAKOTA]:"SOUTH_DAKOTA",[J.TASMANIA]:"TASMANIA",[J.TENNESSEE]:"TENNESSEE",[J.TEXAS]:"TEXAS",[J.UTAH]:"UTAH",[J.VERMONT]:"VERMONT",[J.VICTORIA]:"VICTORIA",[J.VIRGINIA]:"VIRGINIA",[J.WASHINGTON]:"WASHINGTON",[J.WESTERN_AUSTRALIA]:"WESTERN_AUSTRALIA",[J.WEST_VIRGINIA]:"WEST_VIRGINIA",[J.WISCONSIN]:"WISCONSIN",[J.WYOMING]:"WYOMING",[J.YUKON]:"YUKON",[J.CIUDAD_DE_MEXICO]:"CIUDAD_DE_MEXICO",[J.JALISCO]:"JALISCO",[J.NEWFOUNDLAND_AND_LABRADOR]:"NEWFOUNDLAND_AND_LABRADOR",[J.NUEVO_LEON]:"NUEVO_LEON",[J.BAJA_CALIFORNIA]:"BAJA_CALIFORNIA",[J.CHIHUAHUA]:"CHIHUAHUA",[J.GUANAJUATO]:"GUANAJUATO",[J.GUERRERO]:"GUERRERO",[J.MEXICO]:"MEXICO",[J.MICHOACAN]:"MICHOACAN",[J.NEW_YORK_CITY]:"NEW_YORK_CITY",[J.TAMAULIPAS]:"TAMAULIPAS",[J.VERACRUZ]:"VERACRUZ",[J.CHIAPAS]:"CHIAPAS",[J.COAHUILA]:"COAHUILA",[J.DURANGO]:"DURANGO",[J.GUERRERO_COCULA]:"GUERRERO_COCULA",[J.GUERRERO_JUCHITAN]:"GUERRERO_JUCHITAN",[J.GUERRERO_TEPECOACUILCO]:"GUERRERO_TEPECOACUILCO",[J.GUERRERO_TLACOAPA]:"GUERRERO_TLACOAPA",[J.GUJARAT]:"GUJARAT",[J.HIDALGO]:"HIDALGO",[J.KARNATAKA]:"KARNATAKA",[J.KERALA]:"KERALA",[J.KHYBER_PAKHTUNKHWA]:"KHYBER_PAKHTUNKHWA",[J.MADHYA_PRADESH]:"MADHYA_PRADESH",[J.MAHARASHTRA]:"MAHARASHTRA",[J.MORELOS]:"MORELOS",[J.NAYARIT]:"NAYARIT",[J.OAXACA]:"OAXACA",[J.PUEBLA]:"PUEBLA",[J.PUNJAB]:"PUNJAB",[J.QUERETARO]:"QUERETARO",[J.SAN_LUIS_POTOSI]:"SAN_LUIS_POTOSI",[J.SINALOA]:"SINALOA",[J.SONORA]:"SONORA",[J.TABASCO]:"TABASCO",[J.TAMIL_NADU]:"TAMIL_NADU",[J.YUCATAN]:"YUCATAN",[J.ZACATECAS]:"ZACATECAS",[J.AGUASCALIENTES]:"AGUASCALIENTES",[J.BAJA_CALIFORNIA_SUR]:"BAJA_CALIFORNIA_SUR",[J.CAMPECHE]:"CAMPECHE",[J.COLIMA]:"COLIMA",[J.QUINTANA_ROO_BENITO_JUAREZ]:"QUINTANA_ROO_BENITO_JUAREZ",[J.UINTANA_ROO]:"UINTANA_ROO",[J.QUINTANA_ROO_SOLIDARIDAD]:"QUINTANA_ROO_SOLIDARIDAD",[J.TLAXCALA]:"TLAXCALA",[J.QUINTANA_ROO_COZUMEL]:"QUINTANA_ROO_COZUMEL",[J.SAO_PAOLO]:"SAO_PAOLO",[J.RIO_DE_JANEIRO]:"RIO_DE_JANEIRO",[J.RIO_GRANDE_DO_SUL]:"RIO_GRANDE_DO_SUL",[J.NORTHWEST_TERRITORIES]:"NORTHWEST_TERRITORIES",[J.NUNAVUT]:"NUNAVUT",[J.PRINCE_EDWARD_ISLAND]:"PRINCE_EDWARD_ISLAND",[J.DISTRITO_FEDERAL]:"DISTRITO_FEDERAL",[J.MARANHAO]:"MARANHAO",[J.MATO_GROSSO]:"MATO_GROSSO",[J.MINAS_GERAIS]:"MINAS_GERAIS",[J.PARA]:"PARA",[J.PARANA]:"PARANA",[J.PERNAMBUCO]:"PERNAMBUCO",[J.SANTA_CATARINA]:"SANTA_CATARINA",[J.ANDHRA_PRADESH]:"ANDHRA_PRADESH",[J.CEARA]:"CEARA",[J.GOIAS]:"GOIAS",[J.GUERRERO_ACAPULCO_DE_JUAREZ]:"GUERRERO_ACAPULCO_DE_JUAREZ",[J.HARYANA]:"HARYANA",[J.SERGIPE]:"SERGIPE",[J.COUNT]:"COUNT"},zg=e=>ME[e],VE={[Ne.NONE]:"NONE",[Ne.CONSULAR_ID]:"CONSULAR_ID",[Ne.DL]:"DL",[Ne.DL_PUBLIC_SERVICES_CARD]:"DL_PUBLIC_SERVICES_CARD",[Ne.EMPLOYMENT_PASS]:"EMPLOYMENT_PASS",[Ne.FIN_CARD]:"FIN_CARD",[Ne.ID]:"ID",[Ne.MULTIPURPOSE_ID]:"MULTIPURPOSE_ID",[Ne.MYKAD]:"MYKAD",[Ne.MYKID]:"MYKID",[Ne.MYPR]:"MYPR",[Ne.MYTENTERA]:"MYTENTERA",[Ne.PAN_CARD]:"PAN_CARD",[Ne.PROFESSIONAL_ID]:"PROFESSIONAL_ID",[Ne.PUBLIC_SERVICES_CARD]:"PUBLIC_SERVICES_CARD",[Ne.RESIDENCE_PERMIT]:"RESIDENCE_PERMIT",[Ne.RESIDENT_ID]:"RESIDENT_ID",[Ne.TEMPORARY_RESIDENCE_PERMIT]:"TEMPORARY_RESIDENCE_PERMIT",[Ne.VOTER_ID]:"VOTER_ID",[Ne.WORK_PERMIT]:"WORK_PERMIT",[Ne.IKAD]:"IKAD",[Ne.MILITARY_ID]:"MILITARY_ID",[Ne.MYKAS]:"MYKAS",[Ne.SOCIAL_SECURITY_CARD]:"SOCIAL_SECURITY_CARD",[Ne.HEALTH_INSURANCE_CARD]:"HEALTH_INSURANCE_CARD",[Ne.PASSPORT]:"PASSPORT",[Ne.S_PASS]:"S_PASS",[Ne.ADDRESS_CARD]:"ADDRESS_CARD",[Ne.ALIEN_ID]:"ALIEN_ID",[Ne.ALIEN_PASSPORT]:"ALIEN_PASSPORT",[Ne.GREEN_CARD]:"GREEN_CARD",[Ne.MINORS_ID]:"MINORS_ID",[Ne.POSTAL_ID]:"POSTAL_ID",[Ne.PROFESSIONAL_DL]:"PROFESSIONAL_DL",[Ne.TAX_ID]:"TAX_ID",[Ne.WEAPON_PERMIT]:"WEAPON_PERMIT",[Ne.VISA]:"VISA",[Ne.BORDER_CROSSING_CARD]:"BORDER_CROSSING_CARD",[Ne.DRIVER_CARD]:"DRIVER_CARD",[Ne.GLOBAL_ENTRY_CARD]:"GLOBAL_ENTRY_CARD",[Ne.MYPOLIS]:"MYPOLIS",[Ne.NEXUS_CARD]:"NEXUS_CARD",[Ne.PASSPORT_CARD]:"PASSPORT_CARD",[Ne.PROOF_OF_AGE_CARD]:"PROOF_OF_AGE_CARD",[Ne.REFUGEE_ID]:"REFUGEE_ID",[Ne.TRIBAL_ID]:"TRIBAL_ID",[Ne.VETERAN_ID]:"VETERAN_ID",[Ne.CITIZENSHIP_CERTIFICATE]:"CITIZENSHIP_CERTIFICATE",[Ne.MY_NUMBER_CARD]:"MY_NUMBER_CARD",[Ne.CONSULAR_PASSPORT]:"CONSULAR_PASSPORT",[Ne.MINORS_PASSPORT]:"MINORS_PASSPORT",[Ne.MINORS_PUBLIC_SERVICES_CARD]:"MINORS_PUBLIC_SERVICES_CARD",[Ne.DRIVING_PRIVILEGE_CARD]:"DRIVING_PRIVILEGE_CARD",[Ne.ASYLUM_REQUEST]:"ASYLUM_REQUEST",[Ne.DRIVER_QUALIFICATION_CARD]:"DRIVER_QUALIFICATION_CARD",[Ne.PROVISIONAL_DL]:"PROVISIONAL_DL",[Ne.REFUGEE_PASSPORT]:"REFUGEE_PASSPORT",[Ne.SPECIAL_ID]:"SPECIAL_ID",[Ne.UNIFORMED_SERVICES_ID]:"UNIFORMED_SERVICES_ID",[Ne.IMMIGRANT_VISA]:"IMMIGRANT_VISA",[Ne.CONSULAR_VOTER_ID]:"CONSULAR_VOTER_ID",[Ne.TWIC_CARD]:"TWIC_CARD",[Ne.EXIT_ENTRY_PERMIT]:"EXIT_ENTRY_PERMIT",[Ne.MAINLAND_TRAVEL_PERMIT_TAIWAN]:"MAINLAND_TRAVEL_PERMIT_TAIWAN",[Ne.NBI_CLEARANCE]:"NBI_CLEARANCE",[Ne.PROOF_OF_REGISTRATION]:"PROOF_OF_REGISTRATION",[Ne.TEMPORARY_PROTECTION_PERMIT]:"TEMPORARY_PROTECTION_PERMIT",[Ne.COUNT]:"COUNT"},Kg=e=>VE[e],fm=85.6/54,gm=e=>{const t=Math.min(e.topLeft.x,e.bottomLeft.x);return Math.max(e.topRight.x,e.bottomRight.x)-t},Wa=(e,t)=>{if(!e||e.detectionStatus===Qn.Failed)return!1;const n=Math.min(e.topLeft.y,e.topRight.y),r=Math.max(e.bottomLeft.y,e.bottomRight.y),o=Math.min(e.topLeft.x,e.bottomLeft.x),a=Math.max(e.topRight.x,e.bottomRight.x),s=(a-o)/(r-n);if(!(s>fm*.8&&s<fm*1.2))return!1;if(t&&t.detectionStatus!==Qn.Failed){const l=Math.min(t.topLeft.y,t.topRight.y),u=Math.max(t.bottomLeft.y,t.bottomRight.y),d=Math.min(t.topLeft.x,t.bottomLeft.x),m=Math.max(t.topRight.x,t.bottomRight.x);if(!(l>n*.95&&u<r*1.05&&d>o*.95&&m<a*1.05))return!1}return!0},Pi=new DE,BE=100,UE={[B.Front]:.6,[B.Back]:.3,[B.FrontOrBack]:.6,[B.BarcodePdf417]:.4,[B.PassportSignature]:.4},HE={[B.Front]:.9,[B.Back]:.75,[B.FrontOrBack]:.9,[B.BarcodePdf417]:.9,[B.PassportSignature]:.9},qE=[{type:0,shouldShow:Vd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>po(B.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>lc(B.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:5,shouldShow:e=>Bd(e)&&!po(B.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],$E=[{type:0,shouldShow:Vd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>po(B.BarcodePdf417,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>lc(B.BarcodePdf417,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],GE=[{type:0,shouldShow:Vd,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:3,shouldShow:e=>po(B.Back,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:e=>lc(B.Back,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:5,shouldShow:e=>Bd(e)&&!po(B.Front,e),showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:6,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],WE={[B.Front]:qE,[B.Back]:GE,[B.BarcodePdf417]:$E,[B.FrontOrBack]:void 0,[B.PassportSignature]:void 0},YE=new zn({type:7,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("government-id-scanner.hint.processing",{defaultValue:e("government-id-scanner.hint.hold-still")})});function Vd(e){return(e.glareRatio>2e-4||e.hasGlare)&&zE(e)}function zE(e){var t;return((t=e.microblinkResult)==null?void 0:t.state)===_r.Valid}function po(e,t){var o;const n=t.detectedQuad;if(!n)return!1;const r=Math.max(n.topRight.x-n.topLeft.x,n.bottomRight.x-n.bottomLeft.x);return r>0&&r/t.videoWidth<UE[e]?!0:((o=t.detectedQuad)==null?void 0:o.detectionStatus)===Qn.CameraTooFar}function lc(e,t){var o;const n=t.detectedQuad;if(!n)return!1;const r=Math.max(n.topRight.x-n.topLeft.x,n.bottomRight.x-n.bottomLeft.x);return r>0&&r/t.videoWidth>HE[e]?!0:((o=t.detectedQuad)==null?void 0:o.detectionStatus)===Qn.CameraTooClose}function Bd(e){var t,n;return((t=e.detectedQuad)==null?void 0:t.detectionStatus)!=null&&[Qn.DocumentTooCloseToCameraEdge,Qn.DocumentPartiallyVisible].includes((n=e.detectedQuad)==null?void 0:n.detectionStatus)}function KE(e,t){const n=e!=="pp",r=t.microblinkResult&&"mrz"in t.microblinkResult?t.microblinkResult.mrz.verified===!0:!1;return n||r}const QE=8e3,ys=({delayUntilManualCaptureMs:e=QE,handleCapture:t,labelTakePhoto:n,overlay:r,videoConstraints:o,requiresSide:a,governmentIdClass:s,handleError:c,zoomFactor:l})=>{let u;const d=f.useRef(!1),[m,h]=f.useState(!1);va(async()=>{try{const R=performance.now();await Pi.initialize(a,s),u=performance.now(),ee.logAmplitude("government-id.microblink.initialization",{initializationTime:(u-R)/1e3,side:a,idClass:s})}catch(R){c(R,"load")}},()=>{Pi.tearDown(),u=void 0},[a]);const p=async(R,_,T,E)=>{var O,U,M;ao({source:R,precreatedCanvas:_,zoomFactor:l});const V=R.videoWidth/l,D=R.videoHeight/l;try{const Y=_.toDataURL(ho,Ss),F=performance.now();let H=!0;h(!1),setTimeout(()=>{H&&h(!0)},1e3);const q=await Pi.processImage(_,X=>{X&&setTimeout(()=>{if(H&&a===B.Front){const se=performance.now()-F;v({currentTrigger:E.getTriggered().getType(),detectedQuad:null,microblinkResult:null,glareRatio:eo(_),videoWidth:V,videoHeight:D,imageDataUri:Y,hasGlare:null,processingTime:se},bt.Auto,null),H=!1}},1e3)});H=!1;const W=q==null?void 0:q.recognizerName;if(a===B.Front){const X=q==null?void 0:q.recognitionResult,oe=q==null?void 0:q.detectedQuad,se=(O=q==null?void 0:q.hasGlare)!=null?O:null,Ee=performance.now()-F;return{currentTrigger:E.getTriggered().getType(),detectedQuad:oe!=null?oe:null,microblinkResult:X,microblinkRecognizerName:W,glareRatio:eo(_),videoWidth:V,videoHeight:D,hasGlare:se,imageDataUri:Y,processingTime:Ee}}else if(a===B.BarcodePdf417||a===B.Back){const X=q==null?void 0:q.recognitionResult,oe=(U=q==null?void 0:q.detectedQuad)!=null?U:null,se=(M=q==null?void 0:q.hasGlare)!=null?M:null,Ee=performance.now()-F;return{currentTrigger:E.getTriggered().getType(),detectedQuad:oe,microblinkResult:X,microblinkRecognizerName:W,glareRatio:eo(_),videoWidth:V,videoHeight:D,hasGlare:se,imageDataUri:Y,processingTime:Ee}}}catch(Y){c(Y,"capture")}return{currentTrigger:E.getTriggered().getType(),glareRatio:eo(_),videoWidth:V,videoHeight:D,microblinkRecognizerName:null,detectedQuad:null,microblinkResult:null,hasGlare:null,imageDataUri:null,processingTime:null}},g=(R,_)=>{var T;return((T=R.microblinkResult)==null?void 0:T.state)===_r.Valid&&!po(a,R)&&!lc(a,R)&&!Bd(R)&&KE(s,R)},C=(R,_,T)=>({x:R.x/_,y:R.y/T}),I=(R,_,T)=>({bottomLeft:C(R.bottomLeft,_,T),bottomRight:C(R.bottomRight,_,T),topLeft:C(R.topLeft,_,T),topRight:C(R.topRight,_,T)}),v=async(R,_,T)=>{var V;if(d.current)return;const E=[];if(a===B.BarcodePdf417||a===B.Back){const D=R.microblinkResult;if(D&&(E.push({type:"pdf417",value:(V=D.barcodeData)==null?void 0:V.stringData}),R.detectedQuad)){const O=I(R.detectedQuad,R.videoWidth,R.videoHeight);E.push({type:"card",value:{barcode:{"top-left":O.topLeft,"top-right":O.topRight,"bottom-left":O.bottomLeft,"bottom-right":O.bottomRight}}})}}else if(a===B.Front){const D=R.microblinkResult;if(D){if(E.push({type:"viz",value:{"name-first":D.firstName,"name-last":D.lastName,"identification-number":D.documentNumber,address:D.address,birthdate:D.dateOfBirth.originalString,"expiration-date":D.dateOfExpiry.originalString}}),s==="pp"){const O=D.mrz;E.push({type:"mrz",value:O.rawMRZString})}if(R.detectedQuad){const O=I(R.detectedQuad,R.videoWidth,R.videoHeight);E.push({type:"card",value:{front:{"top-left":O==null?void 0:O.topLeft,"top-right":O==null?void 0:O.topRight,"bottom-left":O==null?void 0:O.bottomLeft,"bottom-right":O==null?void 0:O.bottomRight}}})}E.push({type:"classification",value:{type:D.classInfo.documentType?Kg(D.classInfo.documentType):null,country:D.classInfo.country?Yg(D.classInfo.country):null,region:D.classInfo.region?zg(D.classInfo.region):null}})}}ee.logAmplitude("government-id.microblink.capture",{processingTime:R.processingTime/1e3,captureTime:u!=null?(performance.now()-u)/1e3:void 0,side:a,idClass:s,captureMethod:_,parsedViz:E.find(D=>D.type==="viz")!=null,parsedMrz:E.find(D=>D.type==="mrz")!=null,parsedCard:E.find(D=>D.type==="card")!=null,parsedClassification:E.find(D=>D.type==="classification")!=null,parsedPdf417:E.find(D=>D.type==="pdf417")!=null}),await t([R.imageDataUri],_,T,E,R.microblinkRecognizerName),d.current=!0},x=WE[a];return i.jsx(Xs,{handleCapture:({captureMethod:R,params:_,cameraInspectionData:T})=>v(_,R,T),handleFailed:c,detectInterval:BE,labelTakePhoto:n,videoConstraints:o,triggerConfigs:x,paramsFromVideoFrame:p,shouldSubmit:g,overlay:r,delayUntilManualCaptureMs:e,triggerOverride:m?YE:null,zoomFactor:l,scannerType:"governmentId",disableCaptureClient:!0})};var Qg=(e=>(e[e.DetectedGlare=0]="DetectedGlare",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.MoveCloser=3]="MoveCloser",e[e.None=4]="None",e))(Qg||{});const ZE=100,bm=.3,JE=.27,XE=.32,e5=.25,t5=.3,n5=.37,i5=[{type:0,shouldShow:r5,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:1,shouldShow:e=>e.currentTrigger===2,showAfterFrames:12,hideAfterFrames:999999,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:2,shouldShow:Ud,showAfterFrames:3,hideAfterFrames:2,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:3,shouldShow:Zg,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:4,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function r5(e){return e.glareRatio>2e-4&&(Zg(e)||Ud(e))}function Zg(e){const{faceBoundingBox:t}=e;if(t==null)return!1;const n=1.5,r=new yp((t.left-.5)*n+.5,(t.top-.5)*n+.5,(t.right-.5)*n+.5,(t.bottom-.5)*n+.5);return Ud({...e,faceBoundingBox:r})}function Ud({isPassport:e,faceBoundingBox:t}){if(t==null)return!1;if(e)return t.left+t.width/2<e5&&t.width<t5+.05&&t.height<n5+.05;{const n=t.left+t.width/2;return(n<bm||n>1-bm)&&t.width<JE+.05&&t.height<XE+.05}}const o5=.3,Jg=({delayUntilManualCaptureMs:e=0,handleCapture:t,handleError:n,isPassport:r,labelTakePhoto:o,overlay:a,videoConstraints:s,zoomFactor:c})=>{const[l,u]=f.useState(!1),d=en("inquiry:disable-gov-id-face-api");f.useEffect(()=>{if(!d)try{_t.loadModels()}catch{u(!0)}},[]);const m=async(p,g,C,I)=>{ao({source:p,precreatedCanvas:g,zoomFactor:c});let v=[];if(!l&&_t.isLoaded()&&_t.isMediaLoaded(p))try{v=await _t.detectFaces(g,{scoreThreshold:o5})}catch(R){n(R,"capture"),u(!0)}let x;return v.length===1&&(x=v[0].box.rescale({width:1/g.width,height:1/g.height})),{currentTrigger:I.getTriggered().getType(),faceBoundingBox:x!=null?x:null,glareRatio:eo(g),isPassport:r}},h=(p,g)=>g.getTriggered().getType()===Qg.Capture;return i.jsx(Xs,{handleCapture:({imageSrcs:p,captureMethod:g,cameraInspectionData:C})=>t(p,g,C),handleFailed:n,detectInterval:ZE,labelTakePhoto:o,videoConstraints:s,triggerConfigs:i5,paramsFromVideoFrame:m,shouldSubmit:h,overlay:a,delayUntilManualCaptureMs:e,scannerType:"governmentId",zoomFactor:c})},a5=b("div").withConfig({displayName:"InquiryGovernmentIdCaptureView__Header",componentId:"sc-1y4wzo1-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[4]),s5=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=z(),o=bi(r,["government-id.capture.title","government-id.title"],e,t,n);return i.jsx(dt,{children:i.jsx(te,{children:o})})},c5=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=z(),r=bi(n,["government-id.capture.prompt"],null,e,t);return i.jsx(at,{children:i.jsx(te,{children:r})})};function l5({localizations:e,featureFlags:t,governmentIdClass:n,handleCapture:r,handleError:o,requiresSide:a,selectedCountryCode:s,shouldUseMicroblink:c,videoConstraints:l,webCameraManualCaptureDelayMs:u,barcodeCameraManualCaptureDelayMs:d,zoomFactor:m}){const h=i.jsx(qg,{governmentIdClass:n,requiresSide:a,mirrored:l.facingMode==="user",hideBackOverlay:(t==null?void 0:t["inquiry:remove-back-overlay-for-non-us-govid"])&&s!=="US"});let p;return a===B.BarcodePdf417?c?p=i.jsx(ys,{delayUntilManualCaptureMs:d,governmentIdClass:n,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],overlay:h,requiresSide:a,videoConstraints:l,zoomFactor:m}):p=i.jsx(Gg,{delayUntilManualCaptureMs:d,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],videoConstraints:l,requiresSide:a,overlay:h,zoomFactor:m}):p=c?i.jsx(ys,{delayUntilManualCaptureMs:u,governmentIdClass:n,handleCapture:r,handleError:o,labelTakePhoto:e["btn-take-photo"],overlay:h,requiresSide:a,videoConstraints:l,zoomFactor:m}):i.jsx(Jg,{delayUntilManualCaptureMs:u,handleCapture:r,handleError:o,isPassport:n==="pp"||n==="ipp",labelTakePhoto:e["btn-take-photo"],overlay:h,videoConstraints:l,zoomFactor:m}),i.jsxs("div",{children:[i.jsxs(a5,{children:[i.jsx(s5,{countryCode:s,governmentIdClass:n,governmentIdSide:a}),i.jsx(c5,{governmentIdClass:n,governmentIdSide:a})]}),p]})}const d5=b(te).withConfig({displayName:"GovernmentIdHelpModal__HelpModalPrompt",componentId:"sc-72hke3-0"})(["font-size:14px;line-height:21px;"]),u5=b(te).withConfig({displayName:"GovernmentIdHelpModal__HelpModalWarning",componentId:"sc-72hke3-1"})(["background-color:#fff7de;padding:"," ",";font-size:14px;line-height:21px;"],S.Spacing[3],S.Spacing[4]),m5=b.div.withConfig({displayName:"GovernmentIdHelpModal__HelpModalImageContainer",componentId:"sc-72hke3-2"})(["display:flex;justify-content:space-around;"]),h5=b(te).withConfig({displayName:"GovernmentIdHelpModal__HintListMarkdown",componentId:"sc-72hke3-3"})(["font-size:14px;line-height:21px;ul{border-spacing 0 8px;display:table;li{display:table-row;}li::before{display:table-cell;padding-right:12px;}}"]),p5=b(ge).withConfig({displayName:"GovernmentIdHelpModal__StickyButton",componentId:"sc-72hke3-4"})(["position:sticky;bottom:0;"]),jc=({isOpen:e,onClose:t,title:n,prompt:r,warning:o,pictograph:a,hints:s,continueBtnLabel:c,styles:l})=>{var u,d,m,h,p,g,C,I,v;return i.jsxs(Si,{isOpen:e,onClose:t,styles:(u=l==null?void 0:l.base)==null?void 0:u.modal,"data-test":"help-dialog","aria-labelledby":"help-dialog__title","aria-describedby":"help-dialog__description",children:[i.jsx(dt,{id:"help-dialog__title",styles:(d=l==null?void 0:l.base)==null?void 0:d.titleStyle,children:i.jsx(te,{children:n})}),r&&i.jsxs(i.Fragment,{children:[i.jsx(at,{id:"help-dialog__description",styles:(m=l==null?void 0:l.base)==null?void 0:m.textStyle,children:i.jsx(d5,{children:r})}),i.jsx(Je,{height:2.5})]}),o&&i.jsxs(i.Fragment,{children:[i.jsx(at,{id:"help-dialog__warning",children:i.jsx(u5,{children:o})}),i.jsx(Je,{height:2.5})]}),i.jsx(m5,{children:i.jsx(pe,{$primaryColor:A((p=(h=l==null?void 0:l.captureHintIcon)==null?void 0:h.fill)==null?void 0:p.color),$strokeColor:A((C=(g=l==null?void 0:l.captureHintIcon)==null?void 0:g.stroke)==null?void 0:C.color),children:a})}),i.jsx(Je,{height:2}),i.jsx(at,{id:"help-dialog__description",styles:(I=l==null?void 0:l.base)==null?void 0:I.textStyle,children:i.jsx(h5,{children:s})}),i.jsx(p5,{type:"button",id:"help-dialog__btn",onClick:t,styles:(v=l==null?void 0:l.buttons)==null?void 0:v.primary,children:c})]})},dc=1,Hd=1,f5=8,g5=3,Ir=14,Xg=e=>{var t,n;return(n=k((t=e==null?void 0:e.border)==null?void 0:t.radius))!=null?n:`${f5}px`},hi=e=>{var t,n,r;return(r=k((n=(t=e==null?void 0:e.border)==null?void 0:t.width)==null?void 0:n.top))!=null?r:`${g5}px`},b5=e=>{var t,n;return(n=A((t=e==null?void 0:e.border)==null?void 0:t.color))!=null?n:Le.white},C5=e=>`calc(${Xg(e)} - ${hi(e)})`,x5=(e,t)=>{var n,r;return(r=A((n=t==null?void 0:t.stroke)==null?void 0:n.color))!=null?r:e.iconColorPrimary},uc=.8,no=.8,mc=.4247,v5=b("div").withConfig({displayName:"ScannerOverlay__CropPositioner",componentId:"sc-msiqna-0"})(["position:absolute;top:0;left:0;right:0;bottom:0;"]),I5=b("div").withConfig({displayName:"ScannerOverlay__OverlayCrop",componentId:"sc-msiqna-1"})(["position:relative;height:100%;width:100%;overflow:hidden;display:flex;flex-direction:column;"]),eb=e=>{var r,o,a,s;const t=f.useRef(),n=A((a=(o=(r=e==null?void 0:e.styles)==null?void 0:r.captureOverlayHeaderButton)==null?void 0:o.stroke)==null?void 0:a.color);return i.jsxs(i.Fragment,{children:[i.jsx(S5,{svgColor:n}),i.jsx(v5,{ref:(s=e.overlayRef)!=null?s:t,children:i.jsx(I5,{children:i.jsx(V5,{...e})})})]})},S5=Co(["nav#","{background-color:unset;svg{path{","}}}"],Fd,({svgColor:e})=>`stroke: ${e!=null?e:Le.white};`),Cm=b("div").withConfig({displayName:"ScannerOverlay__BarcodeImageContainer",componentId:"sc-msiqna-2"})(["position:absolute;margin-left:20%;margin-right:20%;padding-top:17%;width:60%;top:50%;transform:translateY(-50%);"]),w5=Ln(["0%{opacity:0;}100%{opacity:1;}"]),y5=b.div.withConfig({displayName:"ScannerOverlay__ImageContainerWrapper",componentId:"sc-msiqna-3"})(["position:relative;overflow:visible;z-index:-1;"]),_5=b("div").withConfig({displayName:"ScannerOverlay__ImageContainer",componentId:"sc-msiqna-4"})(["position:relative;overflow:hidden;transition:all ","s;"],dc),R5=b("div").withConfig({displayName:"ScannerOverlay__Positioner",componentId:"sc-msiqna-5"})(["",";transform:translate(-50%,-50%) ",";width:100%;position:absolute;top:50%;left:50%;& > div,& > img{margin:auto;}"],({mirrored:e})=>e&&$(["transform:scale(-1,1);"]),({mirrored:e})=>e?"scale(-1, 1)":""),A5=b("div").withConfig({displayName:"ScannerOverlay__ImageContainerSizer",componentId:"sc-msiqna-6"})(["top:0;left:0;padding-bottom:",";overflow:hidden;"],({isShortBarcodeOverlay:e})=>e?"35%":"66%"),xm=b(Bl).withConfig({displayName:"ScannerOverlay__IdBarcodeGenericGuideStyled",componentId:"sc-msiqna-7"})(["top:0;left:0;position:absolute;width:100%;height:100%;"]),Cr=b("div").withConfig({displayName:"ScannerOverlay__SimpleGuide",componentId:"sc-msiqna-8"})(["padding-bottom:65.97%;width:100%;"]),vm=b("div").withConfig({displayName:"ScannerOverlay__OverlayPortrait",componentId:"sc-msiqna-9"})(["backface-visibility:hidden;height:100%;width:100%;overflow:hidden;transform:",";position:",";top:",";"],({isReverseSide:e})=>e?"rotateY(180deg)":"scale(1)",({isReverseSide:e})=>e?"absolute":null,({isReverseSide:e})=>e?0:null),T5=b("div").withConfig({displayName:"ScannerOverlay__FlipCard",componentId:"sc-msiqna-10"})(["position:absolute;top:calc( "," - "," );background:",";width:calc(80% + 2 * (","));margin-left:calc(10% - ",");margin-right:calc(10% - ",");perspective:1000px;transition:all ","s;"],({collapsed:e,isShortBarcodeOverlay:t})=>e?"50%":t?"35%":"25%",({styles:e})=>hi(e),({collapsed:e})=>e?"black":"transparent",({styles:e})=>hi(e),({styles:e})=>hi(e),({styles:e})=>hi(e),dc),E5=b("div").withConfig({displayName:"ScannerOverlay__FlipCardInner",componentId:"sc-msiqna-11"})(["border:",";border-radius:",";position:relative;width:100%;height:100%;transform-style:preserve-3d;overflow:",";transition:transform ","s;box-shadow:0 0 1px 1000px rgba(0,0,0,1);"],({styles:e})=>`${hi(e)} solid ${b5(e)}`,({styles:e})=>Xg(e),({flipped:e})=>e?null:"hidden",Hd),k5=b("div").withConfig({displayName:"ScannerOverlay__AboveFrameHintContainer",componentId:"sc-msiqna-12"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:-16px;transform:translateY(-100%);border-radius:4px;padding:8px 16px;background-color:rgba(255,255,255,0.15);color:",";width:100%;text-align:center;font-size:14px;line-height:150%;z-index:1;transition:opacity ",";opacity:",";"],Le.white,et.Fast,({visible:e})=>e?1:0),N5=b("div").withConfig({displayName:"ScannerOverlay__UnderOverlayComponentsWrapper",componentId:"sc-msiqna-13"})(["position:absolute;bottom:-16px;transform:translateY(100%);z-index:1;transition:opacity ",";opacity:",";width:100%;"],et.Fast,({visible:e})=>e?1:0),j5=b("div").withConfig({displayName:"ScannerOverlay__NewHintContainer",componentId:"sc-msiqna-14"})(["display:flex;flex-direction:row;justify-content:center;align-items:center;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:",";text-align:center;font-size:14px;line-height:150%;z-index:1;width:80%;transition:opacity ",";opacity:",";"],Le.white,et.Fast,({visible:e})=>e?1:0),P5=b("div").withConfig({displayName:"ScannerOverlay__NewHintContainerInner",componentId:"sc-msiqna-15"})(["background-color:rgba(0,0,0,0.5);border-radius:4px;padding:8px 16px;min-width:50%;"]),Im=b("div").withConfig({displayName:"ScannerOverlay__CaptureFrameLabel",componentId:"sc-msiqna-16"})(["align-items:flex-start;background:rgb(230,230,230);color:",";padding:","px 12px;display:flex;border-radius:",";height:100%;width:100%;transition:",";"],({styles:e})=>e!=null?A(e==null?void 0:e["text-color"].base.base):S.Color.CoreSlate800,Ir,({innerBorderRadius:e})=>e,({collapsed:e})=>`height ${Hd}s,
    border-radius ${dc}s steps(1, ${e?"jump-end":"jump-start"})`),Sm=b.div.withConfig({displayName:"ScannerOverlay__CaptureFrameLabelInner",componentId:"sc-msiqna-17"})(["display:flex;align-items:center;font-size:14px;line-height:150%;img,svg{height:auto !important;width:40px !important;}svg{path{mix-blend-mode:normal !important;}}"]),wm=b.span.withConfig({displayName:"ScannerOverlay__PictographContainer",componentId:"sc-msiqna-18"})(["flex:1 0 auto;height:auto !important;width:40px !important;"]),ym=b("div").withConfig({displayName:"ScannerOverlay__CaptureFrameLabelText",componentId:"sc-msiqna-19"})(["align-self:center;margin-left:12px;"]),D5=Ln(["0%{opacity:100;}100%{opacity:0;}"]),O5=Ln(["0%{stroke-dashoffset:400;}100%{stroke-dashoffset:0;}"]);b.div.withConfig({displayName:"ScannerOverlay__ScanSvgWrapper",componentId:"sc-msiqna-20"})(["position:absolute;inset:0;width:100%;height:100%;z-index:9999;"]);b.rect.withConfig({displayName:"ScannerOverlay__AnimatedBorder",componentId:"sc-msiqna-21"})(["width:",";height:",";x:",";y:",";path-length:400;fill:none;stroke:",";stroke-width:",";stroke-linecap:round;stroke-dasharray:100 300;animation:"," 4s ease-in,"," 4s linear infinite;"],({styles:e})=>`calc(100% - ${hi(e)})`,({styles:e})=>`calc(100% - ${hi(e)})`,({styles:e})=>`calc(${hi(e)} / 2)`,({styles:e})=>`calc(${hi(e)} / 2)`,({theme:e,styles:t})=>x5(e,t),({styles:e})=>hi(e),w5,O5);const L5=b("div").withConfig({displayName:"ScannerOverlay__Flash",componentId:"sc-msiqna-22"})(["position:absolute;top:0;left:0;height:100%;width:100%;background-color:",";opacity:0;animation:"," 1s;"],Le.white,D5),F5=b("img").withConfig({displayName:"ScannerOverlay__CapturedImage",componentId:"sc-msiqna-23"})(["width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]),M5=b.div.withConfig({displayName:"ScannerOverlay__RealCaptureWindow",componentId:"sc-msiqna-24"})(["position:absolute;border-radius:5px 5px 0 0;overflow:hidden;top:","%;left:","%;height:","%;width:","%;"],({visibleToRealCaptureWindowHeightRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowWidthRatio:e})=>(100-100/e)/2,({visibleToRealCaptureWindowHeightRatio:e})=>100/e,({visibleToRealCaptureWindowWidthRatio:e})=>100/e),Pc=window.requestIdleCallback!=null,V5=e=>{var he,de,Ie,ye,je,ce,Q;const t=f.useRef(),[n,r]=f.useState(e.collapsed||e.expandOnMount),[o,a]=f.useState(n?0:"auto"),[s,c]=f.useState(!n),[l,u]=f.useState(!n),[d,m]=f.useState(!((he=e.captureOverlay)!=null&&he.overlay)),[h]=z(),p=f.useRef(),g=f.useRef(),[C,I]=f.useState(e.flipped),[v,x]=f.useState("auto"),[R,_]=f.useState(null),[T,E]=f.useState(e.isCameraReady),V=C5((de=e==null?void 0:e.styles)==null?void 0:de.captureBox),[D,O]=f.useState(e.hint),U=e.isShortBarcodeOverlay&&e.hint||e.prompt,M=e.isShortBarcodeOverlay?null:e.hint,Y=!1;f.useEffect(()=>{var K;((K=e.hint)==null?void 0:K.length)>0&&O(e.hint)},[e.hint]),f.useEffect(()=>{var be,Oe,ze,re,le;const K=e.captureOverlay?(be=t.current)==null?void 0:be.clientHeight:(ze=(Oe=e.previewViewfinderRef)==null?void 0:Oe.current)==null?void 0:ze.scrollHeight;F()?e.collapsed&&!n?(a(K+"px"),Pc?window.requestIdleCallback(()=>{var Ue;a(0),_(`${-(((Ue=p.current)==null?void 0:Ue.scrollHeight)+Ir*2)/2}px`),r(!0)},{timeout:500}):setTimeout(()=>{var Ue;a(0),_(`${-(((Ue=p.current)==null?void 0:Ue.scrollHeight)+Ir*2)/2}px`),r(!0)},50)):(a(e.collapsed?0:K||"auto"),e.collapsed&&_(`${-(((re=p.current)==null?void 0:re.scrollHeight)+Ir*2)/2}px`),r(e.collapsed)):e.expandOnMount?(a(K),r(!1)):(u(!0),(le=e.onReady)==null||le.call(e))},[e.collapsed]),f.useEffect(()=>{var K;F()&&e.flipped&&!C&&(x(`${((K=p.current)==null?void 0:K.scrollHeight)+Ir*2}px`),Pc?window.requestIdleCallback(()=>{var Oe;const be=((Oe=g.current)==null?void 0:Oe.scrollHeight)+Ir*2;x(`${be}px`),_(`-${be/2}px`),I(!0)},{timeout:500}):setTimeout(()=>{var Oe;const be=((Oe=g.current)==null?void 0:Oe.scrollHeight)+Ir*2;x(`${be}px`),_(`-${be/2}px`),I(!0)},50))},[e.flipped]),f.useEffect(()=>{if(Pc){const K=window.requestIdleCallback(()=>{E(e.isCameraReady)},{timeout:500});return()=>window.cancelIdleCallback(K)}else{const K=setTimeout(()=>{E(e.isCameraReady)},50);return()=>window.clearTimeout(K)}},[e.isCameraReady]);const F=Vi(),H=()=>{if(e.capturing)return i.jsx(L5,{})},q=!(d&&l)||e.capturing||e.hasDetectedQuad||!!M,W=e.isShortBarcodeOverlay,X=()=>e.governmentIdClass==null?i.jsx(Cr,{}):e.requiresSide===B.PassportSignature?i.jsx(Cr,{}):["nric"].includes(e.governmentIdClass)?i.jsx(Cr,{}):["pp","visa","ipp"].includes(e.governmentIdClass)?i.jsx(wl,{mirrored:e.mirrored,hideGuide:e.capturing}):e.requiresSide===B.Front?i.jsx(Sl,{mirrored:e.mirrored,hideGuide:q,highlightCorners:e.hasDetectedQuad}):e.requiresSide===B.Back?i.jsx(vl,{mirrored:e.mirrored,hideGuide:q,highlightCorners:e.hasDetectedQuad}):e.requiresSide===B.BarcodePdf417?e.isShortBarcodeOverlay?i.jsx(Il,{mirrored:e.mirrored,hideGuide:q}):($e("Used full barcode overlay for BarcodePdf417; this should never happen.","warning"),i.jsx(Cr,{children:e.scanning&&i.jsx(Cm,{children:i.jsx(xm,{preserveAspectRatio:"none"})})})):i.jsx(Cr,{}),oe=K=>{switch(K){case wn.Passport:return i.jsx(wl,{mirrored:!1,hideGuide:q});case wn.IdFront:return i.jsx(Sl,{mirrored:!1,hideGuide:q,highlightCorners:e.hasDetectedQuad});case wn.IdFrontRightPortrait:return i.jsx(Mg,{mirrored:!1,hideGuide:q,highlightCorners:e.hasDetectedQuad});case wn.IdBack:return i.jsx(vl,{mirrored:!1,hideGuide:q,highlightCorners:e.hasDetectedQuad});case wn.Barcode:return e.isShortBarcodeOverlay?i.jsx(Il,{mirrored:!1,hideGuide:q}):i.jsx(Cr,{children:e.scanning&&i.jsx(Cm,{children:i.jsx(xm,{preserveAspectRatio:"none"})})});case wn.CornersOnly:return i.jsx(Fg,{mirrored:!1,highlightCorners:e.hasDetectedQuad});case wn.Empty:default:return i.jsx(Cr,{})}},se=n?{transform:`translate3d(0, ${R!=null?R:"-50%"}, 0)`}:void 0,Se=C?{transform:"rotateY(180deg)"}:void 0,Ee=f.useMemo(()=>!B5(e.assets,e.requiresSide,e.governmentIdClass),[e.assets,e.requiresSide,e.governmentIdClass]);return i.jsxs(T5,{collapsed:n,collapsedVerticalOffset:R,isShortBarcodeOverlay:e.isShortBarcodeOverlay,style:se,children:[i.jsx(k5,{visible:!!U&&!n&&l,children:i.jsx("div",{role:"alert",children:e.videoReady?U||(W?D:null):h("government-id.capture.loading-camera")})}),Y,i.jsxs(E5,{flipped:C,styles:(Ie=e.styles)==null?void 0:Ie.captureBox,style:Se,children:[i.jsxs(vm,{isReverseSide:!1,children:[i.jsxs(y5,{children:[i.jsx(M5,{ref:e.overlayCaptureWindowRef,visibleToRealCaptureWindowWidthRatio:no,visibleToRealCaptureWindowHeightRatio:W?mc:uc,children:e.capturedImageUrl&&i.jsx(F5,{alt:e.captureFrameLabel,"data-test":"scanner-overlay__captured-image",src:e.capturedImageUrl})}),i.jsxs(_5,{ref:e.previewViewfinderRef,style:{height:o},onTransitionEnd:()=>{var K;a(n?0:"auto"),c(!n),u(!0),(K=e.onReady)==null||K.call(e)},children:[!W&&i.jsx(j5,{visible:!!M&&!n&&l,children:i.jsx(P5,{role:"alert",children:M||D})}),e.captureOverlay?i.jsxs(A5,{isShortBarcodeOverlay:W,ref:t,children:[i.jsx(R5,{mirrored:e.mirrored,children:i.jsx(qe,{customImage:e.captureOverlay.overlay,onLoad:()=>m(!0),environment:e.environment,alt:"ID capture overlay",children:oe(e.captureOverlay["overlay-fallback"])})}),H()]}):i.jsxs(i.Fragment,{children:[X(),H()]})]})]}),i.jsx(Im,{collapsed:n,style:{height:v},styles:(ye=e.styles)==null?void 0:ye.hint,innerBorderRadius:V,children:i.jsxs(Sm,{ref:p,children:[Ee&&i.jsx(wm,{"aria-hidden":"true",children:i.jsx(_m,{assets:e.assets,currentSide:e.requiresSide,governmentIdClass:e.governmentIdClass,styles:(je=e.styles)==null?void 0:je.captureHintIcon})}),i.jsx(ym,{children:e.captureFrameLabel})]})})]}),i.jsx(vm,{isReverseSide:!0,"aria-hidden":"true",children:i.jsx(Im,{collapsed:n,style:{height:v},styles:(ce=e.styles)==null?void 0:ce.hint,innerBorderRadius:V,children:i.jsxs(Sm,{ref:g,children:[Ee&&i.jsx(wm,{"aria-hidden":"true",children:i.jsx(_m,{assets:e.assets,currentSide:e.reverseSide,governmentIdClass:e.governmentIdClass,styles:(Q=e.styles)==null?void 0:Q.captureHintIcon})}),i.jsx(ym,{children:e.reverseCaptureFrameLabel})]})})})]}),e.renderUnderOverlayComponents&&i.jsx(N5,{visible:!n,children:e.renderUnderOverlayComponents()})]})},_m=({assets:e,currentSide:t,governmentIdClass:n,styles:r})=>{var o,a,s,c;if(n==="pp"||n==="ipp")switch(t){case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A((o=r==null?void 0:r.fill)==null?void 0:o.color),$strokeColor:A((a=r==null?void 0:r.stroke)==null?void 0:a.color),"aria-hidden":"true",children:i.jsx(ss,{})})});default:return i.jsx(qe,{customImage:e["passport-front-pictograph"],alt:"passport front pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A((s=r==null?void 0:r.fill)==null?void 0:s.color),$strokeColor:A((c=r==null?void 0:r.stroke)==null?void 0:c.color),"aria-hidden":"true",children:i.jsx(qh,{})})})}switch(t){case B.Back:return i.jsx(qe,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Wh,{style:{height:"46px",width:"74px"}})})});case B.BarcodePdf417:return i.jsx(qe,{customImage:e["barcode-pdf417-pictograph"],alt:"Barcode PDF417 pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(Gh,{style:{height:"46px",width:"74px"}})})});case B.Front:case B.FrontOrBack:return i.jsx(qe,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx($h,{style:{height:"46px",width:"74px"}})})});case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(pe,{style:{lineHeight:0},$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color),"aria-hidden":"true",children:i.jsx(ss,{})})});default:return null}},B5=(e,t,n)=>{var o,a,s,c,l;let r;return n==="pp"||n==="ipp"?t===B.PassportSignature?r=e["passport-signature-pictograph"]:r=e["passport-front-pictograph"]:t===B.Back?r=e["id-back-pictograph"]:t===B.BarcodePdf417?r=e["barcode-pdf417-pictograph"]:t===B.Front||t===B.FrontOrBack?r=e["id-front-pictograph"]:t===B.PassportSignature&&(r=e["passport-signature-pictograph"]),((c=(s=(a=(o=r==null?void 0:r.styles)==null?void 0:o.width)==null?void 0:a.base)==null?void 0:s.base)==null?void 0:c.value)===0||((l=r==null?void 0:r.attributes)==null?void 0:l.width)==="0px"};var tb=(e=>(e[e.FrontSide=0]="FrontSide",e[e.Capture=1]="Capture",e[e.HoldStill=2]="HoldStill",e[e.DetectedLowLight=3]="DetectedLowLight",e[e.None=4]="None",e))(tb||{});const U5=300,Rm=.3,H5=.27,q5=.32,$5=[{type:0,shouldShow:W5,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.back-side")},{type:1,shouldShow:e=>e.requiresSide===B.BarcodePdf417?e.detectedGuards>=2:e.detectedGuards>=1,showAfterFrames:3,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:2,shouldShow:e=>e.detectedGuards>=1,showAfterFrames:1,hideAfterFrames:4,getPrompt:({t:e})=>e("barcode-scanner.hint.hold-still")},{type:3,shouldShow:G5,showAfterFrames:3,hideAfterFrames:10,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:4,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function G5(e){return ec(e.luminosityData)}function W5(e){if(e.faceBoundingBox==null)return!1;const t=e.faceBoundingBox.left+e.faceBoundingBox.width/2;return(t<Rm||t>1-Rm)&&e.faceBoundingBox.width<H5+.05&&e.faceBoundingBox.height<q5+.05}async function Y5(e,t,n={x:0,y:0,width:e.width,height:e.height}){const r=e.getContext("2d",{willReadFrequently:!0});if(r==null||n.width<=0||n.height<=0)return{detectedGuards:0};const o=r==null?void 0:r.getImageData(n.x,n.y,n.width,n.height),a=window.ZXing;if(o&&a){const s=new a.BitmapLuminanceSource(o),c=new a.Common.HybridBinarizer(s),l=new a.BinaryBitmap(c);return z5(e,l,t)}else return{detectedGuards:0}}function z5(e,t,n){const r=window.ZXing;for(const o of n){switch(o){case 90:t=t.rotateCounterClockwise();break;case 180:t=t.rotateCounterClockwise().rotateCounterClockwise();break}const a=r.PDF417.Internal.Detector.detectSingle(t,null,!1);if(a.Points.length>0){const s=r.PDF417.PDF417Reader.decode(t,null,!1);return{decodedResult:s.length>0&&s[0].Text,detectedGuards:a.Points[0].filter(Boolean).length/4,scannedImage:e.toDataURL("image/jpeg")}}}return{detectedGuards:0}}function K5(e){const t=/\d{6}(\d{2})\w+/.exec(e),n=t&&t[1],r={firstName:["02","03"].indexOf(n)!==-1?"DCT":"DAC",lastName:n==="01"?"DAB":"DCS",middleName:"DAD",dateOfBirth:"DBB",street1:"DAG",street2:"DAH",city:"DAI",state:"DAJ",postalCode:"DAK",issuingCountry:"DCG"},o={};for(const a of Object.keys(r)){const s=r[a],c=new RegExp(`\\s*${s}(.+)(\\n|$)`).exec(e);o[a]=c&&c[1].trim()}return o}const nb={default:$(["cursor:pointer;color:",";"," ",""],({theme:e,variant:t="basic"})=>["basic","primary"].includes(t)?e.color.text.primary:e.color.variants[t].default,({theme:e})=>$(["background-color:",";border-radius:",";"],e.color.background.primary,e.element.borderRadius),({theme:e,disabled:t})=>t&&$(["background-color:",";color:",";cursor:default;svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],e.color.background.primary,e.color.text.disabled,e.color.text.disabled)),hover:$(["transition-duration:",";color:",";background-color:",";",""],et.Fast,({theme:e,variant:t="basic"})=>t==="basic"?e.color.text.primary:e.color.variants[t].default,({theme:e,variant:t="basic"})=>t==="basic"?e.color.background.secondary:e.color.variants[t].highlightLight,({theme:e,disabled:t,variant:n="basic"})=>!t&&$(["svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],n==="basic"?e.color.text.primary:e.color.variants[n].default)),active:$(["transition-duration:",";color:",";background-color:",";",""],et.Fast,({theme:e,variant:t="basic"})=>t==="basic"?e.color.text.inverse:e.color.variants[t].default,({theme:e,variant:t="basic"})=>t==="basic"?e.color.primary.brand:e.color.variants[t].highlightLight,({theme:e,disabled:t,variant:n="basic"})=>!t&&$(["svg *{stroke:",";}svg.pds-icon{*{stroke:unset;}*[stroke]{stroke:currentColor;}}"],n==="basic"?e.color.text.primary:e.color.variants[n].default))};var Oa=(e=>(e[e.Light=300]="Light",e[e.Regular=400]="Regular",e[e.Medium=500]="Medium",e[e.Bold=700]="Bold",e))(Oa||{});const Q5=b("div").withConfig({displayName:"ClickableItem__Container",componentId:"sc-1fytc0l-0"})(["",";",";transition-duration:",";box-sizing:border-box;width:100%;display:flex;align-items:center;justify-content:space-between;font-weight:",";"],Di.lgBold,nb.default,et.Fast,Oa.Medium),Z5=b("div").withConfig({displayName:"ClickableItem__PrefixAndLabelContainer",componentId:"sc-1fytc0l-1"})(["display:flex;flex-wrap:none;align-items:center;"]),J5=b("div").withConfig({displayName:"ClickableItem__PrefixIconContainer",componentId:"sc-1fytc0l-2"})(["display:flex;align-items:center;svg{height:20px;width:20px;color:",";& *[stroke]{stroke:",";}}margin-right:",";"],S.Color.CoreSlate1000,S.Color.CoreSlate1000,S.Spacing[2]),X5=b("div").withConfig({displayName:"ClickableItem__SuffixIconContainer",componentId:"sc-1fytc0l-3"})(["display:flex;align-items:center;svg{height:16px;width:16px;color:",";& *[stroke]{stroke:",";}}margin-left:",";"],S.Color.CoreSlate1000,S.Color.CoreSlate1000,S.Spacing[3]),e6=({isVisible:e=!0,prefixIcon:t,suffixIcon:n,children:r,routeTo:o,...a})=>{const s=e?i.jsxs(Q5,{...a,children:[i.jsxs(Z5,{children:[t!=null&&i.jsx(J5,{children:t}),r]}),n!=null&&i.jsx(X5,{children:n})]}):null;return o?i.jsx(P0,{to:o,children:s}):s},qd={withShadow:1,sticky:2,loadingOverlays:5,tooltip:10,floatingBar:100,topNav:1e3,dropdown:1001,layeredDropdown:1002,banner:2e3,sideNav:3e3,topNavTooltip:3001,modal:1e4,modalElevated:10001,modalDropdown:10010,supportChat:10011,toast:1e5},t6=b("div").withConfig({displayName:"Tooltip__Popover",componentId:"sc-1gu1o1j-0"})(["box-shadow:"," !important;border:0 !important;border-radius:",";padding:",";background-color:",";z-index:"," !important;pointer-events:",";"],Mi.High,({theme:e})=>e.element.borderRadius,S.Spacing[2],({theme:e})=>e.color.background.primary,qd.toast,({noPointerEvents:e})=>e?"none":"unset"),n6=({children:e,tooltip:t,hideArrow:n,className:r,disabled:o,trigger:a,enablePopoverClickEvents:s,...c})=>o||!t?i.jsx(i.Fragment,{children:e}):i.jsx(D0,{trigger:a,...c,tooltip:({arrowRef:l,tooltipRef:u,getArrowProps:d,getTooltipProps:m,placement:h})=>i.jsxs(t6,{id:"dashboard__popover",className:`tooltip-container ${r!=null?r:""}`,noPointerEvents:a==="hover",...m({ref:u}),onClick:p=>{s||(p.preventDefault(),p.stopPropagation())},children:[!n&&i.jsx("div",{className:"tooltip-arrow",...d({ref:l,"data-placement":h})}),t]}),children:({getTriggerProps:l,triggerRef:u})=>i.jsx("span",{...l({ref:u,className:"trigger"}),children:e})}),i6=b(n6).withConfig({displayName:"Dropdown__DropdownTooltip",componentId:"sc-1xz1m7n-0"})(["padding:",";margin-left:","px;z-index:",";border-radius:",";"],S.Spacing[2],Sn*-1,({elevation:e})=>e!=null?e:qd.dropdown,({theme:e})=>e.element.borderRadius),r6=b("div").attrs(()=>({role:"dropdown"})).withConfig({displayName:"Dropdown__DropdownContainer",componentId:"sc-1xz1m7n-1"})(["min-width:","px;display:flex;flex-direction:column;"],Sn*10),ib=b(e6).attrs(()=>({tabIndex:0})).withConfig({displayName:"Dropdown__DropdownItem",componentId:"sc-1xz1m7n-2"})(["height:",";padding:0 "," 0 ",";min-width:120px;font-weight:",";:hover,:focus{",";}"],({theme:e})=>e.element.height.md,S.Spacing[6],S.Spacing[2],Oa.Medium,nb.hover);ib.defaultProps={variant:"primary"};const $d=({className:e,children:t,items:n,placement:r="right-end",renderItem:o,triggerOnHover:a,elevation:s=qd.dropdown})=>{const[c,l]=f.useState(!1),u=f.useRef(null),d=f.useCallback(()=>{u.current!=null&&(clearTimeout(u.current),u.current=null),l(!0)},[]),m=f.useCallback(()=>{u.current=window.setTimeout(()=>l(!1),75)},[]);bd(m);const h=n.filter(p=>!p.hidden);return h.length===0?null:i.jsx(i6,{elevation:s,className:e,placement:r,hideArrow:!0,tooltipShown:c,tooltip:i.jsx(r6,{onMouseOver:a?d:void 0,onMouseOut:a?m:void 0,children:h.map(o)}),children:t({isOpen:c,openDropdown:d,closeDropdown:m})})};$d.Item=ib;const o6=5e3,a6=100,s6=2e3,c6="https://t.withpersona.com";class Tn{constructor(){this.queue=[]}static getInstance(){return Tn.instance||(Tn.instance=new Tn),Tn.instance}static isCloudRunEnabled(t){return t==null?void 0:t["inquiry:enable-te-cloud-run"]}static track(t,n){if(!Tn.isCloudRunEnabled(n))return;const r=l6(t.pathName,t.stepName),o="data"in t?Array.isArray(t.data)?t.data:[t.data]:[],a=new Date().toISOString();let s;o.length===0?s=[{type:t.type,created_at:a,data:{...r}}]:s=o.map(c=>({type:t.type,created_at:a,data:{...r,...c}})),this.getInstance().enqueueEvents(s)}updateQueue(t){return this.queue.length>=o6?(me(new Error("TrackingEventsClient: Cannot enqueue anymore TrackingEvents"),"info"),!1):(this.queue.push(...t),!0)}enqueueEvents(t){this.updateQueue(t)&&(this.throttled||(this.throttled=AC(async()=>{if(!this.isAuthenticated())return;const n=[...this.queue];this.queue=[];const r=await this.sendAllEvents(n);r.length>0&&this.updateQueue(r)},s6)),this.throttled())}async sendAllEvents(t){if(t.length<=0)return[];const n=TC(t,a6),r=await Promise.allSettled(n.map(a=>this.sendBatch(a))),o=r.map((a,s)=>a.status==="rejected"?n[s]:[]).filter(a=>a.length>0);if(o.length>0){const a=r.filter(s=>s.status==="rejected").map(s=>{var c;return(c=s.reason)==null?void 0:c.message});me(new Error(`Promises were rejected - ${a.join(", ")}`),"warning")}return wa(o)}async sendBatch(t){const n=await sC(JSON.stringify({events:t}));return ci.post(`${c6}/t`,{e:n},{headers:{Authorization:`Bearer ${ne==null?void 0:ne.accessToken}`}})}isAuthenticated(){return ne.accessToken!=null}}function l6(e,t){const n=e.split("/");return{step_name:t,page_name:n.slice(2).map(r=>EC(r)).join(".")}}const d6=[Ae.Document,Ae.Integration,Ae.GovernmentId,Ae.Selfie,Ae.VerifyWithPersona];function u6(e,t){return e==="/verify"||e==="/inquiry/ui"&&t&&d6.includes(t)&&t!==Ae.Ui}const rb=()=>{var a;const{pathname:e}=Dr(),t=ot(s=>s.inquiry.inquiry),n=ot(s=>s.inquiry.featureFlags),r=(a=t==null?void 0:t.attributes)==null?void 0:a["next-step"],o=f.useRef({width:0,height:0});return{videoDimensionsUpdated:(s,c)=>{s!=null&&c!=null&&(o.current.width!==s||o.current.height!==c)&&(Tn.track({type:"inquiry.camera.dimensions",data:{old_width:o.current.width,old_height:o.current.height,new_width:s,new_height:c},stepName:r==null?void 0:r.name,pathName:e},n),o.current={width:s,height:c})}}},m6=b.button.withConfig({displayName:"BaseScanner__TorchButton",componentId:"sc-16dj2ru-0"})(["background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;height:40px;width:40px;svg{height:100%;width:100%;}",""],({active:e})=>e&&$(["svg path{fill:white;}"])),Am=b.button.withConfig({displayName:"BaseScanner__HelpButton",componentId:"sc-16dj2ru-1"})(["background:none;color:white;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;height:40px;svg{margin-right:4px;height:16px;width:16px;}"]),Tm=b.div.withConfig({displayName:"BaseScanner__ButtonRowHelp",componentId:"sc-16dj2ru-2"})(["display:flex;align-items:center;justify-content:space-around;button:disabled{display:none;}z-index:",";"],yt.footer),h6=720,p6=b("div").withConfig({displayName:"BaseScanner__VideoWrapper",componentId:"sc-16dj2ru-3"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],Le.black,Ra,({flowType:e})=>e===wt.Inline?`
      height: ${h6}px;
    `:`
      @media ${jt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }
    `,j.isDashboardFLE&&"height: 100%;"),f6=450,g6=b.div.withConfig({displayName:"BaseScanner__VideoWrapperColumnSizer",componentId:"sc-16dj2ru-4"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${f6}px`:null),b6=({isShortBarcodeOverlay:e})=>e?"35%":"25%",C6=b("div").withConfig({displayName:"BaseScanner__VideoWrapperInner",componentId:"sc-16dj2ru-5"})(["background:",";border-radius:8px 8px 0 0;overflow:hidden;position:absolute;top:",";width:100%;padding-bottom:",";margin-top:",";video{position:absolute;transform:scaleX(",");object-fit:cover;height:100%;width:100%;}"],Le.black,e=>b6(e),e=>`${1/e.overlayAspectRatio*100}%`,e=>`${-(1/e.overlayAspectRatio*(1-e.visibleToRealCaptureWindowHeightRatio)/2)*100}%`,e=>e.mirrored?-1:1),x6=b.div.withConfig({displayName:"BaseScanner__ButtonsArea",componentId:"sc-16dj2ru-6"})(["position:absolute;bottom:40px;width:100%;display:flex;flex-direction:column;z-index:",";"],yt.footer),v6=b.div.withConfig({displayName:"BaseScanner__ButtonRowMobile",componentId:"sc-16dj2ru-7"})(["width:100%;display:flex;align-items:center;justify-content:space-between;"]),I6=b.div.withConfig({displayName:"BaseScanner__ButtonRowDesktop",componentId:"sc-16dj2ru-8"})(["margin-left:10%;margin-right:10%;width:80%;display:flex;align-items:center;justify-content:space-between;z-index:",";"],yt.footer),S6=b.div.withConfig({displayName:"BaseScanner__AuxButtons",componentId:"sc-16dj2ru-9"})(["position:absolute;align-items:center;display:flex;right:10%;line-height:1;"]),w6=b.button.withConfig({displayName:"BaseScanner__CircleCaptureButton",componentId:"sc-16dj2ru-10"})(["background:none;cursor:pointer;margin-left:auto;margin-right:auto;circle{transition-duration:",";}visibility:",";:hover:not(:disabled){#btn-outer{stroke:",";}#btn-inner{fill:",";}}:active:not(:disabled){#btn-outer{stroke:",";}#btn-inner{fill:",";}}:disabled circle{#btn-outer{stroke:",";}#btn-inner{fill:",";}}"],et.Fast,({manualCaptureEnabled:e})=>e?"visibile":"hidden",S.Color.CoreSlate100,S.Color.CoreSlate100,S.Color.CoreSlate300,S.Color.CoreSlate300,S.Color.CoreSlate500,S.Color.CoreSlate500),y6=b.button.withConfig({displayName:"BaseScanner__SwitchCameraButton",componentId:"sc-16dj2ru-11"})(["background:transparent;cursor:pointer;margin-left:10px;line-height:1;",""],({open:e})=>e?$(["path{stroke:",";}rect{fill-opacity:1;}"],({theme:t})=>t.colorPrimary):$([":hover:not(:disabled){rect{fill-opacity:0.3;}}:active:not(:disabled){rect{fill-opacity:0.4;}}"])),_6=b($d.Item).withConfig({displayName:"BaseScanner__DropdownItem",componentId:"sc-16dj2ru-12"})(["font-weight:",";"],({selected:e})=>e?600:500),R6=i.jsxs("svg",{role:"img",width:"62",height:"62",viewBox:"0 0 62 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("circle",{id:"btn-outer",cx:"31",cy:"31",r:"29.5",stroke:"white",strokeWidth:"3"}),i.jsx("circle",{id:"btn-inner",cx:"31",cy:"31",r:"26",fill:"white"})]}),A6={...Gi,colorButtonPrimary:Le.white,colorFontButtonPrimary:Le.black,colorButtonSecondary:Le.white,colorFontButtonSecondary:Le.white,colorButtonSecondaryFill:Le.black,borderWidth:"1.5px",borderRadius:"24px"},T6=b(ge).withConfig({displayName:"BaseScanner__ThemedButton",componentId:"sc-16dj2ru-13"})(["visibility:",";"],({manualCaptureEnabled:e})=>e?"visible":"hidden"),E6=b.div.withConfig({displayName:"BaseScanner__AutoCapturePillPositioner",componentId:"sc-16dj2ru-14"})(["position:absolute;top:36px;display:flex;justify-content:center;width:100%;transform:translateY(-50%);z-index:",";"],yt.navbar-1);function Gd(e){var lt,$r,fr,Gr,Qd,Zd,Jd,Xd;const t=Jn(),n=en("inquiry:show-camera-error-dialog-on-unavailable-video-stream"),r=en("inquiry:enable-experimental-govid-perf-improvements"),o=en("inquiry:enable-experimental-govid-perf-improvements-percentage"),a=r&&o,[s]=z(),{base:c,captureFeedBox:l,captureHint:u,captureOverlayHeaderButton:d}=Rn(),m=f.useRef(void 0),h=f.useRef(void 0),p=f.useRef(!1),g=f.useRef(),C=f.useRef();f.useEffect(()=>{const[st,ft]=fi();return C.current=st,e.disableCaptureClient||(W.current=new bl({canvasBuffer:C.current})),ft},[]);const{logCameraInspectionFromStream:I,logCameraInspectionSnapshot:v,getCameraInspectionData:x}=Nd(),R=f.useRef(new kd(e.triggerConfigs.map(st=>new zn(st)))),_=f.useCallback(st=>{var ft;(ft=e.handleTrigger)==null||ft.call(e,st)},[e.handleTrigger]),[T,E]=f.useState(!1),[V,D]=f.useState(!1),O=f.useRef(!1),U=st=>{D(st),O.current=st},[M,{enable:Y,disable:F}]=rt(!1),[H,q]=Qf(F,500,{maxWait:500}),W=f.useRef(null),X=f.useRef(),[oe,se]=f.useState(null),[Se,Ee]=f.useState(null),[he,{toggle:de}]=rt(),[Ie,ye]=f.useState(!1),[je,ce]=f.useState(!1),[Q,K]=f.useState(e.delayUntilManualCaptureMs===0||_n()),be=Vi(),[Oe,{enable:ze,disable:re}]=rt(),le=(lt=Se==null?void 0:Se.facingMode)!=null?lt:e.videoConstraints.facingMode,Ue=f.useRef(),G=f.useRef(),xe=f.useRef(e.delayUntilManualCaptureMs),{videoDimensionsUpdated:Ke}=rb(),_e=f.useCallback(()=>{xe.current>0&&!Ue.current&&(G.current=Date.now(),Ue.current=window.setTimeout(()=>K(!0),xe.current))},[]),we=f.useCallback(()=>{Ue.current&&(clearTimeout(Ue.current),xe.current-=Date.now()-G.current,Ue.current=null)},[]);f.useEffect(()=>{if(e.overlayReady)return e.delayUntilManualCaptureMs>0&&_e(),()=>{we()}},[e.overlayReady]);const De=f.useCallback(()=>{p.current=!0,ze(),we()},[ze,we]),Me=f.useCallback(()=>{re(),_e(),p.current=!1},[re,_e]),nt=()=>{var st,ft,Et,qt,ti,gr;if(h.current){if(((st=g.current)==null?void 0:st.video)!=null&&((Et=(ft=g.current)==null?void 0:ft.video)==null?void 0:Et.videoWidth)>0&&((qt=e.overlayRef.current)==null?void 0:qt.clientWidth)!=null&&e.overlayRef.current.clientWidth>0&&((ti=e.overlayCaptureWindowRef.current)==null?void 0:ti.clientWidth)!=null&&e.overlayCaptureWindowRef.current.clientWidth>0&&C.current!=null&&!p.current&&!O.current&&e.uiReady)try{aa({source:g.current.video,canvasBuffer:C.current}),(gr=W.current)==null||gr.capture()}catch(br){br.name!=="NS_ERROR_NOT_AVAILABLE"&&e.handleFailed(br,"capture")}h.current!=null&&(h.current=window.setTimeout(nt,Is))}},St=async(st,ft)=>{var Et,qt,ti;if(!(!e.uiReady||V)){U(!0);try{((Et=g.current)==null?void 0:Et.video)!=null&&C.current!=null&&(aa({source:g.current.video,canvasBuffer:C.current}),(qt=W.current)==null||qt.capture(),ft||(ft=await e.paramsFromVideoFrame(g.current.video,C.current,W.current,R.current,du(g.current.video,e.overlayCaptureWindowRef.current,e.previewViewfinderRef.current))),await e.handleCapture({imageSrcs:(ti=W.current)==null?void 0:ti.leastBlurryImages(),captureMethod:st,params:ft,cameraInspectionData:x({includeSmallImages:!1})}))}finally{be()&&U(!1)}}},Qt=async()=>{var ft,Et,qt,ti,gr,br,Fa,Ma,ni,eu,tu,nu;if(!m.current)return;const st=new Date().getTime();if(((qt=(Et=(ft=g.current)==null?void 0:ft.video)==null?void 0:Et.videoWidth)!=null?qt:0)>0&&((gr=(ti=e.overlayRef.current)==null?void 0:ti.clientWidth)!=null?gr:0)>0&&((Fa=(br=e.overlayCaptureWindowRef.current)==null?void 0:br.clientWidth)!=null?Fa:0)>0&&C.current!=null&&!p.current&&!O.current&&e.uiReady){const Wr=await e.paramsFromVideoFrame(g.current.video,C.current,W.current,R.current,du(g.current.video,e.overlayCaptureWindowRef.current,e.previewViewfinderRef.current));if(v(C.current),Ke((ni=(Ma=g.current)==null?void 0:Ma.video)==null?void 0:ni.videoWidth,(tu=(eu=g.current)==null?void 0:eu.video)==null?void 0:tu.videoHeight),R.current.runTick(Wr),_(R.current.getTriggered()),(nu=e.hasValidQuad)!=null&&nu.call(e,Wr)?(q(),Y()):H(),!p.current&&e.shouldSubmit(Wr,R.current)){St(bt.Auto,Wr);return}}if(m.current!=null){const Wr=Math.max(0,e.detectInterval-(new Date().getTime()-st));m.current=window.setTimeout(Qt,Wr)}};f.useEffect(()=>()=>{Dn.dispose()},[]),f.useEffect(()=>(Se&&e.videoReady&&(m.current=window.setTimeout(Qt,e.detectInterval),e.disableCaptureClient||(h.current=window.setTimeout(nt,Is))),()=>{clearTimeout(m.current),m.current=null,clearTimeout(h.current),h.current=null}),[Se,e.videoReady]),f.useEffect(()=>{var st;try{if(((st=X.current)==null?void 0:st.readyState)==="live"&&Ie){const ft={torch:he};je&&(ft.focusMode="continuous"),X.current.applyConstraints({advanced:[ft]})}}catch(ft){$e("Failed to enable torch","warning",{error:ft})}},[he]),f.useEffect(()=>{const st=window.setInterval(()=>{var ft;try{if(!be())return;const Et=(ft=g.current)==null?void 0:ft.stream;if(Et==null)return;const qt=Et==null?void 0:Et.getVideoTracks()[0];if(!Et.active||qt==null||!(qt!=null&&qt.enabled)||(qt==null?void 0:qt.readyState)!=="live"){const ti="Video stream is not available after webcam mount";n?e.handleFailed(ti,"load"):$e(ti,"warning",{streamActive:Et.active,trackEnabled:qt==null?void 0:qt.enabled,trackReadyState:qt==null?void 0:qt.readyState,scannerType:e.scannerType,...e.videoConstraints}),window.clearInterval(st)}}catch(Et){me(Et,"warning")}},1e3);return()=>{window.clearInterval(st)}},[]);const Ft=st=>{st&&(g.current=st,g.current.video.defaultMuted=!0,g.current.video.muted=!0,g.current.video.addEventListener("loadedmetadata",async()=>{const ft=g.current.stream;if(ft==null){const ni="Video stream is not available on webcam mount";n?e.handleFailed(new Error(ni),"load"):$e(ni,"warning",{scannerType:e.scannerType,...e.videoConstraints});return}const Et=ft.getVideoTracks()[0];if(Et==null){e.handleFailed("Video track is null","load");return}const[qt,ti]=fi();C.current=qt,e.disableCaptureClient||(W.current=new bl({canvasBuffer:C.current}));const{deviceId:gr,height:br,width:Fa,facingMode:Ma}=Et.getSettings();if(se(gr),Ee({height:br,width:Fa,facingMode:Ma}),!(Et.readyState!=="live"||typeof ImageCapture>"u"))try{if(await new ImageCapture(Et).getPhotoCapabilities(),Et.readyState!=="live")return;const ni=Et.getCapabilities();Et.applyConstraints.toString().includes("function")&&(ni.focusMode!=null&&Et.applyConstraints({advanced:[{focusMode:"continuous"}]}),X.current=Et,ye(ni.torch!=null),ce(ni.focusMode!=null))}catch(ni){ni.name!=="OperationError"&&me(ni,"warning")}}),g.current.video.addEventListener("canplay",async()=>{if(g.current.video&&(E(!0),g.current.video.paused))try{await g.current.video.play()}catch(ft){e.handleFailed(ft,"load")}}))},Vt=($r=e.cameraSelectOptions)==null?void 0:$r.map((st,ft)=>({id:st.deviceId,label:`Camera ${ft+1}`,onClick:()=>e.handleCameraChange(st)})),Vn=e.overlayCaptureWindowRef.current&&((fr=e.overlayCaptureWindowRef.current)==null?void 0:fr.clientHeight)>0?e.overlayCaptureWindowRef.current.clientWidth/e.overlayCaptureWindowRef.current.clientHeight:1.5158097997,ei=e.showHelpButton&&((Gr=e.renderHelpModal)==null?void 0:Gr.call(e,{isOpen:Oe,onClose:Me}));return i.jsxs(p6,{flowType:j.flowType,"data-test":`scanner__${e.scannerType}`,"data-scanner-type":e.scannerType,children:[i.jsxs(g6,{restrictInlineColumnWidth:j.isInline,children:[i.jsx(E6,{children:(Qd=e.renderAutoCapturePill)==null?void 0:Qd.call(e,{isCameraReady:T&&e.videoReady})}),i.jsx(C6,{mirrored:le==="user",overlayAspectRatio:Vn,isShortBarcodeOverlay:e.isShortBarcodeOverlay,visibleToRealCaptureWindowHeightRatio:e.isShortBarcodeOverlay?mc:uc,children:!a&&e.overlayReady&&i.jsx(oa,{audio:!1,width:"100%",height:"initial",ref:Ft,videoConstraints:e.videoConstraints,onUserMedia:I,onUserMediaError:st=>e.handleFailed(st,"load")})}),!a&&((Zd=e.renderOverlay)==null?void 0:Zd.call(e,{isCameraReady:T,hasDetectedQuad:M,mirrored:le==="user",renderUnderOverlayComponents:()=>!!ei&&i.jsx(Tm,{children:i.jsxs(Am,{id:"scanner__button--help",onClick:De,children:[i.jsx(pe,{$primaryColor:e.helpButtonIconColor,$strokeColor:e.helpButtonIconColor,children:i.jsx(ou,{"aria-hidden":!0})}),i.jsx("span",{children:e.helpButtonLabel})]})})})),a&&i.jsx(Md,{assets:e.assets,hasDetectedQuad:M,styles:{base:c,captureBox:l,captureOverlayHeaderButton:d,hint:u==null?void 0:u.textStyle},isAnimated:!1,collapsed:!1,flipped:!1,renderCaptureWindowContents:()=>i.jsx(oa,{audio:!1,width:"100%",height:"initial",ref:Ft,videoConstraints:e.videoConstraints,onUserMedia:I,onUserMediaError:st=>e.handleFailed(st,"load")}),renderUnderOverlayComponents:()=>!!ei&&i.jsx(Tm,{children:i.jsxs(Am,{id:"scanner__button--help",onClick:De,children:[i.jsx(pe,{$primaryColor:e.helpButtonIconColor,$strokeColor:e.helpButtonIconColor,children:i.jsx(ou,{"aria-hidden":!0})}),i.jsx("span",{children:e.helpButtonLabel})]})}),isShortBarcodeOverlay:e.isShortBarcodeOverlay,governmentIdClass:e.governmentIdClass,requiresSide:e.requiresSide,captureOverlay:e.captureOverlay,mirrored:le==="user",captureFrameLabel:e.captureFrameLabel,prompt:e.videoReady?e.prompt:s("government-id.capture.loading-camera"),hint:e.hint,overlayRef:e.overlayRef,overlayCaptureWindowRef:e.overlayCaptureWindowRef,previewViewfinderRef:e.previewViewfinderRef}),i.jsx(x6,{children:t||Ie||e.shouldDisplayCameraSelector&&((Jd=e.cameraSelectOptions)==null?void 0:Jd.length)>1?i.jsxs(v6,{children:[i.jsx(w6,{disabled:!e.uiReady||V||!T||!Q||!e.videoReady,manualCaptureEnabled:T&&Q,id:"scanner__button--capture-circle","data-test":"scanner__button--capture",onClick:St.bind(null,bt.Manual,null),children:R6}),i.jsxs(S6,{children:[Ie?i.jsx(m6,{id:"scanner__button--torch",onClick:de,active:he,title:he?"Flash ON":"Flash OFF",children:i.jsx(wp,{})}):i.jsx(Je,{height:1}),e.shouldDisplayCameraSelector&&((Xd=e.cameraSelectOptions)==null?void 0:Xd.length)>1&&i.jsx($d,{items:Vt,placement:"top-end",renderItem:st=>i.jsx(_6,{id:st.id,onClick:ft=>{ft.preventDefault(),ft.stopPropagation(),st.onClick()},selected:(e.selectedCamera||oe)===st.id,children:st.label},st.id),children:({isOpen:st,openDropdown:ft,closeDropdown:Et})=>i.jsx(O0,{onOutsideClick:Et,children:i.jsx(y6,{open:st,id:"scanner__button--switch-camera","data-test":"scanner__button--switch-camera",onClick:()=>ft(),title:"Select Camera","aria-label":"Select Camera",children:i.jsx(W1,{})})})})]})]}):i.jsx(I6,{children:i.jsx(T6,{disabled:!e.uiReady||V||!T||!Q||!e.videoReady,id:"scanner__button--capture-full",isPending:!e.uiReady||V,"data-test":"scanner__button--capture",manualCaptureEnabled:T&&Q,onClick:St.bind(null,bt.Manual,null),theme:A6,styles:e.submitButtonStyles,children:e.labelTakePhoto})})})]}),ei]})}const k6=8e3,N6=.3,j6=({setAutoCaptureReady:e,delayUntilManualCaptureMs:t=k6,handleCapture:n,handleError:r,labelTakePhoto:o,renderOverlay:a,requiresSide:s,videoConstraints:c,handleTrigger:l,handleCameraChange:u,selectedCamera:d,cameraSelectOptions:m,shouldDisplayCameraSelector:h,overlayReady:p,overlayRef:g,overlayCaptureWindowRef:C,previewViewfinderRef:I,isShortBarcodeOverlay:v,submitButtonStyles:x,showHelpButton:R,helpButtonIconColor:_,helpButtonLabel:T,renderAutoCapturePill:E,renderHelpModal:V,uiReady:D,videoReady:O,assets:U,governmentIdClass:M,captureOverlay:Y,captureFrameLabel:F,hint:H,prompt:q})=>{const[W,X]=f.useState(!1),oe=en("inquiry:enable-low-light-detection-web");f.useEffect(()=>{try{_t.loadModels().then(e)}catch{X(!0)}},[]);const se=f.useRef([]),Se=async(he,de,Ie,ye,je)=>{aa({source:he,overlayCaptureWindowElement:C.current,canvasBuffer:de});const ce=mc/uc*de.height,Q=v?{x:0,y:(de.height-ce)/2,width:de.width,height:ce}:{x:0,y:0,width:de.width,height:de.height},K=await Y5(de,[0],Q);let be=!1;if(K.decodedResult&&K.scannedImage){const re=K5(K.decodedResult);if(re.firstName&&re.lastName&&re.middleName&&re.dateOfBirth){const le=JSON.stringify({firstName:re.firstName,lastName:re.lastName,middleName:re.middleName,dateOfBirth:re.dateOfBirth});be=se.current.includes(le),be?Ie==null||Ie.manualCapture(K.scannedImage):se.current=[...se.current,le]}}let Oe=[];if(!W&&!be)try{Oe=await _t.detectFaces(de,{scoreThreshold:N6})}catch(re){r(re,"capture"),X(!0)}let ze;return Oe.length===1&&(ze=Oe[0].box.rescale({width:1/de.width,height:1/de.height})),{successfullyScanned:be,detectedGuards:K.detectedGuards,requiresSide:s,faceBoundingBox:ze,luminosityData:oe?yr(de,je):null}},Ee=(he,de)=>he.successfullyScanned||de.getTriggered().getType()===tb.Capture;return i.jsx(Gd,{handleCapture:({imageSrcs:he,captureMethod:de})=>n(he,de),handleFailed:r,detectInterval:U5,labelTakePhoto:o,videoConstraints:c,triggerConfigs:$5,paramsFromVideoFrame:Se,shouldSubmit:Ee,renderOverlay:a,delayUntilManualCaptureMs:t,handleTrigger:l,shouldDisplayCameraSelector:h,cameraSelectOptions:m,selectedCamera:d,handleCameraChange:u,overlayReady:p,overlayRef:g,overlayCaptureWindowRef:C,previewViewfinderRef:I,isShortBarcodeOverlay:v,submitButtonStyles:x,showHelpButton:R,helpButtonIconColor:_,helpButtonLabel:T,renderAutoCapturePill:E,renderHelpModal:V,scannerType:"barcode",uiReady:D,videoReady:O,assets:U,governmentIdClass:M,captureOverlay:Y,requiresSide:s,captureFrameLabel:F,hint:H,prompt:q})},P6=250,Em={[B.Front]:.6,[B.Back]:.3,[B.FrontOrBack]:.6,[B.BarcodePdf417]:.4,[B.PassportSignature]:.4},km={[B.Front]:no+.02,[B.Back]:.68,[B.FrontOrBack]:no+.02,[B.BarcodePdf417]:no+.02,[B.PassportSignature]:no+.02},D6=[{type:0,shouldShow:fo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Ci(B.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>kr(B.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Nr(e)&&!Ci(B.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:1,shouldShow:hc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],O6=[{type:0,shouldShow:fo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Ci(B.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>kr(B.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>!!e.isShortBarcodeOverlay&&Nr(e)&&!Ci(B.BarcodePdf417,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.barcode-outside-of-frame")},{type:1,shouldShow:hc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],L6=[{type:0,shouldShow:fo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Ci(B.Back,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>kr(B.Back,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Nr(e)&&!Ci(B.Front,e),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:1,shouldShow:hc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],F6=[{type:0,shouldShow:fo,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:5,shouldShow:e=>Ci(B.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:6,shouldShow:e=>kr(B.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-away")},{type:7,shouldShow:e=>Nr(e)&&!Ci(B.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.outside-of-frame")},{type:3,shouldShow:e=>_l(B.Back,e,!0),showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.incomplete-back")},{type:1,shouldShow:hc,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:8,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],Nm={[B.Front]:D6,[B.Back]:L6,[B.BarcodePdf417]:O6,[B.FrontOrBack]:void 0,[B.PassportSignature]:void 0},M6=new zn({type:9,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({t:e})=>e("government-id-scanner.hint.processing",{defaultValue:e("government-id-scanner.hint.hold-still")})});function fo(e){return!!e.hasGlare&&e.detectedQuad!=null&&e.detectedQuad.detectionStatus!==Qn.Failed}function hc(e){return ec(e.luminosityData)}function Ci(e,t,n){var s;const r=t.detectedQuad;if(!r||r.detectionStatus===Qn.Failed)return!1;const o=Math.max(r.topRight.x-r.topLeft.x,r.bottomRight.x-r.bottomLeft.x),a=e===B.Back&&n?Em[B.Front]:Em[e];return o>0&&o/t.videoWidth<a?!0:((s=t.detectedQuad)==null?void 0:s.detectionStatus)===Qn.CameraTooFar}function kr(e,t,n){var s;const r=t.detectedQuad;if(!r||r.detectionStatus===Qn.Failed)return!1;const o=Math.max(r.topRight.x-r.topLeft.x,r.bottomRight.x-r.bottomLeft.x),a=e===B.Back&&n?km[B.Front]:km[e];return o>0&&o/t.videoWidth>a?!0:((s=t.detectedQuad)==null?void 0:s.detectionStatus)===Qn.CameraTooClose}function Nr(e){const t=e.detectedQuad;if(!t||t.detectionStatus===Qn.Failed)return!1;const n=Math.min(t.topLeft.y,t.topRight.y),r=Math.max(t.bottomLeft.y,t.bottomRight.y),o=Math.min(t.topLeft.x,t.bottomLeft.x),a=Math.max(t.topRight.x,t.bottomRight.x),s=(1-no)/2-.02,c=(1-(e.isShortBarcodeOverlay?mc:uc))/2-.02;return r>0&&a>0&&(n<e.videoHeight*c||r>e.videoHeight*(1-c)||o<e.videoWidth*s||a>e.videoWidth*(1-s))}function _l(e,t,n){return!n||e!==B.Back?!1:!!t.hasIncompleteBack}function V6(e){var t;return((t=e.detectedQuad)==null?void 0:t.detectionStatus)===Qn.Success}function jm(e,t){const n=e!=="pp",r=t.microblinkResult&&"mrz"in t.microblinkResult?t.microblinkResult.mrz.verified===!0:!1;return n||r}function B6(e,t,n){return V6(t)&&!Ci(e,t,n)&&!kr(e,t,n)&&!Nr(t)}class U6{constructor(){this.loadPercentage=0,this.initializingRunner=!1,this.currentInstanceNumber=0}async preload(t="advanced",n=null){if(!_n()&&!this.isLoaded()){if(this.model=t,this.loadSDKPromise==null){const r=new L0(q6(window.location.host));r.engineLocation=t==="advanced"?ro("microblink-6-0-1"):ro("microblink-6-0-1-lightweight"),r.workerLocation=t==="advanced"?`${lo}/microblink/worker-script-6-0-1`:`${lo}/microblink/worker-script-6-0-1-lightweight`,r.loadProgressCallback=o=>this.loadPercentage=o,r.allowHelloMessage=!1,r.wasmType=n,this.loadSDKPromise=cc(async()=>F0(r).then(o=>(this.wasmSDK=o,this.wasmSDK)).catch(o=>{throw this.loadSDKPromise=null,typeof o=="string"?nn.fromString(o):new nn(o)}))}await this.loadSDKPromise}}isLoaded(){return this.wasmSDK!=null}async initialize(t,n=void 0,r={}){const{requireFullBack:o=!1,allowIncompleteBarcode:a=!1,fallbackToFaceApi:s=!1}=r;return _n()?-1:(this.currentQuad=null,this.hasGlare=null,this.attemptedReset=!1,this.onClassifiedCallback=null,this.recognizer&&this.recognizerRunner&&this.captureSide===t&&this.idClass===n?this.currentInstanceNumber:(this.currentInstanceNumber++,this.captureSide=t,this.idClass=n,this.requireFullBack=t===B.Back&&o,this.allowIncompleteBarcode=t===B.Back&&a,new Promise((c,l)=>{s&&(this.faceApiFallbackTimeout=setTimeout(()=>{_t.loadModels(),this.faceApiFallbackTimeout=setTimeout(()=>{this.loadPercentage<50&&(ee.logAmplitude("government-id.microblink.load-timeout",{model:this.model}),l(nn.fromString("[IGNORED] Microblink initialization took longer than 5000ms, likely due to a slow network connection. Falling back to FaceApi.")))},2500)},2500)),this.preload().then(()=>clearTimeout(this.faceApiFallbackTimeout)).then(()=>this.startRunner()).then(()=>c(this.currentInstanceNumber)).catch(u=>typeof u=="string"?nn.fromString(u):new nn(u))})))}async startRunner(){var n,r,o;if(!this.captureSide||this.initializingRunner)return;this.initializingRunner=!0;const t=performance.now();if(await this.tearDown(!1),!!this.captureSide){if(this.captureSide===B.Back&&this.allowIncompleteBarcode){this.recognizer=await gc(this.wasmSDK);const a=await this.recognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!0,a.recognitionModeFilter.enableMrzPassport=!1,a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.recognitionModeFilter.enablePhotoId=!1,a.recognitionModeFilter.enableFullDocumentRecognition=!0,await((n=this.recognizer)==null?void 0:n.updateSettings(a))}else if(this.captureSide===B.BarcodePdf417||this.captureSide===B.Back)this.recognizer=await M0(this.wasmSDK);else if(this.captureSide===B.Front){this.recognizer=await gc(this.wasmSDK);const a=await this.recognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!1,a.recognitionModeFilter.enableMrzPassport=this.idClass==="pp",a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.classifierCallback=s=>{var c;return(c=this.onClassifiedCallback)==null?void 0:c.call(this,s)},await((r=this.recognizer)==null?void 0:r.updateSettings(a))}else $e(`Unsupported side for Microblink Client: ${this.captureSide}`,"warning");if(this.requireFullBack){this.fullDocumentRecognizer=await gc(this.wasmSDK);const a=await this.fullDocumentRecognizer.currentSettings();a.recognitionModeFilter.enableBarcodeId=!1,a.recognitionModeFilter.enableMrzPassport=!1,a.recognitionModeFilter.enableMrzVisa=!1,a.recognitionModeFilter.enableMrzId=!1,a.recognitionModeFilter.enablePhotoId=!1,a.recognitionModeFilter.enableFullDocumentRecognition=!0,await((o=this.fullDocumentRecognizer)==null?void 0:o.updateSettings(a))}if(this.requireFullBack||this.allowIncompleteBarcode){const a={onQuadDetection:s=>{this.currentQuad?Dm(s)>Dm(this.currentQuad)?this.currentFullDocumentQuad=s:(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=s):this.currentQuad=s},onGlare:s=>{this.hasGlare=s}};this.recognizerRunner=await au(this.wasmSDK,this.requireFullBack?[this.recognizer,this.fullDocumentRecognizer]:[this.recognizer],!0,a)}else{const a={onQuadDetection:s=>{(this.captureSide===B.Front||!this.currentQuad)&&(this.currentQuad=s)},onGlare:s=>{this.hasGlare=s}};this.recognizerRunner=await au(this.wasmSDK,[this.recognizer],!1,a)}this.initializingRunner=!1,ee.logAmplitude("government-id.microblink.initialize-runners",{durationSeconds:(performance.now()-t)/1e3,side:this.captureSide,idClass:this.idClass})}}async extractTextFromImage(t){if(!this.recognizerRunner||!this.recognizer)return null;const n=new Image;n.src=t,await n.decode();const r=V0(n),o=await this.recognizerRunner.processImage(r);let a=null;return o!==Fo.Empty&&(a=await this.recognizer.getResult()),{recognitionResult:a,recognizerName:this.recognizer.recognizerName,detectedQuad:null,hasGlare:null,hasIncompleteBack:null}}async processImage(t,n){var c,l,u,d,m;if(!this.recognizerRunner||!this.recognizer)return null;this.currentQuad=null,this.currentFullDocumentQuad=null,this.hasGlare=null,this.onClassifiedCallback=n;const r=t.getContext("2d",{willReadFrequently:!0}),o=new B0(r==null?void 0:r.getImageData(0,0,t.width,t.height),U0.NoRotation,!0);if(!o.imageData)return null;const a=await this.recognizerRunner.processImage(o).catch(async h=>{const p=typeof h=="string"?h:h.message;if((p.indexOf(su.WORKER_IMAGE_PROCESS_FAILURE)!==-1||p.indexOf(su.WORKER_RUNNER_DELETED)!==-1)&&!this.attemptedReset)return this.attemptedReset=!0,await this.tearDown(!1),await this.startRunner(),null;throw typeof h=="string"?nn.fromString(h):new nn(h)}),s=(l=(c=this.recognizer)==null?void 0:c.recognizerName)!=null?l:"MicroblinkUnknown";if(this.requireFullBack){const h=await((u=this.recognizer)==null?void 0:u.getResult()),p=(h==null?void 0:h.state)!==Fo.Empty?h:null,g=await((d=this.fullDocumentRecognizer)==null?void 0:d.getResult());!this.currentFullDocumentQuad&&this.currentQuad&&(h==null?void 0:h.state)===Fo.Empty&&(g==null?void 0:g.state)!==Fo.Empty&&Ya(this.currentQuad,null)&&(this.currentFullDocumentQuad=this.currentQuad,this.currentQuad=null);const C=Ya(this.currentFullDocumentQuad,this.currentQuad)?this.currentFullDocumentQuad:null,I=!!p&&!C;return{recognitionResult:p,detectedQuad:C,hasGlare:this.hasGlare,hasIncompleteBack:I,recognizerName:s}}else{const h=a!==Fo.Empty?await((m=this.recognizer)==null?void 0:m.getResult()):null;let p=this.currentQuad;return this.allowIncompleteBarcode&&(p=Ya(this.currentFullDocumentQuad,null)?this.currentFullDocumentQuad:Ya(this.currentQuad,null)?this.currentQuad:null),{recognitionResult:h,detectedQuad:p,hasGlare:this.hasGlare,hasIncompleteBack:null,recognizerName:s}}}needsTeardown(){return this.recognizerRunner!=null||this.recognizer!=null||this.fullDocumentRecognizer!=null}async tearDownInstance(t){t===this.currentInstanceNumber&&this.tearDown()}async tearDown(t=!0){const n=this.recognizerRunner,r=this.recognizer,o=this.fullDocumentRecognizer;this.recognizer=void 0,this.recognizerRunner=void 0,this.fullDocumentRecognizer=void 0,t&&(this.captureSide=void 0,this.requireFullBack=void 0,this.allowIncompleteBarcode=void 0),this.currentQuad=void 0,this.currentFullDocumentQuad=void 0,this.hasGlare=void 0;try{await Promise.allSettled([n==null?void 0:n.delete(),r==null?void 0:r.delete(),o==null?void 0:o.delete()])}catch{}}}B.Front,B.Back,B.BarcodePdf417;let ob={"withpersona.com":{key:null,expiresAt:null},"withpersona-staging.com":{key:null,expiresAt:null},"*.withpersona.com":{key:null,expiresAt:null},"*.withpersona-staging.com":{key:null,expiresAt:null}};try{ob=JSON.parse('{"withpersona.com":{"key":"sRwAAAYPd2l0aHBlcnNvbmEuY29thpUVKHnfmIvdibPDhhXCoq2b8v+l6XteggRLjtZIG/6cdFhQRDWSyQMJRKt1/uBjdWqzh/PNxJcDgpcA2RFxOI9hwsswppr0QJ0qsM6uReNIId3InngR4q4jn15UA/P7MT2okOJg6lnf/0BETmwtliRLI1uKsm8fC5XxxaBvvfVQYV0nBQW/GPGY9KpRJvmYFrfaL0Z6bvowFBV1ivKyK2RY6jnKEA==","expiresAt":"2025-07-30"},"*.withpersona.com":{"key":"sRwAAAYRKi53aXRocGVyc29uYS5jb22q2VqlctXIE+DL6va9pIVBYDMqJu6BCIKcb7LD9fSCMztfF8rD802Ra+xNfBeJB7yxKb+9he18NtOAtgW17bg3CWIZ2D0Nn2sKcL2xwAce1UeeUBQ5OUdK4Bsw6gHFBd3pr5XtoN41zv7rCHSqlJLHQSlLNNLoXEys7lCOGTQTtMZEkRFxJ1B8RKX+mvMvvvPPzmaC+dEbyjvElNxRQhpR1TYZVqQIY+B1","expiresAt":"2025-07-30"},"withpersona-staging.com":{"key":"sRwAAAYXd2l0aHBlcnNvbmEtc3RhZ2luZy5jb22+UDZGEA8YgF3AvK+ukP5gRK2kh/9OnwsB/7ccb2Mlhs6WRQ8osyJdKur51WsEPnrP4blrooTXiF6uLpF6wHfU/sw/4PVFa0wKd4exHBPevosZj7RHxE3y/VRgm/aTBF+Ko8yA+uX6+b/fV5WNt4bnB7conG7Eh3QCsSIWdrkTPz3Od3U6Yg1t+J45HNJk1dm30tdGYWxt32oeEgDUL4n1Fs0h1rMUBJo=","expiresAt":"2025-07-30"},"*.withpersona-staging.com":{"key":"sRwAAAYZKi53aXRocGVyc29uYS1zdGFnaW5nLmNvbd8DgK6h/E1CelG5jE9+jT5ixlAs4qF2PbdWLdXdFMRGFltKBhys2Yb72m6qK9+4JKD+dHQrL8zeFgn3gaTQKWMp0pDoLqsL2THeMDS9nejFY1yuBdOmvibRoCV+YKNRNvDj/cISQfgWvXZJ73ZepsTdPrhApEB6ryabBYJhsceeHp9KL+U5LsVzGBzfNMrVT4jR0u9eSF2dDAUHV+EIDdVZgejZTsxg1w==","expiresAt":"2025-07-30"}}')}catch{}const H6=14*24*60*60*1e3,q6=e=>{var o;let t=e.split(":")[0];if(t.split(".").length===3){const a=t.split(".");a[0]="*",t=a.join(".")}const{key:n,expiresAt:r}=(o=ob[t])!=null?o:{};try{r!=null&&(t==="withpersona.com"||t==="*.withpersona.com")&&new Date(r).getTime()-new Date().getTime()<H6&&$e("Microblink license key is expiring in less than 14 days. Request a renewal in #microblink-persona and update MICROBLINK_LICENSES in config/webpack/production.js.","error",{expiresAt:r,domain:t})}catch(a){me(a)}return n};P.NONE+"",P.ALBANIA+"",P.ALGERIA+"",P.ARGENTINA+"",P.AUSTRALIA+"",P.AUSTRIA+"",P.AZERBAIJAN+"",P.BAHRAIN+"",P.BANGLADESH+"",P.BELGIUM+"",P.BOSNIA_AND_HERZEGOVINA+"",P.BRUNEI+"",P.BULGARIA+"",P.CAMBODIA+"",P.CANADA+"",P.CHILE+"",P.COLOMBIA+"",P.COSTA_RICA+"",P.CROATIA+"",P.CYPRUS+"",P.CZECHIA+"",P.DENMARK+"",P.DOMINICAN_REPUBLIC+"",P.EGYPT+"",P.ESTONIA+"",P.FINLAND+"",P.FRANCE+"",P.GEORGIA+"",P.GERMANY+"",P.GHANA+"",P.GREECE+"",P.GUATEMALA+"",P.HONG_KONG+"",P.HUNGARY+"",P.INDIA+"",P.INDONESIA+"",P.IRELAND+"",P.ISRAEL+"",P.ITALY+"",P.JORDAN+"",P.KAZAKHSTAN+"",P.KENYA+"",P.KOSOVO+"",P.KUWAIT+"",P.LATVIA+"",P.LITHUANIA+"",P.MALAYSIA+"",P.MALDIVES+"",P.MALTA+"",P.MAURITIUS+"",P.MEXICO+"",P.MOROCCO+"",P.NETHERLANDS+"",P.NEW_ZEALAND+"",P.NIGERIA+"",P.PAKISTAN+"",P.PANAMA+"",P.PARAGUAY+"",P.PHILIPPINES+"",P.POLAND+"",P.PORTUGAL+"",P.PUERTO_RICO+"",P.QATAR+"",P.ROMANIA+"",P.RUSSIA+"",P.SAUDI_ARABIA+"",P.SERBIA+"",P.SINGAPORE+"",P.SLOVAKIA+"",P.SLOVENIA+"",P.SOUTH_AFRICA+"",P.SPAIN+"",P.SWEDEN+"",P.SWITZERLAND+"",P.TAIWAN+"",P.THAILAND+"",P.TUNISIA+"",P.TURKEY+"",P.UAE+"",P.UGANDA+"",P.UK+"",P.UKRAINE+"",P.USA+"",P.VIETNAM+"",P.BRAZIL+"",P.NORWAY+"",P.OMAN+"",P.ECUADOR+"",P.EL_SALVADOR+"",P.SRI_LANKA+"",P.PERU+"",P.URUGUAY+"",P.BAHAMAS+"",P.BERMUDA+"",P.BOLIVIA+"",P.CHINA+"",P.EUROPEAN_UNION+"",P.HAITI+"",P.HONDURAS+"",P.ICELAND+"",P.JAPAN+"",P.LUXEMBOURG+"",P.MONTENEGRO+"",P.NICARAGUA+"",P.SOUTH_KOREA+"",P.VENEZUELA+"",P.AFGHANISTAN+"",P.ALAND_ISLANDS+"",P.AMERICAN_SAMOA+"",P.ANDORRA+"",P.ANGOLA+"",P.ANGUILLA+"",P.ANTARCTICA+"",P.ANTIGUA_AND_BARBUDA+"",P.ARMENIA+"",P.ARUBA+"",P.BAILIWICK_OF_GUERNSEY+"",P.BAILIWICK_OF_JERSEY+"",P.BARBADOS+"",P.BELARUS+"",P.BELIZE+"",P.BENIN+"",P.BHUTAN+"",P.BONAIRE_SAINT_EUSTATIUS_AND_SABA+"",P.BOTSWANA+"",P.BOUVET_ISLAND+"",P.BRITISH_INDIAN_OCEAN_TERRITORY+"",P.BURKINA_FASO+"",P.BURUNDI+"",P.CAMEROON+"",P.CAPE_VERDE+"",P.CARIBBEAN_NETHERLANDS+"",P.CAYMAN_ISLANDS+"",P.CENTRAL_AFRICAN_REPUBLIC+"",P.CHAD+"",P.CHRISTMAS_ISLAND+"",P.COCOS_ISLANDS+"",P.COMOROS+"",P.CONGO+"",P.COOK_ISLANDS+"",P.CUBA+"",P.CURACAO+"",P.DEMOCRATIC_REPUBLIC_OF_THE_CONGO+"",P.DJIBOUTI+"",P.DOMINICA+"",P.EAST_TIMOR+"",P.EQUATORIAL_GUINEA+"",P.ERITREA+"",P.ESWATINI+"",P.ETHIOPIA+"",P.FALKLAND_ISLANDS+"",P.FAROE_ISLANDS+"",P.FEDERATED_STATES_OF_MICRONESIA+"",P.FIJI+"",P.FRENCH_GUIANA+"",P.FRENCH_POLYNESIA+"",P.FRENCH_SOUTHERN_TERRITORIES+"",P.GABON+"",P.GAMBIA+"",P.GIBRALTAR+"",P.GREENLAND+"",P.GRENADA+"",P.GUADELOUPE+"",P.GUAM+"",P.GUINEA+"",P.GUINEA_BISSAU+"",P.GUYANA+"",P.HEARD_ISLAND_AND_MCDONALD_ISLANDS+"",P.IRAN+"",P.IRAQ+"",P.ISLE_OF_MAN+"",P.IVORY_COAST+"",P.JAMAICA+"",P.KIRIBATI+"",P.KYRGYZSTAN+"",P.LAOS+"",P.LEBANON+"",P.LESOTHO+"",P.LIBERIA+"",P.LIBYA+"",P.LIECHTENSTEIN+"",P.MACAU+"",P.MADAGASCAR+"",P.MALAWI+"",P.MALI+"",P.MARSHALL_ISLANDS+"",P.MARTINIQUE+"",P.MAURITANIA+"",P.MAYOTTE+"",P.MOLDOVA+"",P.MONACO+"",P.MONGOLIA+"",P.MONTSERRAT+"",P.MOZAMBIQUE+"",P.MYANMAR+"",P.NAMIBIA+"",P.NAURU+"",P.NEPAL+"",P.NEW_CALEDONIA+"",P.NIGER+"",P.NIUE+"",P.NORFOLK_ISLAND+"",P.NORTHERN_CYPRUS+"",P.NORTHERN_MARIANA_ISLANDS+"",P.NORTH_KOREA+"",P.NORTH_MACEDONIA+"",P.PALAU+"",P.PALESTINE+"",P.PAPUA_NEW_GUINEA+"",P.PITCAIRN+"",P.REUNION+"",P.RWANDA+"",P.SAINT_BARTHELEMY+"",P.SAINT_HELENA_ASCENSION_AND_TRISTIAN_DA_CUNHA+"",P.SAINT_KITTS_AND_NEVIS+"",P.SAINT_LUCIA+"",P.SAINT_MARTIN+"",P.SAINT_PIERRE_AND_MIQUELON+"",P.SAINT_VINCENT_AND_THE_GRENADINES+"",P.SAMOA+"",P.SAN_MARINO+"",P.SAO_TOME_AND_PRINCIPE+"",P.SENEGAL+"",P.SEYCHELLES+"",P.SIERRA_LEONE+"",P.SINT_MAARTEN+"",P.SOLOMON_ISLANDS+"",P.SOMALIA+"",P.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS+"",P.SOUTH_SUDAN+"",P.SUDAN+"",P.SURINAME+"",P.SVALBARD_AND_JAN_MAYEN+"",P.SYRIA+"",P.TAJIKISTAN+"",P.TANZANIA+"",P.TOGO+"",P.TOKELAU+"",P.TONGA+"",P.TRINIDAD_AND_TOBAGO+"",P.TURKMENISTAN+"",P.TURKS_AND_CAICOS_ISLANDS+"",P.TUVALU+"",P.UNITED_STATES_MINOR_OUTLYING_ISLANDS+"",P.UZBEKISTAN+"",P.VANUATU+"",P.VATICAN_CITY+"",P.VIRGIN_ISLANDS_BRITISH+"",P.VIRGIN_ISLANDS_US+"",P.WALLIS_AND_FUTUNA+"",P.WESTERN_SAHARA+"",P.YEMEN+"",P.YUGOSLAVIA+"",P.ZAMBIA+"",P.ZIMBABWE+"",P.COUNT+"";ie.NONE+"",ie.ALABAMA+"",ie.ALASKA+"",ie.ALBERTA+"",ie.ARIZONA+"",ie.ARKANSAS+"",ie.AUSTRALIAN_CAPITAL_TERRITORY+"",ie.BRITISH_COLUMBIA+"",ie.CALIFORNIA+"",ie.COLORADO+"",ie.CONNECTICUT+"",ie.DELAWARE+"",ie.DISTRICT_OF_COLUMBIA+"",ie.FLORIDA+"",ie.GEORGIA+"",ie.HAWAII+"",ie.IDAHO+"",ie.ILLINOIS+"",ie.INDIANA+"",ie.IOWA+"",ie.KANSAS+"",ie.KENTUCKY+"",ie.LOUISIANA+"",ie.MAINE+"",ie.MANITOBA+"",ie.MARYLAND+"",ie.MASSACHUSETTS+"",ie.MICHIGAN+"",ie.MINNESOTA+"",ie.MISSISSIPPI+"",ie.MISSOURI+"",ie.MONTANA+"",ie.NEBRASKA+"",ie.NEVADA+"",ie.NEW_BRUNSWICK+"",ie.NEW_HAMPSHIRE+"",ie.NEW_JERSEY+"",ie.NEW_MEXICO+"",ie.NEW_SOUTH_WALES+"",ie.NEW_YORK+"",ie.NORTHERN_TERRITORY+"",ie.NORTH_CAROLINA+"",ie.NORTH_DAKOTA+"",ie.NOVA_SCOTIA+"",ie.OHIO+"",ie.OKLAHOMA+"",ie.ONTARIO+"",ie.OREGON+"",ie.PENNSYLVANIA+"",ie.QUEBEC+"",ie.QUEENSLAND+"",ie.RHODE_ISLAND+"",ie.SASKATCHEWAN+"",ie.SOUTH_AUSTRALIA+"",ie.SOUTH_CAROLINA+"",ie.SOUTH_DAKOTA+"",ie.TASMANIA+"",ie.TENNESSEE+"",ie.TEXAS+"",ie.UTAH+"",ie.VERMONT+"",ie.VICTORIA+"",ie.VIRGINIA+"",ie.WASHINGTON+"",ie.WESTERN_AUSTRALIA+"",ie.WEST_VIRGINIA+"",ie.WISCONSIN+"",ie.WYOMING+"",ie.YUKON+"",ie.CIUDAD_DE_MEXICO+"",ie.JALISCO+"",ie.NEWFOUNDLAND_AND_LABRADOR+"",ie.NUEVO_LEON+"",ie.BAJA_CALIFORNIA+"",ie.CHIHUAHUA+"",ie.GUANAJUATO+"",ie.GUERRERO+"",ie.MEXICO+"",ie.MICHOACAN+"",ie.NEW_YORK_CITY+"",ie.TAMAULIPAS+"",ie.VERACRUZ+"",ie.CHIAPAS+"",ie.COAHUILA+"",ie.DURANGO+"",ie.GUERRERO_COCULA+"",ie.GUERRERO_JUCHITAN+"",ie.GUERRERO_TEPECOACUILCO+"",ie.GUERRERO_TLACOAPA+"",ie.GUJARAT+"",ie.HIDALGO+"",ie.KARNATAKA+"",ie.KERALA+"",ie.KHYBER_PAKHTUNKHWA+"",ie.MADHYA_PRADESH+"",ie.MAHARASHTRA+"",ie.MORELOS+"",ie.NAYARIT+"",ie.OAXACA+"",ie.PUEBLA+"",ie.PUNJAB+"",ie.QUERETARO+"",ie.SAN_LUIS_POTOSI+"",ie.SINALOA+"",ie.SONORA+"",ie.TABASCO+"",ie.TAMIL_NADU+"",ie.YUCATAN+"",ie.ZACATECAS+"",ie.AGUASCALIENTES+"",ie.BAJA_CALIFORNIA_SUR+"",ie.CAMPECHE+"",ie.COLIMA+"",ie.QUINTANA_ROO_BENITO_JUAREZ+"",ie.UINTANA_ROO+"",ie.QUINTANA_ROO_SOLIDARIDAD+"",ie.TLAXCALA+"",ie.QUINTANA_ROO_COZUMEL+"",ie.SAO_PAOLO+"",ie.COUNT+"";Ge.NONE+"",Ge.CONSULAR_ID+"",Ge.DL+"",Ge.DL_PUBLIC_SERVICES_CARD+"",Ge.EMPLOYMENT_PASS+"",Ge.FIN_CARD+"",Ge.ID+"",Ge.MULTIPURPOSE_ID+"",Ge.MyKad+"",Ge.MyKid+"",Ge.MyPR+"",Ge.MyTentera+"",Ge.PAN_CARD+"",Ge.PROFESSIONAL_ID+"",Ge.PUBLIC_SERVICES_CARD+"",Ge.RESIDENCE_PERMIT+"",Ge.RESIDENT_ID+"",Ge.TEMPORARY_RESIDENCE_PERMIT+"",Ge.VOTER_ID+"",Ge.WORK_PERMIT+"",Ge.iKAD+"",Ge.MILITARY_ID+"",Ge.MyKAS+"",Ge.SOCIAL_SECURITY_CARD+"",Ge.HEALTH_INSURANCE_CARD+"",Ge.PASSPORT+"",Ge.S_PASS+"",Ge.ADDRESS_CARD+"",Ge.ALIEN_ID+"",Ge.ALIEN_PASSPORT+"",Ge.GREEN_CARD+"",Ge.MINORS_ID+"",Ge.POSTAL_ID+"",Ge.PROFESSIONAL_DL+"",Ge.TAX_ID+"",Ge.WEAPON_PERMIT+"",Ge.VISA+"",Ge.BORDER_CROSSING_CARD+"",Ge.DRIVER_CARD+"",Ge.GLOBAL_ENTRY_CARD+"",Ge.MyPolis+"",Ge.NEXUS_CARD+"",Ge.PASSPORT_CARD+"",Ge.PROOF_OF_AGE_CARD+"",Ge.REFUGEE_ID+"",Ge.TRIBAL_ID+"",Ge.VETERAN_ID+"",Ge.CITIZENSHIP_CERTIFICATE+"",Ge.MY_NUMBER_CARD+"",Ge.CONSULAR_PASSPORT+"",Ge.MINORS_PASSPORT+"",Ge.MINORS_PUBLIC_SERVICES_CARD+"",Ge.COUNT+"";const Pm=85.6/54,Dm=e=>{const t=Math.min(e.topLeft.x,e.bottomLeft.x);return Math.max(e.topRight.x,e.bottomRight.x)-t},Ya=(e,t)=>{if(!e||e.detectionStatus===cu.Fail)return!1;const n=Math.min(e.topLeft.y,e.topRight.y),r=Math.max(e.bottomLeft.y,e.bottomRight.y),o=Math.min(e.topLeft.x,e.bottomLeft.x),a=Math.max(e.topRight.x,e.bottomRight.x),s=(a-o)/(r-n);if(!(s>Pm*.8&&s<Pm*1.2))return!1;if(t&&t.detectionStatus!==cu.Fail){const l=Math.min(t.topLeft.y,t.topRight.y),u=Math.max(t.bottomLeft.y,t.bottomRight.y),d=Math.min(t.topLeft.x,t.bottomLeft.x),m=Math.max(t.topRight.x,t.bottomRight.x);if(!(l>n*.95&&u<r*1.05&&d>o*.95&&m<a*1.05))return!1}return!0},$6=new U6,G6=8e3,W6=1e3,Y6=({setAutoCaptureReady:e,delayUntilManualCaptureMs:t=G6,handleCapture:n,labelTakePhoto:r,renderOverlay:o,videoConstraints:a,requiresSide:s,governmentIdClass:c,handleError:l,reportDebugMetrics:u=!1,handleTrigger:d,handleCameraChange:m,selectedCamera:h,cameraSelectOptions:p,shouldDisplayCameraSelector:g,overlayReady:C,overlayRef:I,overlayCaptureWindowRef:v,previewViewfinderRef:x,requireFullBack:R=!1,allowIncompleteBarcode:_=!1,isShortBarcodeOverlay:T,submitButtonStyles:E,showHelpButton:V,helpButtonIconColor:D,helpButtonLabel:O,renderAutoCapturePill:U,renderHelpModal:M,uiReady:Y,videoReady:F,assets:H,captureOverlay:q,captureFrameLabel:W,hint:X,prompt:oe})=>{let se;const Se=f.useRef(!1),Ee=f.useRef(void 0),[he,de]=f.useState(!1),Ie=en("inquiry:enable-low-light-detection-web"),je=en("inquiry:use-old-microblink")?$6:Pi;va(async re=>{try{const le=performance.now();if(Ee.current=await je.initialize(s,c,{requireFullBack:R,allowIncompleteBarcode:_}),se=performance.now(),u&&ee.logAmplitude("government-id.microblink.initialization",{initializationTime:(se-le)/1e3,side:s,idClass:c}),re())e();else{await je.tearDownInstance(Ee.current);return}}catch(le){l(le,"load")}},()=>{je.tearDownInstance(Ee.current),se=void 0},[s,R]);const ce=async(re,le,Ue,G,xe)=>{var De,Me,nt,St,Qt;aa({source:re,overlayCaptureWindowElement:v.current,canvasBuffer:le});const Ke=le.width,_e=le.height;try{const Ft=le.toDataURL(ho,Ss),Vt=performance.now();let Vn=!0;de(!1),setTimeout(()=>{Vn&&de(!0)},1e3);const ei=$r=>{$r&&setTimeout(()=>{if(Vn&&s===B.Front){const Gr=performance.now()-Vt;Oe({currentTrigger:G.getTriggered().getType(),detectedQuad:null,microblinkResult:null,luminosityData:Ie?yr(le,xe):null,videoWidth:Ke,videoHeight:_e,imageDataUri:Ft,hasGlare:null,processingTime:Gr,isShortBarcodeOverlay:T},bt.Auto,null),Vn=!1}},W6)},lt=await je.processImage(le,ei);if(Vn=!1,s===B.Front){const fr=performance.now()-Vt;return{currentTrigger:G.getTriggered().getType(),detectedQuad:(De=lt==null?void 0:lt.detectedQuad)!=null?De:null,hasGlare:(Me=lt==null?void 0:lt.hasGlare)!=null?Me:null,microblinkRecognizerName:lt==null?void 0:lt.recognizerName,microblinkResult:lt==null?void 0:lt.recognitionResult,luminosityData:Ie?yr(le,xe):null,videoWidth:Ke,videoHeight:_e,imageDataUri:Ft,processingTime:fr,isShortBarcodeOverlay:T}}else if(s===B.BarcodePdf417||s===B.Back){const fr=performance.now()-Vt;return{currentTrigger:G.getTriggered().getType(),detectedQuad:(nt=lt==null?void 0:lt.detectedQuad)!=null?nt:null,microblinkRecognizerName:lt==null?void 0:lt.recognizerName,microblinkResult:lt==null?void 0:lt.recognitionResult,luminosityData:Ie?yr(le,xe):null,videoWidth:Ke,videoHeight:_e,hasGlare:(St=lt==null?void 0:lt.hasGlare)!=null?St:null,imageDataUri:Ft,processingTime:fr,hasIncompleteBack:(Qt=lt==null?void 0:lt.hasIncompleteBack)!=null?Qt:!1,isShortBarcodeOverlay:T}}}catch(Ft){l(Ft,"capture")}return{currentTrigger:G.getTriggered().getType(),luminosityData:Ie?yr(le,xe):null,videoWidth:Ke,videoHeight:_e,microblinkRecognizerName:null,detectedQuad:null,microblinkResult:null,hasGlare:null,imageDataUri:null,processingTime:null,isShortBarcodeOverlay:T}},Q=(re,le)=>{var _e,we,De,Me;const Ue=((_e=re.microblinkResult)==null?void 0:_e.state)===_r.Valid||s===B.Back&&_&&((we=re.microblinkResult)==null?void 0:we.state)===_r.Uncertain&&((De=re.microblinkResult.imageAnalysisResult)==null?void 0:De.barcodeDetectionStatus)===H0.Detected,G=(Me=re.microblinkResult)==null?void 0:Me.processingStatus,xe=G!==lu.ImagePreprocessingFailed&&G!==lu.StabilityTestFailed,Ke=Ue&&xe&&!Ci(s,re,R)&&!kr(s,re,R)&&!Nr(re)&&!_l(s,re,R)&&!fo(re)&&jm(c,re);if(!Ke)if((re==null?void 0:re.detectedQuad)==null)console.info("Autocapture failed: no ID detected");else{const nt=[(!Ue||!xe)&&"Failed to recognize ID",Ci(s,re,R)&&"ID too far",kr(s,re,R)&&"ID too close",Nr(re)&&"ID not centered",_l(s,re,R)&&"Back is incomplete",fo(re)&&"Has glare",!jm(c,re)&&"Missing MRZ"].filter(Boolean);console.info(`Autocapture failed: ${nt.join(", ")||"Reason unknown"}`)}return Ke},K=(re,le,Ue)=>({x:re.x/le,y:re.y/Ue}),be=(re,le,Ue)=>({bottomLeft:K(re.bottomLeft,le,Ue),bottomRight:K(re.bottomRight,le,Ue),topLeft:K(re.topLeft,le,Ue),topRight:K(re.topRight,le,Ue)}),Oe=async(re,le,Ue)=>{var xe,Ke,_e;if(Se.current)return;const G=[];if(s===B.Back&&_){const we=re.microblinkResult;if(we&&(G.push({type:"pdf417",value:(Ke=(xe=we.barcode)==null?void 0:xe.barcodeData)==null?void 0:Ke.stringData}),re.detectedQuad)){const De=be(re.detectedQuad,re.videoWidth,re.videoHeight);G.push({type:"card",value:{back:{"top-left":De.topLeft,"top-right":De.topRight,"bottom-left":De.bottomLeft,"bottom-right":De.bottomRight}}})}}else if(s===B.BarcodePdf417||s===B.Back){const we=re.microblinkResult;if(we&&(G.push({type:"pdf417",value:(_e=we.barcodeData)==null?void 0:_e.stringData}),re.detectedQuad)){const De=be(re.detectedQuad,re.videoWidth,re.videoHeight);G.push({type:"card",value:{[s===B.Back&&R?"back":"barcode"]:{"top-left":De.topLeft,"top-right":De.topRight,"bottom-left":De.bottomLeft,"bottom-right":De.bottomRight}}})}}else if(s===B.Front){const we=re.microblinkResult;if(we){if(G.push({type:"viz",value:{"name-first":we.firstName,"name-last":we.lastName,"identification-number":we.documentNumber,address:we.address,birthdate:we.dateOfBirth.originalString,"expiration-date":we.dateOfExpiry.originalString}}),c==="pp"){const De=we.mrz;G.push({type:"mrz",value:De.rawMRZString})}if(re.detectedQuad){const De=be(re.detectedQuad,re.videoWidth,re.videoHeight);G.push({type:"card",value:{front:{"top-left":De==null?void 0:De.topLeft,"top-right":De==null?void 0:De.topRight,"bottom-left":De==null?void 0:De.bottomLeft,"bottom-right":De==null?void 0:De.bottomRight}}})}G.push({type:"classification",value:{type:we.classInfo.documentType?Kg(we.classInfo.documentType):null,country:we.classInfo.country?Yg(we.classInfo.country):null,region:we.classInfo.region?zg(we.classInfo.region):null}})}}u&&ee.logAmplitude("government-id.microblink.capture",{processingTime:re.processingTime/1e3,captureTime:se!=null?(performance.now()-se)/1e3:void 0,side:s,idClass:c,captureMethod:le,parsedViz:G.find(we=>we.type==="viz")!=null,parsedMrz:G.find(we=>we.type==="mrz")!=null,parsedCard:G.find(we=>we.type==="card")!=null,parsedClassification:G.find(we=>we.type==="classification")!=null,parsedPdf417:G.find(we=>we.type==="pdf417")!=null}),await n([re.imageDataUri],le,Ue,G,re.microblinkRecognizerName),Se.current=!0},ze=s===B.Back&&_?Nm[B.Front]:s===B.Back&&R?F6:Nm[s];return i.jsx(Gd,{handleCapture:({captureMethod:re,params:le,cameraInspectionData:Ue})=>Oe(le,re,Ue),handleFailed:l,detectInterval:P6,labelTakePhoto:r,videoConstraints:a,triggerConfigs:ze,paramsFromVideoFrame:ce,shouldSubmit:Q,hasValidQuad:re=>B6(s,re,R),renderOverlay:o,handleTrigger:d,delayUntilManualCaptureMs:t,triggerOverride:he?M6:null,shouldDisplayCameraSelector:g,cameraSelectOptions:p,selectedCamera:h,handleCameraChange:m,overlayReady:C,overlayRef:I,overlayCaptureWindowRef:v,previewViewfinderRef:x,isShortBarcodeOverlay:T,submitButtonStyles:E,showHelpButton:V,helpButtonIconColor:D,helpButtonLabel:O,renderAutoCapturePill:U,renderHelpModal:M,scannerType:"microblink",uiReady:Y,videoReady:F,disableCaptureClient:!0,assets:H,captureOverlay:q,captureFrameLabel:W,hint:X,prompt:oe,requiresSide:s,governmentIdClass:c})};var Rl=(e=>(e[e.DetectedGlare=0]="DetectedGlare",e[e.DetectedLowLight=1]="DetectedLowLight",e[e.Capture=2]="Capture",e[e.HoldStill=3]="HoldStill",e[e.MoveCloser=4]="MoveCloser",e[e.None=5]="None",e))(Rl||{});const z6=250,Om=.3,K6=.27,Q6=.32,Z6=.25,J6=.3,X6=.37,ek=[{type:5,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}],tk=[{type:0,shouldShow:nk,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-glare")},{type:2,shouldShow:e=>e.currentTrigger===3,showAfterFrames:5,hideAfterFrames:999999,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:3,shouldShow:Wd,showAfterFrames:2,hideAfterFrames:2,getPrompt:({t:e})=>e("government-id-scanner.hint.hold-still")},{type:4,shouldShow:ab,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.move-closer")},{type:1,shouldShow:ik,showAfterFrames:2,hideAfterFrames:4,getPrompt:({t:e})=>e("government-id-scanner.hint.detected-low-light")},{type:5,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:()=>""}];function nk(e){return e.glareRatio>2e-4&&(ab(e)||Wd(e))}function ik(e){return ec(e.luminosityData)}function ab(e){const{faceBoundingBox:t}=e;if(t==null)return!1;const n=1.5,r=new yp((t.left-.5)*n+.5,(t.top-.5)*n+.5,(t.right-.5)*n+.5,(t.bottom-.5)*n+.5);return Wd({...e,faceBoundingBox:r})}function Wd({isPassport:e,faceBoundingBox:t}){if(t==null)return!1;if(e)return t.left+t.width/2<Z6&&t.width<J6+.05&&t.height<X6+.05;{const n=t.left+t.width/2;return(n<Om||n>1-Om)&&t.width<K6+.05&&t.height<Q6+.05}}const rk=.3,ok=({delayUntilManualCaptureMs:e=0,autoCaptureEnabled:t,setAutoCaptureReady:n,handleCapture:r,handleError:o,isPassport:a,labelTakePhoto:s,renderOverlay:c,videoConstraints:l,handleTrigger:u,handleCameraChange:d,selectedCamera:m,cameraSelectOptions:h,shouldDisplayCameraSelector:p,overlayReady:g,overlayRef:C,overlayCaptureWindowRef:I,previewViewfinderRef:v,submitButtonStyles:x,showHelpButton:R,helpButtonIconColor:_,helpButtonLabel:T,enableGlareDetection:E,renderAutoCapturePill:V,renderHelpModal:D,uiReady:O,videoReady:U,assets:M,governmentIdClass:Y,requiresSide:F,captureOverlay:H,captureFrameLabel:q,hint:W,prompt:X})=>{const[oe,se]=f.useState(!1),Se=en("inquiry:enable-low-light-detection-web"),Ee=en("inquiry:disable-gov-id-face-api");f.useEffect(()=>{if(!Ee)try{_t.loadModels().then(n)}catch{se(!0)}},[]);const he=async(Ie,ye,je,ce,Q)=>{let K=[];if(!oe&&_t.isLoaded()&&_t.isMediaLoaded(Ie)){aa({source:Ie,overlayCaptureWindowElement:I.current,canvasBuffer:ye});try{K=await _t.detectFaces(ye,{scoreThreshold:rk})}catch(Oe){o(Oe,"capture"),se(!0)}}let be;return K.length===1&&(be=K[0].box.rescale({width:1/ye.width,height:1/ye.height})),{currentTrigger:ce.getTriggered().getType(),faceBoundingBox:be,glareRatio:E?eo(ye):0,luminosityData:Se?yr(ye,Q):null,isPassport:a}},de=(Ie,ye)=>ye.getTriggered().getType()===Rl.Capture;return i.jsx(Gd,{handleCapture:({imageSrcs:Ie,captureMethod:ye,cameraInspectionData:je})=>r(Ie,ye,je),handleFailed:o,detectInterval:z6,labelTakePhoto:s,videoConstraints:l,triggerConfigs:t?tk:ek,paramsFromVideoFrame:he,shouldSubmit:de,hasValidQuad:Ie=>Ie.currentTrigger===Rl.HoldStill,renderOverlay:c,handleTrigger:u,delayUntilManualCaptureMs:t?e:0,shouldDisplayCameraSelector:p,cameraSelectOptions:h,selectedCamera:m,handleCameraChange:d,overlayReady:g,overlayRef:C,overlayCaptureWindowRef:I,previewViewfinderRef:v,submitButtonStyles:x,showHelpButton:R,helpButtonIconColor:_,helpButtonLabel:T,renderAutoCapturePill:V,renderHelpModal:D,scannerType:"governmentId",uiReady:O,videoReady:U,assets:M,governmentIdClass:Y,captureOverlay:H,captureFrameLabel:q,hint:W,prompt:X,requiresSide:F})},ak=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__AutoCaptureCircle",componentId:"sc-whyqox-0"})(["width:6px;height:6px;border-radius:3px;background-color:currentcolor;margin-right:4px;"]),sk=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__AutoCapturePill",componentId:"sc-whyqox-1"})(["background-color:rgba(255,255,255,0.15);border-radius:1000px;color:",";display:flex;align-items:center;justify-content:center;font-size:12px;line-height:150%;max-width:50%;opacity:",";padding:4px 8px;text-align:center;transition:opacity ",";z-index:",";"],({enabled:e})=>e?S.Color.PrimaryWhite:S.Color.CoreSlate500,({visible:e})=>e?1:0,ya.fast,yt.footer),ck=450,lk=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__TitleCenterer",componentId:"sc-whyqox-2"})(["display:flex;justify-content:center;"]),dk=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__VideoWrapperColumnSizer",componentId:"sc-whyqox-3"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${ck}px`:null),uk=b.div.withConfig({displayName:"InquiryGovernmentIdCaptureViewRedesign__TitlePositioner",componentId:"sc-whyqox-4"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],S.Color.PrimaryWhite,yt.navbar);function mk({assets:e,localizations:t,featureFlags:n,governmentIdClass:r,autoCaptureConfig:o,handleCapture:a,handleError:s,requiresSide:c,captureOverlay:l,shouldUseMicroblink:u,videoConstraints:d,webCameraManualCaptureDelayMs:m,barcodeCameraManualCaptureDelayMs:h,isRetake:p,handleCameraChange:g,selectedCamera:C,cameraSelectOptions:I,shouldDisplayCameraSelector:v,requireFullBack:x,allowIncompleteBarcode:R,uiReady:_,videoReady:T}){var _e,we,De;const[E]=z(),V=t.title?null:t["prompt-override"]||bi(E,["government-id.capture.prompt"],null,r,c),[D,O]=f.useState(null),U=f.useCallback(Me=>{const nt=Me.getPrompt({t:E,localizations:t});O(nt)},[E,t]),[M,{enable:Y}]=rt(n["inquiry:enable-experimental-govid-perf-improvements"]&&n["inquiry:enable-experimental-govid-perf-improvements-percentage"]),{base:F,buttons:H,captureFeedBox:q,captureHint:W,captureHintIcon:X,captureButtons:oe,captureHelpButtonIcon:se,captureOverlayHeaderButton:Se}=Rn(),Ee=(we=A((_e=se==null?void 0:se.stroke)==null?void 0:_e.color))!=null?we:S.Color.PrimaryWhite,he=f.useRef(),de=f.useRef(),Ie=f.useRef(),ye=((De=o==null?void 0:o["rule-sets"])==null?void 0:De.length)>0,je=(o==null||ye)&&(u||![B.Back,B.PassportSignature].includes(c)),[ce,{enable:Q}]=rt(!1),K=c===B.BarcodePdf417,be=c===B.Front,Oe=c===B.Back,ze=K||be||Oe,re=Jn(),le=({hasDetectedQuad:Me,isCameraReady:nt,renderUnderOverlayComponents:St,mirrored:Qt})=>i.jsx(eb,{styles:{base:F,captureBox:q,captureHintIcon:X,captureOverlayHeaderButton:Se,hint:W==null?void 0:W.textStyle},assets:e,hasDetectedQuad:Me,isCameraReady:nt,isShortBarcodeOverlay:K,governmentIdClass:r,requiresSide:c,captureOverlay:l,mirrored:Qt,captureFrameLabel:Ei(t,r,c),prompt:V,hint:D,scanning:je&&ce,collapsed:!1,expandOnMount:!p&&!M,onReady:Y,overlayRef:he,overlayCaptureWindowRef:de,previewViewfinderRef:Ie,renderUnderOverlayComponents:St,videoReady:T}),Ue=()=>t.title?i.jsx(lk,{children:i.jsx(dk,{restrictInlineColumnWidth:j.isInline,children:i.jsx(uk,{children:i.jsx(dt,{styles:F==null?void 0:F.titleStyle,children:t.title})})})}):null,G=({isCameraReady:Me})=>i.jsxs(sk,{enabled:je&&ce,visible:Me,children:[i.jsx(ak,{}),i.jsx("span",{children:je&&ce?t["auto-capture-on"]:t["auto-capture-off"]})]}),xe=({isOpen:Me,onClose:nt})=>{if(K)return i.jsx(jc,{isOpen:Me,onClose:nt,title:t["barcode-help-modal-title"],prompt:"",warning:t["barcode-help-modal-warning"],pictograph:i.jsx(qe,{customImage:e["barcode-help-modal-pictograph"],alt:"barcode help modal pictograph",children:i.jsx(Y1,{})}),hints:t["barcode-help-modal-hints"],continueBtnLabel:t["barcode-help-modal-continue-btn"],styles:{base:F,buttons:H,captureHintIcon:X}});if(be)return i.jsx(jc,{isOpen:Me,onClose:nt,title:t["id-front-help-modal-title"],prompt:t["id-front-help-modal-prompt"],pictograph:i.jsx(qe,{customImage:e["id-front-help-modal-pictograph"],alt:"ID front help modal pictograph",children:i.jsx(z1,{})}),hints:re?t["id-front-help-modal-hints-mobile"]:t["id-front-help-modal-hints-desktop"],continueBtnLabel:t["id-front-help-modal-continue-btn"],styles:{base:F,buttons:H,captureHintIcon:X}});if(Oe)return i.jsx(jc,{isOpen:Me,onClose:nt,title:t["id-back-help-modal-title"],prompt:t["id-back-help-modal-prompt"],pictograph:i.jsx(qe,{customImage:e["id-back-help-modal-pictograph"],alt:"ID back help modal pictograph",children:i.jsx(K1,{})}),hints:re?t["id-back-help-modal-hints-mobile"]:t["id-back-help-modal-hints-desktop"],continueBtnLabel:t["id-back-help-modal-continue-btn"],styles:{base:F,buttons:H,captureHintIcon:X}})},Ke=()=>{if(je&&u){const Me=c===B.BarcodePdf417?h:m;return i.jsx(Y6,{setAutoCaptureReady:Q,delayUntilManualCaptureMs:Me,handleCapture:a,handleError:s,handleTrigger:U,labelTakePhoto:E("government-id.capture.btn-take-photo"),renderOverlay:le,requiresSide:c,governmentIdClass:r,videoConstraints:d,shouldDisplayCameraSelector:v,cameraSelectOptions:I,selectedCamera:C,handleCameraChange:g,overlayReady:M,overlayRef:he,overlayCaptureWindowRef:de,previewViewfinderRef:Ie,requireFullBack:x,allowIncompleteBarcode:R,isShortBarcodeOverlay:K,submitButtonStyles:oe==null?void 0:oe.submit,showHelpButton:ze,helpButtonIconColor:Ee,helpButtonLabel:t["btn-help"],renderAutoCapturePill:G,renderHelpModal:xe,uiReady:_,videoReady:T,assets:e,captureOverlay:l,captureFrameLabel:Ei(t,r,c),hint:D,prompt:V})}else return c===B.BarcodePdf417?i.jsx(j6,{setAutoCaptureReady:Q,delayUntilManualCaptureMs:h,handleCapture:a,handleError:s,handleTrigger:U,labelTakePhoto:E("government-id.capture.btn-take-photo"),renderOverlay:le,requiresSide:c,videoConstraints:d,shouldDisplayCameraSelector:v,cameraSelectOptions:I,selectedCamera:C,handleCameraChange:g,overlayReady:M,overlayRef:he,overlayCaptureWindowRef:de,previewViewfinderRef:Ie,isShortBarcodeOverlay:K,submitButtonStyles:oe==null?void 0:oe.submit,showHelpButton:ze,helpButtonIconColor:Ee,helpButtonLabel:t["btn-help"],renderAutoCapturePill:G,renderHelpModal:xe,uiReady:_,videoReady:T,assets:e,governmentIdClass:r,captureOverlay:l,captureFrameLabel:Ei(t,r,c),hint:D,prompt:V}):i.jsx(ok,{autoCaptureEnabled:je,setAutoCaptureReady:Q,delayUntilManualCaptureMs:m,handleCapture:a,handleTrigger:U,handleError:s,isPassport:r==="pp"||r==="ipp",labelTakePhoto:t["btn-take-photo"],renderOverlay:le,requiresSide:c,videoConstraints:d,shouldDisplayCameraSelector:v,cameraSelectOptions:I,selectedCamera:C,handleCameraChange:g,overlayReady:M,overlayRef:he,overlayCaptureWindowRef:de,previewViewfinderRef:Ie,submitButtonStyles:oe==null?void 0:oe.submit,showHelpButton:ze,helpButtonIconColor:Ee,helpButtonLabel:t["btn-help"],renderAutoCapturePill:G,renderHelpModal:xe,uiReady:_,videoReady:T,assets:e,governmentIdClass:r,captureOverlay:l,captureFrameLabel:Ei(t,r,c),hint:D,prompt:V})};return i.jsxs(i.Fragment,{children:[Ue(),Ke()]})}function sb(e,t,n=.92){return new Promise((r,o)=>{const a=document.createElement("img");a.src=e,a.onload=()=>{a.onload=void 0,a.onerror=void 0;const[s,c]=fi();a.width>a.height?(s.width=t,s.height=s.width/a.width*a.height):(s.height=t,s.width=s.height/a.height*a.width);const l=s.getContext("2d");l.drawImage(a,0,0,s.width,s.height);const u=s.toDataURL("image/jpeg",n);l==null||l.clearRect(0,0,s.width,s.height),c(),r(u)},a.onerror=()=>{a.onload=void 0,a.onerror=void 0,o()}})}function cb(e,t,n){e.width>e.height?(t.width=n,t.height=t.width/e.width*e.height):(t.height=n,t.width=t.height/e.height*e.width);const r=t.getContext("2d");r==null||r.clearRect(0,0,t.width,t.height),r==null||r.drawImage(e,0,0,t.width,t.height)}const hk=1e6,pk=2e3,fk=12e4,gk=e=>{var be,Oe,ze,re,le,Ue;const{config:t,featureFlags:n,inquiry:r,match:o,governmentIdClass:a,autoclassificationCountryCode:s,didAutoclassificationIdSelection:c,idClassesByCountries:l,videoConstraints:u,history:d,cameraOptions:m,styles:h,saveVideoCaptureEnabled:p}=e,g=parseInt(o.params.step,10),C=en("inquiry:auto-classification"),{governmentIdClass:I,selectedCountryCode:v,autoclassificationIdClassesConfig:x}=rc(t,g,c,a,s,l,C),[R]=z(),[_,T]=f.useState(!1),E=f.useRef(void 0),V=Vi(),D=Ld(),O=f.useRef(!1),U=f.useMemo(()=>g===0?He.shouldInitializeVideo(t==null?void 0:t["enabled-capture-file-types"]):e.videoCaptureEnabled,[]),[M,Y]=f.useState(!U);let F=[];m!=null&&(m.backCameras.length>0?F=m.backCameras:F=m.frontCameras);const H=u.deviceId,q=!!n["inquiry:show-government-id-camera-selector"],W=pa(t,I,g,c,x),X=G=>{var we;const xe=G.deviceId,Ke=G.label;ee.logAmplitude("government-id.camera.changed",{deviceId:xe,cameraName:Ke}),Dn.dispose();const _e={...u,deviceId:{exact:xe}};Dn.prepare({video:_e,audio:U&&$i(t)},n),e.setVideoConstraints(_e),(we=He.currentClient)==null||we.destroy()};f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}q&&e.loadCameraOptions()},[]),f.useEffect(()=>{const G=W?e.uploads[W]!=null:!1;U&&W==="front"&&G&&(He.destroy("government-id",!0),He.decrementAttempts());const xe=U?async()=>{const Ke={onTimeExceeded:()=>{var we;const _e=W?e.uploads[W]:null;_e&&(_e==null?void 0:_e.length)>0?(we=He.currentClient)==null||we.stopRecording():(e.history.replace(Ut(0,We.Prompt)),e.showMessage(R("government-id.capture.recording-timeout")))},onError:_e=>{ee.logAmplitude("government-id.video.errored",{pageType:"capture",message:`${_e instanceof Error?_e==null?void 0:_e.message:JSON.stringify(_e)}`}),He.shouldReinitializeWithUpload(_e,t==null?void 0:t["video-capture-methods"])?(He.destroy("government-id"),xe==null||xe()):(d.replace(Ut(0,We.Prompt)),e.showMessage(R("errors.network")),$e(`MediaRecorder error ${_e instanceof Error?_e.message:JSON.stringify(_e)}`))},onStart:_e=>{var we;Y(!0),ee.logAmplitude("government-id.video.start",{isRestart:_e,type:(we=He.currentClient)==null?void 0:we.type})}};if(g===0){const _e=He.getNewClient(t==null?void 0:t["video-capture-methods"]),we=await navigator.mediaDevices.getUserMedia({video:u!=null?u:!0,audio:$i(t)});if(V()){const De=_e.init({stream:we,bitRate:Ig(_e.type,n),maxRecordingTime:fk,jwt:t==null?void 0:t["video-session-jwt"],...Ke});E.current=De,_e.startRecording(),He.recordVideoAttempt(),ee.logAmplitude("government-id.video.initialized",{type:_e.type,attempt:He.videoAttempts})}}else{const _e=He.currentClient,we=_e==null?void 0:_e.subscribe(Ke);Y(!0),E.current=we}}:void 0;return xe==null||xe(),()=>{var Ke;(Ke=He.currentClient)==null||Ke.unsubscribe(E.current)}},[]),f.useEffect(()=>{g===0&&p(U)},[U,g,p]),f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.capture-page.entered",{currentSide:W,selectedCountryCode:v,governmentIdClass:I})}catch{}},[]);const oe=!_n()&&ba(window.location.host)&&!_&&Ca(W,v,I,n),se=(t==null?void 0:t["govid-design-version"])===_o.V1,Se=Jn(),Ee=async(G,xe,Ke,_e,we)=>{if(e.uiStatus===on.Ready)try{if(yn(),G=G.filter(Me=>Me!=null),e.updateCameraInspectionData(Ke),e.saveCaptureMethod(xe),ee.logAmplitude("government-id.camera.capture",{imageSizes:G.map(Me=>Me.length),currentSide:W,captureMethod:xe}),G.some(Me=>Me.length>hk)){const Me=[];for(const nt of G)Me.push(await sb(nt,pk,void 0));G=Me}const De=G.map((Me,nt)=>({filename:`photo${nt+1}.jpg`,fileType:ho,dataUrl:Me,captureMethod:xe,captureFlow:Io.Guided}));e.uploadFiles(W,De,_e,we),j.onEvent(Pe.DocumentCameraCapture),se?(e.history.entries[e.history.entries.length-1].state={retake:!0},e.history.push(Ut(g,We.Check))):e.history.index>0?e.history.replace(Ut(g,We.CheckUpload)):e.history.push(Ut(g,We.CheckUpload)),O.current=!0}catch(De){he(De,"capture")}finally{}},he=(G,xe)=>{var Ke,_e,we,De;O.current||(xe==="capture"&&e.showMessage(R("government-id.capture.failed-screenshot")),G instanceof nn?(me(G,"warning",{...G.originalError,state:xe},{jira:"PER-10182",videoEnabled:U.toString(),videoCaptureMethod:(Ke=He.currentClient)==null?void 0:Ke.type}),xe==="load"?j.onEvent(Pe.LoadCameraFailed,{error:G.name,message:G.message}):j.onEvent(Pe.CameraCaptureFailed,{error:G.name,message:G.message})):G instanceof Error?(me(G,"error",{state:xe},{jira:"PER-10182",videoEnabled:U.toString(),videoCaptureMethod:(_e=He.currentClient)==null?void 0:_e.type}),xe==="load"?(j.onEvent(Pe.LoadCameraFailed,{error:G.name,message:G.message}),d.push($i(t)?"inquiry/support/camera-microphone":"/inquiry/support/camera")):j.onEvent(Pe.CameraCaptureFailed,{error:G.name,message:G.message})):(typeof G=="object"&&Object.prototype.hasOwnProperty.call(G,"message")?$e(G.message,"error",{...G,state:xe},{jira:"PER-10182",videoEnabled:U.toString(),videoCaptureMethod:(we=He.currentClient)==null?void 0:we.type}):$e(G,"error",{state:xe},{jira:"PER-10182",videoEnabled:U.toString(),videoCaptureMethod:(De=He.currentClient)==null?void 0:De.type}),xe==="load"?(j.onEvent(Pe.LoadCameraFailed,{message:G}),d.push($i(t)?"inquiry/support/camera-microphone":"/inquiry/support/camera")):j.onEvent(Pe.CameraCaptureFailed,{message:G})),oe&&T(!0))};if(r==null||r.attributes["next-step"].type!==Ae.GovernmentId)return null;const de=Qi(t,"capture-page",{idClass:I,side:W}),Ie=(be=t==null?void 0:t.idclasses)==null?void 0:be.find(G=>G.class===I),ye=(Oe=Ie==null?void 0:Ie["capture-page-configs"])==null?void 0:Oe[g],je=(ze=ye==null?void 0:ye["manual-capture-config"]["delay-ms"])!=null?ze:t["web-camera-manual-capture-delay-ms"],ce=(re=ye==null?void 0:ye["manual-capture-config"]["delay-ms"])!=null?re:t["barcode-camera-manual-capture-delay-ms"],Q=ye==null?void 0:ye.overlay,K=ye==null?void 0:ye["auto-capture-config"];return se?i.jsx(Zi,{value:h,children:i.jsx(mk,{assets:t.assets["capture-page"],localizations:de,requiresSide:W,shouldUseMicroblink:oe,featureFlags:n,governmentIdClass:I,captureOverlay:Q,autoCaptureConfig:K,handleCapture:Ee,handleError:he,webCameraManualCaptureDelayMs:je,barcodeCameraManualCaptureDelayMs:ce,videoConstraints:u,isRetake:(le=e.history.location.state)==null?void 0:le.retake,shouldDisplayCameraSelector:q,cameraSelectOptions:F,selectedCamera:(Ue=H==null?void 0:H.exact)!=null?Ue:"",handleCameraChange:X,requireFullBack:W===B.Back&&(Se?n["inquiry:enable-microblink-full-back-detection-mobile"]:n["inquiry:enable-microblink-full-back-detection-desktop"]),allowIncompleteBarcode:W===B.Back&&!Se&&n["inquiry:enable-microblink-incomplete-barcode-detection-desktop"],uiReady:e.uiStatus===on.Ready,videoReady:M})}):i.jsx(l5,{localizations:de,featureFlags:n,requiresSide:W,shouldUseMicroblink:oe,selectedCountryCode:v,governmentIdClass:I,handleCapture:Ee,handleError:he,webCameraManualCaptureDelayMs:je,barcodeCameraManualCaptureDelayMs:ce,videoConstraints:u,zoomFactor:D})};function bk(e){return{styles:Xi(e.inquiry),inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries,videoConstraints:e.verification.videoConstraints,uploads:e.verification.uploads,cameraOptions:e.ui.cameraOptions,uiStatus:e.ui.status,videoCaptureEnabled:e.verification.videoCaptureEnabled}}const Ck={updateCameraInspectionData:ef,saveCaptureMethod:mr,saveVideoCaptureEnabled:xv,showMessage:ae,uploadFiles:Bs,loadCameraOptions:Hl,setVideoConstraints:So,setTransitionStart:yn,setUiReady:ct},xk=Te(bk,Ck),vk=xk(gk),Ik=b.div.withConfig({displayName:"InquiryGovernmentIdCheckView__Container",componentId:"sc-1i77ehf-0"})(["display:flex;flex-direction:column;"]),Sk=b("div").withConfig({displayName:"InquiryGovernmentIdCheckView__Header",componentId:"sc-1i77ehf-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),wk=b("div").withConfig({displayName:"InquiryGovernmentIdCheckView__ImagePositioner",componentId:"sc-1i77ehf-2"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],L.base*2),yk=b("div").withConfig({displayName:"InquiryGovernmentIdCheckView__Minify",componentId:"sc-1i77ehf-3"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function _k(e){const{assets:t,currentUpload:n,localizations:r,handleContinue:o,handleRetry:a,isProcessing:s}=e,{base:c,buttons:l}=Rn();return["image/jpeg","image/png"].includes(n.fileType)?i.jsxs(Ik,{children:[i.jsxs(Sk,{children:[i.jsx(dt,{styles:c==null?void 0:c.titleStyle,children:i.jsx(te,{children:r.title})}),i.jsx(at,{styles:c==null?void 0:c.textStyle,children:i.jsx(te,{children:r.prompt})})]}),i.jsx(wk,{children:i.jsx(Ag,{src:n.dataUrl,alt:"upload preview"})}),i.jsxs(mt,{children:[i.jsx(ge,{id:"government_id__use-image",buttonType:Z.Primary,styles:l==null?void 0:l[Z.Primary],disabled:s,onClick:o,"data-test":"government-id-check__continue",children:s?i.jsxs("span",{children:[r.uploading,i.jsx(yk,{children:i.jsx(er,{})})]}):r["btn-submit"]}),l==null&&i.jsx(Je,{height:2}),i.jsx(ge,{id:"government_id__retake",buttonType:Z.Secondary,styles:l==null?void 0:l[Z.Secondary],disabled:s,onClick:a,"data-test":"government-id-check__retake",children:r["btn-retake"]})]})]}):i.jsx(Rg,{customFileIcon:t["icon-file"],fileName:n.filename,isProcessing:s,handleContinue:o,handleRetry:a,title:r["confirm-title"],prompt:r["confirm-prompt"],uploading:r["confirm-uploading"],btnSubmit:r["confirm-btn-submit"],btnRetake:r["confirm-btn-retake"],titleStyles:c==null?void 0:c.titleStyle,textStyles:c==null?void 0:c.textStyle,buttonStyles:l})}const Rk=b("h1").withConfig({displayName:"ThemedTitle__Title",componentId:"sc-1dzwaci-0"})(["font-family:",";color:",";font-size:",";font-weight:",";line-height:",";margin-bottom:",";text-align:",";"],({theme:{fontFamilyTitle:e}})=>Ht(e),({theme:e})=>e.colorFontTitle,({theme:e})=>e.fontSizeHeader,({theme:e})=>e.headerFontWeight,({theme:e})=>e.lineHeightHeader,({theme:e})=>e.headerMarginBottom,({theme:e})=>e.textAlign),Xe=({styles:e,...t})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(wd,{...t,styles:e}):i.jsx(Rk,{...t,tabIndex:-1})}),Ak=720,Tk=b("div").withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__VideoWrapperFullscreen",componentId:"sc-1y4imlj-0"})(["background:",";overflow:hidden;position:relative;min-height:","px;display:flex;justify-content:center;",";",";"],Le.black,Ra,({flowType:e})=>e===wt.Inline?`
      height: ${Ak}px;
    `:`
      @media ${jt.isMobile} {
        height: 100%;
        min-height: 140vw;
      }
    `,j.isDashboardFLE&&"height: 100%;"),Ek=450,kk=b.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__VideoWrapperColumnSizer",componentId:"sc-1y4imlj-1"})(["position:relative;width:100%;max-width:",";"],({restrictInlineColumnWidth:e})=>e?`${Ek}px`:null),Nk=b.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ButtonRowFullscreen",componentId:"sc-1y4imlj-2"})(["width:100%;position:absolute;bottom:",";display:flex;flex-direction:column;z-index:",";"],S.Spacing[5],yt.footer),Lm=b.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ButtonWrapper",componentId:"sc-1y4imlj-3"})(["margin-bottom:",";margin-left:10%;margin-right:10%;"],S.Spacing[4]),Fm={...Gi,colorButtonPrimary:Le.white,colorFontButtonPrimary:Le.black,colorButtonSecondary:Le.white,colorFontButtonSecondary:Le.white,colorButtonSecondaryFill:Le.black,borderWidth:"1.5px",borderRadius:"24px"},Mm=b(ua).withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__ThemedButton",componentId:"sc-1y4imlj-4"})([""]),jk=b.div.withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__TitlePositioner",componentId:"sc-1y4imlj-5"})(["position:absolute;top:72px;left:10%;right:10%;*{color:"," !important;}z-index:",";"],S.Color.PrimaryWhite,yt.navbar),Pk=b("img").withConfig({displayName:"InquiryGovernmentIdCheckViewRedesign__CapturedImage",componentId:"sc-1y4imlj-6"})(["width:100%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"]);function Dk(e){const{assets:t,requiresSide:n,governmentIdClass:r,captureOverlay:o,currentUpload:a,localizations:s,handleContinue:c,handleRetry:l,reverseSide:u,collapsed:d,flipped:m,isProcessing:h,featureFlags:p,uploadProgress:g}=e,{base:C,reviewImageBox:I,captureOverlayHeaderButton:v,captureHint:x,captureHintIcon:R,captureButtons:_}=Rn(),T=n===B.BarcodePdf417,E=p["inquiry:enable-experimental-govid-perf-improvements"]&&p["inquiry:enable-experimental-govid-perf-improvements-percentage"],V=f.useRef(),D=s["title-confirm-capture"]?null:s.prompt;return i.jsx(i.Fragment,{children:i.jsx(Tk,{flowType:j.flowType,children:i.jsxs(kk,{restrictInlineColumnWidth:j.isInline,children:[s["title-confirm-capture"]?i.jsx(jk,{children:i.jsx(Xe,{styles:C==null?void 0:C.titleStyle,children:s["title-confirm-capture"]})}):null,E?i.jsx(Md,{assets:t,styles:{base:C,captureBox:I,captureOverlayHeaderButton:v,hint:x==null?void 0:x.textStyle},governmentIdClass:r,requiresSide:n,captureOverlay:o,captureFrameLabel:Ei(s,r,n),reverseCaptureFrameLabel:Ei(s,r,u),prompt:D,reverseSide:u,collapsed:d,flipped:m,capturing:!0,renderCaptureWindowContents:()=>i.jsx(Pk,{alt:Ei(s,r,n),"data-test":"scanner-overlay__captured-image",src:a.dataUrl}),isShortBarcodeOverlay:T,isAnimated:!0}):i.jsx(eb,{assets:t,styles:{base:C,captureBox:I,captureHintIcon:R,captureOverlayHeaderButton:v,hint:x==null?void 0:x.textStyle},governmentIdClass:r,requiresSide:n,captureOverlay:o,captureFrameLabel:Ei(s,r,n),reverseCaptureFrameLabel:Ei(s,r,u),prompt:D,reverseSide:u,collapsed:d,flipped:m,capturing:!0,capturedImageUrl:a.dataUrl,isShortBarcodeOverlay:T,previewViewfinderRef:V,videoReady:!0}),!d&&i.jsxs(Nk,{children:[i.jsx(Lm,{children:i.jsx(Mm,{buttonType:Z.Primary,theme:Fm,disabled:h,styles:_==null?void 0:_.submit,id:"government_id__check__continue",onClick:c,"data-test":"government-id-check__continue",isPending:h,uploadProgress:h&&g?Math.round(g*100):null,pendingContent:s.uploading,children:s["btn-submit"]})}),i.jsx(Lm,{children:i.jsx(Mm,{buttonType:Z.Secondary,styles:_==null?void 0:_.retake,theme:Fm,disabled:h,id:"government_id__retake",onClick:l,"data-test":"government-id-check__retake",children:s["btn-retake"]})})]})]})})})}const pc=Zn([e=>e.inquiry.featureFlags],e=>({featureFlags:e}));function Ok(e){var ze;const{clientExtractions:t,clientExtractionSource:n,config:r,featureFlags:o,governmentIdClass:a,idClassesByCountries:s,autoclassificationCountryCode:c,didAutoclassificationIdSelection:l,inquiry:u,routingInputs:d,uploads:m,cameraInspectionData:h,status:p,styles:g,uploadProgress:C}=e,I=Ot(),v=q0(),x=parseInt(v.params.step,10),R=en("inquiry:auto-classification"),{governmentIdClass:_,selectedCountryCode:T,autoclassificationIdClassesConfigState:E}=rc(r,x,l,a,c,s,R),[V]=z(),[D,O]=f.useState(!1),[U,M]=f.useState(!1),[Y]=f.useState(()=>pa(r,_,x,l,E)),F=f.useRef(null),H=f.useRef(null),q=m[Y],W=el(q),X=J3(r,_,x+1,E),oe=f.useMemo(()=>!xl(m)&&e.videoCaptureEnabled,[]);f.useEffect(()=>{const{inquiry:re}=e;if(re==null){j.redirectToStart();return}if(Y==null){j.redirectToStart();return}(q==null||q.length===0||!W)&&(e.showMessage(V("errors.network")),I.goBack())},[]),f.useEffect(()=>{var re;return oe&&(He.currentClient==null&&me(new Error("MediaRecorder: client is undefined")),H.current=(re=He.currentClient)==null?void 0:re.subscribe({onRecordingComplete:(le,Ue)=>{var G,xe;F.current||(F.current=le,Ie(),ee.logAmplitude("government-id.video.stop",{elapsedTime:Ue,type:(G=He.currentClient)==null?void 0:G.type,chunksLength:le.type==="upload"?(xe=le.chunks)==null?void 0:xe.length:0}))},onError:le=>{ee.logAmplitude("government-id.video.errored",{pageType:"check",message:`${le instanceof Error?le==null?void 0:le.message:JSON.stringify(le)}`}),$e(`MediaRecorder error ${le instanceof Error?le==null?void 0:le.message:JSON.stringify(le)}`),(!X||!F.current)&&(I.replace(Ut(0,We.Prompt)),e.showMessage(V("errors.network")))},onTimeExceeded:()=>{var le;X&&!F.current?(le=He.currentClient)==null||le.stopRecording():(I.replace(Ut(0,We.Prompt)),e.showMessage(V("government-id.capture.recording-timeout")))}})),()=>{var le;(le=He.currentClient)==null||le.unsubscribe(H.current)}},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.check-page.entered",{currentSide:Y,selectedCountryCode:T,governmentIdClass:_,captureFlow:W==null?void 0:W.captureFlow,captureMethod:W==null?void 0:W.captureMethod})}catch{}},[]);let se=null;const Se=(r==null?void 0:r["govid-design-version"])===_o.V1&&(W==null?void 0:W.captureFlow)===Io.Guided;Se&&(se=pa(r,a,x+1,l,E));const Ee=re=>{O(!0),setTimeout(()=>{M(!0),setTimeout(()=>{re()},Hd*1e3+100)},dc*1e3+100)},{error:he,loading:de,callback:Ie}=vt(async()=>{var Ue;if(e.clearMessages(),wa(Object.values(m)).map(G=>G.dataUrl.length).reduce((G,xe)=>G+xe,0)>Us&&e.showMessage(r.localizations["check-page"]["large-upload"]),R&&Od(r,x,l)){const G=await e.governmentIdAutoclassification({inquiry:u,uploads:m,history:I,t:V,debugForcedStatus:e.debugForcedStatus});if(G["response-type"]===ra.ACCEPTED){const xe=ia(G["country-code"]),Ke=ia(G["id-class"]),_e=ia(G["id-config"]);if(_e["capture-page-configs"]&&_e["capture-page-configs"].length>1){const we=[{"country-code":xe,"country-name":gs[xe],"id-configs":[_e]}];e.saveAutoclassificationSuccessIdDetails(xe,Ke,we),xl(m)?I.push(Ut(x+1,We.Prompt)):Ee(()=>{I.replace(Ut(x+1,o["inquiry:enable-experimental-govid-perf-improvements"]&&o["inquiry:enable-experimental-govid-perf-improvements-percentage"]?We.CaptureLeadInAnimation:We.TakePhoto))})}else await e.submitGovernmentId({inquiry:u,config:r,governmentIdClass:Ke,countryCode:xe,uploads:m,clientExtractionRaws:t,clientExtractionSource:n,cameraInspectionData:h,videoData:F==null?void 0:F.current,manuallyClassifiedInAutoclassificationFlow:!1,t:V,history:I,debugForcedStatus:e.debugForcedStatus,opts:Se?{transition:Ti.Fade}:{}}),He.currentClient&&He.destroy("government-id",!0)}else if(G["response-type"]===ra.REJECTED||G["response-type"]===ra.FAILED)e.saveAutoclassificationFailureResult(G["response-type"],G["id-classes-by-countries"]||[]),I.push(Ut(x,We.AutoclassificationFailure));else throw me(new Error(`Unexpected autoclassification response type ${G["response-type"]}`),"warning"),new fn({method:"POST"});return}const le=!oe||oe&&F.current!=null;X&&le?(await e.submitGovernmentId({inquiry:u,config:r,governmentIdClass:_,countryCode:T||void 0,uploads:m,clientExtractionRaws:t,clientExtractionSource:n,cameraInspectionData:h,videoData:F==null?void 0:F.current,manuallyClassifiedInAutoclassificationFlow:l,t:V,history:I,debugForcedStatus:e.debugForcedStatus,opts:Se?{transition:Ti.Fade}:{}}),He.currentClient&&He.destroy("government-id",!0)):oe&&X&&F.current==null?(I.replace(Ut(0,We.Prompt)),ee.logAmplitude("government-id.video.reprompt",{type:(Ue=He.currentClient)==null?void 0:Ue.type,attempt:He.videoAttempts})):Se?Ee(()=>{I.replace(Ut(x+1,o["inquiry:enable-experimental-govid-perf-improvements"]&&o["inquiry:enable-experimental-govid-perf-improvements-percentage"]?We.CaptureLeadInAnimation:We.TakePhoto))}):I.push(Ut(x+1,We.Prompt))},[m,u,_,x,d,e.debugForcedStatus,F,oe]),ye=f.useRef(Date.now()),je=()=>{var re;Date.now()-ye.current<100||(oe&&X&&F.current==null?(re=He.currentClient)==null||re.stopRecording():Ie())};At({error:he,onError:()=>e.showMessage(V("errors.network")),onNetworkError:()=>e.showMessage(V("errors.network"))});const ce=()=>{Date.now()-ye.current<100||de||I.goBack()};if(u==null||u.attributes["next-step"].type!==Ae.GovernmentId||q==null||q.length===0||!W)return null;const Q=Qi(r,"check-page",{idClass:_,side:Y}),K=r.idclasses.find(re=>re.class===_),be=(ze=K==null?void 0:K["capture-page-configs"])==null?void 0:ze[x],Oe=be==null?void 0:be.overlay;if(Se){const re=de||p!==on.Ready;return i.jsx(Zi,{value:g,children:i.jsx(Dk,{assets:r.assets["capture-page"],requiresSide:Y,localizations:Q,currentUpload:W,handleContinue:je,handleRetry:ce,isProcessing:re,governmentIdClass:_,captureOverlay:Oe,reverseSide:se,collapsed:D,flipped:U,featureFlags:o,uploadProgress:oe?C:null})})}return i.jsx(Zi,{value:g,children:i.jsx(_k,{assets:r.assets["check-page"],localizations:Q,currentUpload:W,handleContinue:je,handleRetry:ce,isProcessing:de})})}function Lk(e){return{clientExtractions:e.verification.clientExtractions,clientExtractionSource:e.verification.clientExtractionSource,config:vi({state:e,stepType:Ae.GovernmentId}),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,idClassesByCountries:e.verification.idClassesByCountries,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,inquiry:e.inquiry.inquiry,routingInputs:pc(e),uploads:e.verification.uploads,videoData:e.verification.videoData,cameraInspectionData:e.verification.cameraInspectionData,status:e.ui.status,styles:Xi(e.inquiry),uploadProgress:e.verification.uploadProgress,videoCaptureEnabled:e.verification.videoCaptureEnabled}}const Fk={clearMessages:Lt,showMessage:ae,submitGovernmentId:mA,governmentIdAutoclassification:hA,saveAutoclassificationSuccessIdDetails:vv,saveAutoclassificationFailureResult:Iv},Mk=Te(Lk,Fk),Vm=Mk(Ok),Vk=b.div.withConfig({displayName:"InquiryGovernmentIdPendingView__Container",componentId:"sc-gjlu0y-0"})(["display:flex;flex-direction:column;"]),Bk=b("div").withConfig({displayName:"InquiryGovernmentIdPendingView__Header",componentId:"sc-gjlu0y-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),Uk=b("div").withConfig({displayName:"InquiryGovernmentIdPendingView__AnimationContainer",componentId:"sc-gjlu0y-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function Hk({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=Rn(),a=i.jsxs(Bk,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(te,{children:t.title})}),i.jsx(at,{styles:o==null?void 0:o.textStyle,children:i.jsx(te,{children:t.description})})]});return i.jsx(Oh,{autoFocus:!0,children:i.jsxs(Vk,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),n!=="end"&&a,i.jsx(Uk,{children:i.jsx(qe,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Oo,{icon:"verification",$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})})}const qk=e=>{const{inquiry:t,config:n,styles:r,governmentIdClass:o,featureFlags:a}=e,[s]=z(),c=Ot();if(f.useEffect(()=>{if(t==null){j.redirectToStart();return}},[]),f.useEffect(()=>{Pi.needsTeardown()&&Pi.tearDown().catch(()=>null)},[]),va(async()=>{t!=null&&e.pollInquiry(t,{historyToClear:c}).catch(()=>{e.showMessage(s("errors.network"),!0),c.goBack()})},[]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.pending-page.entered",{})}catch{}},[]),t==null||n==null)return null;const l=Qi(n,"pending-page",{idClass:o});return i.jsx(Zi,{value:r,children:i.jsx(Hk,{assets:n.assets["pending-page"],localizations:l,textVerticalPosition:n["pending-page-text-vertical-position"]})})};function $k(e){return{inquiry:e.inquiry.inquiry,governmentIdClass:e.verification.governmentIdClass,config:vi({state:e,stepType:Ae.GovernmentId}),styles:Xi(e.inquiry),featureFlags:e.inquiry.featureFlags}}const Gk={showMessage:ae,pollInquiry:kn},Wk=Te($k,Gk),Yk=Wk(qk);var lb=(e=>(e[e.BackFacingCamera=0]="BackFacingCamera",e[e.FrontFacingCamera=1]="FrontFacingCamera",e))(lb||{});const zk=["rear","back","rck","arrire","trasera","trs","traseira","posteriore","","","","","","","","","","arka","achterzijde","","baksidan","bagside","sau","bak","tylny","takakamera","belakang","","","spate","hts","zadn","darrere","zadn","","stranja","belakang",""];function Kk(e){const t=e.toLowerCase();return zk.some(n=>t.includes(n))}class Bm{constructor(t,n){this.deviceId=t.deviceId,this.facing=n,this.groupId=t.groupId,this.label=t.label}}async function Qk(){const e=[],t=[];{let n=await navigator.mediaDevices.enumerateDevices();if(n.filter(o=>o.kind==="videoinput").every(o=>o.label==="")){const o=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1});n=await navigator.mediaDevices.enumerateDevices(),o.getTracks().forEach(a=>a.stop())}const r=n.filter(o=>o.kind==="videoinput");for(const o of r)Kk(o.label)?t.push(new Bm(o,0)):e.push(new Bm(o,1))}return{frontCameras:e,backCameras:t}}async function Zk(e,t){const{frontCameras:n,backCameras:r}=await Qk();if(n.length>0||r.length>0){let o=r.length>0?r:n;if(t===0&&r.length>0&&(o=r),t===1&&n.length>0&&(o=n),o.find(a=>a.label===""))return o[t===1?0:o.length-1];o=o.sort((a,s)=>a.label.localeCompare(s.label));{let a=0;const s=o.map(c=>{const u=RegExp(/\b([0-9]+)MP?\b/,"i").exec(c.label);return u!=null?parseInt(u[1],10):NaN});return s.some(c=>isNaN(c))||(a=s.lastIndexOf(Math.max(...s))),o[a]}}else return null}const Jk=({allowedCaptureOptions:e,allowedFileTypes:t,enableVideoRecording:n,assets:r,currentSide:o,governmentIdClass:a,handleDeviceHandoff:s,handleDrop:c,handleInputCapture:l,handleSelectCamera:u,hideCameraPermissionsDialog:d,isProcessing:m,localizations:h,openCameraPermissionsDialog:p,selectedCountryCode:g,showCameraPermissionsDialog:C,skipPromptPage:I})=>{const{governmentIdPictographPosition:v}=f.useContext(Ze),{base:x,buttons:R}=Rn(),_=f.useCallback(async()=>{try{await u()}catch{p()}},[u,p]);if(I&&e.length===0)return i.jsx(In,{});const T=i.jsx(Ye,{height:null,width:null,role:null,"aria-label":null,children:i.jsx(o2,{assets:r,currentSide:o,governmentIdClass:a})});return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:C,onClose:d,styles:x==null?void 0:x.modal,"data-test":"camera-permissions-dialog","aria-labelledby":"camera-permissions-dialog__title","aria-describedby":"camer-permissions-dialog__description",children:[i.jsx(dt,{id:"camera-permissions-dialog__title",styles:x==null?void 0:x.titleStyle,children:i.jsx(te,{children:n?h["camera-and-mic-permissions-title"]:h["camera-permissions-title"]})}),i.jsx(at,{id:"camera-permissions-dialog__description",styles:x==null?void 0:x.textStyle,children:i.jsx(te,{children:n?h["camera-and-mic-permissions-prompt"]:h["camera-permissions-prompt"]})}),i.jsx(Je,{height:2}),i.jsx(ge,{type:"button",id:"camera-permissions-dialog__btn",buttonType:Z.Primary,styles:R==null?void 0:R[Z.Primary],onClick:d,children:n?h["camera-and-mic-permissions-btn-continue-web"]:h["camera-permissions-btn-continue-web"]})]}),i.jsxs(Xk,{children:[i.jsx(qe,{customImage:r["header-pictograph"],alt:"header pictograph"}),v===Gt.Start&&T,i.jsxs(e2,{children:[i.jsx(a2,{currentSide:o,governmentIdClass:a,override:h["title-override"],selectedCountryCode:g,styles:x==null?void 0:x.titleStyle}),i.jsx(s2,{currentSide:o,governmentIdClass:a,override:e.length===0?h["no-capture-options-prompt"]:h["prompt-override"],styles:x==null?void 0:x.textStyle})]}),v===Gt.Center&&T,i.jsx(mt,{children:i.jsx(i2,{allowedCaptureOptions:e,allowedFileTypes:t,handleDeviceHandoff:s,handleDrop:c,handleInputCapture:l,handleSelectCamera:_,isProcessing:m,localizations:h})})]})]})},Xk=b.div.withConfig({displayName:"InquiryGovernmentIdPromptView__Container",componentId:"sc-nqsebi-0"})(["display:flex;flex-direction:column;"]),e2=b("div").withConfig({displayName:"InquiryGovernmentIdPromptView__Header",componentId:"sc-nqsebi-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[4]),t2=b.div.withConfig({displayName:"InquiryGovernmentIdPromptView__CaptureOptionsContainer",componentId:"sc-nqsebi-2"})(["width:100%;"]),Dc=b(ge).withConfig({displayName:"InquiryGovernmentIdPromptView__OptionButton",componentId:"sc-nqsebi-3"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],S.Spacing[4]),n2=b(Fr).withConfig({displayName:"InquiryGovernmentIdPromptView__ImgCamera",componentId:"sc-nqsebi-4"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>{var t,n,r,o;return(o=A((r=(n=(t=e.styles)==null?void 0:t["text-color"])==null?void 0:n.base)==null?void 0:r.base))!=null?o:e.theme.colorFontButtonPrimary});function i2({allowedCaptureOptions:e,allowedFileTypes:t,handleDeviceHandoff:n,handleDrop:r,handleInputCapture:o,handleSelectCamera:a,isProcessing:s,localizations:c}){return i.jsx(t2,{id:"government-id-prompt__view",children:e.map((l,u)=>i.jsx(r2,{isPrimary:u===0,option:l,handleDeviceHandoff:n,handleDrop:r,handleInputCapture:o,handleSelectCamera:a,isProcessing:s,localizations:c,allowedFileTypes:t},l))})}function r2({allowedFileTypes:e,handleDeviceHandoff:t,handleDrop:n,handleInputCapture:r,handleSelectCamera:o,isPrimary:a,isProcessing:s,localizations:c,option:l}){const{getRootProps:u,getInputProps:d}=Ia({onDrop:n,multiple:!1,accept:e}),{buttons:m}=Rn(),h=a?Z.Primary:Z.Secondary,[p]=z(),g=s!=null;switch(l){case"web_camera":return i.jsx(Dc,{id:"government-id-prompt__button--web-camera",buttonType:Z.Primary,disabled:g,styles:m==null?void 0:m[Z.Primary],onClick:o,isPending:s===it.SelectCamera,"aria-label":c["btn-capture"]||p("government-id.prompt.btn-take-photo-label"),children:i.jsx(Um,{styles:m==null?void 0:m[Z.Primary],children:c["btn-capture"]})});case"mobile_camera":return i.jsx(Lo,{buttonType:Z.Primary,disabled:g,id:"government-id-prompt__button--mobile-camera",handleSelectImage:r,isPending:s===it.UploadImage,styles:m==null?void 0:m[Z.Primary],"aria-label":c["btn-capture-mobile-camera"]||c["btn-capture"]||p("government-id.prompt.btn-take-photo-label"),children:i.jsx(Um,{styles:m==null?void 0:m[Z.Primary],children:c["btn-capture-mobile-camera"]||c["btn-capture"]})});case"upload":return i.jsxs(Dc,{buttonType:a?Z.Primary:Z.Secondary,disabled:g,styles:m==null?void 0:m[h],...u(),children:[i.jsx("input",{...d(),"data-test":"file-upload","data-cy":"file-upload"}),c["btn-upload"]]});case"device_handoff":return i.jsx(Dc,{id:"government-id-prompt__button--device-handoff","data-test":"government-id-prompt__button--device-handoff",buttonType:a?Z.Primary:Z.Secondary,disabled:g,styles:m==null?void 0:m[h],onClick:t,isPending:s===it.DeviceHandoff,children:c["btn-device-handoff"]});default:ut(l)}}const Um=({children:e,styles:t})=>e?i.jsx("span",{children:e}):i.jsx(n2,{"data-test":"government-id-prompt__image--camera",styles:t}),xr=b(Yt).withConfig({displayName:"InquiryGovernmentIdPromptView__StyledCustomizablePictograph",componentId:"sc-nqsebi-5"})(["width:100%;"]),o2=({assets:e,currentSide:t,governmentIdClass:n})=>{const{base:r}=Rn();if(n==="pp"||n==="ipp")switch(t){case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(xr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(cs,{height:64,width:"100%"})})})});default:return i.jsx(qe,{customImage:e["passport-front-pictograph"],alt:"passport front pictograph",children:i.jsx(xr,{url:"passportFrontPictographUrl",height:"passportFrontPictographHeight","aria-label":"passport front",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(Qh,{height:80,width:"100%"})})})})}switch(t){case B.Back:return i.jsx(qe,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(xr,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(Rr,{height:64,width:"100%"})})})});case B.BarcodePdf417:return i.jsx(qe,{customImage:e["id-back-pictograph"],alt:"ID back pictograph",children:i.jsx(xr,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(Q1,{height:64,width:"100%"})})})});case B.Front:return i.jsx(qe,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(xr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(_i,{height:64,width:"100%"})})})});case B.FrontOrBack:return i.jsx(qe,{customImage:e["id-front-pictograph"],alt:"ID front pictograph",children:i.jsx(xr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsxs(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:[i.jsx(_i,{height:48,width:"100%"}),i.jsx(Rr,{height:48,width:"100%"})]})})});case B.PassportSignature:return i.jsx(qe,{customImage:e["passport-signature-pictograph"],alt:"passport signature pictograph",children:i.jsx(xr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",primaryColor:A(r==null?void 0:r.fill.color),highlightColor:A(r==null?void 0:r.fill.highlightColor),backgroundColor:A(r==null?void 0:r.fill.backgroundColor),strokeColor:A(r==null?void 0:r.stroke.color),children:i.jsx(gn,{backgroundColor:A(r==null?void 0:r.fill.highlightColor),children:i.jsx(cs,{height:64,width:"100%"})})})});default:ut(t)}},a2=({selectedCountryCode:e,governmentIdClass:t,currentSide:n,override:r="",styles:o})=>{const[a]=z();return i.jsx(dt,{"data-test":"government-id-prompt__title",styles:o,children:i.jsx(te,{children:r.length>0?r:bi(a,["government-id.prompt.title","government-id.title"],e,t,n)})})},s2=({governmentIdClass:e,currentSide:t,override:n="",styles:r})=>{const[o]=z();return i.jsx(at,{"data-test":"government-id-prompt__prompt",styles:r,children:i.jsx(te,{children:n.length>0?n:bi(o,["government-id.prompt.prompt"],null,e,t)})})},c2=e=>{var je;const{config:t,featureFlags:n,governmentIdClass:r,autoclassificationCountryCode:o,didAutoclassificationIdSelection:a,idClassesByCountries:s,hasCamera:c,inquiry:l,styles:u}=e,[d,m]=f.useState(void 0),[h,p]=f.useState([]),[g,{enable:C,disable:I}]=rt(),[v,{enable:x}]=rt(!1),{t:R}=z(),_=Ot(),T=Lh(),E=parseInt(T.step,10),V=en("inquiry:auto-classification"),{governmentIdClass:D,selectedCountryCode:O,autoclassificationIdClassesConfig:U}=rc(t,E,a,r,o,s,V),M=f.useMemo(()=>pa(t,D,E,a,U),[t,D,E,a,U]),Y=en("inquiry:disable-gov-id-face-api"),F=!_n()&&c&&h.includes(Cn.WebCamera),H=F&&ba(window.location.host)&&Ca(M,O,D,n),q=!Y&&F&&!H,W=(je=t==null?void 0:t["enabled-capture-file-types"])==null?void 0:je.includes("video"),X=Jn()?"basic":"advanced";f.useEffect(()=>{l==null&&j.redirectToStart()},[]),f.useEffect(()=>{if(t!=null)if(c==null)e.checkCamera();else{const ce=oI(t,D,c);ce.length===1?Ie(ce[0]):p(ce)}},[c,t]),f.useEffect(()=>{if(H&&!Pi.isLoaded()){const ce=performance.now();Pi.preload(X).then(()=>{ee.logAmplitude("government-id.microblink.preload",{durationSeconds:(performance.now()-ce)/1e3,side:M,idClass:D,microblinkModel:X})}).catch(Q=>{Q instanceof nn?me(Q,"warning",{...Q.originalError,state:"preload"},{jira:"PER-10182"}):Q instanceof Error?me(Q,"warning",{state:"preload"},{jira:"PER-10182"}):$e(Q,"warning",{state:"preload"},{jira:"PER-10182"})})}},[H]),f.useEffect(()=>{q&&_t.loadModels()},[q]),f.useEffect(()=>{try{n!=null&&n["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.prompt-page.entered",{currentSide:M,selectedCountryCode:O,governmentIdClass:D})}catch{}},[]);const oe=async(ce=_.push)=>{e.clearMessages(),m(it.SelectCamera),e.saveCaptureMethod(bt.Auto);const Q=(t==null?void 0:t["govid-design-version"])===_o.V1;try{const K=Ng({currentSide:M,facingMode:js(),isMicroblink:H,isGovidRedesign:Q,enableVideoRecording:W,featureFlags:n});if(navigator.userAgent.includes("Android")){const be=await Zk(null,lb.BackFacingCamera);be&&(K.deviceId={exact:be.deviceId})}try{e.setVideoConstraints(K),await Dn.prepare({video:K,audio:W&&$i(t)},n)}catch(be){if(Q&&be instanceof Error&&be.name==="OverconstrainedError"){const Oe={...K,width:2160,height:1350};e.setVideoConstraints(Oe),await Dn.prepare({video:Oe,audio:W&&$i(t)},n)}else throw be}j.onEvent(Pe.DocumentCameraSelect),ce(Ut(E,n["inquiry:enable-experimental-govid-perf-improvements"]&&n["inquiry:enable-experimental-govid-perf-improvements-percentage"]?We.CaptureLeadInAnimation:We.TakePhoto))}catch(K){throw ee.logAmplitude("government-id.camera.errored",{error:{name:K.name,message:K.message}}),j.onEvent(Pe.LoadCameraFailed,{error:K.name,message:K.message}),W&&me(K,"error"),m(void 0),K}},se=ce=>{e.clearMessages(),m(it.UploadImage),ee.logAmplitude("government-id.upload",{method:"drop",files:ce.map(Q=>({name:Q==null?void 0:Q.name,type:Q==null?void 0:Q.type,size:Q==null?void 0:Q.size}))}),Se(ce)?(j.onEvent(Pe.DocumentUpload),he(ce[0],bt.Upload)):m(void 0)},Se=ce=>{if(ce.length!==1)return ee.logAmplitude("government-id.upload.invalid",{detail:"wrong number of files"}),e.showMessage(R("government-id.prompt.failed-select-image")),!1;const Q=t==null?void 0:t["enabled-file-types"];return Q&&!Q.includes(ce[0].type)?(ee.logAmplitude("government-id.upload.invalid",{detail:"wrong file type"}),e.showMessage(R("government-id.prompt.failed-invalid-type")),!1):!0},Ee=ce=>{e.clearMessages(),m(it.UploadImage),ee.logAmplitude("government-id.upload",{method:"input_capture",files:[{name:ce==null?void 0:ce.name,type:ce==null?void 0:ce.type,size:ce==null?void 0:ce.size}]}),he(ce,cC()?bt.Upload:bt.Manual)},he=async(ce,Q)=>{e.saveCaptureMethod(Q);try{const K=await wo(ce);e.uploadFiles(M,[{filename:ce.name,fileType:ce.type,dataUrl:K,captureMethod:Q,captureFlow:Io.Unguided}]),_.push(Ut(E,We.CheckUpload))}catch(K){switch(ee.logAmplitude("government-id.upload.errored",{file:{type:ce==null?void 0:ce.type}}),K.name){case"NotReadableError":e.showMessage(R("government-id.prompt.failed-select-image-permissions"));break;case"SecurityError":e.showMessage(R("government-id.prompt.failed-select-image"));break;case"NotFoundError":case"ReferenceError":default:me(K,"warning",{filename:ce==null?void 0:ce.name,fileType:ce==null?void 0:ce.type,captureMethod:Q,currentSide:M}),e.showMessage(R("government-id.prompt.failed-select-image"))}m(void 0)}},de=ce=>{d==null&&(e.clearMessages(),m(it.DeviceHandoff),ce("/inquiry/device-handoff/prompt"))},Ie=async ce=>{const{featureFlags:Q}=e;switch(ce){case"web_camera":if(Q["verify:skip-gov-id-prompt-web-camera-only-by-org"])try{x(),await oe(_.replace)}catch{p([ce]),_.replace("/inquiry/support/camera")}else p([ce]);break;case"device_handoff":de(_.replace);break;case"mobile_camera":case"upload":p([ce]);break;default:ut(ce)}};if(l==null||l.attributes["next-step"].type!==Ae.GovernmentId||c==null||M==null)return null;const ye=Qi(t,"prompt-page",{idClass:D,side:M});return i.jsx(Zi,{value:u,children:i.jsx(Jk,{assets:t.assets["prompt-page"],localizations:ye,selectedCountryCode:O,currentSide:M,handleDrop:se,handleSelectCamera:()=>oe(_.push),handleInputCapture:Ee,handleDeviceHandoff:()=>de(_.push),isProcessing:d,governmentIdClass:D,allowedCaptureOptions:h,allowedFileTypes:t["enabled-file-types"],showCameraPermissionsDialog:g,openCameraPermissionsDialog:C,hideCameraPermissionsDialog:I,skipPromptPage:v,enableVideoRecording:W})})};function l2(e){return{config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,autoclassificationCountryCode:e.verification.autoclassificationCountryCode,didAutoclassificationIdSelection:!!e.verification.didAutoclassificationIdSelection,idClassesByCountries:e.verification.idClassesByCountries,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,hasCamera:e.ui.hasCamera,styles:Xi(e.inquiry)}}const d2={clearMessages:Lt,saveCaptureMethod:mr,setVideoConstraints:So,showMessage:ae,uploadFiles:Bs,checkCamera:Mr},u2=Te(l2,d2),m2=u2(c2),h2=b("span").withConfig({displayName:"OptionVertical__ThemedIcon",componentId:"sc-1gomrr7-0"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){fill:",";}height:32px;margin-right:",";"],({theme:e})=>e.iconColorGovernmentIdType,({theme:e})=>e.colorModalBackground,S.Spacing[4]),p2=b(ge).withConfig({displayName:"OptionVertical__OptionVerticalButton",componentId:"sc-1gomrr7-1"})(["width:100%;& + &{margin-top:",";}"],S.Spacing[5]);function f2({buttonType:e,countryCode:t,handleSelectType:n,governmentIdClass:r,localizations:o}){const{iconStyle:a}=f.useContext(Ze),{buttons:s}=Rn(),c={id:`select__option--${r}`,"data-test":"option-block",onClick:()=>n(r)};return e==="button"?i.jsx(p2,{...c,styles:s==null?void 0:s[Z.Primary],type:"button",children:Hm(o,t,r)}):i.jsx(Rd,{...c,buttonType:e,icon:a!==Vr.None&&i.jsx(h2,{"data-test":"option-vertical__pictograph","aria-hidden":!0,children:i.jsx(g2,{governmentIdClass:r})}),children:Hm(o,t,r)})}const g2=({governmentIdClass:e})=>{switch(e){case"dl":return i.jsx(ep,{});case"ofw":case"pp":case"ppc":case"visa":return i.jsx(Xh,{});case"id":return i.jsx(Jh,{});case"rp":case"pr":default:return i.jsx(Zh,{})}};function Hm(e,t=void 0,n){const r=e[n];if(t==null)return r;{const o=e[`${t.toLowerCase()}-${n}`];return o!=null?o:r}}const b2=b("span").withConfig({displayName:"OptionVerticalRedesign__ThemedIcon",componentId:"sc-6t3cbp-0"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){stroke:",";}height:32px;"],({theme:e})=>e.colorPrimary,({theme:e})=>e.iconColorBackground),C2=b("span").withConfig({displayName:"OptionVerticalRedesign__SSTThemedIcon",componentId:"sc-6t3cbp-1"})(["rect[fill]:not([fill='none']){fill:",";}path[stroke]:not([stroke='none']){stroke:",";}height:32px;"],({styles:e})=>A(e.fill.color),({styles:e})=>A(e.stroke.color)),x2=({styles:e,children:t,"data-test":n})=>i.jsx(i.Fragment,{children:e!=null?i.jsx(C2,{"data-test":n,styles:e,"aria-hidden":!0,children:t}):i.jsx(b2,{"data-test":n,"aria-hidden":!0,children:t})}),v2=b(ge).withConfig({displayName:"OptionVerticalRedesign__OptionVerticalButton",componentId:"sc-6t3cbp-2"})(["width:100%;& + &{margin-top:",";}"],S.Spacing[5]),I2=b("span").withConfig({displayName:"OptionVerticalRedesign__IconContainer",componentId:"sc-6t3cbp-3"})(["line-height:0;margin-right:10px;"]);function S2({assets:e,buttonType:t,countryCode:n,handleSelectType:r,governmentIdClass:o,icon:a,localizations:s,styles:c}){const{iconStyle:l}=f.useContext(Ze),{buttons:u}=Rn(),d={id:`select__option--${o}`,"data-test":"option-block",onClick:()=>r(o)};return t==="button"?i.jsx(v2,{...d,styles:u==null?void 0:u[Z.Primary],type:"button",children:ml(s,n,o)}):i.jsx(Rd,{...d,buttonType:t,styles:c,icon:l!==Vr.None&&i.jsx(I2,{"data-test":"option-vertical__pictograph",children:i.jsx(w2,{governmentIdClass:o,assets:e,icon:a,styles:c==null?void 0:c.icon})}),children:ml(s,n,o)})}const w2=({assets:e,governmentIdClass:t,icon:n,styles:r})=>{const o=n==null?void 0:n["custom-icon"],a=y2(e,t),s=R2(n==null?void 0:n["icon-fallback"]),c=_2(t),l=o!=null?o:a,u=s!=null?s:c;return i.jsx(qe,{customImage:l,alt:"government id icon",children:i.jsx(x2,{"data-test":"option-vertical-icon__fallback",styles:r,children:u})})};function y2(e,t){var n;switch(t){case"dl":case"id":return e["icon-drivers-license"];case"ofw":case"pp":case"ppc":case"visa":return e["icon-passport"];case"rp":case"pr":return(n=e["icon-permanent-residence-id"])!=null?n:e["icon-government-id"];default:return e["icon-government-id"]}}function _2(e){switch(e){case"dl":case"id":return i.jsx(Ol,{});case"ofw":case"pp":case"ppc":case"visa":return i.jsx(Fl,{});case"rp":case"pr":default:return i.jsx(Ll,{})}}function R2(e){switch(e){case zo.Flag:return i.jsx(Vh,{});case zo.World:return i.jsx(Fl,{});case zo.House:return i.jsx(Ll,{});case zo.Card:return i.jsx(Ol,{});default:return null}}const A2=b("div").withConfig({displayName:"GovernmentIdOptions__ChooseOptionNotice",componentId:"sc-1jec9sb-0"})(["",";"],({styles:e})=>e!=null?$(["color:",";font-weight:",";text-align:",";"],A(e["text-color"].base.base),Fn(e["font-weight"].base.base),e.justify.base.base):$(["color:",";font-weight:",";"],({theme:t})=>t.colorFontTitle,an.medium));function T2({assets:e,idClasses:t,idClassListStyle:n,localizations:r,selectedCountryCode:o,handleSelectType:a,enableRedesign:s,styles:c,optionStyles:l}){return i.jsxs(i.Fragment,{children:[n!=="button"&&!!r["option-notice"]&&i.jsxs(i.Fragment,{children:[i.jsx(A2,{styles:c,children:r["option-notice"]}),i.jsx(Je,{height:1})]}),t.map(u=>s?i.jsx(S2,{assets:e,buttonType:n,countryCode:o,handleSelectType:a,governmentIdClass:u.class,icon:u.icon,localizations:r,styles:l},u.class):i.jsx(f2,{buttonType:n,countryCode:o,handleSelectType:a,governmentIdClass:u.class,localizations:r},u.class)),i.jsx(Je,{height:4})]})}const E2=b.div.withConfig({displayName:"Checkbox__Container",componentId:"sc-wj665q-0"})(["cursor:pointer;display:flex;align-items:center;flex-wrap:none;cursor:pointer;"]),k2=b.input.withConfig({displayName:"Checkbox__HiddenInput",componentId:"sc-wj665q-1"})(["height:1px;width:1px;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),N2=b.div.withConfig({displayName:"Checkbox__IconContainer",componentId:"sc-wj665q-2"})(["display:flex;align-items:center;transition:box-shadow ",";",""],et.Fast,({theme:e})=>$(["svg{.checkbox__border--empty{fill:none;stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}&","","{box-shadow:0 0 0 3px transparent,",";}&","","{svg{.checkbox__border--empty{stroke:",";}}}&","{cursor:not-allowed;svg{.checkbox__border--empty{fill:none;stroke:",";}.checkbox__border{fill:",";stroke:",";}.checkbox__check{stroke:",";}}}"],e.colorFont,e.colorButtonPrimary||e.colorPrimary,e.colorButtonPrimary||e.colorPrimary,e.colorFontButtonPrimary,so,En,Mi.Mid,Wi,En,e.colorButtonPrimary||e.colorPrimary,zl,Le.gray20,Le.gray20,Le.gray20,e.colorFontButtonPrimary)),j2=b(te).withConfig({displayName:"Checkbox__StyledMarkdown",componentId:"sc-wj665q-3"})(["cursor:inherit;padding:0 ",";",""],S.Spacing[2],({theme:e,disabled:t})=>t&&$(["color:",";"],e.color.text.disabled)),P2=({className:e,disabled:t,indeterminate:n,onChange:r,onFocus:o,onBlur:a,value:s,id:c,label:l,autoFocus:u,"data-test":d})=>{const[m,{enable:h,disable:p}]=rt(),g=f.useCallback(()=>{var I;r(!s),(I=C.current)==null||I.focus()},[r,s]),C=f.useRef();return f.useEffect(()=>{C.current&&(C.current.indeterminate=n)},[n]),i.jsxs(E2,{id:c,className:e,onClick:t?void 0:g,"data-test":d,role:"checkbox","aria-checked":!!s,"aria-readonly":t,children:[i.jsx(k2,{ref:C,"data-test-toggle-status":s?"on":"off",disabled:t,type:"checkbox",checked:!!s,readOnly:!0,onChange:()=>null,autoFocus:u,onFocus:I=>{h(),o==null||o(I)},onBlur:I=>{p(),a==null||a(I)}}),i.jsx(N2,{focused:m,disabled:t,children:n?i.jsx(xp,{}):s?i.jsx(vp,{}):i.jsx(Ip,{})}),i.jsx(j2,{wrapper:"label",wrapperProps:{htmlFor:c},disabled:t,children:l})]})},D2=b(Ve).attrs(()=>({as:"small"})).withConfig({displayName:"Disclaimer__TermsNoticeStyled",componentId:"sc-80ibwq-0"})(["",""],({styles:e})=>{const t=e;return{display:"block",marginTop:`${L.base}px`,marginBottom:`${L.base*2}px`,color:A(t["text-color"].base.base),fontSize:k(t["font-size"].base.base),lineHeight:k(t["line-height"].base.base),"& , a":{fontSize:k(t["font-size"].base.base),lineHeight:k(t["line-height"].base.base)}}}),O2=b(Ve).attrs(()=>({as:"small"})).withConfig({displayName:"Disclaimer__TermsNotice",componentId:"sc-80ibwq-1"})(["display:block;margin-top:","px;margin-bottom:","px;",""],L.base,L.base*2,({theme:e})=>({color:e.colorFontSmall,fontSize:e.fontSizeSmall,lineHeight:e.lineHeightSmall,"&, a":{fontSize:e.fontSizeSmall,lineHeight:e.lineHeightSmall}})),_s=({useBipaTranslation:e=!1,styles:t})=>{const{t:n}=z(),r=n(e?"intro.biometric-agree-to-policy":"intro.agree-to-policy");return i.jsx(i.Fragment,{children:t!=null?i.jsx(D2,{styles:t,children:i.jsx(te,{children:r})}):i.jsx(O2,{children:i.jsx(te,{children:r})})})},L2=b(Ve).attrs(()=>({as:"div"})).withConfig({displayName:"Disclaimer__TermsNoticeCheckboxContainer",componentId:"sc-80ibwq-2"})(["display:flex;border-top:1px solid ",";margin-top:","px;padding-top:","px;margin-bottom:","px;font-size:",";line-height:",";&,a{font-size:",";line-height:",";}"],Le.gray20,L.base*-1,L.base*3,L.base*5,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall,({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),F2=b(P2).withConfig({displayName:"Disclaimer__TermsNoticeCheckbox",componentId:"sc-80ibwq-3"})(["align-items:flex-start;"]),M2=({checked:e,onChange:t})=>{const{t:n}=z();return i.jsx(L2,{children:i.jsx(F2,{id:"agree-to-policy-checkbox","data-test":"agree-to-policy-checkbox",value:e,onChange:t,label:n("intro.agree-to-policy")})})},qm=b.div.withConfig({displayName:"InquiryGovernmentIdSelectView__Container",componentId:"sc-g8v5bg-0"})(["display:flex;flex-direction:column;"]),$m=b.div.withConfig({displayName:"InquiryGovernmentIdSelectView__Header",componentId:"sc-g8v5bg-1"})(["margin-bottom:","px;",""],L.base*4,({idClassListStyle:e,reduceMinHeight:t})=>{switch(e){case"outline":return $(["min-height:",";"],t?"max-content":Be.header);case"outline_light":return}});function V2({assets:e,disclaimer:t,handleSelectType:n,idClasses:r,idClassListStyle:o,localizations:a,selectedCountryCode:s,enableRedesign:c}){var p,g,C,I;const{governmentIdPictographPosition:l,governmentIdSelectPictographUrl:u}=f.useContext(Ze),{base:d,selectOption:m}=Rn(),h=u?i.jsx(Ye,{"aria-label":"government id prompt",children:i.jsx(Yt,{url:"governmentIdSelectPictographUrl",height:"governmentIdSelectPictographHeight","aria-label":"government id prompt picture"})}):null;if(r.length>0){const v=a.prompt!=="";return i.jsxs(qm,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),l===Gt.Start&&h,i.jsxs($m,{idClassListStyle:o,reduceMinHeight:!v,children:[i.jsx(dt,{styles:d==null?void 0:d.titleStyle,children:i.jsx(te,{children:a.title})}),v&&i.jsx(at,{styles:d==null?void 0:d.textStyle,children:i.jsx(te,{children:a.prompt})})]}),l===Gt.Center&&h,i.jsx(T2,{assets:e,styles:d==null?void 0:d.textStyle,optionStyles:m,idClasses:r,idClassListStyle:o,localizations:a,selectedCountryCode:s,handleSelectType:n,enableRedesign:c}),t!==Tp.None&&i.jsx(_s,{styles:d==null?void 0:d.disclaimerStyle})]})}else{const v=a.prompt!=="";return i.jsxs(qm,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs($m,{idClassListStyle:o,reduceMinHeight:!v,children:[i.jsx(dt,{styles:d==null?void 0:d.titleStyle,children:i.jsx(te,{children:a["unsupported-title"]})}),v&&i.jsx(at,{styles:d==null?void 0:d.textStyle,children:i.jsx(te,{children:a["unsupported-prompt"]})})]}),i.jsx(Ye,{"aria-label":"pictograph indicating no available ID types",children:i.jsx(pe,{$primaryColor:A((p=d==null?void 0:d.fill)==null?void 0:p.color),$highlightColor:A((g=d==null?void 0:d.fill)==null?void 0:g.highlightColor),$backgroundColor:A((C=d==null?void 0:d.fill)==null?void 0:C.backgroundColor),$strokeColor:A((I=d==null?void 0:d.stroke)==null?void 0:I.color),children:i.jsx(Kn,{})})})]})}}function B2(e){var u;const{inquiry:t,config:n,styles:r,featureFlags:o}=e,a=en("inquiry:auto-classification")&&n&&((u=n==null?void 0:n["auto-classification-config"])==null?void 0:u["is-enabled"]);if(f.useEffect(()=>{var d,m;if(t==null){j.redirectToStart();return}a?(e.resetAutoclassificationState(),e.history.replace(Ut(0,We.Prompt))):n!=null&&!n["enabled-skip-unknown"]&&n.idclasses.length===1&&c((m=(d=n.idclasses)==null?void 0:d[0])==null?void 0:m.class,!0)},[]),f.useEffect(()=>{try{o!=null&&o["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("government-id.select-page.entered",{})}catch{}},[]),t==null||t.attributes["next-step"].type!==Ae.GovernmentId)return null;const s=Qi(n,"select-page");function c(d,m=!1){e.selectGovernmentIdClass(d),m?e.history.replace(Ut(0,We.Prompt)):e.history.push(Ut(0,We.Prompt))}if(t==null||t.attributes["next-step"].type!==Ae.GovernmentId)return null;const l=(n==null?void 0:n["govid-design-version"])===_o.V1;return i.jsx(Zi,{value:r,children:i.jsx(V2,{assets:n.assets["select-page"],disclaimer:n.disclaimer,idClasses:n.idclasses,idClassListStyle:n["idclass-list-style"],localizations:s,selectedCountryCode:n["selected-country-code"],handleSelectType:c,enableRedesign:l})})}function U2(e){return{inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.GovernmentId}),featureFlags:e.inquiry.featureFlags,theme:e.inquiry.theme,styles:Xi(e.inquiry)}}const H2={selectGovernmentIdClass:sd,resetAutoclassificationState:tf},q2=Te(U2,H2),$2=q2(B2),G2=b("div").withConfig({displayName:"InquiryInactiveView__Header",componentId:"sc-acmeo6-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function W2(){return i.jsxs("div",{children:[i.jsxs(G2,{children:[i.jsx(dt,{children:"This template is inactive"}),i.jsx(at,{children:"If you are a user, please contact the organization that sent you here."}),i.jsx(Je,{height:1}),i.jsx(at,{children:"If you are a developer, please check the dashboard and make sure the template is active."})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})})]})}function Y2(){return i.jsx(W2,{})}const z2=({config:e,handleContinue:t,previewMode:n=!1})=>{const r=f.useMemo(()=>{const c=e.type;switch(c){case"mx_bank":return{type:c,component:f.lazy(()=>tt(()=>import("./index-DHJSNrY_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),integrationConfig:e};case"kica":return{type:c,component:f.lazy(()=>tt(()=>import("./index-BZ2aX1Yc.js"),__vite__mapDeps([8,1,2,3,4,5,6,7]))),integrationConfig:e};case"aadhaar":return{type:c,component:f.lazy(()=>tt(()=>import("./index-RuXVWpVf.js"),__vite__mapDeps([9,1,2,3,10,4,5,6,7]))),integrationConfig:e};case"finnish_trust_network":return{type:c,component:f.lazy(()=>tt(()=>import("./index-BGv0Tig_.js"),__vite__mapDeps([11,1,2,3,12,10,4,5,6,7]))),integrationConfig:e};case"one_id":return{type:c,component:f.lazy(()=>tt(()=>import("./index--1YE3uBZ.js"),__vite__mapDeps([13,1,2,3,12,10,4,5,6,7]))),integrationConfig:e};default:return{type:c,component:null,integrationConfig:e}}},[e]);if(n)switch(r.type){case"mx_bank":return i.jsxs(i.Fragment,{children:[i.jsx("h1",{children:"MX Bank Integration"}),i.jsx("p",{children:"This is a placeholder for the MX Bank step. The real widget cannot load in FLE previews."})]});case"kica":case"aadhaar":case"finnish_trust_network":case"one_id":{const c=r.component;return i.jsx(c,{flowUrl:"",onComplete:()=>{}})}default:return null}const{type:o,component:a,integrationConfig:s}=r;switch(o){case"mx_bank":return i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsx(a,{widgetUrl:s["widget-url"],memberConnected:c=>t({"mx-bank-member-guid":c}),microdepositCreated:c=>t({"mx-bank-microdeposit-guid":c}),microdepositVerificationSubmitted:t})});case"kica":return i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"aadhaar":return i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"finnish_trust_network":return i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});case"one_id":return i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsx(a,{flowUrl:s["flow-url"],onComplete:t})});default:return i.jsxs("p",{children:["Integration type ",o," not found."]})}},K2=({inquiry:e,config:t,debugForcedStatus:n,clearMessages:r,showMessage:o,transitionInquiryFromIntegrationStep:a})=>{const{t:s}=z();f.useEffect(()=>{if(e==null||(t==null?void 0:t.type)==null){j.redirectToStart();return}},[]);const{error:c,loading:l,callback:u}=vt(async d=>{r(),await a(e,d||{},e.attributes["next-step"].name,{"debug-forced-status":n})},[]);return At({error:c,onError:()=>o(s("errors.network")),onNetworkError:()=>o(s("errors.network"))}),e==null||(t==null?void 0:t.type)==null?null:l?i.jsx(In,{}):i.jsx(z2,{config:t,handleContinue:u})};function Q2(e){return{inquiry:e.inquiry.inquiry,config:vi({state:e,stepType:Ae.Integration}),debugForcedStatus:e.test.forcedStatus}}const Z2={clearMessages:Lt,showMessage:ae,transitionInquiryFromIntegrationStep:Fv},J2=Te(Q2,Z2),X2=J2(K2),db=f.createContext(xf()),li=()=>f.useContext(db),ub=({children:e,value:t})=>{const n=f.useMemo(()=>xf(t),[t]);return i.jsx(db.Provider,{value:n,children:i.jsx(Pa.Provider,{value:n.buttons,children:e})})};function rs(e){return(e.attributes["next-step"].config||{})["selfie-type"]||un.ProfileAndCenter}const e7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"center",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M143.1 187.4c-.2.1-.3.3-.5.4 1.4-5.6 1.1-14.1.9-14.4l11.2-7.6s7.8-1 12.6-2.3c4.8-1.3 10.1-3.1 10.1-3.1v-34.2c1.5-7.6-.7-26.7-.7-28.7.1-9.4-4.8-27.9-8.7-34.8-.8-18.1-10.3-29.8-28.6-35.2C127.6-.9 79.8 8.9 60.8 38.7c-4.3 5-9.9 16.5-11 30.4-2.5 31.5-2.3 76-1.1 92.5 0 0 12.2 4.4 25 4.4 1.7 0 10.6 7.6 10.6 7.6 0-.1-.9 5.1-1.1 9.9-13.7.1-46.4 9.3-46.4 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1-.1-26.8-11.5-40.5-13.1z",fill:n}),i.jsx("path",{d:"M183.7 103c-3.7-5.4-10-2.3-12.5-.3L167.4 78c-1.1-7.1-4.5-13.7-9.8-18.8-5.2-5.1-12.1-8.5-19.4-9.6l-.6-.1-6.8 7.2c-5 5.3-11.6 8.9-18.8 10.4-7.3 1.5-14.8.7-21.6-2.2l-1.7-.7c-3-1.3-6.2-1.9-9.4-1.7-3.2.1-6.4.9-9.2 2.4s-5.3 3.5-7.2 6.1c-1.9 2.5-3.1 5.4-3.7 8.5l-4 22.9c-2.1-1.7-7.1-4.9-11.7-1.4-4 3.9-2.9 7.7-2.9 10.3s3.1 8 4.7 10.1c1.5 1.9 6.2 6.3 9 7.6.8 7.3 3.2 14.3 6.8 20.7 4.9 8.6 12.1 15.8 20.8 20.9l1.5.9v15.3l1.1 1.2c9.5 8.1 18.8 11.3 29.7 11 10.9-.2 21.4-2.7 29.3-12.3v-15.1l.1-.1 1.5-.9c8.7-5.1 15.9-12.3 20.8-20.9 4-7 6.4-14.7 7-22.6 1.7-1.2 6.7-5 8.1-6.5 1.5-1.9 3.5-5.6 4-8.1 1.1-6.1.3-7.6-1.3-9.5z",fill:r}),i.jsx("path",{d:"M83.4 173.1v14.6l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-15.3m-60.7 11c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-24-70.4c.2 9.8-2.3 19.5-7.2 28-4.9 8.6-12.1 15.8-20.8 20.9l-8 4.7c-7.1 4.2-15.3 6.4-23.6 6.4s-16.5-2.2-23.6-6.4l-8-4.7c-8.7-5.1-15.9-12.3-20.8-20.9-4.9-8.6-7.2-18.3-7-28m119 0l-1.1-17.9m-117.9 0v17.9m117.8-18.4l-4.4-25.4c-1.1-7.1-4.5-13.7-9.8-18.8-5.2-5.1-12.1-8.5-19.4-9.6l-.6-.1-6.8 7.2c-5 5.3-11.6 8.9-18.8 10.4-7.3 1.5-14.8.7-21.6-2.2l-1.7-.7c-3-1.3-6.2-1.9-9.4-1.7-3.2.1-6.4.9-9.2 2.4-2.8 1.5-5.3 3.5-7.2 6.1-1.9 2.5-3.1 5.4-3.7 8.5l-5.2 24.4m-5-5.4c-3.1-32.9 2.5-47.8 14.9-65C82.4 8.6 127-.7 138.7 27.8c19.2 6.4 29.2 18.6 30.1 36.7 6.3 11 8.8 27.4 8.6 34.9m-38.7-71.6c1.5 5 2.2 9.4 2.2 13l-2.2-13zM98.6 146.6c9.4 2.8 19.5 2.8 29 0M112.8 108v23.3m60.1-2.8c5.2-2.5 8.5-6.4 11.1-11.5 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-5.5 2.7-5 5.4m-117.9 0c.5-2.7-2.8-5.1-5-5.4-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 5.9 9 11.1 11.5m-4-2.3c-.4 12.4 0 25.1-.2 36.1 8 3 15.1 3.3 24.4 3.7m105-40.9c-.3 11.5-.3 23.8-.6 35.3-8 3.1-15 4.2-24.5 5.6",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"center_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"4512.4",x2:"113.65",y2:"4530.077",gradientTransform:"translate(0 -4400.8)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#center_svg__a)"}),i.jsxs("linearGradient",{id:"center_svg__b",gradientUnits:"userSpaceOnUse",x1:"2699.752",y1:"-1652.34",x2:"2699.752",y2:"-1646.687",gradientTransform:"rotate(90 525.181 -2060.92)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M114.5 227.3s2.1-55 2.1-113.6S114.2 0 114.2 0s-3.3 28.3-3.3 113.9c0 78.6 3.6 113.4 3.6 113.4",fill:"url(#center_svg__b)"})]})},t7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144.5 166.6c2.8.3 38.1-4.2 39-6.9 3.6-10.5 8-74.1-7.7-92.5-1.2-12.9-9-33.9-27.3-38.1-2.2-4.8-3.5-5.2-7.4-9.8-3.4-4-8.1-6.6-12.9-8.5C108.5 2.9 80.5 8.3 65 23.1c-6.5 6.3-11 15-10.8 24.1.2 6.3-2.4 8.4-4.2 14.1-1 3.2-2.6 10.8-2.6 17.2.1 7.4 3.5 18.6 4.3 18.1.2-.1 2.6 25.8 1.4 41.9L52 164l17.4 1.7s3.2 5.1 13.5 11.1l.3 6.9c-14.1.5-45.6 9.3-45.6 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-26.9-11.4-40.6-13 1.2-9.5.9-15.7.7-21.1z",fill:n}),i.jsx("path",{d:"M156.8 71.8c-2.2-5.4-11.9-19.4-16.3-14.6-6.2 6.8-24.6 12.6-28.7 13-19.6 1.8-41.2-16-52.8 0-7.1 9.8-5.6 26.9-5.5 31.8.1 5.7 0 11.4-.4 17-.7 11.9 1.2 26.8 8.6 36.7 4.9 6.5 14.8 16.7 22.8 22l-.5 3.7v4.5c16.7 15.4 42.3 15.8 59.5 1l1.1-1v-19.4c5.7-5.2 11.4-12.7 15.4-18.5 5.7-8.2 7-18 7.5-27.2.2-3.8 13.1-14 3.9-22.4-7.3-6.5-11.6 0-11.6 0 .8-1.8-2.2-24.7-3-26.6z",fill:r}),i.jsx("path",{d:"M159.8 98.4c.1-8 .9-14-1.9-23.4-3.3-11.5-8.3-15.8-15.5-19.5-.4-.2-.9-.4-1.4-.4-.6.1-1.1.6-1.5 1-8 8.5-21.3 13.5-32.9 13.1-8.4-.3-16.6-2.1-24.6-4.5-7.2-2.1-14.4-4.8-20.3 1.4-10.7 11.3-8.5 30.2-9 30.4-.8.4-4.2-10.7-4.2-18.2 0-6.4 1.5-14 2.6-17.2 1.8-5.7 4.3-7.9 4.2-14.1-.3-9.1 4.2-17.8 10.8-24.1 15.3-14.8 43.2-20.1 63-12.2 4.8 1.9 9.6 4.5 12.9 8.5 4.4 5.1 8.1 15.5 4.3 21.7M52.6 96.5s.8 11.7-.1 25.5c-.7 12 2.3 25.6 9.8 35.6 6.5 8.7 19.1 19.2 28.8 24 23.3 10.8 53.5-10.5 68.5-32.1 5.9-9.6 7.9-30 7.9-30m-7.3 5.2c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7m-11.9 62.3c9.7 1 36.5-4.2 39-6.9 3.9-4.3 5.6-53.1-.3-77.5-1.1-4.6-3.4-11.9-7.4-14.9 0-14.3-12.1-35.6-28.9-38.6M77.3 149.8c2.5 1.4 5.2 2.3 8.1 2.6 2.8.3 5.7 0 8.4-.8l5.9-1.8m-18-22.5c1.2-8.3 1.6-16.7 1.1-25m1.4 75.2l.1 10.5 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3l-.4-21.4M84 183.8c-13.3 0-26.3 1.9-39 5.6l-14.2 4.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-144.9-61c-.4 10-.5 20.6-.9 30.6 0 .3 0 .6.1.8.2.3.6.5.9.5 5.7 1.5 11.3 2.2 17.2 1.9",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left1_svg__a",gradientUnits:"userSpaceOnUse",x1:"4015.933",y1:"-2536.982",x2:"4015.933",y2:"-2506.921",gradientTransform:"rotate(90 738.4 -3163.533)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M110 227.6s1.8-55 1.8-113.6-2-113.7-2-113.7-28.1 28.4-28.1 114c.1 78.6 28.3 113.3 28.3 113.3",fill:"url(#left1_svg__a)"}),i.jsxs("linearGradient",{id:"left1_svg__b",gradientUnits:"userSpaceOnUse",x1:"114.5",y1:"-4293.173",x2:"114.5",y2:"-4310.85",gradientTransform:"matrix(1 0 0 -1 0 -4181.223)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.1 118.7s-55-6.7-113.6-6.7S.8 119.3.8 119.3s28.3 10.3 113.9 10.3c78.7 0 113.4-10.9 113.4-10.9",fill:"url(#left1_svg__b)"})]})},n7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144 166.4c6.3.7 37.7-4.1 39.1-6.4 3.5-5.5 5.9-63.7-5.9-88.2 0 0 4.9-30.9-28.6-43C135.7 8.4 128 7.4 94.2 8.6 67 9.4 51 38.7 56.6 57c-.4 1.8-2.1 10.8-2.5 15.8-.6 5.6 2.3 14.4 2.3 14.4l-.9 77.5 9.9 1.4 17.5 15.7.4 1.9c-14.1.4-45.6 9.3-45.6 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-25.6-10.9-39.6-12.9l-.9-21.4z",fill:n}),i.jsx("path",{d:"M144.8 175.9v12.4l-1.1 1c-17.2 14.8-42.8 14.4-59.5-1v-7c-2.6-1.4-10.1-6.7-12.4-8.6-6-4.8-16.1-19-18.9-26.1-2.8-7.1 1.4-39.3 3.4-51.2.6-3.9 1.2-7.8 1.7-11.7.4-3 1.8-12.5 2.4-15.4.8-4.4 6.6 2.9 17.3 5.2 15.7 3.3 27.9-4.1 36.9-5.7 3.2-.6 8.3 1.6 17.2 15.7.9 1.4 3.6 13.3 3.7 21.8 0 1.1 5.5-8.8 13.2-2 9.7 8.6-6.7 24.4-6.6 25.8.2 3.8-.4 15.4-1.4 19-1.6 5.6-.9 11.1-2.1 16.8-.8 3.8 6.3-.8 6.3 3.1l-.1 7.9z",fill:r}),i.jsx("path",{d:"M142.1 127.2c.5 12.3-4.1 38.6-3.5 38.9 3.4 2 29.7-1.5 44.6-6.2 2.8-11.1 3.8-24.6 3.2-48.2-.6-20.3-4-27.5-5.4-32.2-1.2-4-3.6-7.9-3.7-7.7 2.4-5.3-4.8-40.9-28.6-43m-6.6 138.1c-17.7 11.2-42.5 16.6-58 14.4-7.6-1.8-27.4-22.3-30.6-32.8-2.8-7.1-2.3-17.2-1.6-25.7l8.8-57.1M145 43.8c2.5-3.1 8.4-15.4-3-25.6-4.6-4.2-10.4-6.9-16.4-8.5-12.7-3.4-23.1-2.8-33.1-.9C59.3 15.2 43.1 54 63.2 67.5c13.5 9 32.9 6.1 52.4-.6 15 6.7 20.5 21.8 19.8 39.5m-66.5-4.2c.2 3.1-1.7 20.5-4 25m-2.6 19.3c2.7 1.4 3.8 2.2 6.8 2.7s7.9.8 10.7-.2m57.8-19c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7M56.2 59.2c-2.7 9.5-3.7 21.6.2 33.6M84 181.2l.1 6.8 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-21.1m-60.9 16.9c-13.3 0-26.3 1.9-39 5.6l-14.2 4.1m114.3-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-142.4-41c0 3.6 0 11.9.1 12.1.1.3 7.2 1.8 9.9 1.4",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left2_svg__a",gradientUnits:"userSpaceOnUse",x1:"4670.821",y1:"4319.57",x2:"4670.821",y2:"4271.634",gradientTransform:"matrix(0 1 1 0 -4207.72 -4556.822)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M108.9 227.6s2.9-55 2.9-113.6S108.7.3 108.7.3s-44.8 28.4-44.8 114c-.1 78.6 45 113.3 45 113.3",fill:"url(#left2_svg__a)"}),i.jsxs("linearGradient",{id:"left2_svg__b",gradientUnits:"userSpaceOnUse",x1:"114.6",y1:"6730.506",x2:"114.6",y2:"6748.182",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.2 118.5s-55-6.7-113.6-6.7S.9 119.2.9 119.2s28.3 10.3 113.9 10.3c78.7 0 113.4-11 113.4-11",fill:"url(#left2_svg__b)"})]})},i7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"left",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M142.5 187.7c2.1-3.8.9-8.6 1-12.7 0-1.8 0-5.3 1.6-6.6 1.5-1.2 5.6-.8 7.5-1 8.8-1.1 22.6-1.6 29.7-7.7 4-3.5 3.8-29.9 2.1-52-1.1-14.6-2.8-27.3-4.2-30 0 0 12.8-36.1-28-48.4-6.4-19.1-25.6-25-58.8-21.1-23 .8-48.9 36.6-36.6 51.2 7.8 9.2.3 27.8.1 35.3-.2 10.1-10.9 29.4-10.7 30.1.1.4 6 3.8 6.3 4.4.4.8-3.8 16.7 6.8 33 9.4 14.4 23.9 13.6 23.3 18.2 0 .2-.3 2.7-.3 2.9-14.2.5-45.4 9.3-45.4 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0 0-26.9-11.4-40.6-13-.2.1-.4.3-.6.4z",fill:n}),i.jsx("path",{d:"M143.5 169c.9.4.4 18.9.4 18.9l-1.1 1c-17.2 14.8-42.8 14.4-59.5-1v-7c-2.6-1.4-10.1-6.7-12.4-8.6-6-4.8-17.3-13.1-18.9-26.1-.7-5.7-.8-12.2-.9-17.8-1.9-.7-5.7-3.4-5.8-3.7-.1-.4 5.4-11.1 7.7-16.2 1.3-3 5.1-34.4 7.1-41.6 6.1 2.6 12.3 4.9 18.8 6 6.5 1.1 25.2-4.2 28.3-4.3 3.8-.2 9.8 2.4 12.4 5.2s5.6 13.7 5.4 16.1c-1 11.9-2.2 10.2-4.8 14.2 2-1.7 6 0 7.8 1.8 2.5 2.4 3 7.5 2 10.8-1.1 3.6-5.6 10.2-7.7 13.3-2.3 3.4-3.4 16.7-4.1 21.3-.4 2.8-2.1 16.8-.4 18.8 2.3 2.5 25.6-1.2 25.7-1.1z",fill:r}),i.jsx("path",{d:"M121.6 129.7c.3-.3-6.2 39.3-4.1 40.2 2 .9 18.3.1 36.2-2.7 15.2-2.4 28.7-7.4 28.7-7.4 4.9-15.6 4.8-67.2-2.1-82 5.5-17.8-8.5-46.9-28-48.4m-17 140c-13.7 7.5-33.1 12.7-50.9 10.2-7.6-1.8-26.5-14.5-29.7-25-1.7-4.4-2.8-15.9-2.5-20.5.2-2.4.3-5.6.3-5.6-1.7-.4-5.4-2.3-7.1-3.9 3-6.9 7.5-15.1 10-22.2 1.5-4.1 2.7-19.6 3.2-23.8.5-4.5 1-8.9 1.4-13.4m87.8-18.8c6.1-7.8 7.7-20.3-3.7-30.5-4.6-4.2-12.7-8-18.5-8.7-12.6-1.6-24-.6-34 1.3-33.1 6.4-49.3 45.2-29.2 58.7 13.5 9 28.4 6.5 47.9-.2 15 6.7 19.5 23.1 11.5 36.2m-69.1 39.6c2.7 1.4 2.6 1.6 5.6 2.1s7.8.8 10.7-.2m47.8-12c5.2-2.5 9.6-6.8 12.2-11.9 1.8-3.5 2.8-7.6 1.6-11.3-1.1-3.7-4.9-6.8-8.8-6.3-2.2.3-4.1 1.7-5.5 3.4s-2.4 3.7-3.3 5.7m-29.7 68.6l.1 6.8 1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3l.1-19.2m-61 14.9c-13.3 0-26.3 1.9-39 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"left3_svg__a",gradientUnits:"userSpaceOnUse",x1:"4670.472",y1:"4318.721",x2:"4670.472",y2:"4252.791",gradientTransform:"matrix(0 1 1 0 -4207.72 -4556.822)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M107 227.3s4-55 4-113.6S106.7 0 106.7 0 45 28.4 45 114c0 78.5 62 113.3 62 113.3",fill:"url(#left3_svg__a)"}),i.jsxs("linearGradient",{id:"left3_svg__b",gradientUnits:"userSpaceOnUse",x1:"113.75",y1:"6730.156",x2:"113.75",y2:"6747.832",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.4 118.2s-55-6.7-113.6-6.7S.1 118.9.1 118.9s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#left3_svg__b)"})]})},r7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M143.9 187.5c.6-7.6-1.7-18.7 9.1-21.7 0 .1-.1.1-.1.1l15-2.7v-18.6c.5-20.9 1.2-52.1 1.2-52.1s1.9-11.2.9-22.8c-.9-11-6.7-20.7-6.7-20.7-.4-9.3-2.2-16.3-10-24.9-7.6-8.3-17.8-11.4-28.8-13.5-12-2.3-22.9-.8-34.3 3.4-9.5 3.5-17.1 8-24 15.4-5.8 6.3-13 21-13 21v.2c-9 9.5-13.8 27.6-13.7 41.6.2 13.8-.3 64.2 3.1 70.9 2 3.9 35.2 4 36.5 3.8 5.1 2.1 5.3 6.6 3.8 16.7-14 .4-45.8 9.3-45.8 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4 0-.2-26.2-11.3-40-13.1z",fill:n}),i.jsx("path",{d:"M99.4 58.9c-9.2.1-18.5 2.5-25.4 8.5-7.7 6.6-11.9 17-11.4 27.1-5.3-.4-9.8 4.9-10 10.3-.3 11.3 8.5 17 8.9 17.9.5 1 3.9 20.3 8.8 31.3 2.4 5.3 7.3 15 12.5 17.1l.6 15.6 1.1 1c17.2 14.8 42.8 14.4 59.5-1v-14c4.5-3.5 8.8-7.5 16.7-17.2 4.6-5.6 7.8-20.2 7.6-27.5-.2-7.2-.2-15.2-.4-22.4-.4-14.9.7-32.1-8-45-3.6 3.3-11.6 9.9-22.6 10.4-15.6.7-31.2-12.1-37.9-12.1z",fill:r}),i.jsx("path",{d:"M121.7 149.4l5.9 1.8c2.7.8 5.6 1.1 8.4.8s5.6-1.2 8.1-2.6m-5.5-21.8c-1.2-8.3-1.6-16.7-1.1-25m-75.1-6.4c-2.1-15 9.5-27.6 17.4-32.4 7.3-4.4 18.6-6.6 26.8-3.6 5.3 1.9 9.8 5.6 15 7.6 9.3 3.7 20.5 3.4 29.8-.4 10.4-4.3 13.2-18.5 11.7-24.7-2.3-9.5-6.2-15.4-11.5-20.2-7.8-7.1-16.3-10-27-11.9-11.6-2.1-23.2-.5-34.3 3.4-9.2 3.2-17.6 8.3-24 15.4-10.3 11.3-14 23.5-13.9 35.5m116.3 33.8s-.6 9.5.3 23.3c.7 12-2.3 25.6-9.8 35.6-6.5 8.7-16.3 17.7-26.1 22.5-17.8 8.8-40.4-.7-56.9-14.8M55.6 46.4c-9.1 9.5-16.4 32.2-16.2 48.5-1 30.6 1.9 63.9 3.2 68.1 4.3 1.8 24.4 4.8 35 3.4-11.5-15.8-16-44.2-15.9-44m8.6-17.3c-1-2-1.9-4-3.3-5.7s-3.3-3.1-5.5-3.4c-3.9-.6-7.6 2.5-8.8 6.3-1.1 3.7-.2 7.9 1.6 11.3 2.6 5.2 7 9.4 12.2 11.9m93.6-66.3c6.2 9.2 9.1 29.5 8.6 39.5 5.2-14.2 1.3-38.1-5-51.9M83.4 171.6v16.2l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-14.9m-60.7 10.5c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-27.8-63.8c-.2 11.2 0 33.4-.3 33.9s-11.8 2.8-16.5 2.6",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right1_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"6732.6",x2:"113.65",y2:"6750.276",gradientTransform:"translate(0 -6621)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#right1_svg__a)"}),i.jsxs("linearGradient",{id:"right1_svg__b",gradientUnits:"userSpaceOnUse",x1:"4672.472",y1:"-188.98",x2:"4672.472",y2:"-219.041",gradientTransform:"rotate(90 2239.37 -2319.45)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M110.7 227.3S139 192.5 139 114c0-85.6-28.1-114-28.1-114s-2 55.1-2 113.7 1.8 113.6 1.8 113.6",fill:"url(#right1_svg__b)"})]})},o7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-3-3h233.3v233.3H-3z"}),i.jsx("path",{d:"M183.7 200.3c-5.5-2.3-11-4.4-16.6-6.4-4.2-1.5-8.5-2.9-12.8-4.1-2-.6-4-1.1-6.1-1.5-2.1-.5-4.1-.5-4.1-3.3 0-3.4-1.1-6.3.5-9.4 1.7-3.2 4.5-5.7 7.3-7.8l2.1-1.5 14.7-4.6-1.4-12.1c.7-2.5 1.1-5.1 1.3-7.7 2-20.6-3.3-41.3-2.6-62 .2-5.1.7-10.4-.9-15.3-.2-.5-.4-1.1-.6-1.6 19.6-13.6 2.9-50.8-30.5-52.9C95.7 7.7 67 22 58.7 48.3c-31.2 20.2-20 96-13.1 114.4 10.3 5.3 28 5.2 37 4 .1.9.1 1.8.3 2.6.8 4.9 2.8 8.8-1.4 13-3.2 3.2-6.6 2.4-10.5 2.5-4.7.2-9.6 1.9-14.2 2.9-6.7 1.5-13.3 3.2-19.9 5 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1 0 0-.1 0-.1z",fill:n}),i.jsx("path",{d:"M165.9 64.1c-3.5 2.6-15.7 8.6-27 5.8-9.7-2.3-15.9-6.7-22.9-7.9-9.9-1.7-18.5.8-25.3 8.1-6.9 7.3-10.7 20.1-8.4 29.8-4.6-2.3-8.3.8-10.6 4-3.4 4.7 2.2 16.4 8.7 21.2 1.6 1.2 3.3 30.1 7.9 39.6-2.2.5-3.5 1.1-5.7 1.6 1.9 2.8.5 21.6.5 21.6s11 8.4 25.3 10.1c11.9 1.4 26.7-3.1 34.3-10.1l.2-10.3c-.4.2 14.1-13.1 19.5-22.3 6-10.1 8.6-22.2 7-33.9-.6-4-3.1-18.6-3.4-22-.1-2.6-1.5-26.2-.1-35.3z",fill:r}),i.jsx("path",{d:"M80.8 125.7c-.3 12.5 7.6 39 7.6 39-16.3 3.6-33.4 2.1-42.6-2.1-3.3-1.5-10.3-50.9-6-76.7C41.5 68 48.4 55.1 59 47.8c8.1-19 29.7-38.7 70.6-38.2 41.3 1.9 53.7 42.4 33.5 55.9-28.3 14.3-37.6-7-58.3-2.7-18.1 1.8-27.2 27.1-21.3 36.8m83.3-37s-.7 23.3-.3 31.9 3.7 27.1 3.8 30.7c.2 3.6-1.8 19.3-5.1 26.2-4 10.2-19.5 26.4-30.5 29.9-14.8 5.9-36.3-.2-53.2-14.1m76-40.9c-2.3-4.5-4.2-21.9-4-25m-10.9 47.8c2.9 1 7.7.8 10.7.2s4.1-1.3 6.8-2.7m-71.5-38.8c-.9-2-1.9-4-3.3-5.7S82 99 79.8 98.7c-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 7 9.4 12.2 11.9M58.9 47.8c-1.9 5.6-3.3 16-3.1 22.1m27.6 99.3v18.5l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-10.8m-60.7 6.5c-13.3 0-26.5 1.9-39.2 5.6L30 193.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1m-40.7-28.2c4.1 0 12.3-2.9 12.5-3.3.2-.2-1.2-14.5-.9-18.5",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right2_svg__a",gradientUnits:"userSpaceOnUse",x1:"113.65",y1:"6730.3",x2:"113.65",y2:"6747.977",gradientTransform:"translate(0 -6618.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M227.3 118.3s-55-6.7-113.6-6.7S0 119 0 119s28.3 10.3 113.9 10.3c78.6 0 113.4-11 113.4-11",fill:"url(#right2_svg__a)"}),i.jsxs("linearGradient",{id:"right2_svg__b",gradientUnits:"userSpaceOnUse",x1:"4670.472",y1:"-207.178",x2:"4670.472",y2:"-256.777",gradientTransform:"rotate(90 2229.272 -2327.55)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M111.9 227.3s46.7-34.8 46.7-113.3c0-85.6-46.4-114-46.4-114s-3.3 55.1-3.3 113.7 3 113.6 3 113.6",fill:"url(#right2_svg__b)"})]})},a7=()=>{var a,s,c,l,u,d,m;const{startIcon:e}=(a=li())!=null?a:{},t=f.useContext(Ze),n=(c=A((s=e==null?void 0:e["fill-color"])==null?void 0:s.base.base))!=null?c:t.iconColorPrimary,r=(u=A((l=e==null?void 0:e["fill-color"])==null?void 0:l.highlight.base))!=null?u:t.iconColorHighlight,o=(m=A((d=e==null?void 0:e["stroke-color"])==null?void 0:d.base.base))!=null?m:t.iconColorStroke;return i.jsxs("svg",{role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 227.3 227.3","aria-label":"right",children:[i.jsx("path",{fill:"none",d:"M-2.2-2.7h233.3v233.3H-2.2z"}),i.jsx("path",{d:"M144.7 187.8c0-.1 0-.2.1-.3 1-4.8-1.4-10.8 2.1-14.3 1.1-1.1 9.9-7.1 12.1-10.1 6.4-8.8 10.4-19.3 11.5-30.1.1-1 .2-2 .5-2.9 1-2.8 4.1-4.3 6.9-5.4-.9-.5-10.8-27.2-11.7-38-.4-5.5-1.7-20.3-3.1-21.9.6-.4 1.3-.9 1.9-1.4 20.2-13.4 3.5-51.1-30.1-53.2-38.3-2.4-71 10.2-79.1 41.2-29.8 23.6-12.5 87-8.3 109.7 5.8 1.9 34.5 5.5 35.7 9.6.8 2.7.6 11.4.2 13-14.2.5-45.5 9.3-45.5 9.3 13.6 13.2 45.2 31.1 77.3 31.1 27.3 0 51.8-7.9 69.5-23.4.1.1-26.1-11-40-12.9zm-41.5-45c.1.3.3.6.4.9l-.1.1c-.2-.3-.3-.6-.3-1z",fill:n}),i.jsx("path",{d:"M167.8 96.4c-1.7-4.4-2.5-25.1-3.7-30.4-12.6 6.5-24.4 7.1-36.7 4.1-6.5-1.6-13.6-2.6-19.9-.3-5.4 2-9.6 6.8-11.3 12.4-1.7 5.5-1.1 11.6 1 17 0 0-7.5 1.2-7.1 10.9.3 7.9 10.1 14.1 10.6 18.4 1.1 9.3 8.1 34.7 7.9 36.5-4.7 2.3-24.5 1.8-24.5 4.4 0 4.5.3 18.6.3 18.6s31.6 24.9 60.7 0l-.7-12.5c6.2-3.8 13.8-11 15.4-12.9 5.8-7.1 10-13.2 11.5-33l7.7-4.5c-.2.1-11.2-28.7-11.2-28.7z",fill:r}),i.jsx("path",{d:"M99.8 125.5c.8 9.7 7.4 36.1 9.4 39.9-12.8 3.6-26.4 2.3-39.6 1-9-.9-20.6-3.8-21-4.3s-10.7-40.3-9.1-69.2c-.1-18.4 5.8-34.2 16.4-41.5 8.3-26.2 33.6-42 74.5-41.5 41.3 1.9 53.7 42.4 33.5 55.9-28.3 14.3-40-2-55.9 4C97 74 91 89.5 96.9 99.2m53.6 47.3c2.9 1 7.7.8 10.7.2s4.1-1.3 6.8-2.7m-59.6-35.8c-.9-2-1.9-4-3.3-5.7s-3.3-3.1-5.5-3.4c-3.9-.5-7.7 2.6-8.8 6.3-1.2 3.7-.2 7.8 1.6 11.3 2.6 5.1 7 9.4 12.2 11.9M55.8 51.4c-1.9 5.6-2.7 23.9-.3 30.3m108.4-15.9c.8 6.3 1.6 12.7 2.4 19 .7 5.3.8 10.9 2.7 15.9 2.1 5.4 3.1 9.1 5.5 14.3.7 1.6 3.7 8.5 4.4 10.1-2.2 2.2-5.4 3-8.1 4.2 1.5 3.3-3.1 18.7-4.9 22.6-5 12.5-19.5 24.1-30.5 27.6-17.9 6.9-41 .8-56.8-12.1m5.6 5.8V188l1.1.9c8.3 6.9 19 10.6 30 10.4 11-.2 21.6-4.2 29.6-11.3v-10.8m-60.7 6.6c-13.3 0-26.5 1.9-39.2 5.6l-14.2 4.1m114.2-9.6c13.3 0 25.8 1.8 38.5 5.5l14.2 4.1",fill:"none",stroke:o,strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsxs("linearGradient",{id:"right3_svg__a",gradientUnits:"userSpaceOnUse",x1:"114.5",y1:"8936.65",x2:"114.5",y2:"8954.326",gradientTransform:"translate(0 -8824.7)",children:[i.jsx("stop",{offset:".52",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M228.1 118.7s-55-6.7-113.6-6.7S.8 119.3.8 119.3s28.3 10.3 113.9 10.3c78.7 0 113.4-10.9 113.4-10.9",fill:"url(#right3_svg__a)"}),i.jsxs("linearGradient",{id:"right3_svg__b",gradientUnits:"userSpaceOnUse",x1:"5980.821",y1:"-1104.028",x2:"5980.821",y2:"-1174.186",gradientTransform:"rotate(90 2436.272 -3430.55)",children:[i.jsx("stop",{offset:".001",stopColor:o,stopOpacity:"0"}),i.jsx("stop",{offset:"1",stopColor:o,stopOpacity:".3"})]}),i.jsx("path",{d:"M113.9 227.6S180 192.8 180 114.3c0-85.6-65.6-114-65.6-114s-4.7 55.1-4.7 113.7 4.2 113.6 4.2 113.6",fill:"url(#right3_svg__b)"})]})},Qe=({children:e,frameDuration:t})=>f.Children.count(e)>1?i.jsx(c7,{frameDuration:t,children:e}):i.jsx(i.Fragment,{children:e});Qe.Center=e7;Qe.Left1=t7;Qe.Left2=n7;Qe.Left3=i7;Qe.Right1=r7;Qe.Right2=o7;Qe.Right3=a7;const s7=b.div.withConfig({displayName:"SelfiePictograph__SlidesContainer",componentId:"sc-1yjms2j-0"})(["position:relative;"]),c7=f.memo(function({children:t,frameDuration:n}){const r=f.useRef(f.Children.toArray(t).flatMap((s,c)=>{var l;return new Array((l=s.props.frames)!=null?l:1).fill(c)})),[o,a]=f.useState(0);return f.useEffect(()=>{const s=setTimeout(()=>a(c=>(c+1)%r.current.length),n);return()=>clearTimeout(s)}),i.jsx(s7,{children:f.Children.toArray(t)[r.current[o]]})},()=>!0),l7=b.div.withConfig({displayName:"InquirySelfiePromptView__Container",componentId:"sc-1duq5j2-0"})(["display:flex;flex-direction:column;"]),mb=b("div").withConfig({displayName:"InquirySelfiePromptView__Header",componentId:"sc-1duq5j2-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),d7=b("div").withConfig({displayName:"InquirySelfiePromptView__OptionPrimary",componentId:"sc-1duq5j2-2"})(["margin-bottom:",";"],S.Spacing[4]),u7=b(Fr).withConfig({displayName:"InquirySelfiePromptView__IconCameraStyled",componentId:"sc-1duq5j2-3"})(["path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),hb=b.div.withConfig({displayName:"InquirySelfiePromptView__CaptureOptionsContainer",componentId:"sc-1duq5j2-4"})(["width:100%;"]);function m7(e){const{enabledCaptureOptions:t,allowStillfieFallback:n}=e,[r,o]=z();return e.skipPromptPage&&t.length===0?i.jsx(In,{}):t.includes("web_camera")?i.jsx(h7,{...e,t:r,i18n:o}):n||j.isDashboard?i.jsx(p7,{...e,t:r,i18n:o}):i.jsx(Hi,{to:"/inquiry/support/camera"})}function pb(e){const{handleDeviceHandoff:t,isProcessing:n,localizations:r,uiReady:o}=e,{buttons:a}=li();return i.jsx(ge,{id:"selfie-prompt__button--to-mobile","data-test":"selfie-prompt__button--to-mobile",buttonType:Z.Secondary,disabled:!!n||!o,isPending:n===it.DeviceHandoff,onClick:t,styles:a==null?void 0:a[Z.Secondary],children:r["btn-device-handoff"]})}function h7({assets:e,localizations:t,enabledCaptureOptions:n,handleDeviceHandoff:r,isProcessing:o,requireSelfieMatch:a,handleStartRecording:s,uiReady:c}){const{base:l,buttons:u}=li();let d,m;switch(a){case un.ProfileAndCenter:case un.ConfigurablePoses:d=t["selfie-prompt"],m=i.jsx(Ye,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(qe,{customImage:e["selfie-pictograph"],alt:"selfie pictograph",children:i.jsx(Yt,{url:"selfiePictographUrl",height:"selfiePictographHeight","aria-label":"selfie pictograph",themed:!1,children:i.jsxs(Qe,{frameDuration:100,children:[i.jsx(Qe.Center,{frames:8}),i.jsx(Qe.Left1,{}),i.jsx(Qe.Left2,{frames:8}),i.jsx(Qe.Left1,{}),i.jsx(Qe.Center,{}),i.jsx(Qe.Right1,{}),i.jsx(Qe.Right2,{frames:8}),i.jsx(Qe.Right1,{})]})})})});break;case un.OnlyCenter:d=t["selfie-prompt-center"],m=i.jsx(Ye,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(qe,{customImage:e["selfie-center-pictograph"],alt:"selfie center pictograph",children:i.jsx(Yt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"selfie center pictograph",themed:!1,children:i.jsx(Qe,{children:i.jsx(Qe.Center,{})})})})});break;default:$e("Invalid selfie match requirement");break}return i.jsxs(l7,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(mb,{children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:i.jsx(te,{children:t["selfie-title"]})}),i.jsx(at,{styles:l==null?void 0:l.textStyle,children:i.jsx(te,{children:d})})]}),m,i.jsx(mt,{children:i.jsxs(hb,{children:[i.jsx(d7,{children:i.jsx(ge,{id:"selfie-prompt__button--camera","data-test":"selfie-prompt__button--camera",buttonType:Z.Primary,disabled:!!o||!c,isPending:o===it.SelectCamera,onClick:s,styles:u==null?void 0:u[Z.Primary],children:t["btn-submit"]})}),n.includes("device_handoff")&&i.jsx(pb,{localizations:t,handleDeviceHandoff:r,isProcessing:o,uiReady:c})]})})]})}const Oc=b.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHint",componentId:"sc-1duq5j2-5"})(["display:flex;justify-content:center;"]),$o=b.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHintColumn",componentId:"sc-1duq5j2-6"})(["display:flex;flex-direction:column;align-items:center;position:relative;width:145px;font-size:",";line-height:",";"],({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),za=b.div.withConfig({displayName:"InquirySelfiePromptView__StillfieHintIconContainer",componentId:"sc-1duq5j2-7"})(["position:absolute;top:108px;right:-4px;"]),Ka=b.p.withConfig({displayName:"InquirySelfiePromptView__StillfieHintText",componentId:"sc-1duq5j2-8"})(["width:100px;"]);function p7({assets:e,localizations:t,enabledCaptureOptions:n,isProcessing:r,currentStep:o,handleDeviceHandoff:a,handleSelectImage:s,uiReady:c}){f.useEffect(()=>{ee.logAmplitude("selfie.stillfie",{currentStep:o})},[o]);const{base:l,buttons:u}=li();let d,m;switch(o){case fe.Center:d=t["selfie-prompt-center"],m=i.jsx(Ye,{height:120,width:120,"aria-label":"stillfie center pictograph",children:i.jsx(qe,{customImage:e["selfie-center-pictograph"],alt:"stillfie center pictograph",children:i.jsx(Yt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"stillfie center pictograph",themed:!1,children:i.jsx(Oc,{children:i.jsx($o,{children:i.jsx(Qe,{children:i.jsx(Qe.Center,{})})})})})})});break;case fe.Left:d=t["selfie-prompt-left"],m=i.jsx(Ye,{height:null,width:null,"aria-label":"stillfie left pictograph",children:i.jsx(qe,{customImage:e["selfie-left-pictograph"],alt:"stillfie left pictograph",children:i.jsx(Yt,{url:"selfieLeftPictographUrl",height:"selfieLeftPictographHeight","aria-label":"stillfie left pictograph",themed:!1,children:i.jsxs(Oc,{children:[i.jsxs($o,{children:[i.jsx(Qe,{children:i.jsx(Qe.Left1,{})}),i.jsx(za,{children:i.jsx(ds,{})}),i.jsx(Ka,{children:t["stillfie-hint-left"]})]}),i.jsx(Je,{width:3}),i.jsxs($o,{children:[i.jsx(Qe,{children:i.jsx(Qe.Left3,{})}),i.jsx(za,{children:i.jsx(us,{})}),i.jsx(Ka,{children:t["stillfie-hint-wrong"]})]})]})})})});break;case fe.Right:d=t["selfie-prompt-right"],m=i.jsx(Ye,{height:null,width:null,"aria-label":"stillfie right pictograph",children:i.jsx(qe,{customImage:e["selfie-right-pictograph"],alt:"stillfie right pictograph",children:i.jsx(Yt,{url:"selfieRightPictographUrl",height:"selfieRightPictographHeight","aria-label":"stillfie right pictograph",themed:!1,children:i.jsxs(Oc,{children:[i.jsxs($o,{children:[i.jsx(Qe,{children:i.jsx(Qe.Right1,{})}),i.jsx(za,{children:i.jsx(ds,{})}),i.jsx(Ka,{children:t["stillfie-hint-right"]})]}),i.jsx(Je,{width:3}),i.jsxs($o,{children:[i.jsx(Qe,{children:i.jsx(Qe.Right3,{})}),i.jsx(za,{children:i.jsx(us,{})}),i.jsx(Ka,{children:t["stillfie-hint-wrong"]})]})]})})})});break}return i.jsxs(i.Fragment,{children:[i.jsx(qe,{customImage:e["header-pictograph"],alt:"header pictograph"}),i.jsxs(mb,{children:[i.jsx(dt,{styles:l==null?void 0:l.titleStyle,children:i.jsx(te,{children:t["stillfie-title"]})}),i.jsx(at,{styles:l==null?void 0:l.textStyle,children:i.jsx(te,{children:d})})]}),m,i.jsx(Je,{height:3}),i.jsx(mt,{children:i.jsxs(hb,{children:[i.jsx(Lo,{id:"selfie-prompt__button--stillfie","data-test":"selfie-prompt__button--stillfie",buttonType:Z.Primary,capture:"user",disabled:r!=null||!c,isPending:r===it.UploadImage,handleSelectImage:s,styles:u==null?void 0:u[Z.Primary],children:i.jsx(u7,{})}),n.includes("device_handoff")&&i.jsx(pb,{localizations:t,handleDeviceHandoff:a,isProcessing:r,uiReady:c})]})})]})}const f7=e=>{const{inquiry:t,config:n,capturedSelfies:r,isWebGLIncompatible:o,featureFlags:a,hasCamera:s,styles:c,uiStatus:l,setTransitionStart:u,setUiReady:d}=e,m=Ot(),{t:h}=z(),p=f.useRef();f.useEffect(()=>{const[D,O]=fi();return p.current=D,O},[]);const[g,C]=f.useState(void 0),[I,v]=f.useState(void 0);f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}},[]),f.useEffect(()=>{x()},[]),f.useEffect(()=>{if(n==null)return;if(e.match.params.step===da([],rs(t))&&e.verificationSelfieStart(),s==null)e.checkCamera();else{const O=aI({config:n,isWebGLIncompatible:o,hasCamera:s});if(n["skip-prompt-page"])return O.includes("web_camera")?(v([]),R(m.replace)):O.includes("device_handoff")?e.history.replace("/inquiry/device-handoff/prompt"):e.history.push("/inquiry/support/camera");O.length===1&&O[0]==="device_handoff"?e.history.replace("/inquiry/device-handoff/prompt"):v(O)}},[s]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("selfie.prompt-page.entered",{})}catch{}},[]);const x=async()=>{if((a==null?void 0:a["inquiry:enable-custom-1"])&&!lp()&&!Zc()&&!j.isWebView){const O=await Promise.allSettled([_t.loadModels(),ta.load(vr,"custom-1")]);if(O[1]&&O[1].status==="rejected")ta.errored=!0,me(O[1].reason instanceof Error?O[1].reason:new Error(JSON.stringify(O[1].reason)),"info");else try{ta.warmup()}catch(U){me(U instanceof Error?U:new Error(JSON.stringify(U)),"info")}}else try{await _t.loadModels()}catch{}},R=async(D=m.push)=>{e.clearMessages(),C(it.SelectCamera),u();try{const O=Ms(t),U=Pg({highResolution:O});e.setVideoConstraints(U),await Promise.all([Dn.prepare({video:U,audio:$i(n)},a),_t.loadModels()]),j.onEvent(Pe.SelfieCameraSelect),D("/inquiry/selfie/record")}catch(O){me(O,"warning"),ee.logAmplitude("selfie.record.errored",{error:{name:O.name,message:O.message}}),j.onEvent(Pe.LoadCameraFailed,{error:O.name,message:O.message}),D($i(n)?"/inquiry/support/camera-microphone":"/inquiry/support/camera")}finally{d()}},_=async D=>{if(e.clearMessages(),window.FileReader==null){e.showMessage(h("government-id.prompt.failed-select-image"));return}C(it.UploadImage),j.onEvent(Pe.SelfieRecordUpload);const O=document.createElement("img");O.onload=async()=>{const M=Math.min(1e3,Math.max(O.width,O.height));cb(O,p.current,M);const Y=p.current.toDataURL("image/jpeg");if(Y==null){e.showMessage(h("government-id.prompt.failed-select-image")),$e("Stillfie canvas is empty","error",{fileSize:D==null?void 0:D.size,fileName:D==null?void 0:D.name,img:O.src});return}ee.logAmplitude("selfie.upload",{fileSize:D==null?void 0:D.size,fileName:D==null?void 0:D.name,imgSize:O.src.length,canvasSize:Y.length});let F;if(Y.length<O.src.length&&Y.length!==0?F=Y:F=O.src,F==null){T();return}const H=e.match.params.step;e.saveCapturedSelfie(H,F,bt.Upload);const q=od(r,H,F,bt.Upload),W=rs(t),X=da(q,W,n["ordered-poses"]);if(X==null)try{await e.selfieSubmit({inquiry:t,config:n,capturedSelfiesSubmitData:{capturedSelfies:q,cameraInspectionData:null},debugForcedStatus:e.debugForcedStatus,history:m,t:h,featureFlags:a})}finally{C(void 0)}else m.push(`/inquiry/selfie/${X}/prompt`)},O.onerror=T;const U=await wo(D);O.src=U},T=()=>{C(void 0),e.showMessage(h("government-id.prompt.failed-select-image"))},E=()=>{g==null&&(e.clearMessages(),C(it.DeviceHandoff),e.history.push("/inquiry/device-handoff/prompt"))};if(t==null||n==null||I==null||I.length===1&&I[0]==="device_handoff")return null;const V=rs(t);return i.jsx(ub,{value:c,children:i.jsx(m7,{assets:n.assets["prompt-page"],localizations:n.localizations["prompt-page"],handleSelectImage:_,handleStartRecording:()=>R(m.push),handleDeviceHandoff:E,enabledCaptureOptions:I,allowStillfieFallback:n["web-camera-allow-stillfie-fallback"],isProcessing:g,currentStep:e.match.params.step,requireSelfieMatch:V,skipPromptPage:n["skip-prompt-page"],uiReady:l===on.Ready})})},g7=e=>({capturedSelfies:e.verification.capturedSelfies,config:vi({state:e,stepType:Ae.Selfie}),styles:fd(e.inquiry),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,isWebGLIncompatible:e.inquiry.isWebGLIncompatible,hasCamera:e.ui.hasCamera,uiStatus:e.ui.status}),b7={clearMessages:Lt,saveCapturedSelfie:Vs,setVideoConstraints:So,verificationSelfieStart:ug,selfieSubmit:wg,showMessage:ae,checkCamera:Mr,setTransitionStart:yn,setUiReady:ct},C7=Te(g7,b7),x7=C7(f7);class v7{constructor(t){this.configs=t,this.currentState={currentPose:t.poseOrder[0],hasFace:!1,invalidReasons:null,poseIndex:0}}getNextPoseState({canvas:t,forceCapture:n,poseData:r}){let{currentPose:o,poseIndex:a}=this.currentState;if(o==="done"||r==null&&!n)return this.currentState;let s;if(r&&(s=this.getInvalidReasons(r,o)),n||!s&&r!=null&&this.canCapture(r,o)){const{poseOrder:c,onCapture:l}=this.configs;l(o,t,n),a=a+1,s=null,o=a>c.length-1?"done":c[a]}return this.currentState={currentPose:o,hasFace:n?!0:r!=null&&r.faceCount>=1,invalidReasons:s,poseIndex:a}}getInvalidReasons(t,n){const r=[];for(const o in Fc){const a=o;Fc[a].isEnabled(t)&&Fc[a].isTriggered(t,n,this.configs.requireHigherAccuracyCapture)&&r.push(a)}return r.length>0?r:null}canCapture(t,n){return I7[n](t)}}const Gm=5,Wm=20,Lc=(e,t)=>e>fb?t>=1:t===1,I7={[fe.Left]:e=>Lc(e.elapsedTime,e.faceCount)&&e.horizontalAngle<-Wm,[fe.Right]:e=>Lc(e.elapsedTime,e.faceCount)&&e.horizontalAngle>Wm,[fe.Center]:e=>Lc(e.elapsedTime,e.faceCount)&&-Gm<e.horizontalAngle&&e.horizontalAngle<Gm},fb=1e4;var Jr=(e=>(e.MultipleFaces="multiple_faces",e.TooFar="too_far",e.TooClose="too_close",e.NotCentered="not_centered",e.NoFace="no_face",e))(Jr||{});const S7=.35,w7=.45,y7=.8,_7=3,Fc={multiple_faces:{isTriggered:e=>e.faceCount>1,isEnabled:e=>e.elapsedTime<=fb},too_far:{isTriggered:(e,t,n=!1)=>{const r=Math.max(e.faceDimensions.width,e.faceDimensions.width),o=Math.min(e.videoDimensions.width,e.videoDimensions.height),a=n&&t===fe.Center?w7:S7;return e.faceCount>0&&r<o*a},isEnabled:()=>!0},too_close:{isTriggered:e=>{const t=Math.max(e.faceDimensions.width,e.faceDimensions.width),n=Math.min(e.videoDimensions.width,e.videoDimensions.height);return e.faceCount>0&&t>n*y7},isEnabled:()=>!0},not_centered:{isTriggered:(e,t,n=!1)=>{const{faceBox:r,videoDimensions:o,faceCount:a,landmarks:s}=e;if(!n||r==null||a===0)return!1;if(r.top<0||r.bottom>o.height)return!0;if(s!=null&&(s==null?void 0:s.getNose().length)>2&&t===fe.Center){const d=s.getNose()[3],m=d.x+r.x,h=d.y+r.y,p=Math.min(o.width,o.height)*.4,g=o.width/2-p/2,C=o.width/2+p/2,I=o.height/2-p/2,v=o.height/2+p/2;if(m<g||m>C||h<I||h>v)return!0}const c=Math.max(o.width-r.right,1),l=Math.max(r.left,1);return Math.max(l,c)/Math.min(l,c)>_7},isEnabled:()=>!0},no_face:{isTriggered:e=>e.faceCount<=0,isEnabled:()=>!0}};function R7(e,t){const n=f.useRef(t);return f.useEffect(()=>{n.current=e},[e]),n.current}const gb=b("div").withConfig({displayName:"HintPrompt__BaseWrapper",componentId:"sc-r1ya50-0"})(["text-align:center;display:flex;align-items:center;justify-content:space-around;padding-left:",";padding-right:",";",";"],S.Spacing[6],S.Spacing[6],({styles:e})=>{var n;const t=(n=e==null?void 0:e["line-height"])==null?void 0:n.base.base;if(t!=null)return $(["min-height:",";"],k({...t,value:t.value*2}))}),A7=b(gb).withConfig({displayName:"HintPrompt__Wrapper",componentId:"sc-r1ya50-1"})(["color:",";font-size:",";height:","px;@media ","{font-size:",";height:","px;}"],({color:e,theme:t})=>e!=null?e:t.colorFont,$t.h3,Sn*7.5,jt.isMobile,$t.h2,Sn*12.5);function T7({activeTrigger:e,color:t,styles:n,localizations:r}){const[o]=z();return i.jsx(Yd,{color:t,styles:n,hintText:e.getPrompt({t:o,localizations:r})})}function Yd({color:e,styles:t,hintText:n}){return i.jsx(i.Fragment,{children:t!=null?i.jsx(gb,{styles:t,children:i.jsx(Ve,{role:"alert",styles:t,children:n})}):i.jsx(A7,{color:e,children:i.jsx("p",{role:"alert",children:n})})})}const bb=b(qn).withConfig({displayName:"ThemedLottie",componentId:"sc-mvd4j1-0"})(["circle[stroke]:not(.no-theme),rect[stroke]:not(.no-theme),path[stroke]:not(.no-theme),g[stroke]:not(.no-theme),g:not(.no-theme) circle[stroke],g:not(.no-theme) rect[stroke],g:not(.no-theme) path[stroke]{stroke:",";}circle[fill]:not([fill='none']):not(.no-theme),rect[fill]:not([fill='none']):not(.no-theme),path[fill]:not([fill='none']):not(.no-theme),g[fill]:not([fill='none']):not(.no-theme),g:not(.no-theme) circle[fill],g:not(.no-theme) rect[fill],g:not(.no-theme) path[fill]{fill:",";}circle[fill].icon-color-highlight,rect[fill].icon-color-highlight,path[fill].icon-color-highlight,g[fill].icon-color-highlight,g.icon-color-highlight circle[fill],g.icon-color-highlight rect[fill],g.icon-color-highlight path[fill]{fill:"," !important;}circle[fill].icon-color-background,rect[fill].icon-color-background,path[fill].icon-color-background,g[fill].icon-color-background,g.icon-color-background circle[fill],g.icon-color-background rect[fill],g.icon-color-background path[fill]{fill:"," !important;}circle[fill].icon-color-stroke,rect[fill].icon-color-stroke,path[fill].icon-color-stroke,g[fill].icon-color-stroke,g.icon-color-stroke circle[fill],g.icon-color-stroke rect[fill],g.icon-color-stroke path[fill]{fill:"," !important;}line-height:0;"],({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke,({$primaryColor:e,theme:t})=>e!=null?e:t.iconColorPrimary,({$highlightColor:e,theme:t})=>e!=null?e:t.iconColorHighlight,({$backgroundColor:e,theme:t})=>e!=null?e:t.iconColorBackground,({$strokeColor:e,theme:t})=>e!=null?e:t.iconColorStroke),E7=b("div").withConfig({displayName:"DirectionalHint__Positioner",componentId:"sc-wdhwga-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:center;"]),k7=b("div").withConfig({displayName:"DirectionalHint__Wrapper",componentId:"sc-wdhwga-1"})(["display:flex;align-items:center;justify-content:center;width:","px;height:","px;"],({profileSize:e})=>e,({profileSize:e})=>e),Ym=b(bb).withConfig({displayName:"DirectionalHint__StyledThemedLottie",componentId:"sc-wdhwga-2"})(["svg{width:","px !important;height:","px !important;}"],({$profileSize:e})=>e,({$profileSize:e})=>e);function N7({assets:e,isActive:t,profileSize:n,currentStep:r,styles:o}){var c,l,u,d,m,h;const a=t&&!!r;let s;switch(r){case fe.Left:s=i.jsx(qe,{customImage:e==null?void 0:e["selfie-left-pictograph"],alt:"look left",children:i.jsx(Ym,{role:"img","aria-label":"look left",animationData:J1,loop:!1,$profileSize:n,$primaryColor:A((c=o==null?void 0:o.fill)==null?void 0:c.color),$highlightColor:A((l=o==null?void 0:o.background)==null?void 0:l.color),$strokeColor:A((u=o==null?void 0:o.stroke)==null?void 0:u.color)})});break;case fe.Right:s=i.jsx(qe,{customImage:e==null?void 0:e["selfie-right-pictograph"],alt:"look right",children:i.jsx(Ym,{role:"img","aria-label":"look right",animationData:Z1,loop:!1,$profileSize:n,$primaryColor:A((d=o==null?void 0:o.fill)==null?void 0:d.color),$highlightColor:A((m=o==null?void 0:o.background)==null?void 0:m.color),$strokeColor:A((h=o==null?void 0:o.stroke)==null?void 0:h.color)})});break;case fe.Center:break;case void 0:break;default:ut(r)}return i.jsx(E7,{children:i.jsx(k7,{isVisible:a,profileSize:n,children:s})})}const Cb=500,j7=b("circle").withConfig({displayName:"LoadingCircle__LoadingBar",componentId:"sc-quy236-0"})(["",";"],e=>e.useTransition?`transition: stroke-dashoffset ${Cb}ms ease-in`:""),P7=b.div.withConfig({displayName:"LoadingCircle__RotatedGroup",componentId:"sc-quy236-1"})(["transform:rotate(90deg);"]);function D7({width:e,strokeWidth:t,percent:n,color:r}){const[o,a]=f.useState(!1);f.useEffect(()=>{a(!0);const u=setTimeout(()=>{a(!1)},500);return()=>clearTimeout(u)},[n]);const s=e/2-t*2,c=Math.PI*s*2,l=c-n/100*c;return i.jsx(P7,{role:"img","aria-label":"loading circle",children:i.jsx("svg",{width:e,height:e,children:i.jsx(j7,{cx:e/2,cy:e/2,r:s,fill:"none",stroke:r,strokeWidth:`${t}px`,strokeDasharray:`${c} ${c}`,strokeDashoffset:l,useTransition:o})})})}const O7=b("div").withConfig({displayName:"ProgressOverlay__Container",componentId:"sc-1tn3hsu-0"})(["position:relative;height:100%;"]),L7=b("div").withConfig({displayName:"ProgressOverlay__OverlayCrop",componentId:"sc-1tn3hsu-1"})(["position:relative;height:100%;width:100%;overflow-y:hidden;"]),F7=b("div").withConfig({displayName:"ProgressOverlay__Overlay",componentId:"sc-1tn3hsu-2"})(["position:absolute;box-shadow:0 0 1px 750px ",";height:100%;width:100%;left:50%;top:50%;transform:translate(-50%,-50%);margin-left:-1px;margin-right:-1px;background-color:rgba(255,255,255,0);transition:0.7s;",";",";"],({styles:e,theme:t})=>{var n,r;return(r=A((n=e==null?void 0:e.base)==null?void 0:n.backgroundColor))!=null?r:t.colorModalBackground},({isNarrowed:e,profileSize:t})=>e&&$(["border-radius:49.9%;height:","px;width:","px;"],t,t),({isComplete:e,fadeOutOnComplete:t,styles:n,theme:r})=>{var o,a;return e&&t&&$(["background-color:",";"],(a=A((o=n==null?void 0:n.base)==null?void 0:o.backgroundColor))!=null?a:r.colorModalBackground)}),zm=b("div").withConfig({displayName:"ProgressOverlay__HudPositioner",componentId:"sc-1tn3hsu-3"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);opacity:",";transition:opacity 1s ease-in-out;",""],({isVisible:e})=>e?1:0,({constrainWidth:e})=>e&&"max-width: 100%;");function M7(e,t){let n=100;const r=t.findIndex(o=>o===e);return e==null?n=100:r===0||r===1?n=0:r===2?n=50:me(new TypeError(`currentStep is unrecognizable type: ${JSON.stringify(e)}`)),n}function xb({assets:e,showDelayedHint:t,isNarrowed:n,profileSize:r,currentStep:o,poseOrder:a,styles:s,uploadProgress:c,showLoadingCircle:l,enableMobilePendingExperienceForWeb:u}){var C,I,v,x,R,_,T,E,V,D;const d=f.useContext(Ze),m=l?M7(o,a):100,h=((R=(x=(v=(I=(C=s==null?void 0:s.captureFeedbox)==null?void 0:C.border)==null?void 0:I.width)==null?void 0:v.top)==null?void 0:x.value)!=null?R:5)*2,p=r-2+h*4,g=o==null;return i.jsxs(O7,{children:[i.jsxs(L7,{children:[i.jsx(F7,{isComplete:g,isNarrowed:n,profileSize:r,styles:s,fadeOutOnComplete:(e==null?void 0:e["loading-pictograph"])!=null||u}),l&&i.jsx(zm,{isVisible:!g,children:i.jsx(D7,{width:p,strokeWidth:h,percent:m,color:(E=A((T=(_=s==null?void 0:s.captureFeedbox)==null?void 0:_.border)==null?void 0:T.color))!=null?E:d.colorPrimary})}),i.jsx(zm,{isVisible:g,constrainWidth:!0,children:g&&!u&&i.jsx(qe,{customImage:e==null?void 0:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(q7,{strokeColor:(D=A((V=s==null?void 0:s.captureCompleteIcon)==null?void 0:V.stroke.color))!=null?D:d.colorPrimary,uploadProgress:c})})})]}),i.jsx(N7,{assets:e,isActive:t,profileSize:r,currentStep:o,styles:s==null?void 0:s.captureIcon})]})}const V7=b.span.withConfig({displayName:"ProgressOverlay__ProgressNumber",componentId:"sc-1tn3hsu-4"})(["color:",";position:absolute;left:0;top:0;right:0;bottom:0;font-weight:",";display:flex;justify-content:center;align-items:center;"],({color:e})=>e,Oa.Medium),B7=b.div.withConfig({displayName:"ProgressOverlay__LoadingPositioner",componentId:"sc-1tn3hsu-5"})(["position:relative;"]),U7=3e3,H7=1e4,q7=({strokeColor:e,uploadProgress:t})=>{const[n,{enable:r}]=rt(!1),[o,{enable:a}]=rt(!1),s=Vi(),c=()=>{setTimeout(()=>{s&&r()},U7),setTimeout(()=>{s&&a()},H7)};return e==null&&$e(`unexpected ${e} strokeColor`,"warning"),i.jsxs(B7,{children:[i.jsx(bb,{"aria-label":"complete checkmark","aria-busy":!0,"aria-live":"polite",role:"alert",animationData:n?X1:eC,onComplete:c,loop:n,$strokeColor:e}),o&&t!=null&&t>0&&i.jsxs(V7,{color:e,children:[Math.round(t*100),"%"]})]})},$7=300,G7=({assets:e,children:t,delayUntilManualCaptureMs:n,localizations:r,poseOrder:o,poseState:a,profileSize:s,showLoadingSpinner:c,styles:l,videoHeight:u,handleManualCapture:d,enableMobilePendingExperienceForWeb:m})=>{var M,Y,F;const[h,p]=f.useState(!1),[g,C]=f.useState(!!(n===0||_n())),[I,v]=f.useState(fe.Center),x=Vi(),R=R7(a),_=f.useCallback(H=>{kC($7,q=>{x&&v(q)})(H)},[v,x]),[T]=z();f.useEffect(()=>{a&&(R!=null&&R.currentPose!==a.currentPose?v(Km(a)):_(Km(a)),p(a.hasFace))},[a,R]),f.useEffect(()=>{n!=null&&n>0&&setTimeout(()=>{C(!0)},n)},[n]);const E=a==null?void 0:a.currentPose,V=E==null||E==="done",D=E!=null&&E!==fe.Center&&h,O=I!=null?X7[I]({localizations:r,t:T}):void 0,U=h?E==="done"?void 0:E!=null?E:o[0]:fe.Center;return i.jsxs(W7,{children:[i.jsx(Yd,{styles:l==null?void 0:l.captureHintText,hintText:c?T("selfie-scanner.hint.loading-camera"):O}),c&&i.jsx(J7,{backgroundColor:(M=l==null?void 0:l.base)==null?void 0:M.backgroundColor,children:i.jsx(In,{})}),i.jsxs(Y7,{style:u?{maxHeight:u}:void 0,children:[i.jsx(Z7,{isActive:D&&!lC(),backgroundColor:(Y=l==null?void 0:l.base)==null?void 0:Y.backgroundColor,children:t}),i.jsx(z7,{children:i.jsx(xb,{assets:e,showDelayedHint:!0,isNarrowed:h,profileSize:s,currentStep:U,poseOrder:o,styles:l,showLoadingCircle:!1,enableMobilePendingExperienceForWeb:m})})]}),g&&E!=="done"&&i.jsx(mt,{children:i.jsx(K7,{id:"configurable_poses_scanner__capture--manual","data-test":"configurable_poses_scanner__capture--manual",onClick:d,disabled:V,styles:(F=l==null?void 0:l.buttons)==null?void 0:F[Bp.Primary],children:T("selfie-scanner.prompt.btn-capture-manual")})})]})},W7=b.div.withConfig({displayName:"ConfigurablePosesScannerView__Container",componentId:"sc-1cqrhgs-0"})(["position:relative;max-width:100%;margin:0 auto;"]),Y7=b.div.withConfig({displayName:"ConfigurablePosesScannerView__VideoWrapper",componentId:"sc-1cqrhgs-1"})(["position:relative;width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;video{transform:scaleX(-1);flex:0 1 auto;}"]),z7=b("div").withConfig({displayName:"ConfigurablePosesScannerView__OverlayPositioner",componentId:"sc-1cqrhgs-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;"]),K7=b(ge).withConfig({displayName:"ConfigurablePosesScannerView__ButtonStyled",componentId:"sc-1cqrhgs-3"})(["margin-top:",";margin-bottom:",";"],S.Spacing[4],S.Spacing[5]),Q7=5,Z7=b("div").withConfig({displayName:"ConfigurablePosesScannerView__VideoBlurrer",componentId:"sc-1cqrhgs-4"})(["line-height:0;transition:filter 0.5s;filter:",";border-width:","px;border-style:solid;border-color:",";"],e=>e.isActive?"blur(5px)":"",Q7,({isActive:e,backgroundColor:t,theme:n})=>{var r;return e?`${(r=A(t))!=null?r:n.colorModalBackground}`:"transparent"}),J7=b.div.withConfig({displayName:"ConfigurablePosesScannerView__LoadingSpinnerWrapper",componentId:"sc-1cqrhgs-5"})(["background-color:",";position:absolute;width:100%;padding-bottom:100%;z-index:1;"],({backgroundColor:e,theme:t})=>{var n;return`${(n=A(e))!=null?n:t.colorModalBackground}`}),Km=e=>{var n;const t=(n=e.invalidReasons)==null?void 0:n[0];return t&&e.currentPose!=="done"?t:e.currentPose},X7={[fe.Center]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")},[fe.Left]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")},[fe.Right]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")},[Jr.MultipleFaces]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-multiple-faces"])!=null?n:t("selfie-scanner.hint.multiple-faces")},[Jr.NotCentered]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-pose-not-center"])!=null?n:t("selfie-scanner.hint.not-centered")},[Jr.TooFar]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-far"])!=null?n:t("selfie-scanner.hint.move-closer")},[Jr.TooClose]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-close"])!=null?n:t("selfie-scanner.hint.move-away")},[Jr.NoFace]:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")},done:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-verifying"])!=null?n:t("selfie-scanner.hint.verifying")}},vb=1e4,Qm=5,Ib=20,Sb=1e4;function wb(e){const t=e.getNose(),n=(l,u)=>Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2)),r=t[4],o=t[3],a=t[8],s=n(o,r),c=n(a,o);return s>c?-(s/c-1)*30:(c/s-1)*30}const eN=.35,tN=.45,nN=.8,iN=3,go=2,yb=2;var xt=(e=>(e[e.Verifying=0]="Verifying",e[e.MultipleFaces=1]="MultipleFaces",e[e.TooFar=2]="TooFar",e[e.TooClose=3]="TooClose",e[e.NotCentered=4]="NotCentered",e[e.LeftDelayed=5]="LeftDelayed",e[e.RightDelayed=6]="RightDelayed",e[e.LeftCapture=7]="LeftCapture",e[e.RightCapture=8]="RightCapture",e[e.CenterCapture=9]="CenterCapture",e[e.Left=10]="Left",e[e.Right=11]="Right",e[e.Center=12]="Center",e[e.Empty=13]="Empty",e))(xt||{});const rN=e=>{const t=e[1]===fe.Right;return new kd(_b({rightBeforeLeft:t}).map(n=>new zn(n)))},oN=[{type:8,shouldShow:e=>!ki(e.capturedSelfies,fe.Right)&&e.currentStep===fe.Right&&sr(e)&&e.horizontalAngle>Ib&&!jr(e)&&!Pr(e)&&!bo(e),showAfterFrames:go,hideAfterFrames:15,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}},{type:6,shouldShow:e=>!ki(e.capturedSelfies,fe.Right)&&e.currentStep===fe.Right&&(sr(e)||e.manualVisible)&&!jr(e)&&!Pr(e)&&!bo(e),showAfterFrames:go+yb,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}},{type:11,shouldShow:e=>!ki(e.capturedSelfies,fe.Right)&&e.currentStep===fe.Right&&(sr(e)||e.manualVisible),showAfterFrames:1,hideAfterFrames:10,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-right"])!=null?n:t("selfie-scanner.hint.right")}}],aN=[{type:7,shouldShow:e=>!ki(e.capturedSelfies,fe.Left)&&e.currentStep===fe.Left&&sr(e)&&e.horizontalAngle<-Ib&&!jr(e)&&!Pr(e)&&!bo(e),showAfterFrames:go,hideAfterFrames:15,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}},{type:5,shouldShow:e=>(sr(e)||e.manualVisible)&&e.currentStep===fe.Left&&!jr(e)&&!Pr(e)&&!bo(e),showAfterFrames:go+yb,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}},{type:10,shouldShow:e=>(sr(e)||e.manualVisible)&&e.currentStep===fe.Left,showAfterFrames:1,hideAfterFrames:10,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-look-left"])!=null?n:t("selfie-scanner.hint.left")}}],sN=[{type:0,shouldShow:e=>!e.currentStep,showAfterFrames:1,hideAfterFrames:99999,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-verifying"])!=null?n:t("selfie-scanner.hint.verifying")}},{type:1,shouldShow:lN,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-multiple-faces"])!=null?n:t("selfie-scanner.hint.multiple-faces")}},{type:2,shouldShow:jr,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-far"])!=null?n:t("selfie-scanner.hint.move-closer")}},{type:3,shouldShow:Pr,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-face-too-close"])!=null?n:t("selfie-scanner.hint.move-away")}},{type:4,shouldShow:bo,showAfterFrames:3,hideAfterFrames:5,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-pose-not-center"])!=null?n:t("selfie-scanner.hint.not-centered")}}],cN=[{type:9,shouldShow:e=>!ki(e.capturedSelfies,fe.Center)&&sr(e)&&e.currentStep===fe.Center&&-Qm<e.horizontalAngle&&e.horizontalAngle<Qm&&!jr(e)&&!Pr(e)&&!bo(e),showAfterFrames:go,hideAfterFrames:50,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}},{type:12,shouldShow:e=>e.currentStep===fe.Center&&(sr(e)||e.manualVisible),showAfterFrames:go,hideAfterFrames:50,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}},{type:13,shouldShow:e=>e.currentStep===fe.Center,showAfterFrames:20,hideAfterFrames:3,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-delayed"])!=null?n:t("selfie-scanner.hint.center-delayed")}},{type:13,shouldShow:()=>!0,showAfterFrames:0,hideAfterFrames:0,getPrompt:({localizations:e,t})=>{var n;return(n=e==null?void 0:e["selfie-hint-center-face"])!=null?n:t("selfie-scanner.hint.center")}}],_b=({rightBeforeLeft:e})=>{const t=ls(aN),n=ls(oN),r=e?[...t,...n]:[...n,...t];return r[0].getPrompt=({localizations:o,t:a})=>{var s;return(s=o==null?void 0:o["selfie-hint-verifying"])!=null?s:a("selfie-scanner.hint.verifying")},[...sN,...r,...cN]},or=_b({rightBeforeLeft:!1});function jr(e){const t=Math.max(e.faceWidth,e.faceHeight),n=Math.min(e.videoWidth,e.videoHeight),r=e.requireHigherAccuracyCapture&&e.currentStep===fe.Center?tN:eN;return e.faceCount>0&&t<n*r}function Pr(e){const t=Math.max(e.faceWidth,e.faceHeight),n=Math.min(e.videoWidth,e.videoHeight);return e.faceCount>0&&t>n*nN}function bo(e){const{faceBox:t,requireHigherAccuracyCapture:n,videoWidth:r,videoHeight:o,faceCount:a,landmarks:s,currentStep:c}=e;if(!n||t==null||a===0||jr(e)||Pr(e))return!1;if(t.top<0||t.bottom>o)return!0;if((s==null?void 0:s.getNose().length)>2&&c===fe.Center){const m=s.getNose()[3],h=m.x+t.x,p=m.y+t.y,g=Math.min(r,o)*.4,C=r/2-g/2,I=r/2+g/2,v=o/2-g/2,x=o/2+g/2;if(h<C||h>I||p<v||p>x)return!0}const l=Math.max(r-t.right,1),u=Math.max(t.left,1);return Math.max(u,l)/Math.min(u,l)>iN}function lN(e){return e.elapsedTime>Sb?!1:e.faceCount>1}function sr(e){return e.elapsedTime>Sb?e.faceCount>=1:e.faceCount===1}function dN(e){switch(e){case 9:return fe.Center;case 7:return fe.Left;case 8:return fe.Right;default:return null}}const uN=320,mN=.4,hN=({handleFailed:e,handleModelLoaded:t})=>{const n=f.useRef(null),r=f.useRef(null);return f.useEffect(()=>{(async()=>{try{await _t.loadModels(),await t()}catch(a){e(a,"load");return}})()},[]),f.useEffect(()=>{const[o,a]=fi();n.current=o;const[s,c]=fi();return r.current=s,()=>{a(),c()}},[]),{getCanvasFromVideo:o=>{const{videoWidth:a,videoHeight:s}=o;return Mc({source:{element:o,height:s,width:a},destination:{canvas:r.current,height:s,width:a}}),r.current},canRunPoseDetection:o=>_t.isLoaded()&&_t.isMediaLoaded(o),getPoseDetectionData:async o=>{if(o==null||r.current==null)return null;const{videoWidth:a,videoHeight:s}=o;Mc({source:{element:o,height:s,width:a},destination:{canvas:r.current,height:s,width:a}});const c=await _t.detectFaces(r.current,{inputSize:uN,scoreThreshold:mN}),l=c.length===1?c[0].box:void 0;let u=0,d=null;if(l!=null&&n.current!=null){const m=Math.floor(l.width),h=Math.floor(l.height);Mc({source:{element:r.current,height:h,width:m,x:Math.floor(l.x),y:Math.floor(l.y)},destination:{canvas:n.current,height:h,width:m}}),d=await _t.detectLandmarks(n.current),u=wb(d)}return{canvas:r.current,faceBox:l,faceCount:c.length,faceDimensions:{width:l!=null?l.width:0,height:l!=null?l.height:0},horizontalAngle:u,landmarks:d}}}},Mc=({source:e,destination:t})=>{if(e.element==null||t.canvas==null)return;const{canvas:n}=t;n.width=e.width,n.height=e.height;const r=n.getContext("2d",{willReadFrequently:!0,alpha:!1});if(r==null||r.clearRect(0,0,t.width,t.height),n.width===0&&n.height===0||r==null)throw new Error("Canvas getContext returned null during runPoseDetection");return r==null||r.drawImage(e.element,e.x!=null?e.x:0,e.y!=null?e.y:0,e.width,e.height,t.x!=null?t.x:0,t.y!=null?t.y:0,t.width,t.height),t},pN=12e4,fN=({enableVideoRecording:e,videoCaptureMethods:t,videoSessionJwt:n,captureIsDone:r,handleFailed:o,handleRestartStep:a})=>{const s=f.useRef(!e),[c,l]=f.useState(void 0),[u,d]=f.useState(void 0),m=(h,p)=>{const g=He.getNewClient(t);if(e&&!g.isSupported()){o("MediaRecorder not supported","load");return}const C=g.init({stream:h,video:p,jwt:n,maxRecordingTime:pN,onError:I=>{He.shouldReinitializeWithUpload(I,t)?(He.destroy(),m(h,p)):He.videoCanBeReattempted()?a==null||a():o("mediaRecorderClient failed","capture"),ee.logAmplitude("selfie.video.errored",{message:typeof I=="string"?I:I==null?void 0:I.message}),I instanceof Error?me(I,"error"):$e(`Unexpected error: ${JSON.stringify(I)}`,"error")},onRecordingComplete:(I,v)=>{var x;c||(ee.logAmplitude("selfie.video.stop",{elapsedTime:v,type:g.type,chunksLength:I.type==="upload"?(x=I.chunks)==null?void 0:x.length:0}),I.type==="upload"&&(I.chunks==null||I.chunks.length<=0)?(He.videoCanBeReattempted()&&(a==null||a()),$e("MediaRecorderClient error: no chunks recorded","info")):l(I))},onStart:I=>{s.current=!0,l(void 0),ee.logAmplitude("selfie.video.start",{isRestart:I,type:g.type})},onTimeExceeded:()=>{ee.logAmplitude("selfie.video.timeExceeded"),r||a==null||a({timeExceeded:!0})}});g.startRecording(),He.recordVideoAttempt(),ee.logAmplitude("selfie.video.initialized",{type:g.type,attempt:He.videoAttempts}),d(C)};return{capturedVideoData:c,cleanUpVideoCapture:()=>{He.destroy()},isAudioEnabled:()=>e&&j.canRequestMicrophone,isVideoReady:()=>s.current,initVideoCapture:(h,p)=>{e&&!u&&p&&m(h,p)},stopVideoCapture:()=>{var h;(h=He.currentClient)==null||h.stopRecording()}}},gN=250,bN=250,CN=250,xN=.92,vN=({assets:e,delayUntilManualCaptureMs:t,detectTimeout:n,enableVideoRecording:r,localizations:o,poseOrder:a,requireHigherAccuracyCapture:s,styles:c,videoCaptureMethods:l,videoConstraints:u,videoSessionJwt:d,handleComplete:m,handleFailed:h,handleRestartStep:p,handleSlowFaceDetection:g,enableMobilePendingExperienceForWeb:C})=>{const I=f.useRef(null),v=f.useRef(null),x=f.useRef(new Date().getTime()),R=f.useRef([]),_=f.useRef(null),T=f.useRef(0),E=f.useRef(30),V=Vi(),[D,O]=f.useState(!1),[U,M]=f.useState(null),[Y,F]=f.useState(null),[H,q]=f.useState(null),{getCanvasFromVideo:W,canRunPoseDetection:X,getPoseDetectionData:oe}=hN({handleFailed:h,handleModelLoaded:async()=>{await ze()}}),{logCameraInspectionFromStream:se,logCameraInspectionSnapshot:Se,getCameraInspectionData:Ee}=Nd(),[he,de]=f.useState(CN),Ie=!!U&&U.currentPose==="done"&&R.current.length===a.length,{capturedVideoData:ye,isAudioEnabled:je,isVideoReady:ce,initVideoCapture:Q,stopVideoCapture:K,cleanUpVideoCapture:be}=fN({enableVideoRecording:!!r,videoCaptureMethods:l||["stream"],videoSessionJwt:d,captureIsDone:Ie,handleFailed:h,handleRestartStep:p}),Oe=()=>{var _e;if(((_e=I.current)==null?void 0:_e.video)==null)return;E.current=T.current;const{clientWidth:G,videoHeight:xe,videoWidth:Ke}=I.current.video;if(xe>Ke)q(G);else{const we=Ke/xe,De=Math.floor(Math.max(G,bN*we));F(De)}},ze=async()=>{const G=new Date().getTime();let xe;try{(!dp()||T.current>E.current+5)&&(xe=await re())}catch(we){me(we,I.current?"warning":"info",{...Jc(),...Ue()}),I.current&&h(we,"capture");return}const Ke=new Date().getTime()-G;if(T.current===0&&n!=null&&Ke>n){g();return}if((xe==null?void 0:xe.currentPose)==="done"){K();return}if(T.current++,!V)return;const _e=Math.max(0,gN-Ke);v.current=window.setTimeout(()=>{window.requestAnimationFrame!=null?window.requestAnimationFrame(ze):ze()},_e)},re=async()=>{_.current==null&&(_.current=new v7({poseOrder:a,requireHigherAccuracyCapture:s,onCapture:(_e,we,De)=>{var St;if(((St=I.current)==null?void 0:St.video)==null)return;const Me=we.toDataURL("image/jpeg",xN),nt=De?bt.Manual:bt.Auto;if(Me==null||Me.length<Lr){$e(`Selfie ${nt} capture captured a potentially blank image`,"warning",Ue()),h(`Selfie ${nt} capture captured a potentially blank image`,"capture");return}R.current=[...R.current,{capturedAt:new Date().toISOString(),captureMethod:nt,dataUrl:Me,pose:_e}]}}));const G=I.current;if(!(G!=null&&G.video)||!X(G==null?void 0:G.video)||!ce())return;const xe=await oe(G.video);if(xe==null||!(G!=null&&G.video))return;const Ke=_.current.getNextPoseState({canvas:xe.canvas,forceCapture:!1,poseData:{elapsedTime:Date.now()-x.current,faceBox:xe.faceBox,faceCount:xe.faceCount,faceDimensions:xe.faceDimensions,horizontalAngle:xe.horizontalAngle,landmarks:xe.landmarks,videoDimensions:{width:G.video.videoWidth,height:G.video.videoHeight}}});return M(Ke),de(Math.min(G.video.clientWidth,G.video.clientHeight)-8),xe.faceBox!=null&&Se(xe.canvas),Ke},le=()=>{var Ke;const G=U==null?void 0:U.currentPose;if(G==="done"||G==null||((Ke=I.current)==null?void 0:Ke.video)==null||_.current==null)return;const xe=W(I.current.video);if(xe==null){$e("Selfie manual capture has a blank canvas","warning",Ue());return}M(_.current.getNextPoseState({canvas:xe,forceCapture:!0,poseData:null}))},Ue=()=>({tickCount:T.current,elapsedTime:Date.now()-x.current});return f.useEffect(()=>()=>{v.current!=null&&(clearTimeout(v.current),v.current=null),be()},[]),f.useEffect(()=>{if(!D&&Ie&&(r&&ye||!r)){const G=x.current?new Date(x.current).toISOString():void 0;m({capturedSelfies:R.current,captureStartedAt:G,cameraInspectionData:Ee({includeSmallImages:!0}),capturedVideoData:ye}),O(!0)}},[Ie,ye,r,D,Ee,m]),i.jsx(G7,{assets:e,delayUntilManualCaptureMs:t,localizations:o,poseOrder:a,poseState:U,profileSize:he,styles:c,showLoadingSpinner:!ce(),videoHeight:H,handleManualCapture:le,enableMobilePendingExperienceForWeb:C,children:i.jsx(oa,{audio:je(),height:"initial",onUserMedia:async G=>{var xe;await se(G),Q(G,(xe=I.current)==null?void 0:xe.video)},onUserMediaError:G=>h(G,"load"),ref:G=>{I.current=G,G!=null&&G.video&&(G.video.addEventListener("canplay",Oe),G.video.defaultMuted=!0,G.video.muted=!0)},videoConstraints:u,width:Y!=null?Y:"100%"})})},IN=b.div.withConfig({displayName:"InquirySelfiePendingView__Container",componentId:"sc-1a3itvm-0"})(["display:flex;flex-direction:column;"]),SN=b("div").withConfig({displayName:"InquirySelfiePendingView__Header",componentId:"sc-1a3itvm-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),wN=b("div").withConfig({displayName:"InquirySelfiePendingView__AnimationContainer",componentId:"sc-1a3itvm-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function yN({assets:e,localizations:t,textVerticalPosition:n}){const{base:r,processingPage:o}=li(),a=i.jsxs(SN,{children:[i.jsx(dt,{styles:o==null?void 0:o.titleStyle,children:i.jsx(te,{children:t.title})}),i.jsx(at,{styles:o==null?void 0:o.textStyle,children:i.jsx(te,{children:t.description})})]});return i.jsx(Oh,{autoFocus:!0,children:i.jsxs(IN,{"data-test":"inquiry-selfie-pending-view__container",children:[n!=="end"&&a,i.jsx(wN,{children:i.jsx(qe,{customImage:e["loading-pictograph"],alt:"loading pictograph",children:i.jsx(Oo,{icon:"verification",$primaryColor:A(r==null?void 0:r.fill.color),$strokeColor:A(r==null?void 0:r.stroke.color)})})}),n==="end"&&a]})})}const _N=({dimensions:e})=>{const{videoDimensionsUpdated:t}=rb();return f.useEffect(()=>{e&&t(e.width,e.height)},[e,t]),i.jsx(i.Fragment,{})},RN=320,AN=.4,TN=12e4,EN=250,kN=250,Rb=250,Ab=5,Tb=[xt.Verifying,xt.TooFar,xt.TooClose,xt.NotCentered,xt.Left,xt.Right,xt.LeftDelayed,xt.RightDelayed,xt.Center,xt.LeftCapture,xt.RightCapture,xt.CenterCapture],NN=1350,jN=b("div").withConfig({displayName:"SelfieScanner__Container",componentId:"sc-1fc5wia-0"})(["position:relative;max-width:100%;margin:0 auto;"]),PN=b("div").withConfig({displayName:"SelfieScanner__VideoWrapper",componentId:"sc-1fc5wia-1"})(["position:relative;width:100%;overflow:hidden;display:flex;justify-content:center;align-items:center;video{transform:scaleX(-1);flex:0 1 auto;}"]),DN=b("div").withConfig({displayName:"SelfieScanner__OverlayPositioner",componentId:"sc-1fc5wia-2"})(["position:absolute;top:0;left:0;width:100%;height:100%;"]),ON=b(ge).withConfig({displayName:"SelfieScanner__ButtonStyled",componentId:"sc-1fc5wia-3"})(["margin-top:",";margin-bottom:",";"],S.Spacing[4],S.Spacing[5]),LN=b.div.withConfig({displayName:"SelfieScanner__EditorPreviewVideoPlaceholder",componentId:"sc-1fc5wia-4"})(["background-color:",";width:100%;height:","px;"],S.Color.CoreSlate400,Rb+Ab*2),FN=b("div").withConfig({displayName:"SelfieScanner__VideoBlurrer",componentId:"sc-1fc5wia-5"})(["line-height:0;transition:filter 0.5s;filter:",";border-width:","px;border-style:solid;border-color:",";"],e=>e.isActive?"blur(5px)":"",Ab,({isActive:e,backgroundColor:t,theme:n})=>{var r;return e?`${(r=A(t))!=null?r:n.colorModalBackground}`:"transparent"}),MN=b.div.withConfig({displayName:"SelfieScanner__LoadingSpinnerWrapper",componentId:"sc-1fc5wia-6"})(["background-color:",";position:absolute;width:100%;padding-bottom:100%;z-index:1;"],({backgroundColor:e,theme:t})=>{var n;return`${(n=A(e))!=null?n:t.colorModalBackground}`}),Eb=({audioEnabled:e,assets:t,localizations:n,currentStep:r,poseOrder:o,activeTrigger:a,videoWidthOverride:s,videoHeightOverride:c,setWebcamRef:l,videoConstraints:u,handleUserMedia:d,handleFailed:m,handleManualCapture:h,manualVisible:p,profileSize:g,debug:C,isEditorPreview:I,styles:v,buttonStyles:x,showPreloadingSpinner:R,showPreloadingHint:_,uploadProgress:T,enableMobilePendingExperienceForWeb:E})=>{var F,H,q;const V=Tb.indexOf(a.getType())!==-1,[D]=z(),O=[xt.LeftDelayed,xt.RightDelayed,xt.Left,xt.Right].indexOf(a.getType())!==-1,U=r==null,M=U||![xt.Center,xt.Empty,xt.LeftDelayed,xt.RightDelayed].includes(a.getType()),Y=O||U;return i.jsxs(jN,{"data-test":"selfie-scanner",children:[!R&&i.jsx(T7,{activeTrigger:a,styles:v==null?void 0:v.captureHintText,localizations:n}),_&&i.jsx(Yd,{styles:v==null?void 0:v.captureHintText,hintText:D("selfie-scanner.hint.loading-camera")}),R&&i.jsx(MN,{backgroundColor:(F=v==null?void 0:v.base)==null?void 0:F.backgroundColor,children:i.jsx(In,{})}),i.jsxs(PN,{style:{maxHeight:c},children:[I?i.jsx(LN,{"data-test":"selfie-scanner__editor-preview-video-placeholder"}):i.jsx(FN,{isActive:Y,backgroundColor:(H=v==null?void 0:v.base)==null?void 0:H.backgroundColor,children:i.jsx(oa,{audio:e,width:s!=null?s:"100%",height:"initial",ref:l,videoConstraints:u,onUserMedia:d,onUserMediaError:W=>m(W,"load")})}),i.jsx(DN,{children:i.jsx(xb,{assets:t,showDelayedHint:O,isNarrowed:V,profileSize:g,currentStep:r,poseOrder:o,styles:v,uploadProgress:T,showLoadingCircle:!0,enableMobilePendingExperienceForWeb:!!E})})]}),p&&i.jsx(mt,{children:i.jsx(ON,{id:"selfie-scanner__capture--manual","data-test":"selfie-scanner__capture--manual",onClick:h,disabled:M,styles:(x==null?void 0:x[Z.Primary])||((q=v==null?void 0:v.buttons)==null?void 0:q.primary),children:D("selfie-scanner.prompt.btn-capture-manual")})}),C&&i.jsx("canvas",{style:{width:"100%"},id:"debugLandmarks"})]})};class kb extends f.Component{constructor(t){super(t),this.componentDidMount=async()=>{var s;this.props.debug&&console.info(Jc());try{await _t.loadModels()}catch(c){(s=this.props)==null||s.handleFailed(c,"load");return}this.runTick(),this.props.delayUntilManualCaptureMs>0&&(this.timerManualShow=window.setTimeout(()=>{this.setState({...this.state,manualVisible:!0})},this.props.delayUntilManualCaptureMs)),this.timerShowSpinnerForNonVideo=window.setTimeout(()=>{this.setState({showPreloadingSpinnerForUserMedia:!0})},NN)},this.setWebcamRef=s=>{var c;this.refWebcam=s,(c=this.refWebcam)!=null&&c.video&&(this.refWebcam.video.addEventListener("canplay",this.resizeVideo),this.refWebcam.video.defaultMuted=!0,this.refWebcam.video.muted=!0)},this.resizeVideo=()=>{var u;if(((u=this.refWebcam)==null?void 0:u.video)==null)return;const{clientWidth:s,videoHeight:c,videoWidth:l}=this.refWebcam.video;if(this.tickCountWhenFeedIsReady=this.state.tickCount,c>l)this.setState({videoHeightOverride:s});else{const d=l/c,m=Math.floor(Math.max(s,Rb*d));this.setState({videoWidthOverride:m})}},this.runTick=async()=>{var u,d,m,h,p,g,C,I,v;const s=new Date().getTime();try{(!dp()&&!dC()||this.state.tickCount>this.tickCountWhenFeedIsReady+5)&&await this.runDetection()}catch(x){me(x,"info",Jc(),{jira:"PER-19877"}),this.props.handleFailed(x,"capture");return}const c=new Date().getTime()-s;if(this.state.tickCount===0&&this.props.detectTimeout!=null&&c>this.props.detectTimeout){this.props.handleSlowFaceDetection();return}const l=Math.max(0,EN-c);if(this.setState(({tickCount:x})=>({tickCount:x+1})),((d=(u=this.refWebcam)==null?void 0:u.video)==null?void 0:d.videoHeight)!=null&&((h=(m=this.refWebcam)==null?void 0:m.video)==null?void 0:h.videoWidth)!=null&&this.setState({videoDimensions:{width:this.refWebcam.video.videoWidth,height:this.refWebcam.video.videoHeight}}),!this.state.hasSentSelfieData){if(!this.state.hasUnmounted&&this.refWebcam)this.timerDetect=window.setTimeout(()=>{window.requestAnimationFrame!=null?window.requestAnimationFrame(this.runTick):this.runTick()},l);else if(this.state.hasUnmounted&&this.refWebcam)try{$e("SelfieScanner runTick finished before hasSentSelfieData was true","warning",{hasUnmounted:this.state.hasUnmounted,refWebcamExists:this.refWebcam!=null,refWebcamVideoExists:((p=this.refWebcam)==null?void 0:p.video)!=null,videoHeight:(C=(g=this.refWebcam)==null?void 0:g.video)==null?void 0:C.height,videoWidth:(v=(I=this.refWebcam)==null?void 0:I.video)==null?void 0:v.width})}catch(x){$e("SelfieScanner runTick finished early and failed to log reason","warning",x)}}},this.logCameraInspectionSnapshot=()=>{var s;if(!(this.cameraInspectionSnapshots.length>=5))if(this.shouldCaptureCameraInspectionSnapshots){const c=op((s=this.canvasBuffer)==null?void 0:s.toDataURL("image/jpeg"));c!=null&&(this.cameraInspectionSnapshots.push(c),this.shouldCaptureCameraInspectionSnapshots=!1)}else this.shouldCaptureCameraInspectionSnapshots=!0},this.completeCameraInspection=()=>{this.cameraInspectionData&&(this.cameraInspectionData.streamStability=cp({snapshots:this.cameraInspectionSnapshots,includeSmallImages:!0}))},this.handleUserMedia=async s=>{clearTimeout(this.timerShowSpinnerForNonVideo),this.setState({showPreloadingSpinnerForUserMedia:!1}),!(this.cameraInspectionData||!s)&&(this.cameraInspectionData={...rp},this.cameraInspectionData={...this.cameraInspectionData,...ap(s)},this.cameraInspectionData={...this.cameraInspectionData,...await sp(s)},this.props.enableVideoRecording&&!this.state.mediaRecorderSubId&&this.initMediaRecorderClient(s,this.props.videoSessionJwt))},this.completeSelfieScan=s=>{this.completeCameraInspection(),clearTimeout(this.timerDetect),clearTimeout(this.timerManualShow);const c=this.state.startTime?new Date(this.state.startTime).toISOString():void 0;this.props.handleComplete({capturedSelfies:this.props.capturedSelfies,captureStartedAt:c,cameraInspectionData:this.cameraInspectionData,capturedVideoData:s}),this.setState({...this.state,hasSentSelfieData:!0,manualVisible:!1})},this.runDetection=async()=>{var D,O;const{capturedSelfies:s,requireHigherAccuracyCapture:c,poseOrder:l}=this.props;if(!this.refWebcam||!_t.isLoaded()||!_t.isMediaLoaded(this.refWebcam.video)||!this.state.readyToCapture)return;const{clientHeight:u,clientWidth:d}=this.refWebcam.video,{videoHeight:m,videoWidth:h}=this.refWebcam.video;if(!this.refWebcam||!this.canvasBuffer)return;this.canvasBuffer.width=h,this.canvasBuffer.height=m;const p=this.canvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});p==null&&$e("Canvas getContext returned null during runDetection","warning",this.getSentryErrorContext()),p==null||p.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height),p==null||p.drawImage(this.refWebcam.video,0,0,h,m);const g=await _t.detectFaces(this.canvasBuffer,{inputSize:RN,scoreThreshold:AN}),C=g.length===1?g[0].box:void 0;let I=0,v=null;if(!this.refWebcam||!this.canvasBuffer)return;if(C!=null){try{this.logCameraInspectionSnapshot()}catch(M){me(M)}if(!this.refWebcam||!this.faceCanvasBuffer||!this.canvasBuffer)return;this.faceCanvasBuffer.width=Math.floor(C.width),this.faceCanvasBuffer.height=Math.floor(C.height);const U=this.faceCanvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});if(U==null||U.clearRect(0,0,this.faceCanvasBuffer.width,this.faceCanvasBuffer.height),U==null||U.drawImage(this.canvasBuffer,Math.floor(C.x),Math.floor(C.y),Math.floor(C.width),Math.floor(C.height),0,0,Math.floor(C.width),Math.floor(C.height)),!this.refWebcam||!this.faceCanvasBuffer)return;v=await _t.detectLandmarks(this.faceCanvasBuffer),I=wb(v),this.drawDebugMarks(C,v)}if(!this.refWebcam)return;const x=Sr(s,l),R=g.length,_=C!=null?C.height:0,T=C!=null?C.width:0,E=Date.now()-this.state.startTime;this.hintTriggerClient.runTick({capturedSelfies:s,currentStep:x,faceCount:R,horizontalAngle:I,faceHeight:_,faceWidth:T,manualVisible:this.state.manualVisible,videoHeight:m,videoWidth:h,requireHigherAccuracyCapture:c,faceBox:C,landmarks:v,elapsedTime:E});const V=this.hintTriggerClient.getTriggered();if(Tb.indexOf(V.getType())===-1)this.props.clearCapturedSelfies();else{const U=this.canvasBuffer.toDataURL("image/jpeg",92);U==null&&($e("Selfie autocapture captured an empty image","warning",this.getSentryErrorContext(),{jira:"PER-20180"}),this.props.handleFailed("Canvas buffer data URL is empty","capture"));const M=V.getType(),Y=dN(M);if(Y!=null&&mi(s,Y)==null)switch(M){case xt.CenterCapture:{this.props.saveCapturedSelfie(fe.Center,U,bt.Auto,new Date().toISOString());break}case xt.LeftCapture:{this.props.saveCapturedSelfie(fe.Left,U,bt.Auto,new Date().toISOString());break}case xt.RightCapture:{this.props.saveCapturedSelfie(fe.Right,U,bt.Auto,new Date().toISOString());break}}}if((D=this.props.featureFlags)!=null&&D["inquiry:enable-custom-1"]&&!lp()&&!Zc()&&!j.isWebView&&((O=this.refWebcam)!=null&&O.video)&&this.state.tickCount<=20)try{const M=(await ta.detect(this.refWebcam.video)).filter(Y=>Y.score>=.75);M.length>0&&Tn.track({type:"inquiry.model.detect",data:M.map(Y=>({name:"custom-1",box:Y.box,score:Y.score,frame:this.state.tickCount})),stepName:"selfie",pathName:"/inquiry/selfie/record"},this.props.featureFlags)}catch(U){ta.errored=!0,me(U instanceof Error?U:new Error(JSON.stringify(U)),"info")}this.setState(U=>({...U,activeTrigger:V,profileSize:Math.min(d,u)-8}))},this.handleManualCapture=()=>{var d,m,h;const{capturedSelfies:s,poseOrder:c}=this.props,l=Sr(s,c);if((d=this.refWebcam)!=null&&d.video){const{videoHeight:p,videoWidth:g}=this.refWebcam.video;this.canvasBuffer.width=g,this.canvasBuffer.height=p;const C=this.canvasBuffer.getContext("2d",{willReadFrequently:!0,alpha:!1});C==null&&$e("Canvas getContext returned null during handleManualCapture","warning",this.getSentryErrorContext(),{videoEnabled:this.props.enableVideoRecording.toString(),videoCaptureMethod:(m=He.currentClient)==null?void 0:m.type}),C==null||C.clearRect(0,0,this.canvasBuffer.width,this.canvasBuffer.height),C==null||C.drawImage(this.refWebcam.video,0,0,g,p)}const u=this.canvasBuffer.toDataURL("image/jpeg",92);(u==null||u.length<Lr)&&($e("Selfie manual capture captured a potentially blank image","warning",this.getSentryErrorContext(),{videoEnabled:this.props.enableVideoRecording.toString(),videoCaptureMethod:(h=He.currentClient)==null?void 0:h.type}),this.props.handleFailed("Selfie manual capture captured a potentially blank image","capture")),this.props.saveCapturedSelfie(l,u,bt.Manual,new Date().toISOString())},this.hintTriggerClient=rN(t.poseOrder),this.state={profileSize:kN,activeTrigger:this.hintTriggerClient.getTriggered(),hasSentSelfieData:!1,hasUnmounted:!1,manualVisible:t.delayUntilManualCaptureMs===0||_n(),videoWidthOverride:void 0,videoHeightOverride:void 0,tickCount:0,capturedVideoData:void 0,mediaRecorderSubId:void 0,hasStoppedRecording:!1,showPreloadingSpinnerVideo:!!t.enableVideoRecording,showPreloadingSpinnerForUserMedia:!1,readyToCapture:!t.enableVideoRecording,startTime:Date.now(),videoDimensions:void 0};const[n,r]=fi(),[o,a]=fi();this.faceCanvasBuffer=n,this.cleanupFaceCanvasBuffer=r,this.canvasBuffer=o,this.cleanupCanvasBuffer=a,this.cameraInspectionSnapshots=[],this.shouldCaptureCameraInspectionSnapshots=!0,this.cameraInspectionData=void 0,this.tickCountWhenFeedIsReady=30}componentDidUpdate(){var o;const{capturedSelfies:t,poseOrder:n}=this.props,{hasSentSelfieData:r}=this.state;Sr(t,n)==null&&!r&&(this.props.enableVideoRecording?this.state.hasStoppedRecording||((o=He.currentClient)==null||o.stopRecording(),this.setState({hasStoppedRecording:!0})):this.completeSelfieScan())}componentWillUnmount(){this.setState({...this.state,hasUnmounted:!0}),clearTimeout(this.timerDetect),clearTimeout(this.timerManualShow),clearTimeout(this.timerShowSpinnerForNonVideo),Dn.dispose(),this.props.enableVideoRecording&&He.destroy("selfie"),this.cleanupCanvasBuffer(),this.canvasBuffer=null,this.cleanupCanvasBuffer=null,this.cleanupFaceCanvasBuffer(),this.faceCanvasBuffer=null,this.cleanupFaceCanvasBuffer=null}render(){var _;const{assets:t,buttonStyles:n,localizations:r,capturedSelfies:o,poseOrder:a,videoConstraints:s,handleFailed:c,debug:l,styles:u,uploadProgress:d}=this.props,{profileSize:m,activeTrigger:h,manualVisible:p,videoWidthOverride:g,videoHeightOverride:C}=this.state,I=Sr(o,a),v=Zc(),x=this.props.enableVideoRecording&&((_=He.currentClient)==null?void 0:_.type)==="stream",R=this.state.showPreloadingSpinnerVideo&&(v||x)||this.state.showPreloadingSpinnerForUserMedia;return i.jsxs(i.Fragment,{children:[i.jsx(Eb,{audioEnabled:this.props.audioEnabled,assets:t,buttonStyles:n,localizations:r,currentStep:I,poseOrder:a,activeTrigger:h,videoWidthOverride:g,videoHeightOverride:C,setWebcamRef:this.setWebcamRef,videoConstraints:s,handleUserMedia:this.handleUserMedia,handleFailed:c,handleManualCapture:this.handleManualCapture,manualVisible:p,profileSize:m,debug:l,styles:u,showPreloadingSpinner:R,showPreloadingHint:R,uploadProgress:this.props.enableVideoRecording?d:null,enableMobilePendingExperienceForWeb:this.props.enableMobilePendingExperienceForWeb}),i.jsx(_N,{dimensions:this.state.videoDimensions})]})}drawDebugMarks(t,n){if(!this.props.debug)return;const r=document.getElementById("debugLandmarks"),o=this.canvasBuffer.width,a=this.canvasBuffer.height;r.width=o,r.height=a;const s=r.getContext("2d");if(s==null)return;s.globalAlpha=.4,s.drawImage(this.canvasBuffer,0,0),s.globalAlpha=1;const c=t.left,l=t.top;s.fillStyle="#000000";for(const h of n.positions)s.fillRect(h.x-2+c,h.y-2+l,4,4);const u=n.getNose()[3];s.fillStyle="#0000ff",s.fillRect(u.x-8+c,u.y-8+l,16,16),s.strokeStyle="#ff0000",s.lineWidth=8;const d=Math.min(o,a)*.4,m=Math.min(o,a);s.rect(o/2-d/2,a/2-d/2,d,d),s.stroke(),s.strokeStyle="#00ff00",s.rect(o/2-m/2,a/2-m/2,m,m),s.stroke()}initMediaRecorderClient(t,n){const r=He.getNewClient(this.props.videoCaptureMethods);if(this.props.enableVideoRecording&&!r.isSupported()){this.props.handleFailed("MediaRecorder not supported","load");return}const o=r.init({stream:t,bitRate:Ig(r.type,this.props.featureFlags),video:this.refWebcam.video,jwt:n,maxRecordingTime:TN,onRecordingComplete:(a,s)=>{var c,l,u;this.state.capturedVideoData||(ee.logAmplitude("selfie.video.stop",{elapsedTime:s,type:r.type,chunksLength:a.type==="upload"?(c=a.chunks)==null?void 0:c.length:0}),a.type==="upload"&&(a.chunks==null||a.chunks.length<=0)?He.videoCanBeReattempted()&&((u=(l=this.props).handleRestartStep)==null||u.call(l)):(this.setState({capturedVideoData:a}),this.completeSelfieScan(a)))},onError:a=>{var s,c;He.destroy("selfie"),(c=(s=this.props).handleRestartStep)==null||c.call(s),ee.logAmplitude("selfie.video.errored",{message:typeof a=="string"?a:a==null?void 0:a.message}),me(a instanceof Error?a:new Error(`Unexpected error: ${JSON.stringify(a)}`),"error")},onStart:a=>{this.setState({showPreloadingSpinnerVideo:!1,readyToCapture:!0}),a&&!this.state.hasStoppedRecording&&this.props.clearCapturedSelfies(),ee.logAmplitude("selfie.video.start",{isRestart:a,type:r.type})},onTimeExceeded:()=>{var c,l;ee.logAmplitude("selfie.video.timeExceeded");const{capturedSelfies:a,poseOrder:s}=this.props;Sr(a,s)!=null&&((l=(c=this.props).handleRestartStep)==null||l.call(c,{timeExceeded:!0}))}});r.startRecording(),He.recordVideoAttempt(),ee.logAmplitude("selfie.video.initialized",{type:r.type,attempt:He.videoAttempts}),this.setState({mediaRecorderSubId:o})}getSentryErrorContext(){return{tickCount:this.state.tickCount,elapsedTime:Date.now()-this.state.startTime}}}const VN=250,Nb=[{trigger:new zn(Wt(or.filter(e=>e.type===xt.Empty))),currentStep:fe.Center},{trigger:new zn(NC(or.filter(e=>e.type===xt.Empty))),currentStep:fe.Center},{trigger:new zn(or.find(e=>e.type===xt.Center)),currentStep:fe.Center},{trigger:new zn(or.find(e=>e.type===xt.Center)),currentStep:fe.Center}],BN=[...Nb,{trigger:new zn(or.find(e=>e.type===xt.Left)),currentStep:fe.Left},{trigger:new zn(or.find(e=>e.type===xt.Right)),currentStep:fe.Right},{trigger:new zn(or.find(e=>e.type===xt.Verifying)),currentStep:void 0}],UN=[...Nb,{trigger:new zn(or.find(e=>e.type===xt.Verifying)),currentStep:void 0}],HN=({assets:e,localizations:t,requireSelfieMatch:n,styles:r})=>{const o=n===un.OnlyCenter?UN:BN,a=n===un.OnlyCenter?[fe.Center]:[fe.Center,fe.Left,fe.Right],[s,c]=f.useState(0);f.useEffect(()=>{const d=setInterval(()=>{c(m=>m+1)},2e3);return()=>{clearInterval(d)}},[]);const{trigger:l,currentStep:u}=o[s%o.length];return i.jsx(Eb,{assets:e,localizations:t,currentStep:u,activeTrigger:l,videoWidthOverride:void 0,videoHeightOverride:void 0,setWebcamRef:()=>{},videoConstraints:{},handleUserMedia:()=>{},handleFailed:()=>{},handleManualCapture:()=>{},manualVisible:!0,profileSize:VN,isEditorPreview:!0,styles:r,poseOrder:a})};function qN(e){var C;const[t,{enable:n,disable:r}]=rt(),o=li(),{modal:a,titleStyle:s,textStyle:c}=(C=o==null?void 0:o.base)!=null?C:{},l=o==null?void 0:o.buttons,u=Jp({orderedPoses:e.orderedPoses,requireSelfieMatch:e.requireSelfieMatch}),d=Sr(e.capturedSelfies,u)==null,{t:m}=z(),[h,p]=f.useState(!1),g=Vi();return f.useEffect(()=>{if(d&&e.enableMobilePendingExperienceForWeb){const I=setTimeout(()=>{g()&&p(!0)},Cb);return()=>clearTimeout(I)}},[d]),h?i.jsx(yN,{assets:e.assets,localizations:e.mobileExperienceLocalizations,textVerticalPosition:e.mobileExperienceVerticalPosition}):i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:t,onClose:r,styles:a,"data-test":"inquiry-selfie-record-view__slow-detection-dialog","aria-labelledby":"inquiry-selfie-record-view__slow-detection-dialog--title","aria-describedby":"inquiry-selfie-record-view__slow-detection-dialog--description",children:[i.jsx(dt,{id:"inquiry-selfie-record-view__slow-detection-dialog--title",styles:s,children:i.jsx(te,{children:m("selfie.record.slow-detection-title")})}),i.jsx(at,{id:"inquiry-selfie-record-view__slow-detection-dialog--description",styles:c,children:i.jsx(te,{children:m("selfie.record.slow-detection-prompt")})}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"inquiry-selfie-record-view__slow-detection-dialog--wait-btn","data-test":"inquiry-selfie-record-view__slow-detection-dialog--wait-btn",onClick:r,styles:l==null?void 0:l[Z.Primary],children:m("selfie.record.slow-detection-wait")}),l==null&&i.jsx(Je,{height:1}),i.jsx(ge,{id:"inquiry-selfie-record-view__slow-detection-dialog--try-another-device-btn","data-test":"inquiry-selfie-record-view__slow-detection-dialog--try-another-device-btn",onClick:e.handleSlowFaceDetection,buttonType:Z.Secondary,styles:l==null?void 0:l[Z.Secondary],children:m("selfie.record.slow-detection-try-another-device")})]}),e.localizations.title?i.jsxs(i.Fragment,{children:[i.jsx(dt,{styles:s,children:e.localizations.title}),i.jsx(Je,{height:2})]}):null,e.isEditorPreview?i.jsx(HN,{assets:e.assets,localizations:e.localizations,requireSelfieMatch:e.requireSelfieMatch,styles:o,buttonStyles:l}):i.jsx(i.Fragment,{children:e.requireSelfieMatch==="configurable_poses"?i.jsx(vN,{assets:e.assets,delayUntilManualCaptureMs:e.webCameraManualCaptureDelayMs,detectTimeout:e.detectTimeout,enableVideoRecording:e.enableVideoRecording,localizations:e.localizations,poseOrder:u,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,styles:o,handleComplete:e.handleComplete,handleFailed:e.handleFailed,handleRestartStep:e.handleRestartStep,handleSlowFaceDetection:e.handleSlowFaceDetection,videoConstraints:e.videoConstraints,videoCaptureMethods:e.videoCaptureMethods,videoSessionJwt:e.videoSessionJwt,enableMobilePendingExperienceForWeb:e.enableMobilePendingExperienceForWeb}):i.jsx(kb,{audioEnabled:e.audioEnabled,assets:e.assets,localizations:e.localizations,capturedSelfies:e.capturedSelfies,saveCapturedSelfie:e.saveCapturedSelfie,clearCapturedSelfies:e.clearCapturedSelfies,delayUntilManualCaptureMs:e.webCameraManualCaptureDelayMs,handleComplete:e.handleComplete,handleFailed:e.handleFailed,handleSlowFaceDetection:n,handleRestartStep:e.handleRestartStep,detectTimeout:e.detectTimeout,poseOrder:u,enableVideoRecording:e.enableVideoRecording,videoConstraints:e.videoConstraints,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,featureFlags:e.featureFlags,styles:o,buttonStyles:l,uploadProgress:e.uploadProgress,videoSessionJwt:e.videoSessionJwt,videoCaptureMethods:e.videoCaptureMethods,enableMobilePendingExperienceForWeb:e.enableMobilePendingExperienceForWeb})})]})}const $N=e=>{const{inquiry:t,config:n,capturedSelfies:r,videoConstraints:o,featureFlags:a,styles:s}=e,[c]=z(),l=f.useMemo(()=>He.shouldInitializeVideo(n==null?void 0:n["enabled-capture-file-types"]),[]);f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}try{window.parent.Cypress&&d("Push to stillfie in Cypress tests!","load")}catch{}},[]),f.useEffect(()=>{try{a!=null&&a["inquiry:enable-amplitude-logging-on-combined-step-page-enter"]&&ee.logAmplitude("selfie.record-page.entered",{})}catch{}},[]);const u=async g=>{e.clearMessages();try{j.onEvent(Pe.SelfieCameraCapture),await e.selfieSubmit({inquiry:t,config:n,capturedSelfiesSubmitData:g,debugForcedStatus:e.debugForcedStatus,history:e.history,t:c,featureFlags:a})}catch(C){C instanceof fn||e.showMessage(c("errors.network"),!0),e.clearCapturedSelfies(),e.history.replace(`/inquiry/selfie/${fe.Center}/prompt`)}},d=(g,C)=>{var v,x;const I=g instanceof Error?g.message:typeof g=="string"?g:"";ee.logAmplitude("selfie.record-page.errored",{state:C,errorMessage:I}),e.showMessage(c("selfie.record.failed-video"),!0),e.saveIsWebGLIncompatible(!0),g instanceof Error?(C==="load"&&j.onEvent(Pe.LoadCameraFailed,{error:g.name,message:g.message}),me(g,"warning",{state:C},{jira:"PER-10182",videoEnabled:l.toString(),videoCaptureMethod:(v=He.currentClient)==null?void 0:v.type})):(C==="load"&&j.onEvent(Pe.LoadCameraFailed,{message:g}),me(new Error(g),"warning",{state:C},{jira:"PER-10182",videoEnabled:l.toString(),videoCaptureMethod:(x=He.currentClient)==null?void 0:x.type})),setTimeout(()=>{e.history.goBack()},500)},m=()=>{e.saveIsWebGLIncompatible(!0),e.history.goBack()},h=(g={})=>{const{timeExceeded:C}=g;e.clearCapturedSelfies(),e.showMessage(c(C?"selfie.record.recording-timeout":"errors.network"),!0),e.history.goBack()};if(t==null||n==null)return null;const p=Ms(t);return i.jsx(ub,{value:s,children:i.jsx(qN,{audioEnabled:l&&$i(n),assets:n.assets["record-page"],capturedSelfies:r,saveCapturedSelfie:e.saveCapturedSelfie,clearCapturedSelfies:e.clearCapturedSelfies,detectTimeout:vb,enableVideoRecording:l,featureFlags:a,handleComplete:u,handleFailed:d,handleRestartStep:h,handleSlowFaceDetection:m,localizations:n.localizations["capture-page"],orderedPoses:n["ordered-poses"],requireHigherAccuracyCapture:p,requireSelfieMatch:rs(t),uploadProgress:e.uploadProgress,videoCaptureMethods:n["video-capture-methods"],videoConstraints:o,videoSessionJwt:n["video-session-jwt"],webCameraManualCaptureDelayMs:n["web-camera-manual-capture-delay-ms"],enableMobilePendingExperienceForWeb:!!n["enable-mobile-pending-experience-for-web"],mobileExperienceLocalizations:n.localizations["pending-page"],mobileExperienceVerticalPosition:n["pending-page-text-vertical-position"]})})},GN=e=>({capturedSelfies:e.verification.capturedSelfies,config:vi({state:e,stepType:Ae.Selfie}),styles:fd(e.inquiry),debugForcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,videoConstraints:e.verification.videoConstraints,uploadProgress:e.verification.uploadProgress}),WN={clearCapturedSelfies:ad,clearMessages:Lt,routeToNextStep:Rt,selfieSubmit:wg,saveCapturedSelfie:Vs,saveIsWebGLIncompatible:Gp,showMessage:ae},YN=Te(GN,WN),zN=YN($N),KN=On()(zN),QN=b.div.withConfig({displayName:"InquirySupportCameraView__Container",componentId:"sc-hsbo74-0"})(["display:flex;flex-direction:column;"]),ZN=b("div").withConfig({displayName:"InquirySupportCameraView__Header",componentId:"sc-hsbo74-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),JN=e=>{var c,l,u,d;const[t]=z(),{base:n,buttons:r}=pr(),[o,a]=f.useState(void 0);if(f.useEffect(()=>{up(e.requestedMicrophone).then(m=>a(m))},[]),o==null)return null;const s=o?t("support-camera.prompt-issues"):e.requestedMicrophone?t("support-camera.prompt-permissions-camera-and-mic"):t("support-camera.prompt-permissions");return i.jsxs(QN,{children:[i.jsxs(ZN,{children:[i.jsx(dt,{styles:n==null?void 0:n.titleStyle,children:e.requestedMicrophone?t("support-camera.title-camera-and-mic"):t("support-camera.title")}),i.jsx(at,{styles:n==null?void 0:n.textStyle,children:i.jsx(te,{children:s})})]}),i.jsx(Yt,{url:"cameraSupportPictographUrl",height:"cameraSupportPictographHeight",children:i.jsx(Ye,{"aria-label":"pictograph showing camera error",children:i.jsx(pe,{$primaryColor:A((c=n==null?void 0:n.fill)==null?void 0:c.color),$highlightColor:A((l=n==null?void 0:n.fill)==null?void 0:l.highlightColor),$backgroundColor:A((u=n==null?void 0:n.fill)==null?void 0:u.backgroundColor),$strokeColor:A((d=n==null?void 0:n.stroke)==null?void 0:d.color),children:i.jsx(Kn,{})})})}),i.jsx(mt,{children:i.jsx(ge,{styles:r==null?void 0:r[Z.Primary],onClick:e.handleContinue,id:"support-camera__button--handle-continue","data-test":"support-camera__button--handle-continue",children:e.requestedMicrophone?t("support-camera.button-camera-and-mic"):t("support-camera.button")})})]})},XN=e=>{const t=()=>{e.routeToNextStep(e.inquiry)};return i.jsx(Hr,{value:e.styles,children:i.jsx(JN,{requestedMicrophone:e.requestedMicrophone,handleContinue:t})})};function ej(e){return{inquiry:e.inquiry.inquiry,styles:Ii(e)}}const tj={routeToNextStep:Rt},nj=Te(ej,tj),Zm=nj(XN),ij=e=>{const{inquiry:t,currentSession:n,uiStatus:r,debugForcedStatus:o,untouch:a,collectedData:s,featureFlags:c}=e,l=Ot(),{t:u}=z(),{error:d,callback:m}=vt(async(C,I)=>{a(t.attributes["next-step"].name,...Object.keys(C));try{await e.transitionInquiry({inquiry:t,componentParams:C,fromComponent:I,workflowInitialVariables:{debugForcedStatus:o},featureFlags:c})}catch(v){const x=cj(v);if(x!=null){const R=jC(_=>_.message,x);throw new Re.SubmissionError(R)}else throw v}},[t,o]),{error:h,callback:p}=vt(async C=>{await e.transitionInquiry({inquiry:t,componentParams:{},fromComponent:C,workflowInitialVariables:{debugForcedStatus:o},featureFlags:c})},[t,o]),g=f.useCallback(()=>{Ro(t,s)},[t,s]);return At({error:d||h,onError:C=>{var I;switch(C.status){case 409:((I=C.errors)==null?void 0:I[0].code)==="pending_transition_error"?e.showMessage(u("errors.network")):e.showMessage(u("errors.inquiry-conflict"));return;default:e.showMessage("Unexpected error, please try again.")}},onNetworkError:()=>e.showMessage("Unexpected error, please try again.")}),f.useEffect(()=>{if(t==null||t.attributes["next-step"].type!==Ae.Ui)return;const{components:C}=t.attributes["next-step"].config;gd(t)&&C.length===0&&vo(t)&&g()},[t]),f.useEffect(()=>{t==null&&j.redirectToStart()},[]),va(()=>{if(t==null)return;const C=xi(t);(C===Xt.BACKGROUND||C===Xt.BLOCKING)&&e.pollInquiry(t).catch(()=>{e.showMessage(u("errors.network"),!0)})},[t]),t==null?null:i.jsx(Br,{inquiry:t,currentSession:n,uiStatus:r,onTransitionSubmit:m,onTransitionAction:p,onComplete:g,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:l.push,showMessage:e.showMessage,setComponent:e.setComponent,featureFlags:c})};function rj(e){return{debugForcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const oj={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,showMessage:ae,transitionInquiry:mf,untouch:Re.untouch,pollInquiry:kn},aj=Te(rj,oj),sj=aj(ij);function cj(e){var t;if(e instanceof ht&&e.status===422&&((t=e.errors)==null?void 0:t[0].title)==="Record invalid"&&typeof e.errors[0].details=="object")return e.errors[0].details}function lj(e){return{inquiry:e.inquiry.inquiry,component:pd(e),currentSession:e.inquiry.currentSession,nextInquiry:e.verifyWithPersona.nextInquiry,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const dj={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,showMessage:ae,routeToNextStep:Rt},uj=Te(lj,dj),mj=e=>{var v,x;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,nextInquiry:c,routeToNextStep:l}=e,u=Ot(),[d]=z(),m=(x=(v=n==null?void 0:n.attributes)==null?void 0:v.pages)==null?void 0:x.error,h=m==null?void 0:m["ui-step"],p=m==null?void 0:m["component-name-mapping"];f.useEffect(()=>{ee.logAmplitude("reusable-persona.verify.error-page.entered")},[]);const{error:g,callback:C}=vt(async(R,_)=>{var T;if(_===(p==null?void 0:p["continue-button"]))if(ee.logAmplitude("reusable-persona.verify.error-page.dismissed"),j.isReusablePersonaPopup){(T=window.opener)==null||T.focus(),window.close();return}else return l(c)},[c,p]),I=f.useCallback(()=>{Ro(t,a)},[t,a]);return At({error:g,onError:()=>{e.showMessage(d("error.message"))},onNetworkError:()=>e.showMessage(d("errors.network"))}),h==null||t==null?null:i.jsx(Br,{inquiry:t,nextStep:h,currentSession:r,uiStatus:o,onTransitionSubmit:C,onTransitionAction:async()=>{},onComplete:I,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:u.push,showMessage:e.showMessage,setComponent:e.setComponent})},hj=uj(mj),pj=e=>{var x,R;const{inquiry:t,component:n,currentSession:r,debugForcedStatus:o,uiStatus:a,collectedData:s,featureFlags:c,transitionInquiryFromVerifyWithPersonaStep:l}=e,u=Ot(),[d]=z(),m=(R=(x=n==null?void 0:n.attributes)==null?void 0:x.pages)==null?void 0:R["passkey-authentication"],h=m==null?void 0:m["ui-step"],p=m==null?void 0:m["component-name-mapping"];f.useEffect(()=>{ee.logAmplitude("reusable-persona.verify.passkey-authentication-page.entered")},[]);const{error:g,loading:C,callback:I}=vt(async(_,T)=>{var E,V;if(T===(p==null?void 0:p["confirm-button"])){ee.logAmplitude("reusable-persona.verify.passkey-authentication-page.confirm-btn-clicked");const D=await Nh((await ne.postResourceSingletonActionNew(w.Persona,"authentication-initiate")).meta);return(E=D==null?void 0:D.response)!=null&&E.userHandle?(ee.logAmplitude("reusable-persona.verify.passkey-authentication-page.submitted"),await l(t,D,n.name,{"debug-forced-status":o})):(e.setNextInquiry({inquiry:t}),u.replace("/inquiry/verify-with-persona/error"))}else if(T===(p==null?void 0:p["cancel-button"]))return ee.logAmplitude("reusable-persona.verify.passkey-authentication-page.not-now-btn-clicked"),j.isReusablePersonaPopup?((V=window.opener)==null||V.focus(),window.close()):u.goBack()},[h,p,t,c,o]),v=f.useCallback(()=>{Ro(t,s)},[t,s]);return At({error:g,onError:()=>{e.setNextInquiry({inquiry:t}),u.replace("/inquiry/verify-with-persona/error")},onNetworkError:()=>e.showMessage(d("errors.network"))}),h==null||t==null?null:i.jsx(Br,{inquiry:t,nextStep:h,currentSession:r,uiStatus:C?on.Blocked:a,onTransitionSubmit:I,onTransitionAction:async()=>{},onComplete:v,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:u.push,showMessage:e.showMessage,setComponent:e.setComponent})};function fj(e){return{inquiry:e.inquiry.inquiry,component:pd(e),currentSession:e.inquiry.currentSession,debugForcedStatus:e.test.forcedStatus,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const gj={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,setNextInquiry:dl,showMessage:ae,transitionInquiryFromVerifyWithPersonaStep:Mv},bj=Te(fj,gj),Cj=bj(pj),xj=e=>({uiStatus:e.ui.status}),vj={loadVerifyWithPersonaPopupFromCode:Dv,setUiReady:ct,showMessage:ae},Ij=Te(xj,vj),Sj=e=>{const{i18n:t,t:n}=z();return Ur({loader:async()=>{const{uiStatus:r,loadVerifyWithPersonaPopupFromCode:o,setUiReady:a}=e;await o(t,j.inquiryParams.code,j.inquiryParams.component),r===on.Initializing&&(j.onEvent(Pe.Ready),a())},deps:[],onError:()=>e.showMessage(n("errors.network")),onNetworkError:()=>e.showMessage(n("errors.network"))}),i.jsx(In,{})},wj=Ij(Sj);function yj(e){return{inquiry:e.inquiry.inquiry,component:pd(e),currentSession:e.inquiry.currentSession,nextInquiry:e.verifyWithPersona.nextInquiry,uiStatus:e.ui.status,featureFlags:e.inquiry.featureFlags,collectedData:e.inquiry.collectedData}}const _j={handleLanguageChange:yo,openConfirmCancelDialog:Or,setComponent:ur,showMessage:ae,routeToNextStep:Rt},Rj=Te(yj,_j),Aj=e=>{var v,x;const{inquiry:t,component:n,currentSession:r,uiStatus:o,collectedData:a,featureFlags:s,nextInquiry:c,routeToNextStep:l}=e,u=Ot(),[d]=z(),m=(x=(v=n==null?void 0:n.attributes)==null?void 0:v.pages)==null?void 0:x.success,h=m==null?void 0:m["ui-step"],p=m==null?void 0:m["component-name-mapping"];f.useEffect(()=>{ee.logAmplitude("reusable-persona.verify.success-page.entered")},[]);const{error:g,callback:C}=vt(async(R,_)=>{var T;if(_===(p==null?void 0:p["continue-button"]))if(ee.logAmplitude("reusable-persona.verify.success-page.dismissed"),j.isReusablePersonaPopup){(T=window.opener)==null||T.focus(),window.close();return}else return l(c)},[c,p]),I=f.useCallback(()=>{Ro(t,a)},[t,a]);return At({error:g,onError:()=>{e.showMessage(d("error.message"))},onNetworkError:()=>e.showMessage(d("errors.network"))}),h==null||t==null?null:i.jsx(Br,{inquiry:t,nextStep:h,currentSession:r,uiStatus:o,onTransitionSubmit:C,onTransitionAction:async()=>{},onComplete:I,onCancel:e.openConfirmCancelDialog,handleLanguageChange:e.handleLanguageChange,route:u.push,showMessage:e.showMessage,setComponent:e.setComponent})},Tj=Rj(Aj),Ej=()=>(f.useEffect(()=>{window.location.replace("/404")}),i.jsx("div",{})),kj=b("div").withConfig({displayName:"VerifyDatabaseFailedView__Header",componentId:"sc-o4blb-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function Nj(e){const{handleContinue:t,verification:n}=e,[r]=z();return i.jsxs("div",{children:[i.jsx(jj,{t:r,displayErrors:n.attributes["failed-checks"]}),i.jsx(mt,{children:i.jsx(ge,{id:"database-failed__continue",buttonType:Z.Primary,onClick:t,children:r("database.failed.btn-submit")})})]})}const jj=({t:e,displayErrors:t})=>{const n=t.filter(s=>Object.values(sl).includes(s));let r,o,a;if(n.length===0)r=e("database.failed.failed-checks.generic.title"),o=e("database.failed.failed-checks.generic.description"),a=i.jsx(Vl,{});else{const s=n[0];switch(s){case sl.AddressDeliverableDetection:r=e("database.failed.failed-checks.address-deliverable-detection.title"),o=e("database.failed.failed-checks.address-deliverable-detection.description"),a=i.jsx(tp,{});break;default:ut(s)}}return i.jsxs(i.Fragment,{children:[i.jsxs(kj,{children:[i.jsx(Xe,{children:i.jsx(te,{children:r})}),i.jsx(Ve,{children:i.jsx(te,{children:o})})]}),i.jsx(Ye,{"aria-label":"verification failed pictograph",children:i.jsx(pe,{children:a})})]})},Pj=e=>(f.useEffect(()=>{(e.inquiry==null||e.verification==null)&&j.redirectToStart()},[]),e.inquiry==null||e.verification==null?null:i.jsx(Nj,{handleContinue:()=>e.routeToNextStep(e.inquiry,Nt),verification:e.verification}));function Dj(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const Oj={routeToNextStep:zt},Lj=Te(Dj,Oj),Fj=Lj(Pj),Mj=b("div").withConfig({displayName:"VerifyDatabasePendingView__Container",componentId:"sc-1r1zvtv-0"})(["",""],e=>e.asOverlay&&$(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),Vj=b("div").withConfig({displayName:"VerifyDatabasePendingView__Header",componentId:"sc-1r1zvtv-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),Bj=b("div").withConfig({displayName:"VerifyDatabasePendingView__AnimationContainer",componentId:"sc-1r1zvtv-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function Uj({asOverlay:e=!1}){const[t]=z();return i.jsxs(Mj,{asOverlay:e,children:[!e&&i.jsxs(Vj,{children:[i.jsx(Xe,{children:t("database.pending.title")}),i.jsx(Ve,{children:t("database.pending.description")})]}),i.jsx(Bj,{children:i.jsx(Oo,{icon:"verification"})})]})}const Hj=e=>{const t=Ot(),[n]=z(),{processingDisplayStyle:r}=f.useContext(Ze),o=r===Ea.Overlay;return f.useEffect(()=>{const{verification:a,inquiry:s}=e;if(a==null||s==null){j.redirectToStart();return}(async()=>{try{await e.pollVerification({verification:a,history:t,handleFailed:c=>{const l=c.included.find(u=>u.id===c.data.relationships.inquiry.data.id);l.attributes["next-step"].type===y.VerificationDatabase?t.push("/verify/database/failed"):e.routeToNextStep(l)}})}catch{e.showMessage(n("errors.network"),!0)}})()},[]),e.verification==null?null:i.jsx(Uj,{asOverlay:o})};function qj(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const $j={pollVerification:Po,routeToNextStep:zt,showMessage:ae},Gj=Te(qj,$j),Wj=Gj(Hj),Yj=b("div").withConfig({displayName:"LocationSearchInput__DropdownWrapper",componentId:"sc-g9rhkb-0"})(["position:relative;margin-bottom:","px;& > div{margin-bottom:0;}"],L.base*2),zj=b("div").withConfig({displayName:"LocationSearchInput__DropdownContainer",componentId:"sc-g9rhkb-1"})(["background-color:",";border:1px solid ",";position:absolute;z-index:",";width:100%;",""],({theme:e})=>e.colorDropdownBackground,Le.gray20,yt.dropdown,({openUpwards:e})=>e&&`bottom: ${Ji.input}`),jb=b("div").withConfig({displayName:"LocationSearchInput__DropdownItem",componentId:"sc-g9rhkb-2"})(["cursor:pointer;padding:","px;&:hover,&:focused{background-color:",";}",";"],L.base,({theme:e})=>e.colorDropdownOption,e=>e.active&&$(["background-color:",";"],({theme:t})=>t.colorDropdownOption));class Vc extends f.Component{constructor(){super(...arguments),this.state={isFocused:!1},this.renderSuggestions=({getInputProps:t,suggestions:n,getSuggestionItemProps:r,loading:o})=>{const{onBlur:a,onChange:s,onFocus:c,input:l,...u}=this.props,{isFocused:d}=this.state,h=(d?n:[]).map(p=>f.createElement(jb,{...r(p,{key:p.description,active:p.active}),key:p.placeId},p.description));return i.jsxs(Yj,{children:[i.jsx(Yn,{id:l.name,input:l,...t({name:l.name,placeholder:"Address",onBlur:this.handleInputBlur,onFocus:this.handleInputFocus}),...u}),i.jsx(Kj,{loading:o,children:h})]})},this.handleAutocompleteError=t=>{[google.maps.places.PlacesServiceStatus.ZERO_RESULTS,google.maps.places.PlacesServiceStatus.UNKNOWN_ERROR,google.maps.places.PlacesServiceStatus.REQUEST_DENIED,google.maps.places.PlacesServiceStatus.OVER_QUERY_LIMIT].includes(t)||$e("Google Maps API returned error with status: "+t)},this.handleChange=t=>{this.props.input.onChange(t)},this.handleSelect=async(t,n)=>{if(!n)return;let r;try{r=await Ef(n)}catch(c){this.handleAutocompleteError(c)}const o=r[0].address_components,a=(c,l=!1)=>{const u=o.filter(d=>d.types.indexOf(c)!==-1);return u.length>0?l?u[0].short_name:u[0].long_name:""},s=a("street_number");s?(this.props.boundChangeFormValue(ke.AddressStreet1,[s,a("route")].filter(c=>c).join(" ")),this.props.boundChangeFormValue(ke.AddressStreet2,a("subpremise"))):this.props.boundChangeFormValue(ke.AddressStreet1,[a("subpremise"),a("route")].filter(c=>c).join(" ")),this.props.boundChangeFormValue(ke.AddressCity,a("locality")||a("sublocality_level_1")||a("administrative_area_level_2")||a("neighborhood")),this.props.boundChangeFormValue(ke.AddressSubdivision,a("administrative_area_level_1")),this.props.boundChangeFormValue(ke.AddressPostalCode,a("postal_code"))},this.handleInputBlur=t=>{this.setState({isFocused:!1}),this.props.input.onBlur&&this.props.input.onBlur(t)},this.handleInputFocus=t=>{this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(t)}}render(){var o,a;const{selectedCountryCode:t,latLng:n}=this.props;let r;return n&&((a=(o=window.google)==null?void 0:o.maps)!=null&&a.LatLng)?r={componentRestrictions:{country:t},location:new window.google.maps.LatLng(n),radius:4e3}:r={componentRestrictions:{country:t}},i.jsx(xs,{onChange:this.handleChange,onError:this.handleAutocompleteError,value:this.props.input.value,onSelect:this.handleSelect,searchOptions:r,googleCallbackName:"onGoogleMapsLoaded",children:this.renderSuggestions})}}const Kj=({loading:e,children:t})=>{const[n,r]=f.useState(!1),o=f.useRef(),a=f.Children.count(t);return f.useLayoutEffect(()=>{if(o.current==null||o.current.offsetParent==null)return;const c=o.current.offsetParent.getBoundingClientRect().bottom+o.current.getBoundingClientRect().height;r(document.documentElement.clientHeight<c)},[a]),a===0?null:i.jsxs(zj,{ref:o,openUpwards:n,children:[e&&i.jsx(jb,{active:!1,children:"Loading..."}),t]})},di={autocompleteClosed:[pt("Fill out the details of your current address",()=>!1)],addressStreet1:[pt("Try a shorter street address format",lS(80)),pt("Your current street address is required",vn)],addressCityI18n:[],addressPostalCode:[],addressSubdivision:[],addressPostalCodeGB:[pt("Please enter your full postal code",vn),pt("Please enter your full postal code",dr(L_))],addressCityUs:pt("The city of your current address is required",vn),addressState:pt("The state of your current address is required",vn),addressZipCode:[pt("Enter your current ZIP or postal code to verify your address",vn),pt("The ZIP code you entered is invalid",dr(O_))]};class Qj extends f.Component{constructor(){var t,n;super(...arguments),this.state={manualInputOpen:!((n=(t=window.google)==null?void 0:t.maps)!=null&&n.places)},this.handleAddressChange=(r,o)=>{this.props.boundChangeFormValue(r,o),this.setState({manualInputOpen:!0})},this.handleOpenManualInput=()=>{this.setState({manualInputOpen:!0})},this.renderCountryOrderedAddress=()=>{const{selectedCountryCode:r,disabled:o,lockedAttributes:a,t:s,theme:c}=this.props,l=i.jsx(Re.Field,{autoComplete:"address-line2",name:"address-street-2",component:Yn,disabled:o||(a==null?void 0:a[ke.AddressStreet1]),type:"text",placeholder:s("form.address.street-2")}),u=i.jsx(Re.Field,{autoComplete:"address-level2",name:ke.AddressCity,component:Yn,disabled:o||(a==null?void 0:a[ke.AddressCity]),type:"text",placeholder:s("form.address.city"),validate:r==="US"?di.addressCityUs:di.addressCityI18n}),d=i.jsx(Jj,{selectedCountryCode:r,disabled:o||!!(a!=null&&a[ke.AddressSubdivision]),t:s,theme:c});return this.getFieldOrder(r,this.getStreet1Field(),l,u,d,this.getPostalCodeField()).map((h,p)=>i.jsx("div",{className:"row",children:h.map((g,C)=>i.jsx("div",{className:"col-sm-12",children:g},C))},p))}}render(){const{t,theme:{inputStyle:n}}=this.props;return i.jsxs(si,{children:[n===Tt.Outlined&&i.jsx("label",{htmlFor:ke.AddressStreet1,children:t("form.address.label")}),this.renderAddressFields()]})}renderAddressFields(){const{selectedCountryCode:t,disabled:n,forceOpen:r,t:o,theme:{inputStyle:a},addressAutocompleteMethod:s}=this.props;if(this.state.manualInputOpen||r||s===la.None)return this.renderCountryOrderedAddress();{const c=a===Tt.Outlined?o("form.address.placeholder",{context:t}):o("form.address.label");return i.jsxs("div",{children:[i.jsx(Re.Field,{selectedCountryCode:t,name:this.getAutocompleteInputName(),boundChangeFormValue:this.handleAddressChange,component:Vc,disabled:n,type:"text",validate:di.autocompleteClosed,latLng:this.props.latLng,placeholder:c}),i.jsx("a",{id:"address_input_section__manual_edit","data-test":"address_input_section__manual_edit",onClick:this.handleOpenManualInput,tabIndex:0,children:o("form.address.edit-address-manually")})]})}}getStreet1Field(){const{addressAutocompleteMethod:t,selectedCountryCode:n,disabled:r,lockedAttributes:o,t:a}=this.props;return this.getAutocompleteInputName()===ke.AddressStreet1&&t===la.GoogleMaps?i.jsx(Re.Field,{autoComplete:"address-line1",selectedCountryCode:n,name:ke.AddressStreet1,disabled:r||o&&o[ke.AddressStreet1],placeholder:a("form.address.street-1"),type:"text",validate:di.addressStreet1,boundChangeFormValue:this.props.boundChangeFormValue,component:Vc,latLng:this.props.latLng}):i.jsx(Re.Field,{autoComplete:"address-line1",name:ke.AddressStreet1,disabled:r||o&&o[ke.AddressStreet1],placeholder:a("form.address.street-1"),type:"text",validate:di.addressStreet1,component:Yn})}getPostalCodeField(){const{selectedCountryCode:t,disabled:n,lockedAttributes:r,t:o}=this.props;let a;switch(t){case"US":a=di.addressZipCode;break;case"GB":a=di.addressPostalCodeGB;break;default:a=di.addressPostalCode;break}return this.getAutocompleteInputName()===ke.AddressPostalCode?i.jsx(Re.Field,{autoComplete:"postal-code",selectedCountryCode:t,name:ke.AddressPostalCode,disabled:n||r&&r[ke.AddressPostalCode],placeholder:o("form.address.postal-code"),type:"text",validate:a,boundChangeFormValue:this.props.boundChangeFormValue,component:Vc,latLng:this.props.latLng}):i.jsx(Re.Field,{autoComplete:"postal-code",name:ke.AddressPostalCode,disabled:n||r&&r[ke.AddressPostalCode],placeholder:o("form.address.postal-code"),type:"text",validate:a,boundChangeFormValue:this.props.boundChangeFormValue,component:Yn})}getFieldOrder(t,n,r,o,a,s){switch(t){case"AR":case"GL":case"IS":return[[n],[r],[s,o]];case"AT":case"BE":case"DK":return[[n,r],[s,o]];case"BR":case"CR":return[[n,r],[o,a],[s]];case"CA":return[[r,n],[o,a,s]];case"CN":return[[r],[n,o],[a,s]];case"IT":return[[n,r],[s,o,a]];case"AU":case"GB":case"PH":case"US":return[[n,r],[o,a,s]];case"FI":case"FR":case"DE":case"IL":return[[n,r],[s,o]];case"JP":case"KR":return[[n,r],[o,s]];case"IN":return[[r],[n],[o,s]];case"FJ":return[[n,r],[o]];case"HK":return[[r],[n],[o]];case"EE":case"CZ":case"TW":case"ID":default:return[[n,r],[o,s]]}}getAutocompleteInputName(){return Ds.includes(this.props.selectedCountryCode)?ke.AddressPostalCode:ke.AddressStreet1}}const Zj=Pl(Qj);function Jj({selectedCountryCode:e,disabled:t,t:n,theme:r}){return e==="US"&&r.usStateInputMethod===Hs.Select?i.jsxs(Re.Field,{autoComplete:"address-level1",name:ke.AddressSubdivision,component:Ff,disabled:t,type:"text",placeholder:n("form.address.province-us"),validate:di.addressState,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:n("form.address.province-us")}),Object.keys(fs).map(o=>i.jsx("option",{value:fs[o],children:o},o))]}):i.jsx(Re.Field,{autoComplete:"address-level1",name:ke.AddressSubdivision,component:Yn,disabled:t,type:"text",placeholder:n(e==="US"?"form.address.province-us":"form.address.province"),validate:e==="US"?di.addressState:di.addressSubdivision})}const Xj=b("div").withConfig({displayName:"ThemedMaskedInput__FormError",componentId:"sc-lqknb0-0"})(["",""],No),Jm=b("div").withConfig({displayName:"ThemedMaskedInput__Container",componentId:"sc-lqknb0-1"})(["position:relative;"]),e8=b(Ts).withConfig({displayName:"ThemedMaskedInput__StyledThemedMaskedInput",componentId:"sc-lqknb0-2"})(["",";font-family:",";left:0;position:absolute;background:transparent !important;border-color:transparent;caret-color:#000000;color:transparent !important;-webkit-text-fill-color:transparent !important;"],e=>Eo(e,e.theme),S.FontFamilies.Monospace),t8=b(Ki).withConfig({displayName:"ThemedMaskedInput__DisplayInput",componentId:"sc-lqknb0-3"})(["",";font-family:",";"],e=>Eo(e,e.theme),S.FontFamilies.Monospace),n8=b(Ts).withConfig({displayName:"ThemedMaskedInput__StyledMaterialThemedMaskedInput",componentId:"sc-lqknb0-4"})(["width:100%;padding:","px ","px ","px ","px;font-family:",";left:0;position:absolute;background-color:",";border-color:transparent;caret-color:#000000;color:transparent !important;"],L.base,L.base,L.base,L.base/2,S.FontFamilies.Monospace,({theme:e})=>e.colorInputBackground),i8=b(lr).withConfig({displayName:"ThemedMaskedInput__DisplayMaterialInput",componentId:"sc-lqknb0-5"})(["background-color:transparent !important;pointer-events:none;> input{font-family:",";background-color:transparent !important;}"],S.FontFamilies.Monospace),r8=b("div").withConfig({displayName:"ThemedMaskedInput__OutlinedContainer",componentId:"sc-lqknb0-6"})(["margin-bottom:","px;"],L.base*2),o8=b("div").withConfig({displayName:"ThemedMaskedInput__MaterialContainer",componentId:"sc-lqknb0-7"})(["margin-bottom:","px;position:relative;padding-top:","px;"],L.base,L.base*2),a8=b("div").withConfig({displayName:"ThemedMaskedInput__MaterialFormError",componentId:"sc-lqknb0-8"})(["",";top:","px;"],No,vd+L.base),Pb=b.div.withConfig({displayName:"ThemedMaskedInput__ButtonContainer",componentId:"sc-lqknb0-9"})(["position:absolute;right:0;z-index:",";height:100%;display:flex;align-items:center;padding-right:","px;[dir='rtl'] &{right:unset;left:0;padding-right:unset;padding-left:","px;}"],yt.inputButtons,L.base,L.base),s8=b(Pb).withConfig({displayName:"ThemedMaskedInput__MaterialButtonContainer",componentId:"sc-lqknb0-10"})(["height:","px;"],vd),c8=({meta:{error:e,submitFailed:t},input:n,mask:r,label:o,secure:a=!0,...s})=>{const{inputStyle:c}=f.useContext(Ze),[l,{toggle:u}]=rt(a),d=l?l8(n.value,r):n.value,m=!!(e&&t),[h,{enable:p,disable:g}]=rt(!1);switch(c){case Tt.Material:return i.jsx(o8,{children:i.jsxs(Jm,{children:[a&&i.jsx(s8,{children:i.jsx(mo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:u,tabIndex:-1,"aria-label":l?"show value":"hide value",children:l?i.jsx(os,{"aria-hidden":!0,height:16,width:16}):i.jsx(as,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(n8,{...s,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:"",onFocus:p,onBlur:g}),i.jsx(i8,{value:d,readOnly:!0,disabled:s.disabled,hasError:m,labelText:o,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input",focused:h}),m&&i.jsx(a8,{children:e})]})});default:return i.jsxs(r8,{children:[o&&i.jsx(te,{wrapper:"label",wrapperProps:{htmlFor:n.name},children:o}),i.jsxs(Jm,{children:[a&&i.jsx(Pb,{children:i.jsx(mo,{"data-test":"themed-masked-input__secure-button",type:"button",onClick:u,tabIndex:-1,"aria-label":l?"show value":"hide value",children:l?i.jsx(os,{"aria-hidden":!0,height:16,width:16}):i.jsx(as,{"aria-hidden":!0,height:16,width:16})})}),i.jsx(e8,{...s,...n,mask:r,autoComplete:"no-autocomplete",guide:!1,placeholder:void 0,placeholderChar:""}),i.jsx(t8,{value:d,readOnly:!0,disabled:s.disabled,hasError:m,placeholder:s.placeholder,tabIndex:-1,type:"text","data-test":"themed-masked-input__display-input"})]}),m&&i.jsx(Xj,{role:"alert",children:e})]})}},Xm="";function l8(e,t){return Array.isArray(t)?e.split("").map((n,r)=>t[r]instanceof RegExp?Xm:n).join(""):Xm.repeat(e.length)}const d8={socialSecurityNumber:[pt("You cannot have an empty value",vn),pt("The value you entered is invalid",Df(/\D/g,jf(9)))]};function u8(e){const{disabled:t,name:n="social-security-number"}=e;return i.jsx(Re.Field,{name:n,label:m8(e.countryCode),component:c8,disabled:t,mask:h8(e.countryCode),type:"text",placeholder:Db(e.countryCode),validate:d8.socialSecurityNumber})}function m8(e){const[t]=z();switch(e){case"BR":return t("form.identification-number.country.BR");case"CA":return t("form.identification-number.country.CA");case"DE":return t("form.identification-number.country.DE");case"FR":return t("form.identification-number.country.FR");case"GB":return t("form.identification-number.country.GB");case"IT":return t("form.identification-number.country.IT");case"JP":return t("form.identification-number.country.JP");case"KR":return t("form.identification-number.country.KR");case"MX":return t("form.identification-number.country.MX");case"NL":return t("form.identification-number.country.NL");case"PL":return t("form.identification-number.country.PL");case"RO":return t("form.identification-number.country.RO");case"RU":return t("form.identification-number.country.RU");case"US":return t("form.identification-number.country.US");default:return t("form.identification-number.identification-number")}}function Db(e){switch(e){case"BR":return"###.###.###-##";case"CA":return"###-###-###";case"DE":return"############";case"FR":return"###############";case"GB":return"###-###-####";case"IT":return"################";case"JP":return"############";case"KR":return"######-#######";case"MX":return"##################";case"NL":return"#########";case"PL":return"###########";case"RO":return"#############";case"RU":return"###-###-### ##";case"US":return"###-##-####";default:return"###-##-####"}}function h8(e){return Array.from(Db(e)).map(t=>t==="#"?/\d/:t)}const eh=b("div").withConfig({displayName:"ThemedFormDateInput__Container",componentId:"sc-134qv0i-0"})(["display:flex;flex-wrap:wrap;margin-left:-","px;margin-right:-","px;margin-bottom:","px;",";"],L.base,L.base,L.base*2,({inputStyle:e})=>e===Tt.Material?`padding-top: ${L.base*2}px;`:""),p8=b("div").withConfig({displayName:"ThemedFormDateInput__OutlinedLabelContainer",componentId:"sc-134qv0i-1"})(["&:focus-within label{color:",";}"],e=>e.theme.colorPrimary),th=b("div").withConfig({displayName:"ThemedFormDateInput__FormError",componentId:"sc-134qv0i-2"})([""," padding-left:","px;"],No,L.base),nh=b("div").withConfig({displayName:"ThemedFormDateInput__Month",componentId:"sc-134qv0i-3"})(["flex:0 0 40%;max-width:40%;padding-left:","px;padding-right:","px;text-transform:capitalize;"],L.base,L.base),Qa=b("div").withConfig({displayName:"ThemedFormDateInput__DayOrYear",componentId:"sc-134qv0i-4"})(["flex:0 0 30%;max-width:30%;padding-left:","px;padding-right:","px;"],L.base,L.base);class f8 extends f.Component{constructor(t){super(t),this.handleChangeDay=n=>{const r={...this.deserializedValue,day:n.target.value};this.propagateDateChange(r)},this.handleChangeMonth=n=>{const r={...this.deserializedValue,month:n.target.value};this.propagateDateChange(r)},this.handleChangeYear=n=>{const r={...this.deserializedValue,year:n.target.value};this.propagateDateChange(r)},this.state={day:"",month:"",year:""}}render(){const{theme:{inputStyle:t}}=this.props;switch(t){case Tt.Material:return this.renderMaterial();case Tt.Outlined:default:return this.renderOutlined()}}renderOutlined(){const{disabled:t,input:n,t:r,meta:{error:o,submitFailed:a},theme:{inputStyle:s}}=this.props,c=!!(o&&a);return i.jsxs(p8,{children:[i.jsx("label",{children:r("database.form.birthdate-label")}),i.jsxs(eh,{inputStyle:s,children:[i.jsxs(nh,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-month",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.month.placeholder")}`})}),i.jsxs(Ys,{name:n.name+"-month",disabled:t,hasError:c,onChange:this.handleChangeMonth,"aria-label":r("form.date-input.month.placeholder"),value:this.deserializedValue.month,children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r("form.date-input.month.placeholder")}),i.jsx("option",{value:0,children:r("form.date-input.month.option.january")}),i.jsx("option",{value:1,children:r("form.date-input.month.option.february")}),i.jsx("option",{value:2,children:r("form.date-input.month.option.march")}),i.jsx("option",{value:3,children:r("form.date-input.month.option.april")}),i.jsx("option",{value:4,children:r("form.date-input.month.option.may")}),i.jsx("option",{value:5,children:r("form.date-input.month.option.june")}),i.jsx("option",{value:6,children:r("form.date-input.month.option.july")}),i.jsx("option",{value:7,children:r("form.date-input.month.option.august")}),i.jsx("option",{value:8,children:r("form.date-input.month.option.september")}),i.jsx("option",{value:9,children:r("form.date-input.month.option.october")}),i.jsx("option",{value:10,children:r("form.date-input.month.option.november")}),i.jsx("option",{value:11,children:r("form.date-input.month.option.december")})]})]}),i.jsxs(Qa,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-day",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.day")}`})}),i.jsx(Ki,{name:n.name+"-day",disabled:t,hasError:c,min:0,max:31,onChange:this.handleChangeDay,"aria-label":r("form.date-input.day"),placeholder:r("form.date-input.day"),type:"number",value:this.deserializedValue.day})]}),i.jsxs(Qa,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-year",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.year")}`})}),i.jsx(Ki,{name:n.name+"-year",disabled:t,hasError:c,min:1900,max:new Date().getFullYear(),onChange:this.handleChangeYear,"aria-label":r("form.date-input.year"),placeholder:r("form.date-input.year"),type:"number",value:this.deserializedValue.year})]}),c&&i.jsx(th,{role:"alert",children:o})]})]})}renderMaterial(){const{disabled:t,input:n,t:r,meta:{error:o,submitFailed:a},theme:{inputStyle:s}}=this.props,c=!!(o&&a);return i.jsxs(eh,{inputStyle:s,children:[i.jsxs(nh,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-month",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.month.placeholder")}`})}),i.jsxs(Lf,{name:n.name+"-month",disabled:t,hasError:c,onChange:this.handleChangeMonth,value:this.deserializedValue.month,labelText:r("database.form.birthdate-label"),children:[i.jsx("option",{value:"",selected:!0,disabled:!0,children:r("form.date-input.month.placeholder")}),i.jsx("option",{value:0,children:r("form.date-input.month.option.january")}),i.jsx("option",{value:1,children:r("form.date-input.month.option.february")}),i.jsx("option",{value:2,children:r("form.date-input.month.option.march")}),i.jsx("option",{value:3,children:r("form.date-input.month.option.april")}),i.jsx("option",{value:4,children:r("form.date-input.month.option.may")}),i.jsx("option",{value:5,children:r("form.date-input.month.option.june")}),i.jsx("option",{value:6,children:r("form.date-input.month.option.july")}),i.jsx("option",{value:7,children:r("form.date-input.month.option.august")}),i.jsx("option",{value:8,children:r("form.date-input.month.option.september")}),i.jsx("option",{value:9,children:r("form.date-input.month.option.october")}),i.jsx("option",{value:10,children:r("form.date-input.month.option.november")}),i.jsx("option",{value:11,children:r("form.date-input.month.option.december")})]})]}),i.jsxs(Qa,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-day",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.day")}`})}),i.jsx(lr,{name:n.name+"-day",disabled:t,hasError:c,min:0,max:99,onChange:this.handleChangeDay,type:"number",value:this.deserializedValue.day,labelText:r("form.date-input.day")})]}),i.jsxs(Qa,{children:[i.jsx(ri,{children:i.jsx("label",{htmlFor:n.name+"-year",children:`${r("database.form.birthdate-label")}, ${r("form.date-input.year")}`})}),i.jsx(lr,{name:n.name+"-year",disabled:t,hasError:c,min:1900,max:9999,onChange:this.handleChangeYear,labelText:r("form.date-input.year"),type:"number",value:this.deserializedValue.year})]}),c&&i.jsx(th,{role:"alert",children:o})]})}get deserializedValue(){if(/\d{4}-\d{2}-\d{2}/.test(this.props.input.value)){const t=new Date(this.props.input.value);return{year:String(t.getUTCFullYear()),month:String(t.getUTCMonth()),day:String(t.getUTCDate())}}else return this.state}propagateDateChange(t){this.setState(t);const n=parseInt(t.year,10),r=parseInt(t.month,10),o=parseInt(t.day,10),a=new Date(Date.UTC(n,r,o));if(!isNaN(a.getTime())&&a.getUTCFullYear()===n&&a.getUTCMonth()===r&&a.getUTCDate()===o){const s=a.toISOString().split("T")[0];this.props.input.onChange(s)}else this.props.input.onChange("")}}const g8=Pl(f8),b8=({disabled:e,validate:t})=>{const[n]=z(),{inputStyle:r}=f.useContext(Ze),o=r===Tt.Material;return i.jsxs(si,{children:[!o&&i.jsx("label",{htmlFor:ke.EmailAddress,children:n("email-address.form.label")}),i.jsx(Re.Field,{name:ke.EmailAddress,component:Yn,disabled:e,placeholder:n("email-address.form.label"),type:"email",validate:t.emailAddress})]})},C8=b(si).withConfig({displayName:"ThemedFormNameInput__StyledFormGroup",componentId:"sc-1mgtya5-0"})(["margin-bottom:0;"]),x8=b.div.withConfig({displayName:"ThemedFormNameInput__InputContainer",componentId:"sc-1mgtya5-1"})(["display:flex;column-gap:",";flex-direction:row;flex-wrap:none;> *{flex:auto;}@media ","{flex-direction:column;}"],S.Spacing[4],jt.isMobileSmall),v8=({disabledNameFirst:e,disabledNameLast:t,validate:n})=>{const[r]=z(),{inputStyle:o}=f.useContext(Ze),a=o===Tt.Material;return i.jsxs(C8,{children:[!a&&i.jsx("label",{htmlFor:ke.NameFirst,children:r("database.form.name-label")}),i.jsxs(x8,{children:[i.jsx(Re.Field,{name:ke.NameFirst,component:Yn,autoComplete:"given-name",disabled:e,placeholder:r("database.form.first_name"),type:"text",validate:n.firstName}),i.jsx(Re.Field,{name:ke.NameLast,component:Yn,autoComplete:"family-name",disabled:t,placeholder:r("database.form.last_name"),type:"text",validate:n.lastName})]})]})},I8={socialSecurityNumberLast4:[pt("Please enter the last 4 digits of your SSN",vn),pt("The SSN you entered is invalid",Df(/\D/g,jf(4)))]},S8=e=>{const{disabled:t,name:n="social-security-number"}=e,[r]=z();return i.jsx(f.Fragment,{children:i.jsx(Re.Field,{name:n,component:Yn,disabled:t,type:"tel",maxLength:4,placeholder:"####",label:r("form.identification-number.ssn-last-4"),validate:I8.socialSecurityNumberLast4})})},Za={firstName:[pt("Please enter your first name",vn)],lastName:[pt("Please enter your last name",vn)],birthdate:[pt("Your legal birth date is required",dS),pt("Enter a valid date",uS),pt("Birthdate must be within last century",mS),pt("Birthdate must be more than a year ago",hS)],phoneNumber:[pt("The phone number you entered is not valid",Pf),pt("Enter your phone number",vn)],emailAddress:[pt("Please enter your email address",vn),pt("The email you entered is not valid",dr(yd))]};function w8(e,t,n,r){var o,a,s,c,l,u,d;switch(e){case pn.Name:return i.jsx(v8,{disabledNameFirst:r.submitting||((o=r.lockedAttributes)==null?void 0:o[ke.NameFirst])!=null,disabledNameLast:r.submitting||((a=r.lockedAttributes)==null?void 0:a[ke.NameLast])!=null,validate:Za},pn.Name);case pn.Birthdate:return i.jsx(si,{children:i.jsx(Re.Field,{name:ke.Birthdate,component:g8,disabled:r.submitting||((s=r.lockedAttributes)==null?void 0:s[ke.Birthdate]),t:n,type:"text",validate:Za.birthdate})},pn.Birthdate);case pn.PhoneNumber:return i.jsxs(si,{children:[i.jsx("label",{children:n("phone-number.form.label")}),i.jsx(Xf,{name:ke.PhoneNumber,disabled:r.submitting||((c=r.lockedAttributes)==null?void 0:c[ke.PhoneNumber]),t:n,validate:Za.phoneNumber,component:ng,type:"tel",defaultCountry:r.selectedCountryCode})]},pn.PhoneNumber);case pn.IdentificationNumberFull9:return i.jsx(si,{children:i.jsx(u8,{disabled:r.submitting||((l=r.lockedAttributes)==null?void 0:l[ke.IdentificationNumber])!=null,name:ke.IdentificationNumber,countryCode:r.selectedCountryCode})},pn.IdentificationNumberFull9);case pn.IdentificationNumberLast4:return i.jsx(si,{children:i.jsx(S8,{disabled:r.submitting||((u=r.lockedAttributes)==null?void 0:u[ke.IdentificationNumber])!=null,name:ke.IdentificationNumber})},pn.IdentificationNumberLast4);case pn.Address:return i.jsx(Zj,{boundChangeFormValue:(m,h)=>r.changeFormValue(r.form,m,h),selectedCountryCode:r.selectedCountryCode,disabled:r.submitting,forceOpen:r.submitFailed||t,latLng:r.latLng,lockedAttributes:r.lockedAttributes,t:n,addressAutocompleteMethod:r.addressAutocompleteMethod},pn.Address);case pn.EmailAddress:return i.jsx(b8,{disabled:r.submitting||((d=r.lockedAttributes)==null?void 0:d[ke.EmailAddress])!=null,validate:Za},pn.EmailAddress)}}function y8(e){const t=ot(a=>{const s=Re.formValueSelector(e.form);return{[ke.AddressStreet1]:s(a,ke.AddressStreet1)||"",[ke.AddressStreet2]:s(a,ke.AddressStreet2)||"",[ke.AddressCity]:s(a,ke.AddressCity)||"",[ke.AddressSubdivision]:s(a,ke.AddressSubdivision)||"",[ke.AddressPostalCode]:s(a,ke.AddressPostalCode)||""}}),n=[ke.AddressStreet2,ke.AddressCity,ke.AddressSubdivision,Ds.includes(e.selectedCountryCode)?ke.AddressStreet1:ke.AddressPostalCode].some(a=>t[a]),[r]=z(),o=e.inputFields.map(a=>w8(a,n,r,e));return i.jsxs("form",{onSubmit:e.handleSubmit,children:[o,i.jsx(mt,{children:i.jsx(ge,{type:"submit",buttonType:Z.Primary,disabled:e.pristine||e.submitting||e.isProcessing,isPending:e.submitting||e.isProcessing,children:r("database.form.btn-submit")})})]})}const Al="database",_8=Re.reduxForm({form:Al,destroyOnUnmount:!1})(y8);function La(e,t,n){return async r=>{Object.values(ke).forEach(o=>{const{"locked-attributes":a,prefill:s,fields:c}=t;a!=null&&a[o]?r(Re.autofill(e,o,a[o])):n!=null&&n[o]?r(Re.autofill(e,o,n[o])):s!=null&&s[o]?r(Re.autofill(e,o,s[o])):c!=null&&c[o]&&r(Re.autofill(e,o,c[o]))})}}const ih=b("div").withConfig({displayName:"VerifyDatabaseView__Header",componentId:"sc-yae4il-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function R8(e){const[t]=z();return i.jsxs("div",{children:[e.hasSubmittedValues&&e.inputFields.length===1&&e.inputFields[0]===pn.IdentificationNumberFull9?i.jsxs(ih,{children:[i.jsx(Xe,{children:t("database.title-retry")}),i.jsx(Ve,{children:t("database.prompt-retry")})]}):i.jsxs(ih,{children:[i.jsx(Xe,{children:t("database.title")}),i.jsx(Ve,{children:t("database.prompt")})]}),i.jsx(_8,{changeFormValue:e.changeFormValue,selectedCountryCode:e.selectedCountryCode,latLng:e.latLng,lockedAttributes:e.hasSubmittedValues?void 0:j.inquiryParams["locked-attributes"],onSubmit:e.handleSubmit,inputFields:e.inputFields,isProcessing:e.isProcessing,addressAutocompleteMethod:e.addressAutocompleteMethod})]})}const A8=e=>{var m,h;const{featureFlags:t,forcedStatus:n,inquiry:r,latLng:o,selectedCountryCode:a,submittedValues:s}=e;f.useEffect(()=>{r==null?j.redirectToStart():e.autofillForm(Al,j.inquiryParams,e.submittedValues)},[]);const{error:c,loading:l,callback:u}=vt(async p=>{e.clearMessages(),await e.verificationDatabaseSubmit(r,n,{"country-code":a,"phone-number":r.attributes["phone-number"],...s,...p},e.history,t),e.change(Al,"identification-number",null),e.saveSubmittedValues({...p,"identification-number":null}),document.body.scrollTo(0,0)},[a,r,n,s,t,e.history]);if(At({error:c,onError:()=>e.showMessage(e.t("errors.network")),onNetworkError:()=>e.showMessage(e.t("errors.network"))}),r==null)return null;const d=r.attributes["next-step"].config||{};return i.jsx(R8,{changeFormValue:e.change,selectedCountryCode:a,handleSubmit:u,hasSubmittedValues:Object.keys((m=e.submittedValues)!=null?m:{}).length>0,latLng:o,inputFields:(h=d["input-fields"])!=null?h:[],isProcessing:l,addressAutocompleteMethod:d["address-autocomplete-method"]||la.GoogleMaps})};function T8(e){var n;const t=Zp("itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",j.inquiryParams.prefill,e.locale.localeInfo.country_code);return{selectedCountryCode:((n=e.inquiry.inquiry)==null?void 0:n.attributes["selected-country-code"])||t,forcedStatus:e.test.forcedStatus,latLng:kf(e),inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues,verifications:e.inquiry.verifications,featureFlags:e.inquiry.featureFlags}}const E8={autofillForm:La,change:Re.change,clearMessages:Lt,saveSubmittedValues:Xp,showMessage:ae,verificationDatabaseSubmit:U3},k8=Te(T8,E8),N8=k8(A8),j8=On()(N8),P8=b("div").withConfig({displayName:"VerifyDeviceHandoffEmailPromptView__Header",componentId:"sc-r4xrxo-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function D8(e){const{handleEmailOneTimeLink:t}=e,[n]=z();return i.jsxs("div",{children:[i.jsxs(P8,{children:[i.jsx(Xe,{children:n("to-mobile.title")}),i.jsx(Ve,{children:n("to-email.prompt")})]}),i.jsx(_d,{onSubmit:t,labelContinue:n("to-email.btn-submit")})]})}function O8(e){f.useEffect(()=>{e.autofillForm("email-address",j.inquiryParams,e.submittedValues)},[]);const[t]=z(),{error:n,callback:r}=vt(async o=>{const a=o["email-address"],{inquiry:s}=e,c={attributes:{"email-address":a},id:s.id,type:s.type};e.saveEmailAddress(a),await ne.postResourceAction(c,"email-one-time-link"),ee.logAmplitude("one-time-link.sent",{method:"email"}),j.onEvent(Pe.OneTimeLinkSent,{method:"email"}),e.history.push("/verify/device-handoff/email/sent")},[e.inquiry,e.history]);return At({error:n,onError:o=>{o.status===409?e.showMessage(t("errors.inquiry-conflict")):e.showMessage(t("errors.network"))},onNetworkError:()=>e.showMessage(t("errors.network"))}),i.jsx(D8,{handleEmailOneTimeLink:r})}function L8(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues}}const F8={autofillForm:La,saveEmailAddress:Zs,showMessage:ae},M8=Te(L8,F8),V8=M8(O8),B8=b("div").withConfig({displayName:"VerifyDeviceHandoffEmailSentView__Header",componentId:"sc-z0hyrs-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function U8(e){const[t]=z(),[n,{enable:r}]=rt(),o=()=>{n||(e.resendOneTimeLink(),r())};return i.jsxs("div",{children:[i.jsxs(B8,{children:[i.jsx(Xe,{children:t("mobile-sent.title")}),i.jsx(Ve,{children:t("mobile-sent.prompt-email",{emailAddress:e.emailAddress})})]}),i.jsx(Ye,{"aria-label":"SMS pictograph",children:i.jsx(pe,{children:i.jsx(Es,{})})}),i.jsx(Ve,{children:i.jsxs(Pn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-email__resend-link",onClick:o,children:"resend the secure link"})]})})]})}const rh=3e3;let Bc;function H8(e){const[t]=z();f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),a(),()=>clearTimeout(Bc)),[]);const{inquiry:n,emailAddress:r}=e,o=f.useCallback(async()=>{e.clearMessages();try{const s={attributes:{"email-address":r},id:n.id,type:n.type};await ne.postResourceAction(s,"email-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch{e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const s=(await ne.getResource(Zt(n.type),n.id)).data;switch(s.attributes.status){case Ce.Created:case Ce.Pending:Bc=window.setTimeout(a,rh);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(s),e.routeToNextStep(s);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ut(s.attributes.status)}}catch(s){if(s instanceof Ct)Bc=window.setTimeout(a,rh);else if(s instanceof ht&&s.status!==401)e.showMessage(t("errors.session-expired"));else throw s}},[n]);return n==null?null:i.jsx(U8,{emailAddress:r,resendOneTimeLink:o})}function q8(e){return{inquiry:e.inquiry.inquiry,emailAddress:e.oneTimeLink.emailAddress}}const $8={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,routeToNextStep:zt,saveEmailAddress:Zs},G8=Te(q8,$8),W8=G8(H8),Y8=On()(W8),z8=b("div").withConfig({displayName:"VerifyDeviceHandoffPromptView__Header",componentId:"sc-4mxuyp-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),K8=b.div.withConfig({displayName:"VerifyDeviceHandoffPromptView__CaptureOptionsContainer",componentId:"sc-4mxuyp-1"})(["width:100%;"]),Uc=b(ge).withConfig({displayName:"VerifyDeviceHandoffPromptView__OptionButton",componentId:"sc-4mxuyp-2"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],S.Spacing[4]);function Q8({handleSmsDeviceHandoff:e,handleEmailDeviceHandoff:t,handleQrDeviceHandoff:n,isPrimary:r,option:o}){const[a]=z();switch(o){case tn.Sms:return i.jsx(Uc,{id:"button__sms",buttonType:r?Z.Primary:Z.Secondary,"data-test":"to-mobile__via-sms",onClick:e,children:a("to-mobile.via-sms")});case tn.Email:return i.jsx(Uc,{id:"button__email",buttonType:r?Z.Primary:Z.Secondary,"data-test":"to-mobile__via-email",onClick:t,children:a("to-mobile.via-email")});case tn.Qr:return i.jsx(Uc,{id:"button__qr",buttonType:r?Z.Primary:Z.Secondary,"data-test":"to-mobile__via-qr",onClick:n,children:a("to-mobile.via-qr")});default:ut(o)}}function Z8(e){var t;return i.jsx(K8,{id:"to-mobile-prompt__view",children:((t=e.deviceHandoffOptions)!=null?t:[]).map((n,r)=>i.jsx(Q8,{isPrimary:r===0,option:n,...e},n))})}function J8(e){const[t]=z();return i.jsxs("div",{children:[i.jsxs(z8,{children:[i.jsx(Xe,{children:t("to-mobile.title")}),i.jsx(Ve,{children:t("to-mobile.description")})]}),i.jsx(mt,{children:i.jsx(Z8,{...e})})]})}const X8=e=>{const t=Ot(),n=en("inquiry:hide-sms-device-handoff-option-inverse");let r=e.inquiry.attributes["next-step"].config["device-handoff-options"];return ql(r)&&(r=[tn.Sms,tn.Email,tn.Qr]),n||(r=r.filter(o=>o!==tn.Sms)),f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}if(r.length===1){const o=r[0];switch(o){case tn.Sms:t.replace("/verify/device-handoff/sms");break;case tn.Email:t.replace("/verify/device-handoff/email");break;case tn.Qr:t.replace("/verify/device-handoff/qr");break;default:ut(o)}}},[]),r.length===1?null:i.jsx(J8,{handleSmsDeviceHandoff:()=>t.push("/verify/device-handoff/sms"),handleEmailDeviceHandoff:()=>t.push("/verify/device-handoff/email"),handleQrDeviceHandoff:()=>t.push("/verify/device-handoff/qr"),deviceHandoffOptions:r})};function eP(e){return{inquiry:e.inquiry.inquiry}}const tP=Te(eP),nP=tP(X8),iP=b("div").withConfig({displayName:"VerifyDeviceHandoffQrView__Header",componentId:"sc-3euhfa-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function rP({link:e}){const[t]=z();return i.jsxs("div",{children:[i.jsxs(iP,{children:[i.jsx(Xe,{children:t("to-mobile.title")}),i.jsx(Ve,{children:t("qr-code.prompt")})]}),e!=null&&i.jsx(Ye,{height:132,width:132,"aria-label":t("qr-code.prompt"),role:"img",children:i.jsx(tg,{value:e,accessibleTitle:t("qr-code.prompt"),"data-test":"device-handoff-qr__qr-code"})})]})}const oh=3e3;function oP(e){let t;const[n]=z(),[r,o]=f.useState(void 0);Ur({loader:async()=>{var l;const c=await ne.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"generate-one-time-link");o((l=c==null?void 0:c.meta)==null?void 0:l["one-time-link-code"]),ee.logAmplitude("one-time-link.sent",{method:"qr"}),j.onEvent(Pe.OneTimeLinkSent,{method:"qr"})},deps:[],onError:c=>{c.status===409?e.showMessage(n("errors.inquiry-conflict")):e.showMessage(n("errors.network"))},onNetworkError:()=>e.showMessage(n("errors.network"))}),f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),a(),()=>clearTimeout(t)),[]);const a=f.useCallback(async()=>{try{const c=(await ne.getResource(Zt(e.inquiry.type),e.inquiry.id)).data;switch(c.attributes.status){case Ce.Created:case Ce.Pending:t=window.setTimeout(a,oh);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(c),e.routeToNextStep(c);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(this.props.t("errors.session-expired"));return;default:ut(c.attributes.status)}}catch(c){if(c instanceof Ct)t=window.setTimeout(a,oh);else if(c instanceof ht&&c.status!==401)e.showMessage(n("errors.session-expired"));else throw c}},[e.inquiry]);if(e.inquiry==null)return null;const s=r?`${location.protocol}//${location.host}/verify?code=${r}`:void 0;return i.jsx(rP,{link:s})}function aP(e){return{inquiry:e.inquiry.inquiry}}const sP={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,routeToNextStep:zt},cP=Te(aP,sP),lP=cP(oP),dP=b("div").withConfig({displayName:"VerifyDeviceHandoffSmsPromptView__Header",componentId:"sc-1njtbwt-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function uP(e){const{defaultCountry:t,handleSmsOneTimeLink:n}=e,[r]=z();return i.jsxs("div",{children:[i.jsxs(dP,{children:[i.jsx(Xe,{children:r("to-mobile.title")}),i.jsx(Ve,{children:r("to-mobile.prompt")})]}),i.jsx(Ed,{onSubmit:n,labelContinue:r("to-mobile.btn-submit"),defaultCountry:t})]})}function mP(e){f.useEffect(()=>{e.autofillForm("phone-number",j.inquiryParams,e.submittedValues)},[]);const[t]=z(),{error:n,callback:r}=vt(async o=>{const a=o["phone-number"],{inquiry:s}=e,c={attributes:{"phone-number":a},id:s.id,type:s.type};e.savePhoneNumber(a),await ne.postResourceAction(c,"sms-one-time-link"),ee.logAmplitude("one-time-link.sent",{method:"sms"}),j.onEvent(Pe.OneTimeLinkSent,{method:"sms"}),e.history.push("/verify/device-handoff/sms/sent")},[e.inquiry,e.history]);return At({error:n,onError:o=>{var a;o.status===409?e.showMessage(t("errors.inquiry-conflict")):o.status===400&&((a=o.errors)==null?void 0:a[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))},onNetworkError:()=>e.showMessage(t("errors.network"))}),i.jsx(uP,{defaultCountry:e.defaultCountry,handleSmsOneTimeLink:r})}function hP(e){return{defaultCountry:e.locale.localeInfo.country_code,inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues}}const pP={autofillForm:La,savePhoneNumber:Qs,showMessage:ae},fP=Te(hP,pP),gP=fP(mP),bP=b("div").withConfig({displayName:"VerifyDeviceHandoffSmsSentView__Header",componentId:"sc-1z04rs5-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function CP(e){const t=Dl(e.phoneNumber,"National"),[n]=z(),[r,{enable:o}]=rt(),a=()=>{r||(e.resendOneTimeLink(),o())};return i.jsxs("div",{children:[i.jsxs(bP,{children:[i.jsx(Xe,{children:n("mobile-sent.title")}),i.jsx(Ve,{children:i.jsx(Pn,{i18nKey:"mobile-sent.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{phoneNumber:t}})})]}),i.jsx(Ye,{"aria-label":"SMS pictograph",children:i.jsx(pe,{children:i.jsx(Es,{})})}),i.jsx(Ve,{children:i.jsxs(Pn,{i18nKey:"mobile-sent.resend-link",children:["Click here to",i.jsx("a",{id:"device-handoff-sms__resend-link",onClick:a,children:"resend the secure link"})]})})]})}const ah=3e3;let Hc;function xP(e){const[t]=z();f.useEffect(()=>(e.inquiry==null&&j.redirectToStart(),a(),()=>clearTimeout(Hc)),[]);const{inquiry:n,phoneNumber:r}=e,o=f.useCallback(async()=>{var s;e.clearMessages();try{const c={attributes:{"phone-number":r},id:n.id,type:n.type};await ne.postResourceAction(c,"sms-one-time-link"),e.showMessage(t("mobile-sent.resent-link"))}catch(c){c.status===400&&((s=c.errors)==null?void 0:s[0].title)==="Phone number unsubscribed"?e.showMessage(t("mobile-sent.sms-unsubscribed")):e.showMessage(t("mobile-sent.failed-to-resend"))}},[n,e.showMessage,e.clearMessages]),a=f.useCallback(async()=>{try{const s=(await ne.getResource(Zt(n.type),n.id)).data;switch(s.attributes.status){case Ce.Created:case Ce.Pending:Hc=window.setTimeout(a,ah);return;case Ce.Completed:case Ce.Approved:case Ce.NeedsReview:case Ce.Declined:case Ce.Failed:e.saveInquiry(s),e.routeToNextStep(s);return;case Ce.Expired:e.saveInquiry(void 0),e.showMessage(e.t("errors.session-expired"));return;default:ut(s.attributes.status)}}catch(s){if(s instanceof Ct)Hc=window.setTimeout(a,ah);else if(s instanceof ht&&s.status!==401)e.showMessage(t("errors.session-expired"));else throw s}},[n]);return n==null?null:i.jsx(CP,{phoneNumber:r,resendOneTimeLink:o})}function vP(e){return{inquiry:e.inquiry.inquiry,phoneNumber:e.oneTimeLink.phoneNumber}}const IP={clearMessages:Lt,showMessage:ae,saveInquiry:Pt,savePhoneNumber:Qs,routeToNextStep:zt},SP=Te(vP,IP),wP=SP(xP),yP=On()(wP);function _P(e){const[t]=z();return i.jsx(Cl,{handleCapture:e.handleCapture,handleError:e.handleError,labelTakePhoto:t("documents.capture.btn-take-photo"),videoConstraints:e.videoConstraints})}function RP(e){const{inquiry:t,documentConfigs:n,videoConstraints:r,history:o}=e,a=parseInt(e.match.params.documentNumber,10),s=n[a],[c]=z();if(f.useEffect(()=>{if(t==null){j.redirectToStart();return}},[]),t==null)return null;const l=async(d,m)=>{e.saveCaptureMethod(m),d=d.filter(p=>p!=null);const h=d[d.length-1];ee.logAmplitude("document.camera.capture",{imageSize:h.length});try{e.uploadFile({filename:`${s.kind}_live_captured.jpg`,fileType:"image/jpeg",dataUrl:h}),e.history.replace(Li(a,Dt.Check))}catch(p){u(p,"capture")}},u=(d,m)=>{m==="capture"&&e.showMessage(c("documents.capture.failed-screenshot")),d instanceof Error?(me(d,"error",{state:m},{jira:"PER-10182"}),m==="load"&&(j.onEvent(Pe.LoadCameraFailed,{error:d.name,message:d.message}),o.push("/verify/support/camera"))):($e(d,"error",{state:m},{jira:"PER-10182"}),m==="load"&&(j.onEvent(Pe.LoadCameraFailed,{message:d}),o.push("/verify/support/camera")))};return i.jsx(_P,{handleCapture:l,handleError:u,videoConstraints:r})}const AP=e=>({inquiry:e.inquiry.inquiry,documentConfigs:Da(e),videoConstraints:e.document.videoConstraints}),TP={saveCaptureMethod:mr,showMessage:ae,uploadFile:tc},EP=Te(AP,TP),kP=EP(RP),NP=b("div").withConfig({displayName:"ConfirmFileUploadView__Header",componentId:"sc-1frnc05-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),jP=b("div").withConfig({displayName:"ConfirmFileUploadView__ConfirmFileContainer",componentId:"sc-1frnc05-1"})(["background-color:",";border-radius:",";margin-bottom:","px;min-height:80px;padding:0px ","px;display:flex;flex-direction:row;justify-content:start;align-items:center;"],Le.gray4,dn.rounded,L.base*8,L.base*2),PP=b.div.withConfig({displayName:"ConfirmFileUploadView__IconContainer",componentId:"sc-1frnc05-2"})(["margin-right:","px;display:flex;"],L.base),DP=b("div").withConfig({displayName:"ConfirmFileUploadView__FileNameContainer",componentId:"sc-1frnc05-3"})(["color:",";font-weight:",";word-break:break-all;"],Le.black,an.semiBold),OP=b(ge).withConfig({displayName:"ConfirmFileUploadView__ButtonContinue",componentId:"sc-1frnc05-4"})(["margin-bottom:","px;"],L.base*4),LP=b("div").withConfig({displayName:"ConfirmFileUploadView__Minify",componentId:"sc-1frnc05-5"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function Ob(e){const{fileName:t,isProcessing:n}=e,[r]=z();return i.jsxs("div",{children:[i.jsxs(NP,{children:[i.jsx(Xe,{children:r("confirm-file-upload.title")}),i.jsx(Ve,{children:r("confirm-file-upload.prompt")})]}),i.jsxs(jP,{children:[i.jsx(PP,{children:i.jsx(pe,{children:i.jsx(Ps,{})})}),i.jsx(DP,{children:t})]}),i.jsx(OP,{buttonType:Z.Primary,disabled:n,onClick:e.handleContinue,"data-test":"confirm-file-upload__continue",children:n?i.jsxs("span",{children:[r("confirm-file-upload.uploading"),i.jsx(LP,{children:i.jsx(er,{})})]}):r("confirm-file-upload.btn-submit")}),i.jsx(Ve,{children:i.jsxs(Pn,{i18nKey:"confirm-file-upload.or-retry",children:["Or",i.jsx("a",{id:"confirm-file-upload__upload-link",onClick:e.handleRetry,children:"upload a new file"})]})})]})}function Lb(e){return i.jsx(oc,{src:e.src,style:{imageOrientation:"from-image"}})}const FP=b("div").withConfig({displayName:"VerifyDocumentsCheckView__Header",componentId:"sc-1fs6ydv-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),MP=b("div").withConfig({displayName:"VerifyDocumentsCheckView__ImagePositioner",componentId:"sc-1fs6ydv-1"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],L.base*2),VP=b("div").withConfig({displayName:"VerifyDocumentsCheckView__Minify",componentId:"sc-1fs6ydv-2"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function BP(e){const{currentUpload:t,isProcessing:n,handleContinue:r,handleRetry:o}=e,[a]=z();return Do.includes(t.fileType)?i.jsxs("div",{children:[i.jsxs(FP,{children:[i.jsx(Xe,{children:a("documents.check.title")}),i.jsx(Ve,{children:a("documents.check.prompt")})]}),i.jsx(MP,{children:i.jsx(Lb,{src:t.dataUrl,alt:"upload preview"})}),i.jsxs(mt,{children:[i.jsx(ge,{id:"documents-check__use-image",buttonType:Z.Primary,disabled:n,onClick:r,"data-test":"documents-check__continue",children:n?i.jsxs("span",{children:[a("documents.check.uploading"),i.jsx(VP,{children:i.jsx(er,{})})]}):a("documents.check.btn-submit")}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"documents-check__retake",buttonType:Z.Secondary,disabled:n,onClick:o,"data-test":"documents-check__retake",children:a("documents.check.btn-retake")})]})]}):i.jsx(Ob,{fileName:t.filename,isProcessing:n,handleContinue:r,handleRetry:o})}function UP(e){const{inquiry:t,currentStepName:n,documentConfigs:r,fileToUpload:o,forcedStatus:a}=e,s=parseInt(e.match.params.documentNumber,10),[c]=z();f.useEffect(()=>{if(t==null){j.redirectToStart();return}e.fileToUpload||(e.showMessage(c("errors.network")),e.history.goBack())},[]);const{error:l,loading:u,callback:d}=vt(async()=>{e.clearMessages(),o.dataUrl.length>Us&&e.showMessage(Do.includes(o.fileType)?c("documents.check.large-image-upload"):c("documents.check.large-file-upload")),await e.createDocumentGenericWithVerification({stepName:n,documentsToVerify:r,documentNumber:s,history:e.history,fileToUpload:o,t:c,forcedStatus:a})},[n,r,s,e.history,o,a]);At({error:l,onError:()=>e.showMessage(c("errors.network")),onNetworkError:()=>e.showMessage(c("errors.network"))});const m=()=>{u||(e.history.goBack(),e.clearUpload(o))};return t==null||!e.fileToUpload?null:i.jsx(BP,{currentUpload:e.fileToUpload,handleContinue:d,handleRetry:m,isProcessing:u})}const HP=e=>({inquiry:e.inquiry.inquiry,currentStepName:e.inquiry.currentStep.name,documentConfigs:Da(e),fileToUpload:Tg(e),forcedStatus:e.test.forcedStatus}),qP={clearMessages:Lt,createDocumentGenericWithVerification:Y3,showMessage:ae,clearUpload:nc},$P=Te(HP,qP),GP=$P(UP),WP=b("div").withConfig({displayName:"VerifyDocumentsFailedView__Header",componentId:"sc-t3x4k2-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function YP(e){const[t]=z();return i.jsxs(i.Fragment,{children:[i.jsxs(WP,{children:[i.jsx(Xe,{children:i.jsx(te,{children:t("documents.failed.title")})}),i.jsx(Ve,{children:i.jsx(te,{children:t("documents.failed.prompt")})})]}),i.jsx(Ye,{"aria-label":"document failed pictograph",children:i.jsx(pe,{children:i.jsx(Uh,{})})}),i.jsx(mt,{children:i.jsx(ge,{id:"document-failed__retry",buttonType:Z.Primary,onClick:e.handleRetry,children:t("documents.failed.btn-submit")})})]})}const zP=e=>{const{inquiry:t}=e,n=parseInt(e.match.params.documentNumber,10);f.useEffect(()=>{if(t==null){j.redirectToStart();return}},[]);const r=f.useCallback(()=>{e.history.replace(Li(n,Dt.Prompt))},[e.updateDocumentAtIndex,e.history]);return t==null?null:i.jsx(YP,{handleRetry:r})},KP=e=>({inquiry:e.inquiry.inquiry,documents:e.inquiry.documents}),QP={updateDocumentAtIndex:ca},ZP=Te(KP,QP),JP=ZP(zP),XP=b("div").withConfig({displayName:"VerifyDocumentsIntroView__Header",componentId:"sc-1unhl6h-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),e9=b("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentsList",componentId:"sc-1unhl6h-1"})(["margin-bottom:","px;padding:0 ","px 0 ","px;"],L.base*4,L.base,L.base),t9=b("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentsListItem",componentId:"sc-1unhl6h-2"})([""]),n9=b("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentDescription",componentId:"sc-1unhl6h-3"})(["display:flex;margin-bottom:","px;"],L.base*2),sh=b("div").withConfig({displayName:"VerifyDocumentsIntroView__IconContainer",componentId:"sc-1unhl6h-4"})(["padding:4px ","px 0 0;position:relative;"],L.base),i9=Ln(["0%{opacity:0;}100%{opacity:1;}"]),r9=Ln(["0%{opacity:1;}100%{opacity:0;}"]),o9=b(ms).withConfig({displayName:"VerifyDocumentsIntroView__AnimatedIconCircleBullet",componentId:"sc-1unhl6h-5"})(["animation:"," 0.5s ease-in;animation-fill-mode:forwards;"],r9),a9=b(HC).withConfig({displayName:"VerifyDocumentsIntroView__AnimatedIconCircleChecked",componentId:"sc-1unhl6h-6"})(["animation:"," 0.5s ease-in;position:absolute;transform:translate(-100%,0);path{transition-duration:150ms;stroke:",";}"],i9,Le.green100),s9=b("div").withConfig({displayName:"VerifyDocumentsIntroView__DocumentExample",componentId:"sc-1unhl6h-7"})(["display:flex;padding-left:","px;margin-bottom:","px;"],L.base*3,L.base*2);function c9(e){const{handleContinue:t,isLoading:n,isProcessing:r,introScreenConfig:o,documentConfigs:a}=e,[s]=z();return f.useEffect(()=>{a.length===0&&$e("Unexpected empty list of required documents in step config")},[]),i.jsxs("div",{children:[i.jsxs(XP,{children:[i.jsx(Xe,{children:(o==null?void 0:o.title)||s("documents.intro.title")}),i.jsx(Ve,{children:(o==null?void 0:o.prompt)||s("documents.intro.prompt")})]}),i.jsx(e9,{children:a.map((c,l)=>{var u;return i.jsxs(t9,{children:[i.jsxs(n9,{children:[i.jsx(sh,{children:c.submitted?i.jsxs(i.Fragment,{children:[i.jsx(o9,{}),i.jsx(a9,{})]}):i.jsx(ms,{})}),i.jsx("p",{children:c.description})]}),(u=c.examples)==null?void 0:u.map((d,m)=>i.jsxs(s9,{children:[i.jsx(sh,{children:i.jsx(ms,{})}),i.jsx("p",{children:d})]},`${c.kind}-${l}-example-${m}`))]},`${c.kind}-${l}`)})}),i.jsx(mt,{children:i.jsx(ge,{id:"documents.intro__button--select",buttonType:Z.Primary,onClick:t,disabled:r||n,isPending:r||n,children:s("documents.intro.btn-submit")})})]})}function l9(e){const{inquiry:t,documentConfigs:n,introScreenConfig:r,skipIntroScreen:o}=e,[a]=z();f.useEffect(()=>{if(t==null){j.redirectToStart();return}if(n!=null&&(n.length===1||o)){e.history.replace(Li(0,Dt.Prompt));return}},[]);const{loading:s}=Ur({loader:e.loadDocumentsForInquiry,deps:[],onError:()=>e.showMessage(a("errors.network")),onNetworkError:()=>e.showMessage(a("errors.network"))}),[c,l]=f.useState(!1);if(t==null||n!=null&&(n.length===1||o))return null;const u=()=>{l(!0);const d=n.findIndex(m=>!m.submitted);e.history.push(Li(d,Dt.Prompt))};return i.jsx(c9,{handleContinue:u,isProcessing:c,isLoading:s,introScreenConfig:r,documentConfigs:n})}function d9(e){return{inquiry:e.inquiry.inquiry,documentConfigs:Da(e),introScreenConfig:TA(e),skipIntroScreen:EA(e)}}const u9={loadDocumentsForInquiry:kv,showMessage:ae},m9=Te(d9,u9),h9=m9(l9),p9=b("div").withConfig({displayName:"VerifyDocumentsPendingView__Container",componentId:"sc-17xf5u9-0"})(["",""],e=>e.asOverlay&&$(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),f9=b("div").withConfig({displayName:"VerifyDocumentsPendingView__Header",componentId:"sc-17xf5u9-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),g9=b("div").withConfig({displayName:"VerifyDocumentsPendingView__AnimationContainer",componentId:"sc-17xf5u9-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function b9({asOverlay:e=!1}){const[t]=z();return i.jsxs(p9,{asOverlay:e,children:[!e&&i.jsxs(f9,{children:[i.jsx(Xe,{children:t("documents.pending.title")}),i.jsx(Ve,{children:t("documents.pending.description")})]}),i.jsx(g9,{children:i.jsx(Oo,{icon:"document"})})]})}function C9(e){const{inquiry:t,currentStepName:n,documentConfigs:r,documents:o,forcedStatus:a}=e,s=parseInt(e.match.params.documentNumber,10),c=o[s],[l]=z(),{processingDisplayStyle:u}=f.useContext(Ze),d=u===Ea.Overlay;return f.useEffect(()=>{if(t==null||c==null){j.redirectToStart();return}(async()=>{try{await e.pollDocumentAndSubmitVerification({document:c,stepName:n,documentsToVerify:r,documentNumber:s,history:e.history,forcedStatus:a})}catch{e.showMessage(l("errors.network"),!0)}})()},[]),t==null||c==null?null:i.jsx(b9,{asOverlay:d})}const x9=e=>({inquiry:e.inquiry.inquiry,currentStepName:e.inquiry.currentStep.name,documentConfigs:Da(e),documents:e.inquiry.documents,forcedStatus:e.test.forcedStatus}),v9={pollDocumentAndSubmitVerification:fg,routeToNextStep:zt,showMessage:ae},I9=Te(x9,v9),S9=I9(C9);var ai=(e=>(e.WebCamera="web_camera",e.MobileCamera="mobile_camera",e.Upload="upload",e.ToMobile="to_mobile",e))(ai||{});const w9=(e,t,n)=>{const r=n&&(e==null?void 0:e.includes(ai.WebCamera));return[{option:ai.WebCamera,condition:r},{option:ai.MobileCamera,condition:!r&&t},{option:ai.Upload,condition:!0},{option:ai.ToMobile,condition:!t}].filter(o=>o.condition&&(e==null?void 0:e.includes(o.option))).map(o=>o.option)},y9=["application/pdf","image/jpeg","image/png","image/heic"],_9=b("div").withConfig({displayName:"VerifyDocumentsPromptView__Container",componentId:"sc-ertrmr-0"})([""]),R9=b("div").withConfig({displayName:"VerifyDocumentsPromptView__Header",componentId:"sc-ertrmr-1"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]),A9=b.div.withConfig({displayName:"VerifyDocumentsPromptView__CaptureOptionsContainer",componentId:"sc-ertrmr-2"})(["width:100%;"]),qc=b(ge).withConfig({displayName:"VerifyDocumentsPromptView__OptionButton",componentId:"sc-ertrmr-3"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],S.Spacing[4]),T9=b(Fr).withConfig({displayName:"VerifyDocumentsPromptView__ImgCamera",componentId:"sc-ertrmr-4"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),E9=b("div").withConfig({displayName:"VerifyDocumentsPromptView__DocumentExampleList",componentId:"sc-ertrmr-5"})(["margin:"," 0 "," 0;padding:0 "," 0 ",";"],S.Spacing[4],S.Spacing[6],S.Spacing[2],S.Spacing[2]),k9=b("div").withConfig({displayName:"VerifyDocumentsPromptView__DocumentExample",componentId:"sc-ertrmr-6"})(["display:flex;margin-bottom:",";"],S.Spacing[4]),N9=b("div").withConfig({displayName:"VerifyDocumentsPromptView__IconContainer",componentId:"sc-ertrmr-7"})(["padding:4px "," 0 0;position:relative;"],S.Spacing[2]),j9=b(Yt).withConfig({displayName:"VerifyDocumentsPromptView__StyledCustomizablePictograph",componentId:"sc-ertrmr-8"})(["width:100%;"]),P9=e=>{const{documentConfig:t}=e,[n]=z(),{documentPictographPosition:r}=f.useContext(Ze);if(t==null)return null;const o=t.examples!=null&&t.examples.length>0,a=!o&&i.jsx(Ye,{height:null,width:null,"aria-label":"document pictograph",children:i.jsx(j9,{url:"documentPictographUrl",height:"documentPictographHeight",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(Ml,{height:80,width:"100%"})})})});return i.jsxs(_9,{children:[r===Gt.Start&&a,i.jsxs(R9,{children:[i.jsx(Xe,{children:t.title||n("documents.prompt.title")}),i.jsx(Ve,{children:i.jsx(te,{children:t.prompt||n("documents.prompt.prompt")})}),o&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),i.jsx("p",{children:n("documents.prompt.examples-prompt",{count:t.examples.length})}),i.jsx(E9,{children:t.examples.map((s,c)=>i.jsxs(k9,{"data-test":"documents-prompt__documents-example",children:[i.jsx(N9,{children:i.jsx(ms,{})}),i.jsx(te,{children:s})]},`${s}-${c}`))})]})]}),r===Gt.Center&&a,i.jsx(mt,{children:i.jsx(D9,{...e})}),t.optional&&i.jsx(Ve,{children:i.jsxs(Pn,{i18nKey:"documents.prompt.or-skip",children:["Or click",i.jsx("a",{id:"document-prompt__skip",onClick:e.handleSkipDocument,children:"here to skip this document"}),"."]})})]})},D9=e=>i.jsx(A9,{id:"document-prompt__view",children:e.allowedCaptureOptions.map((t,n)=>i.jsx(O9,{isPrimary:n===0,option:t,...e},t))});function O9(e){const{handleDrop:t,handleDropRejected:n,handleSelectCamera:r,handleInputCapture:o,isProcessing:a,documentPromptCaptureButton:s,option:c,handleDeviceHandoff:l}=e,{getRootProps:u,getInputProps:d}=Ia({accept:y9,onDrop:t,onDropRejected:n,multiple:!1,disabled:a!=null}),[m]=z();switch(c){case ai.WebCamera:return i.jsx(qc,{id:"document-prompt__button--web-camera",buttonType:Z.Primary,disabled:a!=null,onClick:r,isPending:a===it.SelectCamera,children:i.jsx(ch,{content:s})});case ai.MobileCamera:return i.jsx(Lo,{id:"document-prompt__button--mobile-camera","data-test":"document-prompt__button--mobile-camera",buttonType:Z.Primary,disabled:a!=null,handleSelectImage:o,isPending:a===it.UploadImage,children:i.jsx(ch,{content:s})});case ai.Upload:return i.jsxs(qc,{id:"document-prompt__button--upload",buttonType:e.isPrimary?Z.Primary:Z.Secondary,disabled:a!=null,isPending:a===it.UploadImage,...u(),children:[i.jsx("input",{...d(),"data-test":"document-prompt__view--file-upload","data-cy":"file-upload"}),m("documents.prompt.upload")]});case ai.ToMobile:return i.jsx(qc,{id:"document-prompt__button--to-mobile","data-test":"document-prompt__button--to-mobile",buttonType:e.isPrimary?Z.Primary:Z.Secondary,disabled:a!=null,onClick:l,isPending:a===it.DeviceHandoff,children:m("documents.prompt.btn-continue-on-device")});default:ut(c)}}const ch=({content:e})=>e?i.jsx("span",{children:e}):i.jsx(T9,{"data-test":"document-prompt__image--camera"});function L9(e){const{inquiry:t,template:n,documentConfigs:r,enabledCaptureOptions:o,hasCamera:a,featureFlags:s}=e,c=parseInt(e.match.params.documentNumber,10),[l,u]=f.useState(void 0),[d,m]=f.useState([]),[h]=z(),p=Jn();f.useEffect(()=>{if(t==null||n==null){j.redirectToStart();return}},[]),f.useEffect(()=>{if(a==null)e.checkCamera();else{const _=w9(o,p,a);m(_),_.length===1&&_[0]===ai.ToMobile&&e.history.replace("/verify/device-handoff/prompt")}},[a]);const g=f.useCallback(async()=>{e.clearMessages(),u(it.SelectCamera),e.saveCaptureMethod(bt.Auto);try{const _=jg({facingMode:js()});e.setVideoConstraints(_),await Dn.prepare({video:_},s),e.history.push(Li(c,Dt.TakePhoto))}catch{e.showMessage(h("documents.prompt.failed-video")),u(void 0)}},[c]),C=f.useCallback(()=>{e.clearMessages(),e.showMessage(h("documents.prompt.failed-select-image")),u(void 0)},[]),I=f.useCallback(async([_])=>{e.clearMessages(),u(it.UploadImage),e.saveCaptureMethod(bt.Upload);try{const T=await wo(_);e.uploadFile({filename:_.name,fileType:_.type,dataUrl:T}),e.history.push(Li(c,Dt.Check))}catch(T){switch(T.name){case"NotReadableError":e.showMessage(h("documents.prompt.failed-select-image-permissions"));break;default:e.showMessage(h("documents.prompt.failed-select-image"))}u(void 0)}},[c]),v=()=>{l==null&&(e.clearMessages(),u(it.DeviceHandoff),e.history.push("/verify/device-handoff/prompt"))},x=f.useCallback(_=>{e.clearMessages(),u(it.UploadImage),ee.logAmplitude("document.camera.upload",{method:"input_capture",files:[{name:_==null?void 0:_.name,type:_==null?void 0:_.type,size:_==null?void 0:_.size}]}),I([_])},[I]),R=f.useCallback(()=>{e.routeToNextStepFromDocument(t,r,c)},[t,c]);return t==null||n==null||d.length===1&&d[0]===ai.ToMobile?null:i.jsx(P9,{documentConfig:r[c],documentPromptCaptureButton:n.attributes["document-prompt-capture-button"],isProcessing:l,handleDrop:I,handleDropRejected:C,handleSelectCamera:g,handleInputCapture:x,handleDeviceHandoff:v,handleSkipDocument:R,allowedCaptureOptions:d})}const F9=e=>{var t;return{inquiry:e.inquiry.inquiry,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",documentConfigs:Da(e),enabledCaptureOptions:(t=ac(e))==null?void 0:t["enabled-capture-options"],hasCamera:e.ui.hasCamera,featureFlags:e.inquiry.featureFlags}},M9={clearMessages:Lt,routeToNextStepFromDocument:Dd,saveCaptureMethod:mr,setVideoConstraints:cg,showMessage:ae,uploadFile:tc,checkCamera:Mr},V9=Te(F9,M9),B9=V9(L9),U9=b("div").withConfig({displayName:"PinInput__Container",componentId:"sc-1kcot7q-0"})(["display:flex;justify-content:space-between;position:relative;margin-left:-","px;margin-right:-","px;direction:ltr;"],L.base,L.base),H9=b(Ki).withConfig({displayName:"PinInput__HiddenInput",componentId:"sc-1kcot7q-1"})(["background:transparent !important;border-color:transparent !important;box-shadow:none !important;caret-color:transparent;color:transparent !important;position:absolute;left:0;right:0;top:0;bottom:0;&::selection{color:transparent;}"]),q9=Ln(["49%{color:",";}50%{color:transparent;}99%{color:transparent;}100%{color:",";}"],Le.gray100,Le.gray100),$9=b(Ki).withConfig({displayName:"PinInput__CodeInput",componentId:"sc-1kcot7q-2"})(["text-align:center;margin-left:","px;margin-right:","px;",";",";"],L.base,L.base,e=>e.isFocused&&$(["border-color:",";color:",";box-shadow:0 0 0 1px ",";"],e.theme.colorPrimary,Le.gray100,e.theme.colorPrimary),e=>e.isCursor&&$(["animation-name:",";animation-duration:1s;animation-iteration-count:infinite;"],q9)),G9=({id:e,"data-test":t,allowsLetters:n=!1,autoFocus:r=!1,codeLength:o=Id,disabled:a=!1,name:s,value:c="",handleSubmitCode:l=()=>{},onChange:u,refHiddenInput:d})=>{const[m,h]=f.useState(r),p=$c(c,{allowsLetters:n,codeLength:o});d!=null||(d=f.createRef());const g=()=>{d.current.selectionStart=d.current.selectionEnd=p.length},C=()=>{h(!0)},I=()=>{h(!1)},v=R=>{u($c(R.target.value,{allowsLetters:n,codeLength:o}))},x=R=>{const _=R.clipboardData||window.clipboardData;if(!_)return;const T=$c(_.getData("text"),{allowsLetters:n,codeLength:o});new RegExp(`\\d{${o}}`).test(T)&&(u(T),l({"confirmation-code":T}))};return i.jsxs(U9,{"data-test":t,children:[i.jsx(H9,{id:e,autoComplete:"no-autocomplete",autoFocus:r,name:s,ref:d,value:p,onBlur:I,onChange:v,onFocus:C,onKeyDown:g,onPaste:x}),fp(o).map(R=>{const _=m&&Math.min(p.length,o-1)===R,T=p.charAt(R),E=T!==""?T:_?"|":"";return i.jsx($9,{disabled:a,isCursor:T==="",isFocused:_,maxLength:1,onChange:()=>{},tabIndex:-1,type:"tel",value:E},R)})]})};function $c(e,{allowsLetters:t,codeLength:n}){return e.trim().toUpperCase().replace(t?/[^0-9-A-Z]/g:/[^0-9-]/g,"").replace(/[-]/g,r=>(r.charCodeAt(0)-65296).toString()).substring(0,n)}const W9=b("div").withConfig({displayName:"PinInputField__Container",componentId:"sc-16jlhqo-0"})(["display:flex;align-items:center;margin-bottom:","px;"],L.base*2),Y9=b("div").withConfig({displayName:"PinInputField__FormError",componentId:"sc-16jlhqo-1"})(["",";"],No);function z9(e){const{input:t,className:n,disabled:r,meta:{error:o,submitFailed:a,submitting:s},autoFocus:c,handleSubmitCode:l,...u}=e,d=!!(o&&a),m=f.createRef(),[h,p]=f.useState(void 0);f.useEffect(()=>{d&&t.value.length===4&&(p(o),t.onChange(""),m.current.focus())},[d]);const g=C=>{p(void 0),t==null||t.onChange(C)};return i.jsxs(i.Fragment,{children:[i.jsx(W9,{className:n,children:i.jsx(G9,{...u,...t,onChange:g,autoFocus:c,handleSubmitCode:l,disabled:r||s,refHiddenInput:m,"aria-invalid":d})}),(d||!!h)&&i.jsx(Y9,{role:"alert",children:h||o})]})}const lh={phoneConfirmationCode:[pt("Check your SMS messages for a verification code from us",vn)],emailConfirmationCode:[pt("Check your email inbox for a verification code from us",vn)]};function K9(e){const{handleSubmit:t,handleSubmitCode:n,handleResendCode:r,verificationType:o,submitting:a}=e,[s]=z();return i.jsxs("form",{onSubmit:t,children:[i.jsx(Re.Field,{disabled:a,name:"confirmation-code",className:"col-sm-12",component:z9,handleSubmitCode:n,validate:o===y.VerificationEmailAddress?lh.emailConfirmationCode:lh.phoneConfirmationCode}),i.jsxs(mt,{children:[i.jsx(ge,{type:"submit",buttonType:Z.Primary,disabled:a,isPending:a,children:s("form.confirmation-code.btn-submit")}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"form-confirmation-code__resend-confirmation-code","data-test":"form-confirmation-code__resend-confirmation-code",buttonType:Z.Secondary,disabled:a,onClick:r,children:s("phone-number.confirm.resend-confirmation-code")})]})]})}const Fb=Re.reduxForm({form:"confirmation-code"})(K9),Q9=b("div").withConfig({displayName:"VerifyEmailAddressConfirmView__Header",componentId:"sc-1rmhsk9-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),Z9=b("div").withConfig({displayName:"VerifyEmailAddressConfirmView__FormSection",componentId:"sc-1rmhsk9-1"})(["margin-bottom:","px;"],L.base*4);function J9(e){const{handleResendCode:t,handleSubmitCode:n,verification:r}=e,[o]=z();return i.jsxs("div",{children:[i.jsxs(Q9,{children:[i.jsx(Xe,{children:o("email-address.confirm.title")}),i.jsx(Ve,{children:o("email-address.confirm.prompt",{codeLength:r.attributes["confirmation-code"].length,emailAddress:r.attributes["email-address"]})})]}),i.jsx(Z9,{children:i.jsx(Fb,{handleSubmitCode:n,handleResendCode:t,verificationType:r.type,onSubmit:n})})]})}class X9 extends f.Component{constructor(){super(...arguments),this.handleResendCode=async()=>{const{t,verification:n}=this.props;this.props.clearMessages(),this.props.showMessage(t("email-address.confirm.resent-code")),await ne.postResourceAction(n,"email-confirmation-code")},this.handleSubmitCode=async t=>{const{t:n,verification:r}=this.props;this.props.clearMessages();try{await this.props.verificationEmailAddressSubmit(r,t,this.props.history)}catch{this.props.showMessage(n("email-address.confirm.failed"))}}}componentDidMount(){const{verification:t}=this.props;if(t==null){j.redirectToStart();return}}render(){const{verification:t}=this.props;return t==null?null:i.jsx(J9,{verification:t,handleSubmitCode:this.handleSubmitCode,handleResendCode:this.handleResendCode})}}function eD(e){return{verification:e.verification.verification}}const tD={clearMessages:Lt,verificationEmailAddressSubmit:F3,showMessage:ae},nD=Te(eD,tD),iD=nD(X9),rD=On()(iD),oD=b("div").withConfig({displayName:"VerifyEmailAddressPromptView__Header",componentId:"sc-k883p3-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),aD=b("div").withConfig({displayName:"VerifyEmailAddressPromptView__FormSection",componentId:"sc-k883p3-1"})(["margin-bottom:","px;"],L.base*4);function sD(e){const[t]=z();return i.jsxs("div",{children:[i.jsxs(oD,{children:[i.jsx(Xe,{children:t("email-address.title")}),i.jsx(Ve,{children:t("email-address.prompt.prompt")})]}),i.jsx(aD,{children:i.jsx(_d,{labelContinue:t("email-address.prompt.btn-submit"),onSubmit:e.handleSubmit})})]})}class cD extends f.Component{constructor(){super(...arguments),this.handleSubmit=async t=>{const{t:n}=this.props;this.props.clearMessages();try{await this.props.verificationEmailAddressStart(t)}catch{this.props.showMessage(n("email-address.prompt.invalid")),document.body.scrollTo(0,0)}}}componentDidMount(){const{template:t}=this.props;if(t==null){j.redirectToStart();return}}render(){const{template:t}=this.props;return t==null?null:i.jsx(sD,{handleSubmit:this.handleSubmit})}}function lD(e){return{template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"}}const dD={clearMessages:Lt,showMessage:ae,verificationEmailAddressStart:L3},uD=Te(lD,dD),mD=uD(cD),hD=On()(mD),pD=b("div").withConfig({displayName:"VerifyExitView__Header",componentId:"sc-1kpause-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),fD=b("div").withConfig({displayName:"VerifyExitView__ActionSection",componentId:"sc-1kpause-1"})(["margin-bottom:","px;"],L.base*4);function gD(e){const{handleGoBack:t,handleSubmit:n}=e,[r]=z(),{exitPictographPosition:o}=f.useContext(Ze),a=i.jsx(Ye,{"aria-label":"exit pictograph",children:i.jsx(Yt,{url:"exitPictographUrl",height:"exitPictographHeight",children:i.jsx(Kn,{})})});return i.jsxs("div",{children:[o===Gt.Start&&a,i.jsxs(pD,{children:[i.jsx(Xe,{children:r("exit.title")}),i.jsx(Ve,{children:r("exit.prompt")})]}),o===Gt.Center&&a,i.jsx(fD,{children:i.jsx(ge,{id:"exit__button--close","data-test":"exit-view__close",onClick:n,"aria-label":"close",children:r("exit.btn-submit")})}),i.jsx(Ve,{children:i.jsx(Pn,{i18nKey:"exit.or-go-back",defaults:"Or <0>click here to close</0>",components:[i.jsx("a",{id:"exit__link--back","data-test":"exit-view__back",onClick:t,href:"#",children:"click here to close"},"exit__link--back")],children:"Or click here to close"})})]})}const bD=()=>{const e=Ot(),t=ot(o=>o.inquiry.inquiry),n=()=>{e.goBack()},r=()=>{hd(),ee.logAmplitude("verify-ui.exited"),ee.logAmplitude("verify-ui.exit-view.submit-button.clicked"),j.onEvent(Pe.Exit,{inquiryId:t==null?void 0:t.id,sessionToken:ne.accessToken},{inquiry:t}),Nn(e),e.push("/widget")};return i.jsx(gD,{handleGoBack:n,handleSubmit:r})},dh={email:[pt("The email you entered is not valid",dr(yd)),pt("Enter your email address",vn)],name:pt("Please enter your name",dr(/..+/))};function CD(e){const{handleSubmit:t,pristine:n,submitting:r}=e,[o]=z();return i.jsxs("form",{onSubmit:t,children:[i.jsxs(si,{children:[i.jsx("label",{htmlFor:"name",children:o("support-prompt.name-label")}),i.jsx(Re.Field,{name:"name",component:Wu,autoComplete:"name",disabled:r,type:"text",placeholder:o("support-prompt.name"),validate:dh.name})]}),i.jsxs(si,{children:[i.jsx("label",{htmlFor:"email-address",children:o("support-prompt.email-address-label")}),i.jsx(Re.Field,{name:"email-address",component:Wu,autoComplete:"email",disabled:r,type:"email",placeholder:"you@example.com",validate:dh.email})]}),i.jsx(Re.Field,{name:"comment",component:AR,disabled:r,type:"text",rows:5,placeholder:o("support-prompt.comment")}),i.jsx(mt,{children:i.jsx(ge,{type:"submit",buttonType:Z.Primary,disabled:n||r,isPending:r,children:o("support-prompt.btn-submit")})})]})}const Mb=Re.reduxForm({form:"support-ticket"})(CD),uh=b("div").withConfig({displayName:"VerifyFailedView__Header",componentId:"sc-9nspp9-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),Ja=b("div").withConfig({displayName:"VerifyFailedView__TextDefaultCentered",componentId:"sc-9nspp9-1"})(["text-align:",";"],({theme:e})=>e.textAlign===qs.Default?"center":e.textAlign),xD=b("div").withConfig({displayName:"VerifyFailedView__SupportContent",componentId:"sc-9nspp9-2"})([""]);function vD({handleClose:e,handleSubmitTicket:t,hasSupport:n,hasCompleteButton:r,pictograph:o}){const[a]=z(),{failedPictographPosition:s}=f.useContext(Ze),c=o!=="none"&&i.jsx(Ye,{"aria-label":"failed pictograph",children:i.jsx(Yt,{url:"failedPictographUrl",height:"failedPictographHeight",children:i.jsx(Vl,{style:{width:"120px",height:"120px"}})})});return n?i.jsxs(xD,{children:[i.jsxs(uh,{children:[i.jsx(Xe,{children:i.jsx(Ja,{children:a("failed.title-support")})}),i.jsx(Ja,{children:a("failed.prompt-support")})]}),i.jsx(Mb,{onSubmit:t})]}):i.jsxs("div",{children:[s===Gt.Start&&c,i.jsxs(uh,{children:[i.jsx(Xe,{children:i.jsx(Ja,{children:a("failed.title")})}),i.jsx(Ja,{children:i.jsx(te,{children:a("failed.prompt")})})]}),s===Gt.Center&&c,r&&i.jsx(mt,{children:i.jsx(ge,{onClick:e,id:"failed__button","data-test":"failed__button",children:a("failed.btn-submit")})})]})}const mh=1e3;function ID(e){const{inquiry:t,template:n}=e,[r]=z(),o=Ot();f.useEffect(()=>{if(n==null||t==null){j.redirectToStart();return}},[]);const a=async p=>{const{inquiry:g}=e;try{const C=(await ne.getResource(w.Inquiry,g.id)).data;switch(e.saveInquiry(C),C.attributes.status){case Ce.Created:case Ce.Pending:setTimeout(()=>a(p),mh);break;case Ce.Completed:case Ce.NeedsReview:case Ce.Approved:case Ce.Declined:case Ce.Expired:case Ce.Failed:p(C);break;default:ut(C.attributes.status)}}catch(C){C instanceof Ct?setTimeout(()=>a(p),mh):me(C)}},s=async()=>new Promise(p=>a(p)),{error:c,callback:l}=vt(async()=>{const p=await s();j.onEvent(Pe.Fail,{inquiryId:p.id,referenceId:p.attributes["reference-id"],status:p.attributes.status,fields:p.attributes.fields},{inquiry:p})},[s]),{error:u,callback:d}=vt(async p=>{await ne.postResourceAction({id:t.id,type:t.type},"send-support-ticket",{meta:p}),await s(),o.push("/verify/support/sent")},[t,s]);if(At({error:c!=null?c:u,onError:()=>ae(r("support-prompt.failed")),onNetworkError:()=>ae(r("errors.network"))}),n==null||t==null)return null;const h=(t.attributes["next-step"].config||{}).pictograph;return i.jsx(vD,{handleClose:l,handleSubmitTicket:d,hasCompleteButton:vo(t),hasSupport:n.attributes["has-support"],pictograph:h})}function SD(e){return{inquiry:e.inquiry.inquiry,organization:e.inquiry.organization,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"}}const wD={saveInquiry:Pt,showMessage:ae},yD=Te(SD,wD),_D=yD(ID),RD=b("div").withConfig({displayName:"VerifyGovernmentIdCaptureView__Header",componentId:"sc-1lf35hz-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[4]),AD=b("div").withConfig({displayName:"VerifyGovernmentIdCaptureView__CameraSelect",componentId:"sc-1lf35hz-1"})(["margin-bottom:",";"],S.Spacing[2]),TD=b(Ve).withConfig({displayName:"VerifyGovernmentIdCaptureView__SelectCameraLabel",componentId:"sc-1lf35hz-2"})(["font-weight:",";"],Oa.Medium),ED=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=z(),o=bi(r,["government-id.capture.title","government-id.title"],e,t,n);return i.jsx(Xe,{children:o})},kD=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=z(),r=bi(n,["government-id.capture.prompt"],null,e,t);return i.jsx(Ve,{children:i.jsx(te,{children:r})})};function ND(e){var g;const{requiresSide:t,handleCapture:n,handleCameraChange:r,handleError:o,selectedCountryCode:a,governmentIdClass:s,selectedCamera:c,videoConstraints:l,featureFlags:u,zoomFactor:d}=e,[m]=z(),h=i.jsx(qg,{governmentIdClass:s,requiresSide:t,mirrored:l.facingMode==="user",simple:u["verify:remove-front-overlay-for-id-and-dl"]&&t===B.Front&&["id","dl"].includes(s)});let p;return t===B.BarcodePdf417?e.shouldUseMicroblink?p=i.jsx(ys,{handleCapture:n,handleError:o,labelTakePhoto:m("government-id.capture.btn-take-photo"),videoConstraints:l,requiresSide:t,governmentIdClass:e.governmentIdClass,overlay:h,zoomFactor:d}):p=i.jsx(Gg,{handleCapture:n,handleError:o,labelTakePhoto:m("government-id.capture.btn-take-photo"),videoConstraints:l,requiresSide:t,overlay:h,zoomFactor:d}):p=e.shouldUseMicroblink?i.jsx(ys,{handleCapture:n,handleError:o,labelTakePhoto:m("government-id.capture.btn-take-photo"),videoConstraints:l,overlay:h,requiresSide:t,governmentIdClass:e.governmentIdClass,zoomFactor:d}):i.jsx(Jg,{isPassport:s==="pp",handleCapture:n,handleError:o,labelTakePhoto:m("government-id.capture.btn-take-photo"),videoConstraints:l,overlay:h,zoomFactor:d}),i.jsxs("div",{children:[i.jsxs(RD,{children:[i.jsx(ED,{countryCode:a,governmentIdClass:s,governmentIdSide:t}),i.jsx(kD,{governmentIdClass:s,governmentIdSide:t})]}),e.shouldDisplayCameraSelector&&((g=e.cameraSelectOptions)==null?void 0:g.length)>1&&i.jsxs(AD,{children:[i.jsx(TD,{children:"Select Camera"}),i.jsx(Ys,{"data-test":"gov-id-capture__select-camera",value:c,onChange:r,children:e.cameraSelectOptions.map((C,I)=>i.jsx("option",{value:C.deviceId,children:`Camera ${I+1}`},C.deviceId))})]}),p]})}const jD=1e6,PD=2e3,DD=e=>{var T;const{selectedCountryCode:t,featureFlags:n,match:r,governmentIdClass:o,videoConstraints:a,cameraOptions:s,history:c}=e,l=parseInt(r.params.step,10),u=dd(e.inquiry.attributes["next-step"].config,t,o,l),d=a.deviceId,m=!!n["inquiry:show-government-id-camera-selector"],h=Ld();let p=[];s!=null&&(s.backCameras.length>0?p=s.backCameras:p=s.frontCameras);const[g]=z(),[C,I]=f.useState(!1);f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}m&&e.loadCameraOptions()},[]),f.useEffect(()=>{ba(window.location.host)?Ca(u,t,o,n)||ee.logAmplitude("government-id.microblink.unsupported-side",{currentSide:u,selectedCountryCode:t,governmentIdClass:o}):ee.logAmplitude("government-id.microblink.unsupported-browser",{host:window.location.host})},[n]);const v=async(E,V,D,O,U)=>{var F;e.updateCameraInspectionData(D),e.saveCaptureMethod(V),E=E.filter(H=>H!=null);const M=(F=p.find(H=>H.deviceId===(d==null?void 0:d.exact)))==null?void 0:F.label,Y={...m&&M!=null&&{cameraName:M},imageSizes:E.map(H=>H.length)};try{if(ee.logAmplitude("government-id.camera.capture",Y),E.some(q=>q.length>jD)){const q=[];for(const W of E)q.push(await sb(W,PD));E=q}const H=E.map((q,W)=>({filename:`photo${W+1}.jpg`,fileType:ho,dataUrl:q,captureMethod:V,captureFlow:Io.Guided}));e.uploadFiles(u,H,O,U),j.onEvent(Pe.DocumentCameraCapture),e.history.index>0?e.history.replace(Oi(l,We.Check)):e.history.push(Oi(l,We.Check))}catch(H){e.showMessage(g("government-id.capture.failed-screenshot")),$e("failed to capture screenshot","error",{error:H})}},x=(E,V)=>{V==="capture"&&e.showMessage(g("government-id.capture.failed-screenshot")),E instanceof nn?(me(E,"warning",{...E.originalError,state:V},{jira:"PER-10182"}),I(!0),V==="load"&&j.onEvent(Pe.LoadCameraFailed,{error:E.name,message:E.message})):E instanceof Error?(me(E,"error",{state:V},{jira:"PER-10182"}),V==="load"&&(j.onEvent(Pe.LoadCameraFailed,{error:E.name,message:E.message}),c.push("/verify/support/camera"))):(typeof E=="object"&&Object.prototype.hasOwnProperty.call(E,"message")?$e(E.message,"error",{...E,state:V},{jira:"PER-10182"}):$e(E,"error",{state:V},{jira:"PER-10182"}),V==="load"&&(j.onEvent(Pe.LoadCameraFailed,{message:E}),c.push("/verify/support/camera")))},R=!_n()&&ba(window.location.host)&&!C&&Ca(u,t,o,n),_=E=>{const V=E.target.value,D=p.find(U=>U.deviceId===V).label;ee.logAmplitude("government-id.camera.changed",{deviceId:V,cameraName:D}),Dn.dispose();const O={...a,deviceId:{exact:V}};Dn.prepare({video:O},n),e.setVideoConstraints(O)};return i.jsx(ND,{requiresSide:u,shouldUseMicroblink:R,shouldDisplayCameraSelector:m,featureFlags:n,selectedCountryCode:t,governmentIdClass:o,cameraSelectOptions:p,selectedCamera:(T=d==null?void 0:d.exact)!=null?T:"",handleCapture:v,handleCameraChange:_,handleError:x,videoConstraints:a,zoomFactor:h})};function OD(e){var t;return{selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],inquiry:e.inquiry.inquiry,featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,videoConstraints:e.verification.videoConstraints,cameraOptions:e.ui.cameraOptions}}const LD={updateCameraInspectionData:ef,saveCaptureMethod:mr,setVideoConstraints:So,showMessage:ae,loadCameraOptions:Hl,uploadFiles:Bs},FD=Te(OD,LD),MD=FD(DD),VD=On()(MD),BD=b("div").withConfig({displayName:"VerifyGovernmentIdCheckView__Header",componentId:"sc-73oem0-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),UD=b("div").withConfig({displayName:"VerifyGovernmentIdCheckView__ImagePositioner",componentId:"sc-73oem0-1"})(["img{display:block;margin-left:auto;margin-right:auto;max-width:100%;max-height:320px;margin-bottom:","px;}"],L.base*2),HD=b("div").withConfig({displayName:"VerifyGovernmentIdCheckView__Minify",componentId:"sc-73oem0-2"})(["display:inline;img{height:12px;margin-bottom:4px;}"]);function qD(e){const{currentUpload:t,handleContinue:n,handleRetry:r,isProcessing:o}=e,[a]=z();return["image/jpeg","image/png"].includes(t.fileType)?i.jsxs("div",{children:[i.jsxs(BD,{children:[i.jsx(Xe,{children:a("government-id.check.title")}),i.jsx(Ve,{children:a("government-id.check.prompt")})]}),i.jsx(UD,{children:i.jsx(Lb,{src:t.dataUrl,alt:"upload preview"})}),i.jsxs(mt,{children:[i.jsx(ge,{id:"government_id__use-image",buttonType:Z.Primary,disabled:o,onClick:n,"data-test":"government-id-check__continue",children:o?i.jsxs("span",{children:[a("government-id.check.uploading"),i.jsx(HD,{children:i.jsx(er,{})})]}):a("government-id.check.btn-submit")}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"government_id__retake",buttonType:Z.Secondary,disabled:o,onClick:r,"data-test":"government-id-check__retake",children:a("government-id.check.btn-retake")})]})]}):i.jsx(Ob,{fileName:t.filename,isProcessing:o,handleContinue:n,handleRetry:r})}function $D(e){const{clientExtractions:t,forcedStatus:n,governmentIdClass:r,inquiry:o,match:a,routingInputs:s,selectedCountryCode:c,uploads:l,cameraInspectionData:u}=e,d=parseInt(a.params.step,10),[m]=f.useState(()=>dd(o.attributes["next-step"].config,c,r,d)),h=l[m],p=h&&h[h.length-1];f.useEffect(()=>{const{inquiry:R}=e;if(R==null){j.redirectToStart();return}if(m==null){j.redirectToStart();return}(h==null||h.length===0||!p)&&(e.showMessage(g("errors.network")),e.history.goBack())},[]);const[g]=z(),{error:C,loading:I,callback:v}=vt(async()=>{e.clearMessages(),wa(Object.values(l)).map(_=>_.dataUrl.length).reduce((_,T)=>_+T,0)>Us&&e.showMessage(g("government-id.check.large-upload")),wv(o,c,r,d+1)?await e.verificationGovernmentIdSubmit(s,r,l,u,t,e.history,n,g):e.history.push(Oi(d+1,We.Prompt))},[l,o,c,r,d,s,t,n]);At({error:C,onError:()=>e.showMessage(g("errors.network")),onNetworkError:()=>e.showMessage(g("errors.network"))});const x=()=>{I||e.history.goBack()};return h==null||h.length===0||!p?null:i.jsx(qD,{currentUpload:p,handleContinue:v,handleRetry:x,isProcessing:I})}function GD(e){var t;return{inquiry:e.inquiry.inquiry,clientExtractions:e.verification.clientExtractions,clientExtractionSource:e.verification.clientExtractionSource,selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],forcedStatus:e.test.forcedStatus,governmentIdClass:e.verification.governmentIdClass,routingInputs:pc(e),uploads:e.verification.uploads,cameraInspectionData:e.verification.cameraInspectionData}}const WD={clearMessages:Lt,showMessage:ae,verificationGovernmentIdSubmit:H3},YD=Te(GD,WD),zD=YD($D),KD=b("div").withConfig({displayName:"VerifyGovernmentIdFailedView__Header",componentId:"sc-fi89xw-0"})(["",""],e=>e.withIcon?$(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4):$(["margin-bottom:","px;"],L.base*2)),QD=b("div").withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonSection",componentId:"sc-fi89xw-1"})(["margin-bottom:","px;"],L.base*6),ZD=b("div").withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonOption",componentId:"sc-fi89xw-2"})(["display:flex;align-items:center;margin-bottom:","px;"],L.base*2),JD=b.div.withConfig({displayName:"VerifyGovernmentIdFailedView__FailureReasonPictograph",componentId:"sc-fi89xw-3"})(["display:flex;align-items:center;flex-shrink:0;justify-content:space-around;margin-right:","px;> img,svg{height:50px;width:50px;}"],L.base*2);function XD({handleContinue:e,verification:t}){const[n]=z(),{iconStyle:r}=f.useContext(Ze),o=r!==Vr.None,a=(t.attributes["entity-confidence-reasons"]||[]).filter(c=>Object.values(ln).includes(c)),s=a.length===0?ln.Generic:a[0];return i.jsxs("div",{children:[i.jsxs(KD,{withIcon:o,children:[i.jsx(Xe,{children:i.jsx(te,{children:n("government-id.failed.title")})}),i.jsx(Ve,{children:i.jsx(te,{children:n("government-id.failed.prompt")})})]}),i.jsx(QD,{children:i.jsx(eO,{withIcon:o,failureReason:s,t:n})}),i.jsx(mt,{children:i.jsx(ge,{id:"government-id-failed__continue",buttonType:Z.Primary,onClick:e,children:n("government-id.failed.btn-submit")})})]})}const eO=({withIcon:e,failureReason:t,t:n})=>{let r,o;switch(t){case ln.BarcodeNotDetected:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.barcode-missing");break;case ln.MrzNotDetected:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.mrz-missing");break;case ln.Blurry:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.blurry");break;case ln.Glare:r=i.jsx(pe,{children:i.jsx(np,{})}),o=n("government-id.failed.failure-reasons.glare");break;case ln.PortraitMissing:r=i.jsx(pe,{children:i.jsx(Qc,{})}),o=n("government-id.failed.failure-reasons.missing-portrait");break;case ln.DoubleFrontDetected:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(Rr,{})}),o=n("government-id.failed.failure-reasons.id-back");break;case ln.DisabledIdClass:r=i.jsx(pe,{children:i.jsx(Kn,{})}),o=n("government-id.failed.failure-reasons.disabled-id-class");break;case ln.MilitaryId:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.military-id");break;case ln.Expired:r=i.jsx(pe,{children:i.jsx(Kn,{})}),o=n("government-id.failed.failure-reasons.expired");break;case ln.CornerMissing:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.corner-missing");break;case ln.SelectedCountryMismatch:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.selected-country-mismatch");break;case ln.FailedAgeComparison:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.failed-age-comparison");break;case ln.UnprocessableImage:r=i.jsx(pe,{children:i.jsx(Kn,{})}),o=n("government-id.failed.failure-reasons.unprocessable-image");break;case ln.PortraitNotClear:r=i.jsx(pe,{children:i.jsx(Qc,{})}),o=n("government-id.failed.failure-reasons.portrait-not-clear");break;case ln.Generic:r=i.jsx(pe,{vectorEffect:"initial",children:i.jsx(_i,{})}),o=n("government-id.failed.failure-reasons.generic");break;default:ut(t)}return i.jsxs(ZD,{children:[e&&i.jsx(JD,{"data-test":"government-id-failed__failure-reason-pictograph",children:r}),i.jsx(te,{children:o})]})},tO=e=>(f.useEffect(()=>{(e.inquiry==null||e.verification==null)&&j.redirectToStart()},[]),e.inquiry==null||e.verification==null?null:i.jsx(XD,{handleContinue:()=>e.routeToNextStep(e.inquiry,Nt),verification:e.verification}));function nO(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const iO={routeToNextStep:zt},rO=Te(nO,iO),oO=rO(tO),aO=b("div").withConfig({displayName:"VerifyGovernmentIdPendingView__Container",componentId:"sc-w317h0-0"})(["",""],e=>e.asOverlay&&$(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);"])),sO=b("div").withConfig({displayName:"VerifyGovernmentIdPendingView__Header",componentId:"sc-w317h0-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),cO=b("div").withConfig({displayName:"VerifyGovernmentIdPendingView__AnimationContainer",componentId:"sc-w317h0-2"})(["display:flex;justify-content:center;align-items:center;height:200px;margin-top:",";"],L.base*8);function lO({asOverlay:e=!1}){const[t]=z();return i.jsxs(aO,{asOverlay:e,children:[!e&&i.jsxs(sO,{children:[i.jsx(Xe,{children:t("government-id.pending.title")}),i.jsx(Ve,{children:t("government-id.pending.description")})]}),i.jsx(cO,{children:i.jsx(Oo,{icon:"verification"})})]})}const dO=e=>{const t=Ot(),[n]=z(),{processingDisplayStyle:r}=f.useContext(Ze),o=r===Ea.Overlay;return f.useEffect(()=>{const{verification:a,inquiry:s}=e;if(a==null||s==null){j.redirectToStart();return}(async()=>{try{await e.pollVerification({verification:a,history:t,handleFailed:c=>{const l=c.included.find(u=>u.id===c.data.relationships.inquiry.data.id);l.attributes["next-step"].type===y.VerificationGovernmentId?t.push("/verify/government-id/failed"):e.routeToNextStep(l)}})}catch{e.showMessage(n("errors.network"),!0)}})()},[]),e.verification==null?null:i.jsx(lO,{asOverlay:o})};function uO(e){return{inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const mO={pollVerification:Po,routeToNextStep:zt,showMessage:ae},hO=Te(uO,mO),pO=hO(dO),Vb=["application/pdf","image/jpeg","image/png","image/heic"],fO=b("div").withConfig({displayName:"VerifyGovernmentIdPromptView__Header",componentId:"sc-1n4u91d-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[4]),gO=({countryCode:e,governmentIdClass:t,governmentIdSide:n})=>{const[r]=z(),o=bi(r,["government-id.prompt.title","government-id.title"],e,t,n);return i.jsx(Xe,{children:o})},bO=({governmentIdClass:e,governmentIdSide:t})=>{const[n]=z(),r=bi(n,["government-id.prompt.prompt"],null,e,t);return i.jsx(Ve,{children:i.jsx(te,{children:r})})},CO=b.div.withConfig({displayName:"VerifyGovernmentIdPromptView__CaptureOptionsContainer",componentId:"sc-1n4u91d-1"})(["width:100%;"]),Gc=b(ge).withConfig({displayName:"VerifyGovernmentIdPromptView__OptionButton",componentId:"sc-1n4u91d-2"})(["margin-bottom:",";:last-of-type{margin-bottom:0;}"],S.Spacing[4]),xO=b(Fr).withConfig({displayName:"VerifyGovernmentIdPromptView__ImgCamera",componentId:"sc-1n4u91d-3"})(["vertical-align:bottom;path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary);function vO(e){return i.jsx(CO,{id:"government-id-prompt__view",children:e.enabledCaptureOptions.map((t,n)=>i.jsx(IO,{isPrimary:n===0,option:t,...e},t))})}function IO(e){const{handleSelectCamera:t,handleInputCapture:n,handleDeviceHandoff:r,isProcessing:o,documentPromptCaptureButton:a,option:s}=e,{getRootProps:c,getInputProps:l}=Ia({onDrop:e.handleDrop,multiple:!1,accept:Vb}),[u]=z(),d=o!=null;switch(s){case Cn.WebCamera:return i.jsx(Gc,{id:"government-id-prompt__button--web-camera",buttonType:Z.Primary,disabled:d,onClick:t,isPending:o===it.SelectCamera,"aria-label":a||u("government-id.prompt.btn-take-photo-label"),children:i.jsx(hh,{children:a})});case Cn.MobileCamera:return i.jsx(Lo,{buttonType:Z.Primary,disabled:d,id:"government-id-prompt__button--mobile-camera",handleSelectImage:n,isPending:o===it.UploadImage,"aria-label":a||u("government-id.prompt.btn-take-photo-label"),children:i.jsx(hh,{children:a})});case Cn.Upload:return i.jsxs(Gc,{buttonType:e.isPrimary?Z.Primary:Z.Secondary,disabled:d,...c(),children:[i.jsx("input",{...l(),"data-test":"file-upload","data-cy":"file-upload"}),u("government-id.prompt.upload")]});case Cn.DeviceHandoff:return i.jsx(Gc,{id:"government-id-prompt__button--device-handoff","data-test":"government-id-prompt__button--device-handoff",buttonType:e.isPrimary?Z.Primary:Z.Secondary,disabled:d,onClick:r,isPending:o===it.DeviceHandoff,children:u("government-id.prompt.btn-send-to-device")});default:ut(s)}}const hh=({children:e})=>e?i.jsx(i.Fragment,{children:e}):i.jsx(xO,{"data-test":"government-id-prompt__image--camera"}),Zr=b(Yt).withConfig({displayName:"VerifyGovernmentIdPromptView__StyledCustomizablePictograph",componentId:"sc-1n4u91d-4"})(["width:100%;"]),SO=({currentSide:e,governmentIdClass:t})=>{if(t==="pp")switch(e){case B.PassportSignature:return i.jsx(Zr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(cs,{height:64,width:"100%"})})});default:return i.jsx(Zr,{url:"passportFrontPictographUrl",height:"passportFrontPictographHeight","aria-label":"passport front",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(Qh,{height:80,width:"100%"})})})}switch(e){case B.Back:case B.BarcodePdf417:return i.jsx(Zr,{url:"idBackPictographUrl",height:"idBackPictographHeight","aria-label":"id back",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(Rr,{height:64,width:"100%"})})});case B.Front:return i.jsx(Zr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(_i,{height:64,width:"100%"})})});case B.FrontOrBack:return i.jsx(Zr,{url:"idFrontPictographUrl",height:"idFrontPictographHeight","aria-label":"id front",vectorEffect:"initial",children:i.jsxs(gn,{children:[i.jsx(_i,{height:48,width:"100%"}),i.jsx(Rr,{height:48,width:"100%"})]})});case B.PassportSignature:return i.jsx(Zr,{url:"passportSignaturePictographUrl",height:"passportSignaturePictographHeight","aria-label":"passport signature",vectorEffect:"initial",children:i.jsx(gn,{children:i.jsx(cs,{height:64,width:"100%"})})});default:ut(e)}},wO=e=>{const{selectedCountryCode:t,currentSide:n,governmentIdClass:r,enabledCaptureOptions:o}=e,{governmentIdPictographPosition:a}=f.useContext(Ze);if(o.length===0)return i.jsx(In,{});const s=i.jsx(Ye,{height:null,width:null,role:null,"aria-label":null,children:i.jsx(SO,{currentSide:n,governmentIdClass:r})});return i.jsxs("div",{children:[a===Gt.Start&&s,i.jsxs(fO,{children:[i.jsx(gO,{countryCode:t,governmentIdClass:r,governmentIdSide:n}),i.jsx(bO,{governmentIdClass:r,governmentIdSide:n})]}),a===Gt.Center&&s,i.jsx(mt,{children:i.jsx(vO,{...e})})]})},yO=e=>{const{currentSession:t,featureFlags:n,governmentIdClass:r,hasCamera:o,inquiry:a,selectedCountryCode:s,template:c}=e,[l,u]=f.useState(void 0),[d,m]=f.useState([]),{t:h}=z(),p=Ot(),g=Lh(),C=parseInt(g.step,10),I=f.useMemo(()=>dd(a.attributes["next-step"].config,s,r,C),[a,s,r,C]),v=!_n()&&o&&d.includes(Cn.WebCamera),x=v&&ba(window.location.host)&&Ca(I,s,r,n),R=v&&!x,_=Jn()?"basic":"advanced";f.useEffect(()=>{if(a==null){j.redirectToStart();return}},[]),f.useEffect(()=>{if(o==null)e.checkCamera();else{c.attributes["force-link-from-react-native"]&&t.relationships["parent-session"].data==null&&(ee.logAmplitude("government-id.redirect-to-mobile-for-react-native"),p.replace("/verify/device-handoff/sms"));const F=a.attributes["next-step"].config||{},H=s.toLowerCase(),q=pv(F,H,r,o);switch(q.length){case 0:p.replace("/verify/invalid/verification");break;case 1:M(q[0]);break;default:m(q)}}},[o]),f.useEffect(()=>{if(x&&!Pi.isLoaded()){const F=performance.now();Pi.preload(_).then(()=>{ee.logAmplitude("government-id.microblink.preload",{durationSeconds:(performance.now()-F)/1e3,side:I,idClass:r,microblinkModel:_})}).catch(H=>{H instanceof nn?me(H,"warning",{...H.originalError,state:"preload"},{jira:"PER-10182"}):H instanceof Error?me(H,"warning",{state:"preload"},{jira:"PER-10182"}):$e(H,"warning",{state:"preload"},{jira:"PER-10182"})})}},[x]),f.useEffect(()=>{R&&_t.loadModels()},[R]);const T=async F=>{e.clearMessages(),u(it.SelectCamera),e.saveCaptureMethod(bt.Auto);try{const H=Ng({currentSide:I,facingMode:js(),isMicroblink:x,isGovidRedesign:!1,featureFlags:n});if(n["inquiry:show-government-id-camera-selector"]&&e.loadCameraOptions(),navigator.userAgent.includes("Android")){const W=await uC(null,mC.BackFacingCamera);W&&W.label!==""&&(H.deviceId={exact:W.deviceId})}e.setVideoConstraints(H),await Dn.prepare({video:H},n),j.onEvent(Pe.DocumentCameraSelect),F(Oi(C,We.TakePhoto))}catch(H){ee.logAmplitude("government-id.camera.errored",{error:{name:H.name,message:H.message}}),j.onEvent(Pe.LoadCameraFailed,{error:H.name,message:H.message}),F("/verify/support/camera")}},E=F=>{e.clearMessages(),u(it.UploadImage),ee.logAmplitude("government-id.upload",{method:"drop",files:F.map(H=>({name:H==null?void 0:H.name,type:H==null?void 0:H.type,size:H==null?void 0:H.size}))}),V(F)?(j.onEvent(Pe.DocumentUpload),O(F[0],bt.Upload)):u(void 0)},V=F=>F.length!==1?(ee.logAmplitude("government-id.upload.invalid",{detail:"wrong number of files"}),e.showMessage(h("government-id.prompt.failed-select-image")),!1):Vb.includes(F[0].type)?!0:(ee.logAmplitude("government-id.upload.invalid",{detail:"wrong file type"}),e.showMessage(h("government-id.prompt.failed-invalid-type")),!1),D=F=>{e.clearMessages(),u(it.UploadImage),ee.logAmplitude("government-id.upload",{method:"input_capture",files:[{name:F==null?void 0:F.name,type:F==null?void 0:F.type,size:F==null?void 0:F.size}]}),O(F,bt.Manual)},O=async(F,H)=>{e.saveCaptureMethod(H);try{const q=await wo(F);e.uploadFiles(I,[{filename:F.name,fileType:F.type,dataUrl:q,captureMethod:H,captureFlow:Io.Unguided}]),p.push(Oi(C,We.Check))}catch(q){switch(ee.logAmplitude("government-id.upload.errored",{file:{type:F==null?void 0:F.type}}),q.name){case"NotReadableError":e.showMessage(h("government-id.prompt.failed-select-image-permissions"));break;case"SecurityError":e.showMessage(h("government-id.prompt.failed-select-image"));break;case"NotFoundError":default:me(q,"warning",{filename:F==null?void 0:F.name,fileType:F==null?void 0:F.type,captureMethod:H,currentSide:I}),e.showMessage(h("government-id.prompt.failed-select-image"))}u(void 0)}},U=F=>{l==null&&(e.clearMessages(),u(it.DeviceHandoff),F("/verify/device-handoff/prompt"))},M=async F=>{const{featureFlags:H}=e;switch(F){case Cn.WebCamera:H["verify:skip-gov-id-prompt-web-camera-only-by-org"]?await T(p.replace):m([F]);break;case Cn.DeviceHandoff:U(p.replace);break;case Cn.MobileCamera:case Cn.Upload:m([F]);break;default:ut(F)}};if(o==null||I==null)return null;const Y=c.attributes["document-prompt-capture-button"];return i.jsx(wO,{currentSide:I,handleDrop:E,handleSelectCamera:()=>T(p.push),handleInputCapture:D,handleDeviceHandoff:()=>U(p.push),isProcessing:l,governmentIdClass:r,enabledCaptureOptions:d,documentPromptCaptureButton:Y,selectedCountryCode:s})};function _O(e){var t;return{featureFlags:e.inquiry.featureFlags,governmentIdClass:e.verification.governmentIdClass,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",selectedCountryCode:(t=e.inquiry.inquiry)==null?void 0:t.attributes["selected-country-code"],hasCamera:e.ui.hasCamera}}const RO={clearMessages:Lt,saveCaptureMethod:mr,setVideoConstraints:So,showMessage:ae,uploadFiles:Bs,checkCamera:Mr,loadCameraOptions:Hl},AO=Te(_O,RO),TO=AO(yO),EO=b("div").withConfig({displayName:"OptionVertical__OptionBlock",componentId:"sc-uxd4q2-0"})(["display:flex;justify-content:space-between;align-items:center;cursor:pointer;",""],({verticalOptionsStyle:e})=>{switch(e){case zi.Default:return $(["padding-top:",";padding-bottom:",";padding-left:",";padding-right:",";border-bottom:1px solid ",";:first-child{border-top:1px solid ",";}:hover,:focus{background-color:",";}"],S.Spacing[4],S.Spacing[4],S.Spacing[5],S.Spacing[5],Le.gray50,Le.gray50,({theme:t})=>t.colorDropdownOption);case zi.Light:return $(["padding-top:18px;padding-bottom:18px;padding-left:0;padding-right:",";border-bottom:1px solid ",";:first-child{border-top:1px solid ",";}color:",";margin-left:",";font-weight:500;:focus-within{background-color:",";}"],S.Spacing[5],({theme:t})=>t.colorDivider,({theme:t})=>t.colorDivider,({theme:t})=>t.colorFontTitle,S.Spacing[5],({theme:t})=>t.colorDropdownOption)}}),kO=b("span").withConfig({displayName:"OptionVertical__ThemedIcon",componentId:"sc-uxd4q2-1"})(["rect[fill]:not([fill='none']){fill:",";}path[fill]:not([fill='none']){fill:",";}height:32px;margin-right:",";"],e=>e.theme.iconColorGovernmentIdType,e=>e.theme.colorModalBackground,S.Spacing[4]),NO=b("span").withConfig({displayName:"OptionVertical__Text",componentId:"sc-uxd4q2-2"})(["flex-grow:1;"]),jO=b(ge).withConfig({displayName:"OptionVertical__OptionVerticalButton",componentId:"sc-uxd4q2-3"})(["width:100%;& + &{margin-top:",";}"],S.Spacing[5]);function PO(e){const{iconStyle:t,verticalOptionsStyle:n}=f.useContext(Ze),{countryCode:r,governmentIdClass:o}=e,[a]=z();if(n===zi.Button)return i.jsx(jO,{id:`select__option--${o}`,"data-test":"option-block",onClick:()=>e.handleSelectType(o),children:bi(a,["government-id.title"],r,o)},o);let s;switch(o){case"dl":s=i.jsx(ep,{});break;case"ofw":case"pp":case"ppc":case"visa":s=i.jsx(Xh,{});break;case"id":s=i.jsx(Jh,{});break;case"rp":case"pr":default:s=i.jsx(Zh,{});break}return i.jsxs(EO,{verticalOptionsStyle:n,id:`select__option--${o}`,"data-test":"option-block",onClick:()=>e.handleSelectType(o),onKeyPress:()=>e.handleSelectType(o),tabIndex:0,role:"button",children:[t!==Vr.None&&i.jsx(kO,{"data-test":"option-vertical__pictograph","aria-hidden":!0,children:s}),i.jsx(NO,{children:bi(a,["government-id.title"],r,o)}),i.jsx($l,{"aria-hidden":!0})]},o)}const DO=b("div").withConfig({displayName:"GovernmentIdOptions__Container",componentId:"sc-1pihot-0"})(["display:flex;flex-wrap:wrap;justify-content:space-between;"]),OO=b("div").withConfig({displayName:"GovernmentIdOptions__OptionBlockPositioner",componentId:"sc-1pihot-1"})(["",";"],({theme:e})=>e.verticalOptionsStyle===zi.Button?$(["width:100%;"]):$(["margin-left:-24px;width:calc(100% + 48px);margin-right:-24px;"])),LO=b("div").withConfig({displayName:"GovernmentIdOptions__NoticeVertical",componentId:"sc-1pihot-2"})(["",";color:",";font-weight:",";margin-bottom:","px;"],({theme:e})=>e.verticalOptionsStyle===zi.Button&&$(["display:none;"]),({theme:e})=>e.colorFontTitle,an.medium,L.base),FO=b("div").withConfig({displayName:"GovernmentIdOptions__OptionsVertical",componentId:"sc-1pihot-3"})(["width:100%;flex-direction:column;margin-bottom:","px;"],L.base*4);function MO(e){const{selectedCountryCode:t,enabledIdClassesByCountryEntries:n,handleSelectType:r}=e,[o]=z();return n&&n.length>0?i.jsxs(DO,{children:[i.jsx(LO,{children:o("select.option-notice")}),i.jsx(OO,{children:i.jsx(FO,{children:n.map(a=>i.jsx(PO,{countryCode:t,handleSelectType:r,governmentIdClass:a.class},a.class))})})]}):i.jsxs(Pn,{i18nKey:"select.unsupported",children:["We are unable to verify identities in this country."," ",i.jsx("a",{id:"government-id-options__support-link",onClick:e.handleRouteToSupport,children:"Please contact us"})," ","if you dont have another form of identification."]})}const VO=b("div").withConfig({displayName:"VerifyGovernmentIdSelectView__Header",componentId:"sc-oi672g-0"})(["margin-bottom:","px;",""],L.base*4,({verticalOptionsStyle:e})=>{switch(e){case zi.Default:return $(["min-height:",";"],Be.header);case zi.Light:return}});function BO(e){const{selectedCountryCode:t,handleSelectType:n,enabledIdClassesByCountryEntries:r,hasEnabledSkipUnknown:o,showDisclaimer:a}=e,[s]=z(),{governmentIdPictographPosition:c,verticalOptionsStyle:l,governmentIdSelectPictographUrl:u}=f.useContext(Ze),d=u?i.jsx(Ye,{"aria-label":"government id prompt",children:i.jsx(Yt,{url:"governmentIdSelectPictographUrl",height:"governmentIdSelectPictographHeight","aria-label":"government id prompt picture"})}):null;return i.jsxs("div",{children:[c===Gt.Start&&d,i.jsxs(VO,{verticalOptionsStyle:l,children:[i.jsx(Xe,{children:s("select.title")}),i.jsx(Ve,{children:s("select.prompt")})]}),c===Gt.Center&&d,i.jsx(MO,{selectedCountryCode:t,enabledIdClassesByCountryEntries:r,handleRouteToSupport:e.handleRouteToSupport,handleSelectType:n}),o&&i.jsx(Ve,{children:i.jsx(Pn,{i18nKey:"select.or-other-identity-card",defaults:"Dont see your ID above? <0/><1>Click here to upload another document.</1>",components:[i.jsx("br",{},0),i.jsx("a",{id:"verify-government-id-select__other-identity-card",onClick:()=>n(void 0),children:"Click here to upload another ID."},1)],children:"Dont see your ID above? Click here to upload another document."})}),a&&i.jsx(_s,{})]})}function UO(e){var u,d,m,h;const{inquiry:t,template:n}=e,r=t?(u=t.attributes["selected-country-code"])!=null?u:t.attributes["country-code"]:null;let o=[],a=!1,s=!0;if(t!=null&&r!=null){const p=t.attributes["next-step"].config||{};o=(m=((d=p["enabled-id-classes-by-country"])!=null?d:{})[r.toLowerCase()])!=null?m:[],a=(h=p["enabled-skip-unknown"])!=null?h:!1,p.disclaimer===Yp.None&&(s=!1)}if(f.useEffect(()=>{if(n==null||t==null){j.redirectToStart();return}!a&&o&&o.length===1&&c(o[0].class,!0)},[]),n==null||t==null)return null;function c(p,g=!1){e.selectGovernmentIdClass(p),g?e.history.replace(Oi(0,We.Prompt)):e.history.push(Oi(0,We.Prompt))}function l(){e.history.push("/verify/support/prompt")}return i.jsx(BO,{selectedCountryCode:r,enabledIdClassesByCountryEntries:o,hasEnabledSkipUnknown:a,handleRouteToSupport:l,handleSelectType:c,showDisclaimer:s})}function HO(e){return{inquiry:e.inquiry.inquiry,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",theme:e.inquiry.theme}}const qO={selectGovernmentIdClass:sd},$O=Te(HO,qO),GO=$O(UO);var Bb=(e=>(e.New="new",e.Active="active",e.Deactivated="deactivate",e))(Bb||{});const WO=b(oc).withConfig({displayName:"OrganizationLogo",componentId:"sc-alxtof-0"})(["display:block;margin-top:","px;margin-bottom:","px;height:",";width:",";object-fit:contain;"],L.base*2,L.base*2,e=>e.theme.logoWidth?"unset":e.theme.logoHeight||"100%",e=>e.theme.logoWidth||"100%");var Xo=(e=>(e.None="none",e.Checkbox="checkbox",e.Default="default",e.Biometric="biometric",e))(Xo||{});const ph=b("div").withConfig({displayName:"VerifyIntroView__Header",componentId:"sc-msfdyj-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),YO=e=>{const{template:t,theme:n}=e,r=t.attributes["intro-disclaimer"],[o]=z(),[a,s]=f.useState(!1),[c,l]=f.useState(!1),u=a||r===Xo.Checkbox&&!c,d=f.useCallback(()=>{s(!0),e.handleSubmit().catch(()=>s(!1))},[e.handleSubmit]),m=n.attributes["logo-url"];return r===Xo.Biometric?i.jsxs("div",{children:[i.jsxs(ph,{children:[i.jsx(fh,{logoUrl:m,t:o}),i.jsx(gh,{t:o})]}),i.jsxs(mt,{children:[i.jsx(_s,{useBipaTranslation:!0}),i.jsx(ge,{id:"intro__button--start",buttonType:Z.Primary,disabled:u,isPending:a,onClick:d,children:o("intro.btn-submit")})]}),i.jsx(Ch,{template:t})]}):i.jsxs("div",{children:[i.jsxs(ph,{children:[i.jsx(fh,{logoUrl:m,t:o}),i.jsx(gh,{t:o})]}),r===Xo.Checkbox&&i.jsx(M2,{checked:c,onChange:l}),i.jsxs(mt,{children:[i.jsx(ge,{id:"intro__button--start",buttonType:Z.Primary,disabled:u,isPending:a,onClick:d,children:o("intro.btn-submit")}),r===Xo.Default?i.jsxs(i.Fragment,{children:[i.jsx(_s,{}),i.jsx(Je,{height:4})]}):i.jsx(Je,{height:7})]}),i.jsx(Ch,{template:t})]})},fh=({logoUrl:e,t})=>e?i.jsx(WO,{alt:"logo",src:e}):i.jsx(Xe,{children:t("intro.title")}),gh=({t:e})=>i.jsx(Ve,{children:i.jsx(te,{children:e("intro.prompt")})}),zO=b(eg).withConfig({displayName:"VerifyIntroView__StyledFooter",componentId:"sc-msfdyj-1"})(["flex-direction:row;background-color:",";padding-bottom:","px;"],({theme:e})=>e.colorFooterBackground,L.base),KO=b("div").withConfig({displayName:"VerifyIntroView__LanguageWrapper",componentId:"sc-msfdyj-2"})(["position:relative;display:flex;align-items:center;select{appearance:none;background-color:transparent;color:",";font-size:",";margin:-","px;padding:","px;padding-right:","px;&:focus-visible{outline:"," auto 1px;}}&::after{",";height:0;width:0;pointer-events:none;right:0;}"],S.Color.CoreSlate600,$t.h4,L.base,L.base,L.base*2,({theme:e})=>e.colorPrimary,Ws),QO=b("div").withConfig({displayName:"VerifyIntroView__GlobeSpacer",componentId:"sc-msfdyj-3"})(["padding-right:4px;svg{display:block;}"]),ZO=b("div").withConfig({displayName:"VerifyIntroView__Wordmark",componentId:"sc-msfdyj-4"})(["padding-top:8px;margin-bottom:-3px;float:right;"]),bh="persona-branding-title",Ch=({template:e})=>{const[t,n]=z(),r=e.attributes["enabled-locales"];let o=i.jsx("div",{});return r.length!==1&&(o=i.jsxs(KO,{children:[i.jsx(QO,{children:i.jsx(Sp,{})}),i.jsx("select",{"aria-label":t("intro.language-select-label"),"data-test":"footer__language-selector",dir:"ltr",onChange:a=>JO(n,a,e.attributes["custom-translations"]||[]),defaultValue:n.language,children:Object.keys(Tr).filter(a=>r.length===0||r.includes(a)).map(a=>i.jsx("option",{value:a,children:Tr[a]},a))})]})),i.jsxs(zO,{children:[o,i.jsx(ZO,{children:i.jsxs("svg",{role:"img",width:"82",height:"29",viewBox:"0 0 82 29",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":bh,children:[i.jsx("title",{id:bh,children:t("intro.persona-logo-label")}),i.jsxs("g",{clipPath:"url(#clip0)",children:[i.jsx("path",{d:"M0 18.3669C0 15.3419 2.214 13.0828 5.3464 13.0828C8.4542 13.0828 10.7338 15.3419 10.7338 18.4087C10.7338 21.4132 8.53702 23.651 5.2398 23.651H2.6937V27.6296C2.6937 27.7748 2.6732 27.7936 2.5297 27.7936H0.164C0.01886 27.7936 0 27.7731 0 27.6296V18.3669ZM8.0401 18.3874C8.0401 16.79 7.04544 15.5699 5.3464 15.5699C3.6244 15.5699 2.6937 16.7925 2.6937 18.3669V21.1647H5.24226C7.04544 21.1647 8.0401 19.9831 8.0401 18.3874Z",fill:"#696A7B"}),i.jsx("path",{d:"M18.5738 13.0828C15.4029 13.0828 13.1446 15.4034 13.1446 18.5325C13.1446 21.496 15.1749 23.8584 18.7395 23.8584C20.1072 23.8584 21.4127 23.5058 22.3475 22.7596C22.3649 22.7447 22.3765 22.7241 22.3803 22.7015C22.384 22.6788 22.3797 22.6556 22.368 22.6358L21.1043 21.0196C21.0823 20.9921 21.0503 20.9744 21.0153 20.9705C20.9803 20.9665 20.9451 20.9765 20.9174 20.9983C20.2777 21.3775 19.5479 21.5781 18.8042 21.5788C16.9387 21.5788 16.1105 20.7703 15.8203 19.6313H23.3421C23.3682 19.6336 23.3945 19.6304 23.4193 19.6222C23.4441 19.6138 23.467 19.6004 23.4864 19.5829C23.506 19.5654 23.5215 19.544 23.5324 19.5202C23.5433 19.4964 23.5491 19.4706 23.5496 19.4444C23.5701 19.2992 23.5906 18.7605 23.5906 18.4292C23.5881 15.2378 21.6406 13.0828 18.5738 13.0828ZM15.7555 17.683C15.9834 16.1914 16.8953 15.2796 18.4697 15.2796C20.0859 15.2796 20.9977 16.2324 21.1847 17.683H15.7555Z",fill:"#696A7B"}),i.jsx("path",{d:"M30.7615 13.0828C31.7561 13.0828 32.4835 13.3288 32.7295 13.6011C32.7713 13.6429 32.7713 13.6831 32.7295 13.7651L31.88 15.6511C31.839 15.7331 31.798 15.7544 31.7348 15.7544C31.6315 15.7544 31.383 15.6724 30.9894 15.6724C29.5799 15.6724 28.8755 16.7089 28.8755 18.1586V23.4886C28.8755 23.6338 28.855 23.6526 28.7115 23.6526H26.3474C26.2023 23.6526 26.1834 23.6321 26.1834 23.4886V17.7486C26.1818 14.927 28.0678 13.0828 30.7615 13.0828Z",fill:"#696A7B"}),i.jsx("path",{d:"M43.3181 20.6047C43.3181 22.366 41.9299 23.9413 39.0492 23.9413C36.7081 23.9413 35.2772 22.9048 34.677 22.1594C34.6578 22.1364 34.6472 22.1074 34.6472 22.0774C34.6472 22.0474 34.6578 22.0184 34.677 21.9954L35.7135 20.3792C35.734 20.3382 35.8168 20.3382 35.8586 20.3792C36.5835 21.0631 37.5576 21.8503 39.0492 21.8503C40.0234 21.8503 40.4998 21.5223 40.4998 20.9597C40.4998 20.4833 40.1267 20.1512 37.5781 19.4673C35.178 18.8228 34.6155 17.4551 34.6155 16.3366C34.6155 14.5752 36.0037 13 38.8836 13C41.2255 13 42.6556 14.0365 43.2558 14.7819C43.2753 14.8047 43.2861 14.8338 43.2861 14.8639C43.2861 14.8939 43.2753 14.923 43.2558 14.9459L42.2202 16.5645C42.1988 16.6055 42.116 16.6055 42.075 16.5645C41.3493 15.8807 40.376 15.0885 38.8836 15.0885C37.9094 15.0885 37.433 15.4206 37.433 15.9799C37.433 16.4563 37.8061 16.7884 40.3547 17.4723C42.7589 18.1184 43.3181 19.4862 43.3181 20.6047Z",fill:"#696A7B"}),i.jsx("path",{d:"M45.7011 18.471C45.7011 15.4452 47.9593 13.0828 51.109 13.0828C54.2176 13.0828 56.4759 15.4452 56.4759 18.471C56.4759 21.5165 54.2176 23.8584 51.109 23.8584C47.9593 23.8584 45.7011 21.5165 45.7011 18.471ZM51.086 21.3714C52.808 21.3714 53.7797 20.0873 53.7797 18.4915C53.7797 16.8958 52.808 15.5699 51.086 15.5699C49.364 15.5699 48.3923 16.8958 48.3923 18.4915C48.3923 20.0873 49.3689 21.3714 51.086 21.3714Z",fill:"#696A7B"}),i.jsx("path",{d:"M59.0662 23.4853V18.1594C59.0662 15.1968 60.6201 13.0828 63.9567 13.0828C67.0022 13.0828 68.8054 14.8442 68.8054 18.1594V23.4894C68.8054 23.6346 68.7841 23.6534 68.6414 23.6534H66.2773C66.1322 23.6534 66.1133 23.6329 66.1133 23.4894V18.5744C66.1133 16.9163 65.5951 15.6732 63.937 15.6732C62.279 15.6732 61.7616 16.9163 61.7616 18.5744V23.4853C61.7616 23.6305 61.7411 23.6493 61.5976 23.6493H59.2319C59.0867 23.651 59.0662 23.6305 59.0662 23.4853Z",fill:"#696A7B"}),i.jsx("path",{d:"M81.836 23.651H76.8422C73.6926 23.651 71.4302 21.4132 71.4302 18.3874C71.4302 15.3419 73.7098 13.0828 76.7602 13.0828C79.786 13.0828 82 15.3419 82 18.3669V23.4853C82 23.6305 81.9795 23.651 81.836 23.651ZM76.8422 21.1647H79.3079V18.3669C79.3079 16.7925 78.3756 15.5699 76.7594 15.5699C75.1194 15.5699 74.1272 16.7925 74.1272 18.3874C74.1272 19.9823 75.0997 21.1647 76.8406 21.1647H76.8422Z",fill:"#696A7B"})]}),i.jsx("path",{d:"M3.389 7.09C2.855 7.09 2.396 7.01 2.012 6.847C1.628 6.685 1.337 6.472 1.139 6.208C0.947826 5.96259 0.837738 5.66378 0.824 5.353C0.823165 5.32796 0.827482 5.303 0.836684 5.2797C0.845887 5.25639 0.859778 5.23522 0.877498 5.2175C0.895217 5.19978 0.916388 5.18589 0.939696 5.17668C0.963005 5.16748 0.987955 5.16316 1.013 5.164H1.814C1.886 5.164 1.94 5.179 1.976 5.209C2.02507 5.24039 2.06533 5.28375 2.093 5.335C2.153 5.539 2.291 5.71 2.507 5.848C2.723 5.986 3.017 6.055 3.389 6.055C3.815 6.055 4.136 5.986 4.352 5.848C4.45329 5.78603 4.53653 5.69855 4.59339 5.59431C4.65025 5.49006 4.67874 5.37271 4.676 5.254C4.67845 5.17682 4.66448 5.09999 4.635 5.02862C4.60552 4.95725 4.56121 4.89295 4.505 4.84C4.397 4.732 4.232 4.64 4.01 4.561C3.794 4.483 3.47 4.387 3.038 4.273C2.33 4.105 1.811 3.883 1.481 3.607C1.157 3.325 0.995 2.927 0.995 2.41C0.995 2.062 1.088 1.753 1.274 1.483C1.48347 1.19915 1.76673 0.978148 2.093 0.844001C2.453 0.688001 2.87 0.610001 3.344 0.610001C3.836 0.610001 4.262 0.697001 4.622 0.871001C4.982 1.045 5.255 1.264 5.441 1.528C5.633 1.786 5.735 2.044 5.747 2.302C5.74798 2.32713 5.74376 2.35219 5.73462 2.37561C5.72548 2.39904 5.71161 2.42033 5.69388 2.43816C5.67615 2.45599 5.65493 2.46997 5.63155 2.47924C5.60817 2.4885 5.58313 2.49284 5.558 2.492H4.721C4.66473 2.49551 4.60884 2.48063 4.56177 2.4496C4.51469 2.41858 4.47897 2.37309 4.46 2.32C4.424 2.128 4.304 1.97 4.1 1.843C3.896 1.711 3.644 1.645 3.344 1.645C3.008 1.645 2.744 1.708 2.552 1.835C2.4599 1.8928 2.38474 1.97394 2.33416 2.07019C2.28358 2.16644 2.25937 2.27437 2.264 2.383C2.25807 2.53422 2.30951 2.6821 2.408 2.797C2.504 2.905 2.654 3.001 2.858 3.085C3.068 3.169 3.368 3.262 3.758 3.365C4.286 3.485 4.706 3.619 5.018 3.769C5.336 3.919 5.57 4.109 5.72 4.336C5.87 4.564 5.945 4.856 5.945 5.209C5.945 5.593 5.837 5.929 5.621 6.217C5.411 6.499 5.111 6.715 4.721 6.865C4.337 7.015 3.893 7.09 3.389 7.09V7.09ZM8.542 7C8.51354 7.00053 8.48528 6.99521 8.45897 6.98437C8.43265 6.97353 8.40884 6.95741 8.389 6.937C8.36859 6.91716 8.35247 6.89335 8.34163 6.86703C8.3308 6.84072 8.32548 6.81246 8.326 6.784V0.925001C8.32353 0.866207 8.34275 0.808554 8.38 0.763001C8.40131 0.742047 8.42666 0.725655 8.45451 0.714823C8.48237 0.703992 8.51213 0.698948 8.542 0.700001H12.502C12.5319 0.698948 12.5616 0.703992 12.5895 0.714823C12.6173 0.725655 12.6427 0.742047 12.664 0.763001C12.685 0.784309 12.7013 0.809662 12.7122 0.837515C12.723 0.865367 12.7281 0.895135 12.727 0.925001V1.519C12.7281 1.54887 12.723 1.57863 12.7122 1.60649C12.7013 1.63434 12.685 1.65969 12.664 1.681C12.6184 1.71825 12.5608 1.73747 12.502 1.735H9.542V3.328H12.304C12.3339 3.32695 12.3636 3.33199 12.3915 3.34282C12.4193 3.35365 12.4447 3.37005 12.466 3.391C12.4874 3.4101 12.5041 3.43379 12.515 3.46028C12.5259 3.48678 12.5307 3.5154 12.529 3.544V4.102C12.5301 4.13187 12.525 4.16163 12.5142 4.18949C12.5033 4.21734 12.487 4.24269 12.466 4.264C12.4204 4.30125 12.3628 4.32047 12.304 4.318H9.541V5.965H12.574C12.6039 5.96395 12.6336 5.96899 12.6615 5.97982C12.6893 5.99065 12.7147 6.00705 12.736 6.028C12.757 6.04931 12.7733 6.07466 12.7842 6.10251C12.795 6.13037 12.8001 6.16013 12.799 6.19V6.784C12.8001 6.81387 12.795 6.84363 12.7842 6.87149C12.7733 6.89934 12.757 6.92469 12.736 6.946C12.6904 6.98325 12.6328 7.00247 12.574 7H8.542V7ZM17.652 7.09C16.824 7.09 16.182 6.877 15.726 6.451C15.276 6.025 15.036 5.425 15.006 4.651C14.9987 4.38707 14.9957 4.12303 14.997 3.859C14.997 3.487 15 3.217 15.007 3.049C15.037 2.281 15.279 1.684 15.735 1.259C16.197 0.826001 16.836 0.610001 17.652 0.610001C18.186 0.610001 18.652 0.703001 19.047 0.890001C19.443 1.07 19.749 1.318 19.965 1.636C20.181 1.948 20.295 2.302 20.307 2.698V2.716C20.307 2.764 20.287 2.806 20.244 2.842C20.2088 2.87178 20.1641 2.88777 20.118 2.887H19.263C19.191 2.887 19.137 2.872 19.101 2.842C19.065 2.812 19.035 2.755 19.011 2.672C18.915 2.293 18.756 2.029 18.534 1.879C18.312 1.723 18.015 1.645 17.644 1.645C16.779 1.645 16.329 2.128 16.294 3.095C16.2865 3.34359 16.2832 3.5923 16.284 3.841C16.284 4.177 16.287 4.432 16.294 4.606C16.329 5.572 16.779 6.056 17.644 6.056C18.015 6.056 18.312 5.977 18.534 5.821C18.762 5.665 18.921 5.401 19.011 5.029C19.029 4.945 19.056 4.889 19.092 4.859C19.1428 4.82615 19.2026 4.81006 19.263 4.813H20.118C20.172 4.813 20.218 4.831 20.253 4.867C20.295 4.903 20.313 4.948 20.307 5.002C20.2993 5.38461 20.1805 5.75672 19.965 6.073C19.749 6.385 19.443 6.634 19.047 6.82C18.651 7 18.187 7.09 17.652 7.09ZM25.236 7.09C24.426 7.09 23.796 6.883 23.346 6.47C22.896 6.055 22.671 5.428 22.671 4.588V0.925001C22.6685 0.866207 22.6877 0.808554 22.725 0.763001C22.7463 0.742047 22.7717 0.725655 22.7995 0.714823C22.8274 0.703992 22.8571 0.698948 22.887 0.700001H23.706C23.7346 0.698285 23.7632 0.703061 23.7897 0.713971C23.8162 0.724881 23.8399 0.741642 23.859 0.763001C23.88 0.784309 23.8963 0.809662 23.9072 0.837515C23.918 0.865367 23.9231 0.895135 23.922 0.925001V4.588C23.922 5.068 24.036 5.431 24.264 5.678C24.492 5.918 24.816 6.038 25.236 6.038C25.656 6.038 25.976 5.918 26.199 5.678C26.427 5.431 26.541 5.068 26.541 4.588V0.925001C26.5399 0.895135 26.545 0.865367 26.5558 0.837515C26.5667 0.809662 26.583 0.784309 26.604 0.763001C26.6253 0.742047 26.6507 0.725655 26.6785 0.714823C26.7064 0.703992 26.7361 0.698948 26.766 0.700001H27.576C27.6046 0.698285 27.6332 0.703061 27.6597 0.713971C27.6862 0.724881 27.7099 0.741642 27.729 0.763001C27.75 0.784309 27.7663 0.809662 27.7772 0.837515C27.788 0.865367 27.7931 0.895135 27.792 0.925001V4.588C27.792 5.428 27.567 6.055 27.117 6.469C26.673 6.883 26.046 7.09 25.236 7.09V7.09ZM30.707 7C30.6785 7.00053 30.6503 6.99521 30.624 6.98437C30.5976 6.97353 30.5738 6.95741 30.554 6.937C30.5336 6.91716 30.5175 6.89335 30.5066 6.86703C30.4958 6.84072 30.4905 6.81246 30.491 6.784V0.925001C30.4885 0.866207 30.5077 0.808554 30.545 0.763001C30.5663 0.742047 30.5917 0.725655 30.6195 0.714823C30.6474 0.703992 30.6771 0.698948 30.707 0.700001H33.037C33.77 0.700001 34.343 0.871001 34.757 1.213C35.177 1.555 35.387 2.041 35.387 2.671C35.387 3.109 35.279 3.478 35.063 3.778C34.853 4.072 34.559 4.285 34.181 4.418L35.495 6.712C35.5117 6.74277 35.5209 6.77702 35.522 6.812C35.5223 6.83764 35.5168 6.86301 35.5059 6.88622C35.4949 6.90943 35.4789 6.92986 35.459 6.946C35.4428 6.96311 35.4232 6.97673 35.4016 6.98601C35.3799 6.9953 35.3566 7.00006 35.333 7H34.513C34.4334 7.00453 34.3546 6.98236 34.289 6.937C34.2337 6.88544 34.188 6.8245 34.154 6.757L32.993 4.624H31.742V6.784C31.742 6.844 31.721 6.895 31.679 6.937C31.6599 6.95836 31.6362 6.97512 31.6097 6.98603C31.5832 6.99694 31.5546 7.00172 31.526 7H30.706H30.707ZM33.011 3.607C33.371 3.607 33.641 3.527 33.821 3.364C34.007 3.202 34.1 2.968 34.1 2.662C34.1 2.356 34.007 2.119 33.82 1.952C33.64 1.783 33.37 1.699 33.01 1.699H31.742V3.607H33.011ZM38.112 7C38.0835 7.00053 38.0553 6.99521 38.029 6.98437C38.0026 6.97353 37.9788 6.95741 37.959 6.937C37.9386 6.91716 37.9225 6.89335 37.9116 6.86703C37.9008 6.84072 37.8955 6.81246 37.896 6.784V0.925001C37.8935 0.866207 37.9127 0.808554 37.95 0.763001C37.9713 0.742047 37.9967 0.725655 38.0245 0.714823C38.0524 0.703992 38.0821 0.698948 38.112 0.700001H42.072C42.1019 0.698948 42.1316 0.703992 42.1595 0.714823C42.1873 0.725655 42.2127 0.742047 42.234 0.763001C42.255 0.784309 42.2713 0.809662 42.2822 0.837515C42.293 0.865367 42.2981 0.895135 42.297 0.925001V1.519C42.2981 1.54887 42.293 1.57863 42.2822 1.60649C42.2713 1.63434 42.255 1.65969 42.234 1.681C42.1884 1.71825 42.1308 1.73747 42.072 1.735H39.112V3.328H41.874C41.9039 3.32695 41.9336 3.33199 41.9615 3.34282C41.9893 3.35365 42.0147 3.37005 42.036 3.391C42.0574 3.4101 42.0741 3.43379 42.085 3.46028C42.0959 3.48678 42.1007 3.5154 42.099 3.544V4.102C42.1001 4.13187 42.095 4.16163 42.0842 4.18949C42.0733 4.21734 42.057 4.24269 42.036 4.264C41.9904 4.30125 41.9328 4.32047 41.874 4.318H39.111V5.965H42.144C42.1739 5.96395 42.2036 5.96899 42.2315 5.97982C42.2593 5.99065 42.2847 6.00705 42.306 6.028C42.327 6.04931 42.3433 6.07466 42.3542 6.10251C42.365 6.13037 42.3701 6.16013 42.369 6.19V6.784C42.3701 6.81387 42.365 6.84363 42.3542 6.87149C42.3433 6.89934 42.327 6.92469 42.306 6.946C42.2604 6.98325 42.2028 7.00247 42.144 7H38.112V7ZM45.06 7C45.0317 7.00039 45.0036 6.995 44.9775 6.98417C44.9514 6.97334 44.9277 6.95729 44.908 6.937C44.8876 6.91716 44.8715 6.89335 44.8606 6.86703C44.8498 6.84072 44.8445 6.81246 44.845 6.784V0.925001C44.8425 0.866207 44.8617 0.808554 44.899 0.763001C44.9202 0.742171 44.9454 0.72585 44.9731 0.715023C45.0007 0.704195 45.0303 0.699085 45.06 0.700001H47.256C49.02 0.700001 49.92 1.516 49.956 3.148C49.968 3.496 49.974 3.73 49.974 3.85C49.974 3.964 49.968 4.195 49.956 4.543C49.932 5.383 49.706 6.004 49.281 6.406C48.855 6.802 48.195 7 47.301 7H45.06V7ZM47.257 5.965C47.761 5.965 48.124 5.855 48.346 5.632C48.568 5.404 48.685 5.032 48.696 4.516C48.709 4.156 48.715 3.931 48.715 3.841C48.715 3.745 48.709 3.523 48.697 3.175C48.685 2.683 48.559 2.32 48.319 2.086C48.085 1.852 47.716 1.736 47.212 1.736H46.096V5.966H47.256L47.257 5.965ZM56.86 7C56.7812 7.00422 56.7037 6.97851 56.643 6.928C56.5871 6.87621 56.5519 6.80583 56.544 6.73L55.474 0.961001L55.464 0.889001C55.464 0.835001 55.482 0.790001 55.518 0.754001C55.5548 0.720031 55.6029 0.700809 55.653 0.700001H56.445C56.595 0.700001 56.679 0.760001 56.697 0.880001L57.444 4.957L58.254 2.32C58.314 2.17 58.414 2.095 58.551 2.095H59.037C59.187 2.095 59.283 2.17 59.325 2.32L60.145 4.948L60.89 0.880001C60.902 0.814001 60.926 0.770001 60.962 0.745001C61.0159 0.711795 61.0788 0.696077 61.142 0.700001H61.934C61.982 0.700001 62.024 0.718001 62.06 0.754001C62.0777 0.771619 62.0917 0.792688 62.101 0.815907C62.1103 0.839126 62.1147 0.864003 62.114 0.889001C62.114 0.919001 62.111 0.943001 62.105 0.961001L61.035 6.731C61.005 6.911 60.899 7.001 60.719 7.001H60.116C60.0417 7.00381 59.9687 6.98124 59.909 6.937C59.856 6.89651 59.818 6.83951 59.801 6.775L58.794 3.77L57.786 6.776C57.726 6.926 57.618 7.001 57.462 7.001H56.859L56.86 7ZM64.738 7C64.7095 7.00053 64.6813 6.99521 64.655 6.98437C64.6287 6.97353 64.6048 6.95741 64.585 6.937C64.5646 6.91716 64.5485 6.89335 64.5376 6.86703C64.5268 6.84072 64.5215 6.81246 64.522 6.784V0.916001C64.5203 0.887398 64.5251 0.858778 64.536 0.832282C64.5469 0.805787 64.5636 0.782102 64.585 0.763001C64.6048 0.742591 64.6287 0.726469 64.655 0.715632C64.6813 0.704796 64.7095 0.699475 64.738 0.700001H65.584C65.6126 0.698285 65.6412 0.703061 65.6677 0.713971C65.6942 0.724881 65.7179 0.741642 65.737 0.763001C65.7584 0.782102 65.7751 0.805787 65.786 0.832282C65.7969 0.858778 65.8017 0.887398 65.8 0.916001V6.784C65.8 6.844 65.779 6.895 65.737 6.937C65.7179 6.95836 65.6942 6.97512 65.6677 6.98603C65.6412 6.99694 65.6126 7.00172 65.584 7H64.738ZM70.163 7C70.1345 7.00053 70.1063 6.99521 70.08 6.98437C70.0536 6.97353 70.0298 6.95741 70.01 6.937C69.9896 6.91716 69.9735 6.89335 69.9626 6.86703C69.9518 6.84072 69.9465 6.81246 69.947 6.784V1.807H68.282C68.2535 1.80753 68.2253 1.80221 68.199 1.79137C68.1726 1.78053 68.1488 1.76441 68.129 1.744C68.1086 1.72416 68.0925 1.70035 68.0816 1.67403C68.0708 1.64772 68.0655 1.61946 68.066 1.591V0.925001C68.0635 0.866207 68.0828 0.808554 68.12 0.763001C68.1413 0.742047 68.1667 0.725655 68.1945 0.714823C68.2224 0.703992 68.2521 0.698948 68.282 0.700001H72.872C72.9019 0.698948 72.9316 0.703992 72.9595 0.714823C72.9873 0.725655 73.0127 0.742047 73.034 0.763001C73.055 0.784309 73.0713 0.809662 73.0822 0.837515C73.093 0.865367 73.0981 0.895135 73.097 0.925001V1.591C73.097 1.651 73.077 1.702 73.034 1.744C73.0127 1.76495 72.9873 1.78135 72.9595 1.79218C72.9316 1.80301 72.9019 1.80805 72.872 1.807H71.216V6.784C71.216 6.844 71.196 6.895 71.153 6.937C71.1317 6.95795 71.1063 6.97435 71.0785 6.98518C71.0506 6.99601 71.0209 7.00105 70.991 7H70.163V7ZM75.577 7C75.5485 7.00053 75.5203 6.99521 75.494 6.98437C75.4676 6.97353 75.4438 6.95741 75.424 6.937C75.4036 6.91716 75.3875 6.89335 75.3766 6.86703C75.3658 6.84072 75.3605 6.81246 75.361 6.784V0.925001C75.3585 0.866207 75.3777 0.808554 75.415 0.763001C75.4363 0.742047 75.4617 0.725655 75.4895 0.714823C75.5174 0.703992 75.5471 0.698948 75.577 0.700001H76.396C76.4246 0.698285 76.4532 0.703061 76.4797 0.713971C76.5062 0.724881 76.5299 0.741642 76.549 0.763001C76.57 0.784309 76.5863 0.809662 76.5972 0.837515C76.608 0.865367 76.6131 0.895135 76.612 0.925001V3.247H79.267V0.925001C79.2645 0.866207 79.2837 0.808554 79.321 0.763001C79.3423 0.742047 79.3677 0.725655 79.3955 0.714823C79.4234 0.703992 79.4531 0.698948 79.483 0.700001H80.293C80.3229 0.698948 80.3526 0.703992 80.3805 0.714823C80.4083 0.725655 80.4337 0.742047 80.455 0.763001C80.476 0.784309 80.4923 0.809662 80.5032 0.837515C80.514 0.865367 80.5191 0.895135 80.518 0.925001V6.785C80.5189 6.8147 80.5138 6.84428 80.503 6.87195C80.4921 6.89962 80.4758 6.92481 80.455 6.946C80.4094 6.98325 80.3518 7.00247 80.293 7H79.483C79.4545 7.00053 79.4263 6.99521 79.4 6.98437C79.3736 6.97353 79.3498 6.95741 79.33 6.937C79.3096 6.91716 79.2935 6.89335 79.2826 6.86703C79.2718 6.84072 79.2665 6.81246 79.267 6.784V4.372H76.612V6.784C76.612 6.844 76.591 6.895 76.549 6.937C76.5299 6.95836 76.5062 6.97512 76.4797 6.98603C76.4532 6.99694 76.4246 7.00172 76.396 7H75.576H75.577Z",fill:"#696A7B"}),i.jsx("defs",{children:i.jsx("clipPath",{id:"clip0",children:i.jsx("rect",{width:"82",height:"16.4",fill:"white",transform:"translate(0 11)"})})})]})})]})};async function JO(e,t,n){const r=t.target.value;ee.logAmplitude("verify-ui.language-change",{"from-language":As.language,"to-language":r});const o=n.filter(a=>a.lang===r);o.length>0&&await rd(o.shift()["translation-url"],e,r),await e.changeLanguage(r)}function XO(e){const{template:t,theme:n}=e,[r]=z();f.useEffect(()=>{(t==null||n==null)&&j.redirectToStart()},[]);const{inquiry:o,organization:a}=e,{error:s,callback:c}=vt(async()=>{o==null?await e.startInquiry(j.inquiryParams,n,window.location.host):await e.continueInquiry(o)},[n,o,a,e.startInquiry,e.showMessage]);return At({error:s,onNetworkError:()=>e.showMessage(r("errors.network")),onError:l=>{a.attributes.status&&a.attributes.status!==Bb.Active?e.showMessage("You do not have a production environment set up. Pass an environment parameter to use sandbox, or please reach out to support@withpersona.com to let us know if youd like to upgrade."):l instanceof ht?l.status===422?e.showMessage("Invalid configuration. Please check your parameters."):l.status>=500?$e("Server error when starting inquiry","error",{error:l}):$e("Client error when starting inquiry","warning",{error:l}):$e("Unknown error when starting inquiry","error",{error:l})}}),t==null||n==null?null:i.jsx(YO,{template:t,handleSubmit:c,theme:n})}function eL(e){return{template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",inquiry:e.inquiry.inquiry,organization:e.inquiry.organization,theme:e.inquiry.theme}}const tL={routeToNextStep:zt,showMessage:ae,startInquiry:af,continueInquiry:Rv},nL=Te(eL,tL),iL=nL(XO),rL=b("div").withConfig({displayName:"VerifyInvalidCodeView__Header",componentId:"sc-sb0cs4-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),oL=b.a.withConfig({displayName:"VerifyInvalidCodeView__HelpLinkContainer",componentId:"sc-sb0cs4-1"})(["margin:0 ",";display:inline-block;vertical-align:middle;"],S.Spacing[2]),aL="https://help.withpersona.com/articles/c4aR3PAzMNynOxBYNm5Pz/how-do-i-request-a-new-inquiry-link/";function sL(){const[e]=z();return i.jsxs("div",{children:[i.jsxs(rL,{children:[i.jsx(Xe,{children:e("invalid-code.title")}),i.jsxs(Ve,{children:[e("invalid-code.prompt"),i.jsx(oL,{href:aL,target:"_blank",rel:"noreferrer",children:i.jsx(Fh,{})})]})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})})]})}function cL(){return i.jsx(sL,{})}const xh=b("div").withConfig({displayName:"VerifyInvalidConfigView__Header",componentId:"sc-1w539v6-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function lL({hasTemplate:e}){var o,a;const t=(o=Dr().state)==null?void 0:o.error;f.useEffect(()=>{t!=null&&$0(s=>{s.setFingerprint(["inquiry-invalid-config"]),me(t,"warning")})},[]);const n=(a=t==null?void 0:t.errors)==null?void 0:a.find(s=>s.code==="account_inquiry_quota_exceeded"&&s.details&&s.title);if(n)return i.jsxs("div",{children:[i.jsxs(xh,{children:[i.jsx(Xe,{children:n.title}),typeof n.details=="string"&&i.jsx(Ve,{children:n.details})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})})]});const r=[];return e||r.push("Could not load template, check template-id"),j.isEmbedded||r.push("Possibly mismatched redirect-uri"),i.jsxs("div",{children:[i.jsxs(xh,{children:[i.jsx(Xe,{children:"This application is misconfigured"}),i.jsx(Ve,{children:"If you are a user, please contact the organization that sent you here."}),i.jsx(Je,{height:1}),i.jsxs(Ve,{children:["If you are a developer, please check the errors below with the documentation"," ",i.jsx(Th,{target:"_blank",rel:"noreferrer",to:{pathname:"https://docs.withpersona.com"},children:"here"}),"."]})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})}),r.map(s=>i.jsxs("div",{children:["- ",s]},s))]})}function dL(e){return i.jsx(lL,{hasTemplate:e.template!=null||e.inquiryTemplateVersion!=null})}function uL(e){return{template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",inquiryTemplateVersion:e.inquiry.inquiryTemplateVersion}}const mL=Te(uL),hL=mL(dL),pL=b("div").withConfig({displayName:"VerifyInvalidInquiryView__Header",componentId:"sc-qvxp99-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),fL=b.a.withConfig({displayName:"VerifyInvalidInquiryView__HelpLinkContainer",componentId:"sc-qvxp99-1"})(["margin:0 ",";display:inline-block;vertical-align:middle;"],S.Spacing[2]),gL="https://help.withpersona.com/articles/c4aR3PAzMNynOxBYNm5Pz/how-do-i-request-a-new-inquiry-link/";function bL(){const[e]=z();return i.jsxs("div",{"data-test":"invalid-inquiry",children:[i.jsxs(pL,{children:[i.jsx(Xe,{children:e("invalid-inquiry.title")}),i.jsxs(Ve,{children:[e("invalid-inquiry.prompt"),i.jsx(fL,{href:gL,target:"_blank",rel:"noreferrer",children:i.jsx(Fh,{})})]})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})})]})}function CL(){return i.jsx(bL,{})}const xL=b("div").withConfig({displayName:"VerifyInvalidVerificationView__Header",componentId:"sc-lcyx6g-0"})(["min-height:",";margin-bottom:",";"],Be.header,S.Spacing[6]);function vL(){const[e]=z();return i.jsx("div",{children:i.jsxs(xL,{children:[i.jsx(Xe,{children:e("invalid-verification.title")}),i.jsx(Ve,{children:e("invalid-verification.prompt")})]})})}function IL(){return i.jsx(vL,{})}const SL=b("div").withConfig({displayName:"VerifyPhoneNumberConfirmView__Header",componentId:"sc-1hvaf4a-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),wL=b("div").withConfig({displayName:"VerifyPhoneNumberConfirmView__FormSection",componentId:"sc-1hvaf4a-1"})(["margin-bottom:","px;"],L.base*4);function yL(e){const{handleResendCode:t,handleSubmitCode:n,verification:r}=e,o=f.useRef(r.attributes["phone-number"]),a=Dl(o.current,"National"),[s]=z();return i.jsxs("div",{children:[i.jsxs(SL,{children:[i.jsx(Xe,{children:s("phone-number.confirm.title")}),i.jsx(Ve,{children:i.jsx(Pn,{i18nKey:"phone-number.confirm.prompt",components:[i.jsx("bdo",{dir:"ltr"},0)],values:{codeLength:Id,phoneNumber:a}})})]}),i.jsx(wL,{children:i.jsx(Fb,{handleSubmitCode:n,handleResendCode:t,verificationType:r.type,onSubmit:n})})]})}class _L extends f.Component{constructor(){super(...arguments),this.handleResendCode=async()=>{var r;const{t,verification:n}=this.props;this.props.clearMessages();try{await ne.postResourceAction(n,"sms-confirmation-code"),this.props.showMessage(t("phone-number.confirm.resent-code"))}catch(o){o.status===400&&((r=o.errors)==null?void 0:r[0].title)==="Phone number unsubscribed"?this.props.showMessage(t("phone-number.prompt.sms-unsubscribed")):this.props.showMessage(t("phone-number.confirm.failed-to-resend"))}},this.handleSubmitCode=async t=>{const{t:n,inquiry:r,verification:o}=this.props;this.props.clearMessages();const s=(r.attributes["next-step"].config||{})["require-info-match"];try{await this.props.verificationPhoneNumberConfirm(o,s,t,this.props.history)}catch{this.props.showMessage(n("phone-number.confirm.failed"))}}}componentDidMount(){const{verification:t}=this.props;if(t==null){j.redirectToStart();return}}render(){const{verification:t}=this.props;return t==null?null:i.jsx(yL,{verification:t,handleSubmitCode:this.handleSubmitCode,handleResendCode:this.handleResendCode})}}function RL(e){return{verification:e.verification.verification,inquiry:e.inquiry.inquiry}}const AL={clearMessages:Lt,verificationPhoneNumberConfirm:V3,showMessage:ae},TL=Te(RL,AL),EL=TL(_L),kL=On()(EL),NL=b("div").withConfig({displayName:"FormName__PersonalSection",componentId:"sc-1ojg0j9-0"})(["margin-bottom:","px;"],L.base*2),vh={firstName:pt("Please enter your full first name",dr(/^..+$/)),lastName:pt("Please enter your full last name",dr(/^..+$/))};function jL(e){const{handleSubmit:t,pristine:n,submitting:r}=e,[o]=z();return i.jsxs("form",{onSubmit:t,children:[i.jsx(NL,{children:i.jsxs(si,{children:[i.jsx("label",{htmlFor:ke.NameFirst,children:o("form.name.name-label")}),i.jsx(Re.Field,{name:ke.NameFirst,component:Yn,autoComplete:"given-name",className:"col-sm-12",disabled:r,placeholder:o("form.name.first_name"),type:"text",validate:vh.firstName}),i.jsx(Re.Field,{name:ke.NameLast,component:Yn,autoComplete:"family-name",className:"col-sm-12",disabled:r,placeholder:o("form.name.last_name"),type:"text",validate:vh.lastName})]})}),i.jsx(mt,{children:i.jsx(ge,{type:"submit",buttonType:Z.Primary,disabled:n||r,isPending:r,tabIndex:n||r?-1:0,children:o("form.name.btn-submit")})})]})}const PL=Re.reduxForm({form:"name"})(jL),DL=b("div").withConfig({displayName:"VerifyPhoneNumberInfoView__Header",componentId:"sc-118vczo-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),OL=b("div").withConfig({displayName:"VerifyPhoneNumberInfoView__FormSection",componentId:"sc-118vczo-1"})(["margin-bottom:","px;"],L.base*4);function LL(e){const[t]=z();return i.jsxs("div",{children:[i.jsxs(DL,{children:[i.jsx(Xe,{children:t("phone-number.info.title")}),i.jsx(Ve,{children:t("phone-number.info.prompt")})]}),i.jsx(OL,{children:i.jsx(PL,{onSubmit:e.handleSubmit})})]})}const FL=e=>{const[t]=z();f.useEffect(()=>{e.autofillForm("name",j.inquiryParams,e.submittedValues)},[]);const n=async r=>{const{verification:o}=e;e.clearMessages(),e.saveSubmittedValues(r);try{await e.verificationPhoneNumberSubmit(o,r,e.history)}catch{e.showMessage(t("errors.network"))}};return i.jsx(LL,{handleSubmit:n})};function ML(e){return{inquiry:e.inquiry.inquiry,submittedValues:e.verification.submittedValues,verification:e.verification.verification}}const VL={autofillForm:La,clearMessages:Lt,routeToNextStep:zt,saveSubmittedValues:Xp,showMessage:ae,verificationPhoneNumberSubmit:B3},BL=Te(ML,VL),UL=BL(FL),HL=b("div").withConfig({displayName:"VerifyPhoneNumberPromptView__Header",componentId:"sc-kmtmex-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),qL=b("div").withConfig({displayName:"VerifyPhoneNumberPromptView__FormSection",componentId:"sc-kmtmex-1"})(["margin-bottom:","px;"],L.base*4);function $L(e){const[t]=z();return i.jsxs("div",{children:[i.jsxs(HL,{children:[i.jsx(Xe,{children:t("phone-number.title")}),i.jsx(Ve,{children:t("phone-number.prompt.prompt")})]}),i.jsx(qL,{children:i.jsx(Ed,{defaultCountry:e.defaultCountry,labelContinue:t("phone-number.prompt.btn-submit"),onSubmit:e.handleSubmit,onCountryChange:e.onCountryChange})})]})}const GL=({autofillForm:e,clearMessages:t,countryCode:n,forcedStatus:r,showMessage:o,submittedValues:a,template:s,verificationPhoneNumberStart:c})=>{const[l]=z();f.useEffect(()=>{if(s==null){j.redirectToStart();return}e("phone-number",j.inquiryParams,a)},[]);const[u,d]=f.useState(n),m=f.useCallback(async h=>{var p;t();try{await c(u,r,h)}catch(g){g.status===400&&((p=g.errors)==null?void 0:p[0].title)==="Phone number unsubscribed"?(o(l("phone-number.prompt.sms-unsubscribed")),document.body.scrollTo(0,0)):(o(l("phone-number.prompt.invalid")),document.body.scrollTo(0,0))}},[c,u,r,l]);return s==null?null:i.jsx($L,{defaultCountry:n,handleSubmit:m,onCountryChange:d})};function WL(e){return{countryCode:e.inquiry.inquiry.attributes["selected-country-code"]||e.locale.localeInfo.country_code,forcedStatus:e.test.forcedStatus,submittedValues:e.verification.submittedValues,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"}}const YL={autofillForm:La,clearMessages:Lt,showMessage:ae,verificationPhoneNumberStart:M3},zL=Te(WL,YL),KL=zL(GL);function QL(e){const{i18n:t}=z(),n=Ot(),{inquiry:r,uiStatus:o}=e;return f.useEffect(()=>{(async()=>{const{loadInquiryFromCode:s,loadInquiryFromId:c,createInquiry:l,loadThemeAndRedirect:u,setUiReady:d}=e;if(j.inquiryParams["session-token"]&&(ne.accessToken=j.inquiryParams["session-token"]),r!=null){await c(t,r.id);return}j.inquiryParams.code?await s(t,j.inquiryParams.code,{deviceHandoffMethod:j.inquiryParams["device-handoff-method"]}):j.inquiryParams["inquiry-id"]?await c(t,j.inquiryParams["inquiry-id"]):j.inquiryParams["template-id"]!=null&&typeof j.inquiryParams["template-id"]=="string"&&j.inquiryParams["template-id"].startsWith("itmpl")||j.inquiryParams["inquiry-template-id"]||j.inquiryParams["inquiry-template-version-id"]?await l(t,j.inquiryParams,window.location.host):j.inquiryParams["template-id"]!=null?await u(t,j.inquiryParams["template-id"]):n.replace("/verify/invalid/config"),o===on.Initializing&&(j.onEvent(Pe.Ready),d())})()},[]),i.jsx(In,{})}const ZL=e=>({inquiry:e.inquiry.inquiry,uiStatus:e.ui.status}),JL={loadInquiryFromCode:ud,loadInquiryFromId:yv,loadThemeAndRedirect:_v,createInquiry:Lv,setUiReady:ct},XL=Te(ZL,JL),Wc=XL(QL),Ub=Object.keys(gs),eF=new Set(Ub);function tF(e){return e.length===0?Ub:e.filter(t=>eF.has(t))}function nF(e,t,n,r){return t==null||n==null||r==null||uo(n)||[Ce.Completed,Ce.Approved,Ce.Declined,Ce.NeedsReview].includes(n.attributes.status)||e==null||!t.attributes["has-support"]||r.length>0&&r[r.length-1].attributes.status===kt.Passed?!1:r.filter(a=>[kt.Failed,kt.RequiresRetry,kt.Canceled].includes(a.attributes.status)).some(a=>a.type!==y.VerificationDatabase)}const iF=b("div").withConfig({displayName:"VerifySelectCountryView__CountrySelector",componentId:"sc-9bsemy-0"})(["margin-bottom:","px;"],L.base*2),rF=b("div").withConfig({displayName:"VerifySelectCountryView__Header",componentId:"sc-9bsemy-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function oF(e){const{countryCode:t,handleContinue:n,isProcessing:r,template:o}=e,{"enabled-country-codes":a}=o.attributes,[s]=z();return i.jsxs("div",{children:[i.jsxs(rF,{children:[i.jsx(Xe,{children:s("select-country.title")}),i.jsx(Ve,{children:s("select-country.prompt")})]}),i.jsx(iF,{children:i.jsxs(Ys,{"data-test":"country-selector__select",value:t!=null?t:"",onChange:e.handleCountryChange,children:[i.jsx("option",{value:"",disabled:!0,children:s("select-country.placeholder")}),tF(a).map(c=>[s(`countries.${c}`),c]).sort((c,l)=>c[0].toLowerCase().localeCompare(l[0].toLowerCase())).map(([c,l])=>i.jsx("option",{value:l,children:c},l))]})}),i.jsx(mt,{children:i.jsx(ge,{id:"select-country__button--select",buttonType:Z.Primary,onClick:n,disabled:r||!t,isPending:r,children:s("select-country.btn-submit")})})]})}function aF(e){const{template:t,selectedCountryCode:n,inquiry:r}=e,[o,a]=f.useState(n);f.useEffect(()=>{if(t==null||r==null){j.redirectToStart();return}},[]);const[s,c]=f.useState(void 0),[l]=z();if(t==null)return null;async function u(){const{inquiry:m}=e;c(!0),ee.logAmplitude("country-select",{"country-code":o}),j.onEvent(Pe.CountrySelect,{"country-code":o});try{const h={id:m.id,type:m.type,attributes:{"selected-country-code":o}},p=(await ne.updateResource(h)).data;e.saveInquiry(p),e.routeToNextStep(p)}catch(h){if(c(void 0),h instanceof Ct){e.showMessage(l("errors.network"));return}else if(h instanceof ht&&h.status!==401){e.showMessage(l("errors.session-expired"));return}}}const d=m=>{a(m.currentTarget.value)};return i.jsx(oF,{countryCode:o,handleContinue:u,handleCountryChange:d,isProcessing:s,template:t})}function sF(e){var n;const t=Zp("itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",j.inquiryParams.prefill,e.locale.localeInfo.country_code);return{selectedCountryCode:((n=e.inquiry.inquiry)==null?void 0:n.attributes["selected-country-code"])||t,inquiry:e.inquiry.inquiry,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"}}const cF={routeToNextStep:zt,saveInquiry:Pt,showMessage:ae},lF=Te(sF,cF),dF=lF(aF),uF=b("div").withConfig({displayName:"VerifySelfieFailedView__Header",componentId:"sc-1437e1b-0"})(["",""],e=>e.withIcon?$(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4):$(["margin-bottom:","px;"],L.base*2)),mF=b("div").withConfig({displayName:"VerifySelfieFailedView__FailureReasonSection",componentId:"sc-1437e1b-1"})(["margin-bottom:","px;"],L.base*6),Yc=b("div").withConfig({displayName:"VerifySelfieFailedView__FailureReasonOption",componentId:"sc-1437e1b-2"})(["display:flex;align-items:center;margin-bottom:","px;"],L.base*2),zc=b.div.withConfig({displayName:"VerifySelfieFailedView__FailureReasonPictograph",componentId:"sc-1437e1b-3"})(["display:flex;align-items:center;flex-shrink:0;justify-content:space-around;margin-right:","px;> img,svg{height:50px;width:50px;}"],L.base*2);function hF(e){const{handleContinue:t,verification:n}=e,[r]=z(),{iconStyle:o}=f.useContext(Ze),a=o!==Vr.None,s=(n.attributes["entity-confidence-reasons-public"]||[]).filter(l=>Object.values(oo).includes(l)),c=s.length===0?oo.Generic:s[0];return i.jsxs("div",{children:[i.jsxs(uF,{withIcon:a,children:[i.jsx(Xe,{children:i.jsx(te,{children:r("selfie.failed.title")})}),i.jsx(Ve,{children:i.jsx(te,{children:r("selfie.failed.prompt")})})]}),i.jsx(mF,{children:i.jsx(pF,{withIcon:a,failureReason:c,t:r})}),i.jsx(mt,{children:i.jsx(ge,{id:"selfie-failed__continue",buttonType:Z.Primary,onClick:t,children:r("selfie.failed.btn-submit")})})]})}const pF=({withIcon:e,failureReason:t,t:n})=>{switch(t){case oo.Glasses:return i.jsxs(Yc,{children:[e&&i.jsx(zc,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(pe,{children:i.jsx(tC,{})})}),i.jsx(te,{children:n("selfie.failed.failure-reasons.glasses")})]});case oo.Glare:return i.jsxs(Yc,{children:[e&&i.jsx(zc,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(pe,{children:i.jsx(np,{})})}),i.jsx(te,{children:n("selfie.failed.failure-reasons.glare")})]});case oo.Generic:return i.jsxs(Yc,{children:[e&&i.jsx(zc,{"data-test":"selfie-failed__failure-reason-pictograph",children:i.jsx(pe,{children:i.jsx(Qc,{})})}),i.jsx(te,{children:n("selfie.failed.failure-reasons.generic")})]});default:ut(t)}};function fF(e){return f.useEffect(()=>{if(e.verification==null){j.redirectToStart();return}}),e.verification==null?null:i.jsx(hF,{handleContinue:()=>e.routeToNextStep(e.inquiry,Nt),verification:e.verification})}function gF(e){return{featureFlags:e.inquiry.featureFlags,inquiry:e.inquiry.inquiry,verification:e.verification.verification}}const bF={routeToNextStep:zt},CF=Te(gF,bF),xF=CF(fF),Hb=b("div").withConfig({displayName:"VerifySelfiePromptView__Header",componentId:"sc-1l6vrjs-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),vF=b("div").withConfig({displayName:"VerifySelfiePromptView__OptionPrimary",componentId:"sc-1l6vrjs-1"})(["margin-bottom:","px;"],L.base*2),IF=b(Fr).withConfig({displayName:"VerifySelfiePromptView__IconCameraStyled",componentId:"sc-1l6vrjs-2"})(["path[stroke]{stroke:",";}"],e=>e.theme.colorFontButtonPrimary),qb=b.div.withConfig({displayName:"VerifySelfiePromptView__CaptureOptionsContainer",componentId:"sc-1l6vrjs-3"})(["width:100%;"]);function SF(e){const{enabledCaptureOptions:t}=e,[n,r]=z();return t.includes(Gn.WebCamera)?i.jsx(wF,{...e,t:n,i18n:r}):t.includes(Gn.Stillfie)?i.jsx(Ih,{...e,t:n,i18n:r}):($e("Expected either web_camera or stillfie capture options","warning",{enabledCaptureOptions:t}),i.jsx(Ih,{...e,t:n,i18n:r}))}function $b(e){const{handleDeviceHandoff:t,isProcessing:n}=e,[r]=z();return i.jsx(ge,{id:"selfie-prompt__button--device-handoff","data-test":"selfie-prompt__button--device-handoff",buttonType:Z.Secondary,disabled:!!n,isPending:n===it.DeviceHandoff,onClick:t,children:r("selfie.prompt.btn-continue-on-device")})}function wF({t:e,enabledCaptureOptions:t,isProcessing:n,requireSelfieMatch:r,handleDeviceHandoff:o,handleStartRecording:a}){let s="",c;switch(r){case un.ProfileAndCenter:s=e("selfie.prompt.prompt"),c=i.jsx(Ye,{height:120,width:120,"aria-label":"selfie pictograph",children:i.jsx(Yt,{url:"selfiePictographUrl",height:"selfiePictographHeight","aria-label":"selfie pictograph",themed:!1,children:i.jsxs(Qe,{frameDuration:100,children:[i.jsx(Qe.Center,{frames:8}),i.jsx(Qe.Left1,{}),i.jsx(Qe.Left2,{frames:8}),i.jsx(Qe.Left1,{}),i.jsx(Qe.Center,{}),i.jsx(Qe.Right1,{}),i.jsx(Qe.Right2,{frames:8}),i.jsx(Qe.Right1,{})]})})});break;case un.OnlyCenter:s=e("selfie.prompt.prompt-center"),c=i.jsx(Ye,{height:120,width:120,"aria-label":"selfie center pictograph",children:i.jsx(Yt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"selfie center pictograph",themed:!1,children:i.jsx(Qe,{children:i.jsx(Qe.Center,{})})})});break;default:$e("Invalid selfie match requirement");break}return i.jsxs(i.Fragment,{children:[i.jsxs(Hb,{children:[i.jsx(Xe,{children:i.jsx(te,{children:e("selfie.prompt.title")})}),i.jsx(Ve,{children:i.jsx(te,{children:s})})]}),c,i.jsx(mt,{children:i.jsxs(qb,{children:[i.jsx(vF,{children:i.jsx(ge,{id:"selfie-prompt__button--camera",buttonType:Z.Primary,disabled:!!n,isPending:n===it.SelectCamera,onClick:a,children:e("selfie.prompt.btn-submit")})}),t.includes(Gn.DeviceHandoff)&&i.jsx($b,{handleDeviceHandoff:o,isProcessing:n})]})})]})}const Kc=b.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHint",componentId:"sc-1l6vrjs-4"})(["display:flex;justify-content:center;"]),Go=b.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHintColumn",componentId:"sc-1l6vrjs-5"})(["display:flex;flex-direction:column;align-items:center;position:relative;width:145px;font-size:",";line-height:",";"],({theme:e})=>e.fontSizeSmall,({theme:e})=>e.lineHeightSmall),Xa=b.div.withConfig({displayName:"VerifySelfiePromptView__StillfieHintIconContainer",componentId:"sc-1l6vrjs-6"})(["position:absolute;top:108px;right:-4px;"]),es=b.p.withConfig({displayName:"VerifySelfiePromptView__StillfieHintText",componentId:"sc-1l6vrjs-7"})(["width:100px;"]);function Ih({t:e,enabledCaptureOptions:t,isProcessing:n,currentStep:r,handleDeviceHandoff:o,handleSelectImage:a}){f.useEffect(()=>{ee.logAmplitude("selfie.stillfie",{currentStep:r})},[r]);let s,c;switch(r){case fe.Center:s=e("selfie.prompt.prompt-center"),c=i.jsx(Ye,{height:120,width:120,"aria-label":"stillfie center pictograph",children:i.jsx(Yt,{url:"selfieCenterPictographUrl",height:"selfieCenterPictographHeight","aria-label":"stillfie center pictograph",themed:!1,children:i.jsx(Kc,{children:i.jsx(Go,{children:i.jsx(Qe,{children:i.jsx(Qe.Center,{})})})})})});break;case fe.Left:s=e("selfie.prompt.prompt-left"),c=i.jsx(Ye,{height:null,width:null,"aria-label":"stillfie left pictograph",children:i.jsx(Yt,{url:"selfieLeftPictographUrl",height:"selfieLeftPictographHeight","aria-label":"stillfie left pictograph",themed:!1,children:i.jsxs(Kc,{children:[i.jsxs(Go,{children:[i.jsx(Qe,{children:i.jsx(Qe.Left1,{})}),i.jsx(Xa,{children:i.jsx(ds,{})}),i.jsx(es,{children:e("selfie.prompt.prompt-stillfie-hint-left")})]}),i.jsx(Je,{width:3}),i.jsxs(Go,{children:[i.jsx(Qe,{children:i.jsx(Qe.Left3,{})}),i.jsx(Xa,{children:i.jsx(us,{})}),i.jsx(es,{children:e("selfie.prompt.prompt-stillfie-hint-wrong")})]})]})})});break;case fe.Right:s=e("selfie.prompt.prompt-right"),c=i.jsx(Ye,{height:null,width:null,"aria-label":"stillfie right pictograph",children:i.jsx(Yt,{url:"selfieRightPictographUrl",height:"selfieRightPictographHeight","aria-label":"stillfie right pictograph",themed:!1,children:i.jsxs(Kc,{children:[i.jsxs(Go,{children:[i.jsx(Qe,{children:i.jsx(Qe.Right1,{})}),i.jsx(Xa,{children:i.jsx(ds,{})}),i.jsx(es,{children:e("selfie.prompt.prompt-stillfie-hint-right")})]}),i.jsx(Je,{width:3}),i.jsxs(Go,{children:[i.jsx(Qe,{children:i.jsx(Qe.Right3,{})}),i.jsx(Xa,{children:i.jsx(us,{})}),i.jsx(es,{children:e("selfie.prompt.prompt-stillfie-hint-wrong")})]})]})})});break}return i.jsxs(i.Fragment,{children:[i.jsxs(Hb,{children:[i.jsx(Xe,{children:i.jsx(te,{children:e("selfie.prompt.title-stillfie")})}),i.jsx(Ve,{children:i.jsx(te,{children:s})})]}),c,i.jsx(Je,{height:3}),i.jsx(mt,{children:i.jsxs(qb,{children:[i.jsx(Lo,{id:"selfie-prompt__button--stillfie",buttonType:Z.Primary,capture:"user",disabled:n!=null,isPending:n===it.UploadImage,handleSelectImage:a,children:i.jsx(IF,{})}),t.includes(Gn.DeviceHandoff)&&i.jsx($b,{handleDeviceHandoff:o,isProcessing:n})]})})]})}const yF=e=>{const{inquiry:t,currentSession:n,currentStep:r,featureFlags:o,isWebGLIncompatible:a,template:s,hasCamera:c}=e,{t:l}=z(),u=f.useRef();f.useEffect(()=>{const[T,E]=fi();return u.current=T,E},[]);const[d,m]=f.useState(void 0),[h,p]=f.useState(void 0),g=Jn();f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}},[]),f.useEffect(()=>{C()},[]),f.useEffect(()=>{if(s.attributes["force-link-from-react-native"]&&n.relationships["parent-session"].data==null){e.history.replace("/verify/device-handoff/sms");return}if(e.match.params.step===da([],is(t))&&e.verificationSelfieStart(),c==null)e.checkCamera();else{const E=fv({verificationConfigSelfie:r.config,isMobile:g,isWebGLIncompatible:a,hasCamera:c});p(E),E.length===0&&e.history.replace("/verify/invalid/verification"),E.length===1&&E[0]===Gn.DeviceHandoff&&e.history.replace("/verify/device-handoff/prompt")}},[c]);const C=async()=>{try{await _t.loadModels()}catch{}},I=async()=>{e.clearMessages(),m(it.SelectCamera);const T=Ms(t);try{const E=Pg({highResolution:T});e.setVideoConstraints(E),await Promise.all([Dn.prepare({video:E},o),_t.loadModels()]),j.onEvent(Pe.SelfieCameraSelect),e.history.push("/verify/selfie/record")}catch(E){me(E,"warning"),ee.logAmplitude("selfie.record.errored",{error:{name:E.name,message:E.message}}),j.onEvent(Pe.LoadCameraFailed,{error:E.name,message:E.message}),e.history.push("/verify/support/camera")}},v=async T=>{if(e.clearMessages(),window.FileReader==null){e.showMessage(l("government-id.prompt.failed-select-image"));return}m(it.UploadImage),j.onEvent(Pe.SelfieRecordUpload);const E=document.createElement("img");E.onload=async()=>{const D=Math.min(1e3,Math.max(E.width,E.height));cb(E,u.current,D);const O=u.current.toDataURL("image/jpeg");if(O==null){e.showMessage(l("government-id.prompt.failed-select-image")),$e("Stillfie canvas is empty","error",{fileSize:T==null?void 0:T.size,fileName:T==null?void 0:T.name,img:E.src});return}ee.logAmplitude("selfie.upload",{fileSize:T==null?void 0:T.size,fileName:T==null?void 0:T.name,imgSize:E.src.length,canvasSize:O.length});let U;O.length<E.src.length&&O.length!==0?U=O:U=E.src;const M=e.match.params.step;e.saveCapturedSelfie(M,U,bt.Upload);const Y=od(e.capturedSelfies,M,U,bt.Upload),F=is(t),H=da(Y,F);if(H==null)try{await e.verificationSelfieSubmit(e.routingInputs,Y,null,e.history,e.forcedStatus)}catch{m(void 0)}else e.history.push(`/verify/selfie/${H}/prompt`)},E.onerror=x;const V=await wo(T);E.src=V},x=()=>{m(void 0),e.showMessage(l("government-id.prompt.failed-select-image"))},R=()=>{d==null&&(e.clearMessages(),m(it.DeviceHandoff),e.history.push("/verify/device-handoff/prompt"))};if(t==null||s.attributes["force-link-from-react-native"]&&n.relationships["parent-session"].data==null||h==null||h.length===0||h.length===1&&h[0]===Gn.DeviceHandoff)return null;const _=is(t);return i.jsx(SF,{handleSelectImage:v,handleStartRecording:I,handleDeviceHandoff:R,enabledCaptureOptions:h,isProcessing:d,currentStep:e.match.params.step,requireSelfieMatch:_})},_F=e=>({capturedSelfies:e.verification.capturedSelfies,forcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession,currentStep:e.inquiry.currentStep,isWebGLIncompatible:e.inquiry.isWebGLIncompatible,routingInputs:pc(e),template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",featureFlags:e.inquiry.featureFlags,hasCamera:e.ui.hasCamera}),RF={clearMessages:Lt,routeToNextStep:zt,saveCapturedSelfie:Vs,setVideoConstraints:So,verificationSelfieStart:ug,showMessage:ae,verificationSelfieSubmit:mg,checkCamera:Mr},AF=Te(_F,RF),TF=AF(yF),EF=15e3;function kF(e){var c;const t=(c=e.enabledCaptureOptions)!=null&&c.includes(Gn.Manual)?EF:null,[n,{enable:r,disable:o}]=rt(),{t:a}=z(),s=Jp({requireSelfieMatch:e.requireSelfieMatch});return i.jsxs(i.Fragment,{children:[i.jsxs(Si,{isOpen:n,onClose:o,"data-test":"verify-selfie-record-view__slow-detection-dialog","aria-labelledby":"verify-selfie-record-view__slow-detection-dialog--title","aria-describedby":"verify-selfie-record-view__slow-detection-dialog--description",children:[i.jsx(Xe,{id:"verify-selfie-record-view__slow-detection-dialog--title",children:i.jsx(te,{children:a("selfie.record.slow-detection-title")})}),i.jsx(Ve,{id:"verify-selfie-record-view__slow-detection-dialog--description",children:i.jsx(te,{children:a("selfie.record.slow-detection-prompt")})}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"verify-selfie-record-view__slow-detection-dialog--wait-btn","data-test":"verify-selfie-record-view__slow-detection-dialog--wait-btn",onClick:o,children:a("selfie.record.slow-detection-wait")}),i.jsx(Je,{height:1}),i.jsx(ge,{id:"verify-selfie-record-view__slow-detection-dialog--try-another-device-btn","data-test":"verify-selfie-record-view__slow-detection-dialog--try-another-device-btn",onClick:e.handleSlowFaceDetection,buttonType:Z.Secondary,children:a("selfie.record.slow-detection-try-another-device")})]}),i.jsx(kb,{capturedSelfies:e.capturedSelfies,clearCapturedSelfies:e.clearCapturedSelfies,delayUntilManualCaptureMs:t,handleComplete:l=>e.handleComplete(l.capturedSelfies,l.cameraInspectionData),handleFailed:e.handleFailed,detectTimeout:e.detectTimeout,handleSlowFaceDetection:r,poseOrder:s,saveCapturedSelfie:e.saveCapturedSelfie,videoConstraints:e.videoConstraints,requireHigherAccuracyCapture:e.requireHigherAccuracyCapture,featureFlags:e.featureFlags})]})}const NF=e=>{const[t]=z(),{currentStep:n,routingInputs:r,inquiry:o,videoConstraints:a}=e;if(f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}try{window.parent.Cypress&&c("Push to stillfie in Cypress tests!","load")}catch{}},[]),o==null)return null;const s=async(m,h)=>{e.clearMessages();try{j.onEvent(Pe.SelfieCameraCapture),await e.verificationSelfieSubmit(r,m,h,e.history,e.forcedStatus)}catch{e.showMessage(t("errors.network"),!0),e.clearCapturedSelfies(),e.history.replace(`/verify/selfie/${fe.Center}/prompt`)}},c=(m,h)=>{e.showMessage(t("selfie.record.failed-video"),!0),e.saveIsWebGLIncompatible(!0),m instanceof Error?(h==="load"&&j.onEvent(Pe.LoadCameraFailed,{error:m.name,message:m.message}),me(m,"warning",{state:h},{jira:"PER-10182"})):(h==="load"&&j.onEvent(Pe.LoadCameraFailed,{message:m}),$e(m,"warning",{state:h},{jira:"PER-10182"})),setTimeout(()=>{e.history.goBack()},500)},l=()=>{e.saveIsWebGLIncompatible(!0),e.history.goBack()},u=Jn(),d=Ms(e.inquiry);return i.jsx(kF,{capturedSelfies:e.capturedSelfies,enabledCaptureOptions:n.config[u?"enabled-capture-options-mobile":"enabled-capture-options-desktop"],clearCapturedSelfies:e.clearCapturedSelfies,handleComplete:s,handleFailed:c,handleSlowFaceDetection:l,requireSelfieMatch:is(o),saveCapturedSelfie:e.saveCapturedSelfie,videoConstraints:a,requireHigherAccuracyCapture:d,detectTimeout:vb,featureFlags:e.featureFlags})};function jF(e){return{capturedSelfies:e.verification.capturedSelfies,currentStep:e.inquiry.currentStep,inquiry:e.inquiry.inquiry,routingInputs:pc(e),videoConstraints:e.verification.videoConstraints,forcedStatus:e.test.forcedStatus,featureFlags:e.inquiry.featureFlags}}const PF={clearCapturedSelfies:ad,clearMessages:Lt,routeToNextStep:zt,saveCapturedSelfie:Vs,saveIsWebGLIncompatible:Gp,showMessage:ae,verificationSelfieSubmit:mg},DF=Te(jF,PF),OF=DF(NF),LF=On()(OF),Sh=b("div").withConfig({displayName:"VerifySuccessView__Header",componentId:"sc-7bvk95-0"})(["margin-bottom:","px;"],L.base*8),FF=b("div").withConfig({displayName:"VerifySuccessView__AnimationContainer",componentId:"sc-7bvk95-1"})(["display:flex;flex-direction:column;align-items:center;margin-bottom:","px;"],L.base*5),wh=b("div").withConfig({displayName:"VerifySuccessView__TextDefaultCentered",componentId:"sc-7bvk95-2"})(["text-align:",";"],({theme:e})=>e.textAlign===qs.Default?"center":e.textAlign);function MF(e){const{handleSubmit:t,hasCompleteButton:n,isChildFlow:r,isProcessing:o,pictograph:a}=e,[s]=z(),{successPictographPosition:c}=f.useContext(Ze),l=a!=="none"&&i.jsx(Ye,{height:null,width:null,"aria-label":"success",children:i.jsx(Yt,{url:"successPictographUrl",height:"successPictographHeight",themed:!1,children:i.jsx(FF,{children:i.jsx(_f,{})})})});return r?i.jsxs("div",{"data-test":"verify-success-view__child-flow",children:[i.jsxs(Sh,{children:[i.jsx(Xe,{children:s("success.title-exchange-flow")}),i.jsx(Ve,{children:i.jsx(te,{children:s("success.prompt-exchange-flow")})})]}),i.jsx(Ye,{"aria-label":"desktop pictograph",children:i.jsx(pe,{vectorEffect:"initial",children:i.jsx(Hh,{})})})]}):i.jsxs("div",{children:[c===Gt.Start&&l,i.jsxs(Sh,{children:[i.jsx(Xe,{children:i.jsx(wh,{children:s("success.title")})}),i.jsx(wh,{children:i.jsx(te,{children:s("success.prompt")})})]}),c===Gt.Center&&l,n&&i.jsx(mt,{children:i.jsx(ge,{id:"success__button--complete",buttonType:Z.Primary,onClick:t,disabled:o,isPending:o,children:s("success.btn-submit")})})]})}const yh=500;class VF extends f.Component{constructor(t){super(t),this.handleSubmit=async()=>{this.setState({isProcessing:!0});const n=await this.pollForInquiryComplete(),r={inquiryId:n.id,referenceId:n.attributes["reference-id"],subject:n.attributes["reference-id"],scopes:{name:{first:n.attributes["name-first"],middle:n.attributes["name-middle"],last:n.attributes["name-last"]},birthdate:n.attributes.birthdate,address:{"street-1":n.attributes["address-street-1"],"street-2":n.attributes["address-street-2"],city:n.attributes["address-city"],subdivision:n.attributes["address-subdivision"],"subdivision-abbr":n.attributes["address-subdivision-abbr"],"postal-code":n.attributes["address-postal-code"]},"email-address":n.attributes["email-address"]},status:n.attributes.status,fields:n.attributes.fields},o={inquiry:n};ee.logAmplitude("verify-ui.success",{duration:Wn.local().diff(Wn.fromISO(n.attributes["created-at"]),"seconds").seconds}),j.onEvent(Pe.Success,r),ee.logAmplitude("verify-ui.complete"),j.onEvent(Pe.Complete,r,o),this.setState({isProcessing:!1})},this.pollForInquiryComplete=async()=>new Promise(n=>this.pollHelper(n)),this.pollHelper=async n=>{const{inquiry:r}=this.props;try{const o=(await ne.getResource(Zt(r.type),r.id)).data;switch(o.attributes.status){case Ce.Created:case Ce.Pending:setTimeout(()=>this.pollHelper(n),yh);break;case Ce.Completed:case Ce.NeedsReview:case Ce.Approved:case Ce.Declined:case Ce.Expired:case Ce.Failed:n(o);break;default:ut(o.attributes.status)}}catch(o){o instanceof Ct?setTimeout(()=>this.pollHelper(n),yh):me(o)}},this.state={isProcessing:!1}}componentDidMount(){const{template:t}=this.props;if(t==null){j.redirectToStart();return}t.attributes["auto-trigger-complete-event"]&&setTimeout(()=>{this.handleSubmit()},5e3)}render(){const{template:t,inquiry:n,currentSession:r}=this.props;if(t==null)return null;const a=(n.attributes["next-step"].config||{}).pictograph;return i.jsx(MF,{handleSubmit:this.handleSubmit,hasCompleteButton:vo(n),isChildFlow:r.relationships["parent-session"].data!=null,isProcessing:this.state.isProcessing,pictograph:a})}}function BF(e){return{template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",inquiry:e.inquiry.inquiry,currentSession:e.inquiry.currentSession}}const UF={clearMessages:Lt},HF=Te(BF,UF),qF=HF(VF),$F=b("div").withConfig({displayName:"VerifySupportCameraView__Header",componentId:"sc-gfv5nj-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),GF=e=>{const[t]=z(),[n,r]=f.useState(void 0);if(f.useEffect(()=>{up(e.requestedMicrophone).then(a=>r(a))},[]),n==null)return null;const o=n?t("support-camera.prompt-issues"):e.requestedMicrophone?t("support-camera.prompt-permissions-camera-and-mic"):t("support-camera.prompt-permissions");return i.jsxs("div",{children:[i.jsxs($F,{children:[i.jsx(Xe,{children:e.requestedMicrophone?t("support-camera.title-camera-and-mic"):t("support-camera.title")}),i.jsx(Ve,{children:i.jsx(te,{children:o})})]}),i.jsx(Yt,{url:"cameraSupportPictographUrl",height:"cameraSupportPictographHeight",children:i.jsx(Ye,{"aria-label":"pictograph showing camera error",children:i.jsx(pe,{children:i.jsx(Kn,{})})})}),i.jsx(mt,{children:i.jsx(ge,{onClick:e.handleContinue,"data-test":"support-camera__button--handle-continue",children:e.requestedMicrophone?t("support-camera.button-camera-and-mic"):t("support-camera.button")})})]})},WF=e=>{const t=Ot(),n=()=>{if(e.supportLink!=null&&e.supportLink!=="")if(j.isEmbedded||j.isWebView){const r=e.supportLink.startsWith("/"),o=ex(document.referrer),a=r?`${o}${e.supportLink}`:e.supportLink;window.open(a,"_top"),j.onEvent(Pe.Exit,{inquiryId:e.inquiry.id,sessionToken:ne.accessToken},{inquiry:e.inquiry}),t.goBack()}else window.open(e.supportLink,"_self");else t.goBack()};return i.jsx(GF,{requestedMicrophone:e.requestedMicrophone,handleContinue:n})};function YF(e){var t;return{inquiry:e.inquiry.inquiry,supportLink:(t="itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG")==null?void 0:t.attributes["camera-support-external-link"],featureFlags:e.inquiry.featureFlags}}const zF={routeToNextStep:zt},KF=Te(YF,zF),_h=KF(WF),QF=b("div").withConfig({displayName:"VerifySupportPromptView__Header",componentId:"sc-14anlrq-0"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4),ZF=b("div").withConfig({displayName:"VerifySupportPromptView__SupportContent",componentId:"sc-14anlrq-1"})([""]);function JF(e){const[t]=z();return i.jsxs(ZF,{children:[i.jsxs(QF,{children:[i.jsx(Xe,{children:t("support-prompt.title")}),i.jsx(Ve,{children:t("support-prompt.prompt")})]}),i.jsx(Mb,{onSubmit:e.handleSubmitTicket})]})}const XF=e=>{const[t]=z();f.useEffect(()=>{if(e.inquiry==null){j.redirectToStart();return}},[]);const n=f.useCallback(async r=>{try{await ne.postResourceAction({id:e.inquiry.id,type:e.inquiry.type},"send-support-ticket",{meta:r}),e.history.push("/verify/support/sent");return}catch{e.showMessage(t("support-prompt.failed"))}},[e.inquiry,e.showMessage,t]);return e.inquiry==null?null:i.jsx(JF,{handleSubmitTicket:n})};function eM(e){return{inquiry:e.inquiry.inquiry}}const tM={showMessage:ae},nM=Te(eM,tM),iM=nM(XF),rM=b("div").withConfig({displayName:"VerifySupportSentView__Positioner",componentId:"sc-1locv3x-0"})(["position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:100%;padding:",";"],L.widgetPadding),oM=b("div").withConfig({displayName:"VerifySupportSentView__MessageSentContent",componentId:"sc-1locv3x-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;margin-bottom:","px;"],L.base*4),aM=b.div.withConfig({displayName:"VerifySupportSentView__IconContainer",componentId:"sc-1locv3x-2"})(["margin-bottom:","px;"],L.base*5),sM=b("p").withConfig({displayName:"VerifySupportSentView__MessageSentBody",componentId:"sc-1locv3x-3"})(["margin-left:","px;margin-right:","px;"],L.base*4,L.base*4),cM=b("div").withConfig({displayName:"VerifySupportSentView__TextCentered",componentId:"sc-1locv3x-4"})(["text-align:center;"]);function lM({handleClose:e,hasCompleteButton:t}){const[n]=z();return i.jsxs(rM,{children:[i.jsxs(oM,{children:[i.jsx(aM,{children:i.jsx(pe,{children:i.jsx(tp,{})})}),i.jsxs(cM,{children:[i.jsx(Xe,{children:n("support-sent.title")}),i.jsx(sM,{children:n("support-sent.prompt")})]})]}),t&&i.jsx(ge,{onClick:e,children:n("support-sent.button")})]})}const dM=({inquiry:e})=>{const t=f.useCallback(()=>{e.attributes.status===Ce.Failed?j.onEvent(Pe.Fail,{inquiryId:e.id,referenceId:e.attributes["reference-id"]},{inquiry:e}):j.onEvent(Pe.Exit,{inquiryId:e.id,sessionToken:ne.accessToken},{inquiry:e})},[e]);return i.jsx(lM,{handleClose:t,hasCompleteButton:vo(e)})};function uM(e){return{inquiry:e.inquiry.inquiry}}const mM=Te(uM),hM=mM(dM),pM=f.lazy(()=>tt(()=>import("./index-Cy-FtBZj.js"),__vite__mapDeps([14,1,2,3,4,15,5,6,7]))),fM=f.lazy(()=>tt(()=>import("./index-AneBervg.js"),__vite__mapDeps([16,1,2,3,5,15,4,6,7,17]))),gM=({location:e})=>i.jsx(f.Suspense,{fallback:i.jsx(In,{}),children:i.jsxs(G0,{location:e,children:[i.jsx(ve,{component:Wc,exact:!0,path:"/widget"}),i.jsx(ve,{component:Wc,exact:!0,path:"/verify"}),i.jsx(ve,{component:hL,exact:!0,path:"/verify/invalid/config"}),i.jsx(ve,{component:CL,exact:!0,path:"/verify/invalid/inquiry"}),i.jsx(ve,{component:IL,exact:!0,path:"/verify/invalid/verification"}),i.jsx(ve,{component:cL,exact:!0,path:"/verify/invalid/code"}),i.jsx(ve,{component:iL,exact:!0,path:"/verify/intro"}),i.jsx(ve,{component:dF,exact:!0,path:"/verify/select-country"}),i.jsx(ve,{component:bD,exact:!0,path:"/verify/exit"}),i.jsx(ve,{component:qF,exact:!0,path:"/verify/success"}),i.jsx(ve,{component:_D,exact:!0,path:"/verify/failed"}),i.jsx(ve,{component:iM,exact:!0,path:"/verify/support/prompt"}),i.jsx(ve,{component:hM,exact:!0,path:"/verify/support/sent"}),i.jsx(ve,{render:t=>i.jsx(_h,{requestedMicrophone:!1,...t}),exact:!0,path:"/verify/support/camera"}),i.jsx(ve,{render:t=>i.jsx(_h,{requestedMicrophone:!0,...t}),exact:!0,path:"/verify/support/camera-microphone"}),i.jsx(ve,{component:nP,exact:!0,path:"/verify/device-handoff/prompt"}),i.jsx(ve,{component:V8,exact:!0,path:"/verify/device-handoff/email"}),i.jsx(ve,{component:Y8,exact:!0,path:"/verify/device-handoff/email/sent"}),i.jsx(ve,{component:gP,exact:!0,path:"/verify/device-handoff/sms"}),i.jsx(ve,{component:yP,exact:!0,path:"/verify/device-handoff/sms/sent"}),i.jsx(ve,{component:lP,exact:!0,path:"/verify/device-handoff/qr"}),i.jsx(ve,{component:KL,exact:!0,path:"/verify/phone-number/prompt"}),i.jsx(ve,{component:kL,exact:!0,path:"/verify/phone-number/confirm"}),i.jsx(ve,{component:UL,exact:!0,path:"/verify/phone-number/info"}),i.jsx(ve,{component:hD,exact:!0,path:"/verify/email-address/prompt"}),i.jsx(ve,{component:rD,exact:!0,path:"/verify/email-address/confirm"}),i.jsx(ve,{component:TF,exact:!0,path:"/verify/selfie/:step/prompt"}),i.jsx(ve,{component:LF,exact:!0,path:"/verify/selfie/record"}),i.jsx(ve,{component:xF,exact:!0,path:"/verify/selfie/failed"}),i.jsx(ve,{component:j8,exact:!0,path:"/verify/database"}),i.jsx(ve,{component:Wj,exact:!0,path:"/verify/database/pending"}),i.jsx(ve,{component:Fj,exact:!0,path:"/verify/database/failed"}),i.jsx(ve,{component:GO,exact:!0,path:"/verify/government-id/select"}),i.jsx(ve,{component:TO,exact:!0,path:"/verify/government-id/:step/prompt"}),i.jsx(ve,{component:VD,exact:!0,path:"/verify/government-id/:step/capture"}),i.jsx(ve,{component:zD,exact:!0,path:"/verify/government-id/:step/check"}),i.jsx(ve,{component:pO,exact:!0,path:"/verify/government-id/pending"}),i.jsx(ve,{component:oO,exact:!0,path:"/verify/government-id/failed"}),i.jsx(ve,{component:h9,exact:!0,path:"/verify/documents/intro"}),i.jsx(ve,{component:B9,exact:!0,path:"/verify/documents/:documentNumber/prompt"}),i.jsx(ve,{component:kP,exact:!0,path:"/verify/documents/:documentNumber/capture"}),i.jsx(ve,{component:GP,exact:!0,path:"/verify/documents/:documentNumber/check"}),i.jsx(ve,{component:S9,exact:!0,path:"/verify/documents/:documentNumber/pending"}),i.jsx(ve,{component:JP,exact:!0,path:"/verify/documents/:documentNumber/failed"}),i.jsx(ve,{component:Wc,exact:!0,path:"/inquiry"}),i.jsx(ve,{component:T_,exact:!0,path:Rp}),i.jsx(ve,{component:wj,exact:!0,path:Ap}),i.jsx(ve,{component:NT,exact:!0,path:"/inquiry/documents/prompt"}),i.jsx(ve,{component:k3,exact:!0,path:"/inquiry/documents/capture"}),i.jsx(ve,{component:DA,exact:!0,path:"/inquiry/documents/check"}),i.jsx(ve,{component:qA,exact:!0,path:"/inquiry/documents/pending"}),i.jsx(ve,{component:$2,exact:!0,path:"/inquiry/government-id/select"}),i.jsx(ve,{component:m2,exact:!0,path:"/inquiry/government-id/:step/prompt"}),i.jsx(ve,{component:cE,exact:!0,path:"/inquiry/government-id/:step/capture-lead-in-animation"}),i.jsx(ve,{component:vk,exact:!0,path:"/inquiry/government-id/:step/capture"}),i.jsx(ve,{component:Vm,exact:!0,path:"/inquiry/government-id/:step/check"}),i.jsx(ve,{component:Vm,exact:!0,path:"/inquiry/government-id/:step/check-upload"}),i.jsx(ve,{component:MT,exact:!0,path:"/inquiry/government-id/autoclassification-failure"}),i.jsx(ve,{component:WT,exact:!0,path:"/inquiry/government-id/autoclassification-select"}),i.jsx(ve,{component:Yk,exact:!0,path:"/inquiry/government-id/pending"}),i.jsx(ve,{component:pM,exact:!0,path:"/inquiry/selfie-reflection/prompt"}),i.jsx(ve,{component:fM,exact:!0,path:"/inquiry/selfie-reflection/record"}),i.jsx(ve,{component:x7,exact:!0,path:"/inquiry/selfie/:step/prompt"}),i.jsx(ve,{component:KN,exact:!0,path:"/inquiry/selfie/record"}),i.jsx(ve,{render:t=>i.jsx(Zm,{requestedMicrophone:!1,...t}),exact:!0,path:"/inquiry/support/camera"}),i.jsx(ve,{render:t=>i.jsx(Zm,{requestedMicrophone:!0,...t}),exact:!0,path:"/inquiry/support/camera-microphone"}),i.jsx(ve,{component:wR,exact:!0,path:"/inquiry/device-handoff/prompt"}),i.jsx(ve,{component:XR,exact:!0,path:"/inquiry/device-handoff/started"}),i.jsx(ve,{component:Q_,exact:!0,path:"/inquiry/device-handoff/email"}),i.jsx(ve,{component:rR,exact:!0,path:"/inquiry/device-handoff/email/sent"}),i.jsx(ve,{component:FR,exact:!0,path:"/inquiry/device-handoff/sms"}),i.jsx(ve,{component:GR,exact:!0,path:"/inquiry/device-handoff/sms/sent"}),i.jsx(ve,{component:h_,exact:!0,path:"/inquiry/create-persona/passkey-registration"}),i.jsx(ve,{component:P_,exact:!0,path:"/inquiry/create-persona/success"}),i.jsx(ve,{component:Cj,exact:!0,path:"/inquiry/verify-with-persona/passkey-authentication"}),i.jsx(ve,{component:Tj,exact:!0,path:"/inquiry/verify-with-persona/success"}),i.jsx(ve,{component:hj,exact:!0,path:"/inquiry/verify-with-persona/error"}),i.jsx(ve,{component:X2,exact:!0,path:"/inquiry/integration"}),i.jsx(ve,{component:sj,exact:!0,path:"/inquiry/ui"}),i.jsx(ve,{component:Y2,exact:!0,path:"/inquiry/inactive"}),i.jsx(ve,{component:Ej})]})}),Ri=300,Gb=400,Wb=200,Yb=100,bM=b("div").withConfig({displayName:"AnimatedPage__Transitioner",componentId:"sc-8r1su2-0"})(["width:100%;@media ","{position:absolute;z-index:",";height:100%;&.slide-left-enter{transform:translateX(100%);}&.slide-left-enter-active{pointer-events:none;transform:translateX(0%);transition:","ms;}&.slide-left-exit{transform:translateX(0%);}&.slide-left-exit-active{pointer-events:none;transform:translateX(-100%);transition:","ms;}&.slide-right-enter{transform:translate(-100%);}&.slide-right-enter-active{pointer-events:none;transform:translateX(0%);transition:","ms;}&.slide-right-exit{transform:translateX(0%);}&.slide-right-exit-active{pointer-events:none;transform:translateX(100%);transition:","ms;}&.slide-down-enter{z-index:",";}&.slide-down-enter-active{pointer-events:none;}&.slide-down-exit{z-index:",";transform:translateY(0%);}&.slide-down-exit-active{transform:translateY(100%);pointer-events:none;transition:","ms;}&.slide-up-enter{transform:translateY(100%);z-index:",";}&.slide-up-enter-active{pointer-events:none;transform:translateY(0%);transition:","ms;}&.slide-up-exit{z-index:",";}&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;pointer-events:none;transition:","ms;transition-delay:","ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;pointer-events:none;transition:","ms;}}@media ","{&.slide-left-exit,&.slide-right-exit,&.slide-up-exit,&.slide-down-exit,&.fade-exit{display:none;}&.slide-left-exit-active,&.slide-right-exit-active,&.slide-up-exit-active,&.slide-down-exit-active,&.fade-exit-active{display:none;}}&.none-exit{display:none;}&.none-exit-active{display:none;}"],jt.isMobile,yt.page,Ri,Ri,Ri,Ri,yt.notifications-2,yt.notifications-1,Ri,yt.notifications-1,Ri,yt.notifications-2,Gb,Yb,Wb,jt.isNotMobile),CM=b("div").withConfig({displayName:"AnimatedPage__ScrollingPage",componentId:"sc-8r1su2-1"})(["",";@media ","{position:relative;height:100%;overflow-y:auto;}"],({isFullscreenPage:e})=>!e&&`
      padding-top: ${j.widgetPadding.top}px;
      padding-left: ${j.widgetPadding.left}px;
      padding-right: ${j.widgetPadding.right}px;
      padding-bottom: ${j.widgetPadding.bottom}px;

      /* For Apple devices with notches; will be ignored for other devices */
      /* This allows us to use object-fit=cover in the HTML's meta tag */
      /* https://webkit.org/blog/7929/designing-websites-for-iphone-x/ */
      padding-left: calc(${j.widgetPadding.left}px + env(safe-area-inset-left));
      padding-right: calc(${j.widgetPadding.right}px + env(safe-area-inset-right));
      padding-top: calc(${j.widgetPadding.top}px + env(safe-area-inset-top));
      padding-bottom: calc(${j.widgetPadding.bottom}px + env(safe-area-inset-bottom));
  `,jt.isMobile),xM=e=>t=>f.cloneElement(t,{classNames:e}),vM=({scrollingPageRef:e,enableGovidRedesign:t,timeoutEnter:n,onEntered:r,location:o})=>(f.useLayoutEffect(()=>{const a=setTimeout(r,n!=null?n:0);return()=>clearTimeout(a)},[]),i.jsxs(bM,{children:[i.jsx(CM,{"data-test":"animated-page__scrolling-page",ref:e,isFullscreenPage:zb(o,t),children:i.jsx(gM,{location:o})}),i.jsx(ff,{})]}));function IM({pageTransition:e=Ti.Slide,onPageTransition:t}){var m,h,p;const n=Ot(),r=Dr(),o=ot(g=>{var C;return((C=g.inquiry.inquiryTemplateVersion)==null?void 0:C.attributes["govid-design-version"])===_o.V1}),a=f.useRef(),s=f.useCallback(()=>{var C,I;const g=Array.from((I=(C=a.current)==null?void 0:C.children)!=null?I:[]).reduce((v,x)=>v+x.scrollHeight,zb(r,o)?0:j.widgetPadding.top+j.widgetPadding.bottom);t==null||t({pageHeight:g}),Yi()},[r,o,t]);let c,l=0,u=0;if(SM(r))c="none";else{const g=n.action==="POP"||((m=r.state)==null?void 0:m.back),C=g?(h=r.state)==null?void 0:h.backTransition:(p=r.state)==null?void 0:p.transition;switch(e=C!=null?C:e,e){case Ti.None:c="none",l=0,u=0;break;case Ti.Fade:c="fade",l=Yb+Gb,u=Wb;break;case Ti.Slide:g?c="slide-right":c="slide-left",l=Ri,u=Ri;break;case Ti.SlideVertical:g?c="slide-down":c="slide-up",l=Ri,u=Ri;break;default:ut(e)}}const d=f.useCallback(()=>{var g,C,I;s(),(g=r.state)!=null&&g.skipAnimation&&(r.state.skipAnimation=!1),n.action==="PUSH"&&((C=n.entries[n.index-1])!=null&&C.state)&&(n.entries[n.index-1].state.backTransition=(I=r==null?void 0:r.state)==null?void 0:I.transition)},[n.action,n.entries,n.index,s,r]);return i.jsx(Mh,{"data-test":"animated-page__transition",childFactory:xM(c),children:i.jsx(xa,{timeout:{enter:l,exit:u},mountOnEnter:!0,unmountOnExit:!0,classNames:c,onEntered:d,children:i.jsx(vM,{scrollingPageRef:a,enableGovidRedesign:o,timeoutEnter:l,onEntered:d,location:r})},r.key)})}function SM(e){var t;return((t=e.state)==null?void 0:t.skipAnimation)||e.pathname.match(new RegExp("/(inquiry|verify)/selfie/record"))||e.pathname.match(new RegExp("/(inquiry|verify)/government-id/.+/capture"))||e.pathname.match(new RegExp("/inquiry/government-id/.+/check$"))}function zb(e,t){return!!(t&&(e.pathname.match(new RegExp("/inquiry/government-id/.+/capture"))||e.pathname.match(new RegExp("/inquiry/government-id/.+/check$"))))}const wM=f.memo(function(){var n;const t=ot(r=>r.inquiry.inquiryTemplateVersion);return t==null?null:i.jsx("div",{style:{display:"none"},children:(n=t.attributes.assets)==null?void 0:n.map(r=>i.jsx(Af,{src:r.url,contentType:r["content-type"]},r.url))})}),yM=()=>{const e=Ot(),t=ot(a=>a.inquiry.inquiry),n=ot(a=>a.inquiry.featureFlags),[r,{enable:o}]=rt(!1);return f.useEffect(()=>{var s,c;if(r||t==null||n==null||!n["inquiry:block-embedded-flow-if-not-in-iframe-report-only"]||!j.isEmbedded||tv()||(me(new Error("Detected embedded flow outside iframe"),"warning",{inquiry:t.id},{organization:t.relationships.organization.data.id,inquiryTemplateVersion:(c=(s=t.relationships["inquiry-template-version"])==null?void 0:s.data)==null?void 0:c.id,flowType:j.flowType}),!n["inquiry:block-embedded-flow-if-not-in-iframe"]))return;const a=setTimeout(()=>e.replace("/verify/invalid/config",{skipAnimation:!0}),0);return o(),()=>clearTimeout(a)},[t,n]),null},_M=b("div").withConfig({displayName:"ErrorPage__Container",componentId:"sc-usyifj-0"})(["margin:",";padding-top:","px;"],L.widgetPadding,L.base*2),RM=b("div").withConfig({displayName:"ErrorPage__Header",componentId:"sc-usyifj-1"})(["min-height:",";margin-bottom:","px;"],Be.header,L.base*4);function AM(){const[e]=z();return i.jsxs(i.Fragment,{children:[i.jsxs(_M,{"data-test":"error-page",children:[i.jsxs(RM,{children:[i.jsx(Xe,{children:e("error.title")}),i.jsx("p",{children:e("error.prompt")})]}),i.jsx(Ye,{"aria-label":"pictograph showing application error",children:i.jsx(pe,{children:i.jsx(Kn,{})})}),i.jsx(ge,{onClick:()=>j.redirectToStart(),children:e("error.btn-try-again")})]}),i.jsx(ff,{})]})}function TM(){var u,d,m,h,p,g,C,I,v,x,R,_,T,E,V;const[e,{enable:t,disable:n}]=rt(!1),r=ot(D=>D.inquiry.inquiry),o=r!=null,a=ot(D=>{var O,U,M;return(M=(U=(O=D.inquiry.currentSession)==null?void 0:O.attributes)==null?void 0:U["show-new-device-fraud-warning-dialog"])!=null?M:!1}),s=(h=(m=(d=(u=r==null?void 0:r.attributes)==null?void 0:u["next-step"])==null?void 0:d.config)==null?void 0:m.localizations)==null?void 0:h["new-device-fraud-warning-dialog"],c=ot(Ii),l={backgroundColor:(g=(p=c==null?void 0:c["background-color"])==null?void 0:p.base)==null?void 0:g.base,padding:(I=(C=c==null?void 0:c.padding)==null?void 0:C.modal)==null?void 0:I.base,border:{radius:(x=(v=c==null?void 0:c["border-radius"])==null?void 0:v.modal)==null?void 0:x.base}};return f.useEffect(()=>{o&&a&&setTimeout(()=>t(),250)},[o,a]),!o||!j.isHosted?null:i.jsxs(Si,{isOpen:e,onClose:n,styles:l,"data-test":"new-device-fraud-warning-dialog","aria-labelledby":"new-device-fraud-warning-dialog__title","aria-describedby":"new-device-fraud-warning-dialog__description",children:[i.jsx(dt,{id:"new-device-fraud-warning-dialog__title",styles:(R=c==null?void 0:c["title-style"])==null?void 0:R.base.base,children:i.jsx(te,{children:(_=s==null?void 0:s.title)!=null?_:""})}),i.jsx(at,{id:"new-device-fraud-warning-dialog__description",styles:(T=c==null?void 0:c["text-style"])==null?void 0:T.base.base,children:i.jsx(te,{children:(E=s==null?void 0:s.prompt)!=null?E:""})}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"new-device-fraud-warning-dialog__button--close","data-test":"new-device-fraud-warning-dialog__button--close",buttonType:Z.Primary,styles:(V=c==null?void 0:c["button-primary-style"])==null?void 0:V.base.base,onClick:n,children:s==null?void 0:s["btn-continue"]})]})}const EM=()=>{var a;const{pathname:e}=Dr(),t=ot(s=>s.inquiry.inquiry),n=ot(s=>s.inquiry.featureFlags),r=(a=t==null?void 0:t.attributes)==null?void 0:a["next-step"],o=f.useRef({width:window.innerWidth,height:window.innerHeight,prevWidth:window.innerWidth,prevHeight:window.innerHeight});return f.useEffect(()=>{if(!Tn.isCloudRunEnabled(n))return;const s=d=>{var h;const m=d.target;m!=null&&Tn.track({type:"inquiry.ui.click",data:{button_type:d.button,element_name:(h=kM(m))!=null?h:void 0,pointer_type:d==null?void 0:d.pointerType,position_x:d.clientX,position_y:d.clientY,pressure:d==null?void 0:d.pressure},stepName:r==null?void 0:r.name,pathName:e},n)},c=()=>{Tn.track({type:"inquiry.ui.background",stepName:r==null?void 0:r.name,pathName:e},n)},l=()=>{Tn.track({type:"inquiry.ui.foreground",stepName:r==null?void 0:r.name,pathName:e},n)},u=bp(500,d=>{if(!((d==null?void 0:d.currentTarget)instanceof Window))return;const m=d.currentTarget.innerWidth,h=d.currentTarget.innerHeight,p=o.current.width,g=o.current.height;o.current={width:m,height:h,prevWidth:p,prevHeight:g},Tn.track({type:"inquiry.screen.dimensions",data:{old_width:p,old_height:g,new_width:m,new_height:h},stepName:r==null?void 0:r.name,pathName:e},n)});return window.addEventListener("click",s),window.addEventListener("blur",c),window.addEventListener("focus",l),window.addEventListener("resize",u),u6(e,r==null?void 0:r.type)||Tn.track({type:"inquiry.page.view",stepName:r==null?void 0:r.name,pathName:e},n),()=>{window.removeEventListener("click",s),window.removeEventListener("blur",c),window.removeEventListener("focus",l),window.removeEventListener("resize",u)}},[r,e,n]),null};function kM(e){return e.id||e.getAttribute("data-react-class")}function NM(){var u,d,m,h,p,g,C,I,v,x,R,_,T,E,V;const[e,{enable:t,disable:n}]=rt(!1),r=ot(D=>D.inquiry.inquiry),o=r!=null,a=ot(D=>{var O,U,M;return(M=(U=(O=D.inquiry.currentSession)==null?void 0:O.attributes)==null?void 0:U["show-unsupported-browser-warning-dialog"])!=null?M:!1}),s=(h=(m=(d=(u=r==null?void 0:r.attributes)==null?void 0:u["next-step"])==null?void 0:d.config)==null?void 0:m.localizations)==null?void 0:h["unsupported-browser-warning-dialog"],c=ot(Ii),l={backgroundColor:(g=(p=c==null?void 0:c["background-color"])==null?void 0:p.base)==null?void 0:g.base,padding:(I=(C=c==null?void 0:c.padding)==null?void 0:C.modal)==null?void 0:I.base,border:{radius:(x=(v=c==null?void 0:c["border-radius"])==null?void 0:v.modal)==null?void 0:x.base}};return f.useEffect(()=>{o&&a&&setTimeout(()=>t(),250)},[o,a]),o?i.jsxs(Si,{isOpen:e,onClose:n,styles:l,"data-test":"unsupported-browser-warning-dialog","aria-labelledby":"unsupported-browser-warning-dialog__title","aria-describedby":"unsupported-browser-warning-dialog__description",children:[i.jsx(dt,{id:"unsupported-browser-warning-dialog__title",styles:(R=c==null?void 0:c["title-style"])==null?void 0:R.base.base,children:i.jsx(te,{children:(_=s==null?void 0:s.title)!=null?_:""})}),i.jsx(at,{id:"unsupported-browser-warning-dialog__description",styles:(T=c==null?void 0:c["text-style"])==null?void 0:T.base.base,children:i.jsx(te,{children:(E=s==null?void 0:s.prompt)!=null?E:""})}),i.jsx(Je,{height:2}),i.jsx(ge,{id:"unsupported-browser-warning-dialog__button--close","data-test":"unsupported-browser-warning-dialog__button--close",buttonType:Z.Primary,styles:(V=c==null?void 0:c["button-primary-style"])==null?void 0:V.base.base,onClick:n,children:s==null?void 0:s["btn-continue"]})]}):null}const jM=["/verify","/verify/intro","/verify/success","/verify/support/sent","/verify/failed","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending","/verify/invalid/config","/verify/invalid/inquiry","/verify/invalid/verification"],PM=["/widget","/verify","/verify/exit","/verify/success","/verify/support/sent","/verify/failed","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending"],DM=["/widget","/verify","/verify/intro","/verify/database/pending","/verify/documents/:documentNumber/pending","/verify/government-id/pending"],OM=["/inquiry/inactive","/verify/invalid"],LM=()=>{var I;const e=ot(v=>v.inquiry.inquiry),t=ot(v=>v.verification.verification),n=ot(v=>"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG"),r=f.useContext(Ze),o=Ot(),a=Dr(),[s,{enable:c,disable:l}]=rt(!1);f.useEffect(()=>{c();const v=setTimeout(l,500);return()=>{clearTimeout(v)}},[a]);const u=()=>{o.goBack()},d=()=>{OM.some(v=>bn(a.pathname,{path:v,exact:!1,strict:!1}))?m():o.push("/verify/exit")},m=()=>{hd(),j.onEvent(Pe.Exit,{inquiryId:e==null?void 0:e.id,sessionToken:ne.accessToken},{inquiry:e}),Nn(o),o.push("/widget")},h=t!=null&&t.attributes.status===kt.Submitted,p=!j.isHosted&&!j.isInline&&!PM.some(v=>bn(a.pathname,{path:v,exact:!0,strict:!1}))&&!(n!=null&&n.attributes["hide-verify-exit-button"]),g=((I=o.index)!=null?I:0)>0&&!jM.some(v=>bn(a.pathname,{path:v,exact:!0,strict:!1}))&&!(n!=null&&n.attributes["hide-verify-back-button"]);let C=r.navbarLogoDisplay;return DM.some(v=>bn(a.pathname,{path:v,exact:!0,strict:!1}))&&(C=Ni.None),i.jsx(Og,{onBack:u,onClose:d,showBackButton:g,showCloseButton:p,logoDisplay:C,logoUrl:r.logoUrl,loading:h||s})},FM=()=>{const e=ot(n=>n.inquiry.inquiry);return uo(e)?i.jsx(t4,{}):i.jsx(LM,{})},MM=f.createContext({}),VM=e=>{var r,o,a,s,c,l,u,d,m;const t=f.useContext(MM),n=(r=e.inputId)!=null?r:t.inputId;return{hasError:(o=e.hasError)!=null?o:t.hasError,hasWarning:(a=e.hasWarning)!=null?a:t.hasWarning,inputId:n,helperTextId:(s=e.helperTextId)!=null?s:t.helperTextId,errorTextId:(c=e.errorTextId)!=null?c:t.errorTextId,warningTextId:(l=e.warningTextId)!=null?l:t.warningTextId,labelId:(u=e.labelId)!=null?u:t.labelId,disabled:(d=e.disabled)!=null?d:t.disabled,maxLength:(m=e.maxLength)!=null?m:t.maxLength}},ea={width:32,height:18},io={diameter:14,offset:2},BM=b.div.withConfig({displayName:"ToggleSlider__Container",componentId:"sc-1hr5fbp-0"})(["display:inline-flex;align-items:center;position:relative;"]),UM=b.div.withConfig({displayName:"ToggleSlider__Switch",componentId:"sc-1hr5fbp-1"})(["",";position:relative;display:inline-flex;height:","px;width:","px;border-radius:1000px;&:before{position:absolute;content:'';height:","px;width:","px;top:0;right:0;bottom:0;background-color:",";transition:",";border-radius:1000px;}&:after{position:absolute;content:'';height:","px;width:","px;bottom:","px;background-color:",";transition:",";border-radius:1000px;right:","px;","}"],Np,ea.height,ea.width,ea.height,ea.width,({theme:e,checked:t,disabled:n})=>n?t?S.Color.CoreBlue300:e.color.background.disabled:t?S.Color.BackgroundInputCheckboxChecked:S.Color.BackgroundInputToggle,et.Medium,io.diameter,io.diameter,io.offset,({theme:e})=>e.color.background.primary,et.Medium,io.offset,({checked:e})=>!e&&$(["transform:translateX(-","px);"],qM())),HM=b(P3).withConfig({displayName:"ToggleSlider__ToggleLabel",componentId:"sc-1hr5fbp-2"})(["cursor:",";color:",";padding:0 ",";white-space:nowrap;",""],({disabled:e})=>e?"initial":"pointer",S.Color.TextSecondary,S.Spacing[2],({theme:e,disabled:t})=>t&&$(["color:",";"],e.color.text.disabled));function qM(){return ea.width-io.diameter-io.offset*2}const $M=b.input.withConfig({displayName:"ToggleSlider__HiddenInput",componentId:"sc-1hr5fbp-3"})(["height:0;width:0;margin:-1px;border:0;overflow:hidden;clip:rect(0,0,0,0);position:absolute;"]),GM=f.forwardRef(function({className:t,disabled:n,titleOff:r="Off",titleOn:o="On",onChange:a=()=>{},value:s,id:c,labelOn:l,labelOff:u,"data-test":d},m){const h=VM({disabled:n}),p=f.useMemo(()=>hp("pds_toggleslider__"),[]),g=s?l:u||l,[C,{enable:I,disable:v}]=rt(),x=f.useCallback(()=>{var _;a(!s),(_=R.current)==null||_.focus()},[a,s]),R=f.useRef();return i.jsxs(BM,{className:t,"data-test":d,title:s?o:r,"aria-readonly":h.disabled,ref:m,children:[g!=null&&i.jsx(HM,{htmlFor:p,disabled:h.disabled,children:g}),i.jsx(UM,{id:c,checked:!!s,disabled:h.disabled,focused:C,onClick:h.disabled?void 0:x}),i.jsx($M,{id:p,ref:R,"data-test-toggle-status":s?"on":"off",disabled:h.disabled,type:"checkbox",checked:!!s,readOnly:!0,onChange:n?void 0:x,onFocus:I,onBlur:v,"aria-checked":!!s,role:"switch",...g?{"aria-labelledby":p}:{"aria-label":s?"Toggle on":"Toggle off"}})]})}),WM=b("div").withConfig({displayName:"DebugTools__Container",componentId:"sc-ng9um5-0"})(["cursor:pointer;display:flex;align-items:center;justify-content:flex-end;margin:","px auto;transition:0.5s;user-select:none;@media ","{position:fixed;right:20px;bottom:64px;&:hover,&:focus-within{right:0px;}}@media ","{max-width:",";width:100%;label{color:",";}}"],L.base,jt.isMobile,jt.isNotMobile,Dp.small,Le.white),Rh=b("div").withConfig({displayName:"DebugTools__Prompt",componentId:"sc-ng9um5-1"})(["width:130px;white-space:nowrap;"]);function YM(e){const{inquiry:t,isVisible:n,forcedStatus:r}=e;f.useEffect(()=>{n&&r==null&&e.saveForcedStatus(kt.Passed,t)});const o=r===kt.Passed?kt.Failed:kt.Passed;return n?i.jsx(WM,{id:`debug-tools__toggle-slider--${o}`,"data-test":"debug-tools",children:i.jsx(GM,{id:"debug-tools__toggle-slider",value:r===kt.Passed,labelOn:i.jsx(Rh,{children:"Pass verifications"}),labelOff:i.jsx(Rh,{children:"Fail verifications"}),onChange:()=>e.saveForcedStatus(o,t)})}):i.jsx("div",{})}const zM=b("div").withConfig({displayName:"HelpTab__Positioner",componentId:"sc-ok8jr7-0"})(["position:fixed;display:",";top:calc(100%);right:0;"],({isVisible:e})=>e?"block":"none"),KM=Ln(["0%{box-shadow:0 2px 5px 0 rgba(0,0,0,0.3);}50%{box-shadow:0 2px 10px 2px rgba(0,0,0,0.3);}100%{box-shadow:0 2px 5px 0 rgba(0,0,0,0.3);}"]),QM=b("div").withConfig({displayName:"HelpTab__Contents",componentId:"sc-ok8jr7-1"})(["align-items:center;display:flex;transition:0.4s cubic-bezier(0,0,0.2,1);transform:translateY(-60px);&:hover{transform:translateY(-64px);}background-color:",";animation:"," 1s;animation-iteration-count:infinite;border:1px solid ",";border-radius:","px;cursor:pointer;margin:","px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;"],Le.white,KM,Le.gray20,L.base*3,L.base,L.base*1.5,L.base*2,L.base,L.base),ZM=b(qC).withConfig({displayName:"HelpTab__IconToggle",componentId:"sc-ok8jr7-2"})(["margin-right:4px;"]);function JM(e){return i.jsx(zM,{isVisible:e.isVisible,children:i.jsxs(QM,{onClick:e.isVisible?e.handleRouteToSupport:PC,"data-test":"help-tab__button",children:[i.jsx(ZM,{}),"Help"]})})}const XM=b("div").withConfig({displayName:"InquiryProgressBar__Bar",componentId:"sc-pjtzlh-0"})(["width:","%;transition:width 0.5s;height:5px;background-color:",";position:absolute;z-index:",";"],e=>e.widthPercentage,({theme:e})=>e.colorProgressBar,yt.navbar),eV=({widthPercentage:e,className:t})=>i.jsx(XM,{className:t,"data-test":"header__progress-bar",widthPercentage:e});function tV(e,t){if(e==="/verify/support/sent")return 100;const n=nV(t),r=t&&t.template?t.template.attributes["steps-config-types-count"]:1,o=!!t.inquiry,a=iV(t);let s;return a?s=100:o?s=Math.min(n/r*100,100):s=0,s}function nV(e){var n;if(!e||!e.verifications||!e.inquiry)return 0;let t=DC(e.verifications).filter(r=>r.attributes.status===kt.Passed).length;return(n=e.inquiry)!=null&&n.attributes["selected-country-code"]&&(t+=1),t}function iV(e){return e.inquiry?e.inquiry.attributes["next-step"].type===Ae.Completed||e.inquiry.attributes["next-step"].type===Ae.Failed||[Ce.Completed,Ce.Failed,Ce.Approved,Ce.Declined,Ce.NeedsReview].includes(e.inquiry.attributes.status):!1}const rV=b("div").withConfig({displayName:"Notification__Container",componentId:"sc-r6vf7z-0"})(["box-shadow:",";border-radius:",";background-color:",";padding:",";padding-left:","px;margin:4px;pointer-events:all;display:flex;align-items:center;justify-content:space-between;"],Mi.Mid,dn.rounded,({theme:e})=>e.colorModalBackground,S.Spacing[3],Sn*2.5);function oV({children:e,handleClose:t}){return i.jsxs(rV,{role:"alertdialog",children:[i.jsx(Ve,{children:e}),i.jsx(mo,{id:"notification__close",onClick:t,type:"button",autoFocus:!0,"aria-label":"close",children:i.jsx(W0,{height:16,width:16})})]})}const Tl=250,aV=b("div").withConfig({displayName:"Notifications__ContentPositioner",componentId:"sc-7knmmm-0"})(["position:relative;"]),sV=b("div").withConfig({displayName:"Notifications__Content",componentId:"sc-7knmmm-1"})(["position:absolute;width:100%;overflow:hidden;z-index:",";height:200px;pointer-events:none;"],yt.notifications),cV=b("div").withConfig({displayName:"Notifications__Anim",componentId:"sc-7knmmm-2"})(["position:absolute;width:100%;transition:","ms;&.slide-left-enter{transform:translateY(-100%);}&.slide-left-enter-active{transform:translateY(0%);}&.slide-left-exit{transform:translateY(0%);}&.slide-left-exit-active{transform:translateY(-100%);}"],Tl);function lV(e){const t=e.messages&&e.messages[0];return i.jsx(aV,{"data-test":"notifications",children:i.jsx(sV,{children:i.jsx(Mh,{children:i.jsx(xa,{timeout:{enter:Tl,exit:Tl},mountOnEnter:!0,unmountOnExit:!0,classNames:"slide-left",children:i.jsx(cV,{children:t&&i.jsx(oV,{id:t.id,"data-test":"notification",handleClose:e.clearMessages,children:t.message},t.id)})},t&&t.id)})})})}function dV(e){return{messages:e.messages.messages}}const uV={clearMessages:Lt},mV=Te(dV,uV),hV=mV(lV),pV=1e3;class fV{constructor(){this.distractionEvents=0,this.blurHandler=()=>{this.distractionEvents++},window.addEventListener("blur",this.blurHandler)}dispose(){window.removeEventListener("blur",this.blurHandler)}}class gV{constructor(){this.times=[],this.baseline=0,this.lastTime=Date.now(),this.currentlyActive=!0,this.hesitationBaseline=()=>this.baseline,this.hesitationCount=()=>this.times.length,this.hesitationTime=()=>OC(this.times),this.setActiveState=t=>{this.currentlyActive=t},this.updateTime=()=>{const t=Date.now(),n=t-this.lastTime;this.currentlyActive&&(this.baseline+=n,n>pV&&this.times.push(n)),this.lastTime=t},window.addEventListener("keydown",this.updateTime),window.addEventListener("mousemove",this.updateTime)}dispose(){window.removeEventListener("keydown",this.updateTime),window.removeEventListener("mousemove",this.updateTime)}}class bV{constructor(){this.shortcutCopies=0,this.shortcutPastes=0,this.keyHandler=t=>{const n=t.ctrlKey||t.metaKey;t.key==="v"&&n?this.shortcutPastes++:t.key==="c"&&n&&this.shortcutCopies++},window.addEventListener("keydown",this.keyHandler)}dispose(){window.removeEventListener("keydown",this.keyHandler)}}class CV{constructor(){this.autofillStarts=0,this.autofillCancels=0,this.insertedStyles=Co(["input:-webkit-autofill{animation-name:onAutoFillStart;animation-play-state:paused;}input:not(:-webkit-autofill){animation-name:onAutoFillCancel;animation-play-state:paused;}@keyframes onAutoFillStart{from{}}@keyframes onAutoFillCancel{from{}}"]),this.autoFillStart=t=>this.autofillStarts++,this.autoFillCancel=t=>this.autofillCancels++,this.onAnimationStart=({target:t,animationName:n})=>{switch(n){case"onAutoFillStart":return this.autoFillStart(t);case"onAutoFillCancel":return this.autoFillCancel(t)}},this.onInput=t=>{typeof InputEvent<"u"&&t instanceof InputEvent&&(t.inputType==="insertReplacementText"||!("data"in t)?this.autoFillStart(t.target):this.autoFillCancel(t.target))},window.addEventListener("animationstart",this.onAnimationStart),window.addEventListener("input",this.onInput)}dispose(){window.removeEventListener("animationstart",this.onAnimationStart),window.removeEventListener("input",this.onInput)}}var Kb=(e=>(e.SaveForcedStatus="test/SAVE_FORCED_STATUS",e))(Kb||{});function xV(e,t){if(!(!bs.sandboxToolsDisabled||t&&t.attributes.environment==="sandbox"))throw $e("Tried to set forced result when debug tools are disabled"),new Error("Tried to set forced result when debug tools are disabled");return{payload:{forcedStatus:e},type:"test/SAVE_FORCED_STATUS"}}const vV=3e4,IV=b("div").withConfig({displayName:"Application__Content",componentId:"sc-sbyni9-0"})(["@media ","{position:absolute;left:0;right:0;top:0;bottom:0;}"],jt.isMobile);class SV extends f.Component{constructor(){super(...arguments),this.state={hasError:!1,prevBehaviorMetrics:void 0,lastPageChangeEventKey:void 0},this.handleMessage=t=>{var n;if(t.origin===j.inquiryParams["iframe-origin"])switch(t.data.action){case nl.Open:Yi();break;case nl.Exit:t.data.metadata.force?(ee.logAmplitude("verify-ui.exit"),j.onEvent(Pe.Exit,{inquiryId:(n=this.props.inquiry)==null?void 0:n.id,sessionToken:ne.accessToken},{inquiry:this.props.inquiry}),j.redirectToStart(this.props.history.push)):this.props.history.location.pathname!=="/verify/exit"&&this.props.history.push("/verify/exit");break}},this.updateBehaviorMetrics=async()=>{if(this.props.currentSession==null)return;const t={type:y.CurrentInquirySession,attributes:{"distraction-events":this.distractionTracker.distractionEvents,"hesitation-baseline":this.hesitationTracker.hesitationBaseline(),"hesitation-count":this.hesitationTracker.hesitationCount(),"hesitation-time":this.hesitationTracker.hesitationTime(),"shortcut-copies":this.shortcutTracker.shortcutCopies,"shortcut-pastes":this.shortcutTracker.shortcutPastes,"autofill-cancels":this.autofillTracker.autofillCancels,"autofill-starts":this.autofillTracker.autofillStarts,"flow-type":j.flowType}},n=JSON.stringify(t.attributes);if(n!==this.state.prevBehaviorMetrics)try{await this.props.updateBehaviorMetrics(t),this.setState({prevBehaviorMetrics:n})}catch{}},this.handleClickTracking=t=>{let n=t.target;const{history:r}=this.props;if(n!=null){for(;!this.getElementName(n)&&n.parentElement;)n=n.parentElement;ee.logAmplitude("verify-ui.click",{element:this.getElementName(n),path:r.location.pathname})}},this.handleRouteToSupport=()=>{this.props.history.push("/verify/support/prompt")},this.handleRouteChange=(t,n)=>{n!=="REPLACE"&&this.props.clearMessagesOnRouteChange(),hC(t.pathname)},this.reportPageMetadata=({pageHeight:t})=>{const{inquiry:n,location:r}=this.props,{lastPageChangeEventKey:o}=this.state;r.pathname!=="/widget"&&r.key!==o&&(this.setState({lastPageChangeEventKey:r.key}),j.onEvent(Pe.PageChange,{name:n==null?void 0:n.attributes["next-step"].name,path:r.pathname,metadata:{pageHeight:t}}))}}static getDerivedStateFromError(){return{hasError:!0}}componentDidMount(){this.props.saveLocaleInfo(Zx()),this.props.checkCamera(),window.addEventListener("message",this.handleMessage),window.addEventListener("click",this.handleClickTracking,{capture:!0}),j.onEvent(Pe.Load),this.unregister=this.props.history.listen(this.handleRouteChange),this.autofillTracker=new CV,this.distractionTracker=new fV,this.hesitationTracker=new gV,this.shortcutTracker=new bV,this.behaviorUpdateInterval=window.setInterval(this.updateBehaviorMetrics,vV)}componentWillUnmount(){var t;window.removeEventListener("message",this.handleMessage),window.removeEventListener("click",this.handleClickTracking),(t=this.unregister)==null||t.call(this),this.autofillTracker.dispose(),this.distractionTracker.dispose(),this.hesitationTracker.dispose(),this.shortcutTracker.dispose(),clearInterval(this.behaviorUpdateInterval)}componentDidCatch(t,n){kl({level:"error",message:"Application.componentDidCatch",data:{name:t.name,message:t.message}}),me(t,"fatal",n,{functionName:"Application.componentDidCatch"}),Kt({status:0,code:"application_error"},t)}componentDidUpdate(){this.props.inquiry&&this.hesitationTracker.setActiveState(!0)}render(){var h;const{forcedStatus:t,inquiry:n,inquiryState:r,localeIsLoaded:o,organization:a,template:s,theme:c,uiStatus:l,verifications:u}=this.props,d=zf(c),m=tV(this.props.location.pathname,r);if(this.state.hasError)return i.jsx(fu,{"data-test":"application__error",themeSerialized:d,flowType:j.flowType,hidden:!1,children:i.jsx(AM,{})});if(o){const p=((h=n==null?void 0:n.attributes)==null?void 0:h.environment)==="sandbox",g=!bs.sandboxToolsDisabled&&p&&["/verify/success","/verify/failed","/verify/support/sent"].every(I=>!bn(this.props.location.pathname,{path:I})),C=nF(a,s,n,u)&&!bn(this.props.location.pathname,{path:"/verify/support"})&&!bn(this.props.location.pathname,{path:"/verify/failed"});return i.jsxs(i.Fragment,{children:[i.jsx(wM,{}),i.jsx(EM,{}),i.jsx(yM,{}),i.jsx(fu,{"data-test":"application",flowType:j.flowType,isSandbox:p,sandboxBannerDisabled:bs.sandboxBannerDisabled,footerWidgets:i.jsxs(i.Fragment,{children:[i.jsx(YM,{inquiry:n,isVisible:g,forcedStatus:t,saveForcedStatus:this.props.saveForcedStatus}),i.jsx(JM,{isVisible:C,handleRouteToSupport:this.handleRouteToSupport})]}),themeSerialized:d,hidden:l===on.Initializing,children:i.jsxs(i.Fragment,{children:[uo(n)?null:i.jsx(eV,{widthPercentage:m}),i.jsx(hV,{}),i.jsx(FM,{}),i.jsx(TM,{}),i.jsx(NM,{}),i.jsxs(IV,{children:[i.jsx(IM,{pageTransition:d.pageTransition,onPageTransition:this.reportPageMetadata}),this.autofillTracker!=null&&i.jsx(this.autofillTracker.insertedStyles,{})]})]})})]})}else return i.jsx("div",{"data-test":"application__loading"})}getElementName(t){return t.id||t.getAttribute("data-react-class")}}function wV(e){return{currentSession:e.inquiry.currentSession,featureFlags:e.inquiry.featureFlags,forcedStatus:e.test.forcedStatus,inquiry:e.inquiry.inquiry,inquiryState:e.inquiry,localeIsLoaded:!!e.locale.localeInfo,organization:e.inquiry.organization,template:"itmpl_xjLXpnFbp2rnrM2Pzpe7r6PVPFAG",theme:e.inquiry.theme,verifications:e.inquiry.verifications,uiStatus:e.ui.status}}const yV={clearMessagesOnRouteChange:hv,saveForcedStatus:xV,saveLocaleInfo:Mp,showMessage:ae,checkCamera:Mr,updateBehaviorMetrics:ev},_V=Te(wV,yV),RV=_V(SV),AV=Y0(RV),TV=Co(["*{border:0;box-sizing:inherit;-webkit-font-smoothing:antialiased;margin:0;outline:0;padding:0;text-rendering:optimizeLegibility;}html{box-sizing:border-box;height:100%;margin:0;padding:0;overflow:hidden;}table{border-spacing:0;}textarea{resize:none;}button{font-family:inherit;font-size:1em;}select{text-rendering:auto !important}"]),EV={status:Hn.CtaNotShown},kV=(e=EV,t)=>{switch(t.type){case vf.SetStatus:{const n=t.payload.status;return{...e,status:n}}default:return e}},NV={status:on.Initializing,showConfirmCancelDialog:!1,hasCamera:void 0,cameraOptions:void 0,pollerId:0},jV=(e=NV,t)=>{switch(t.type){case Mo.SetStatus:{const n=t.payload.status;return{...e,status:n}}case Mo.SetConfirmCancelDialog:return{...e,showConfirmCancelDialog:t.payload.show};case Mo.SetHasCamera:return{...e,hasCamera:t.payload.hasCamera};case Mo.SetCameraOptions:return{...e,cameraOptions:t.payload.cameraOptions};case Mo.IncrementPollerId:return{...e,pollerId:e.pollerId+1};default:return e}},PV={document:void 0,documentFiles:[],uploads:[],uploadedFiles:[],pendingDeletions:[],videoConstraints:void 0,uniqueId:0};function DV(e=PV,t){switch(t.type){case Un.SetDocument:return{...e,document:t.payload.document};case Un.SetDocumentFiles:return{...e,documentFiles:t.payload.documentFiles,pendingDeletions:e.pendingDeletions.filter(n=>t.payload.documentFiles.some(r=>r.id===n))};case Un.ClearDocument:return{...e,document:void 0,documentFiles:[],uploadedFiles:[]};case Un.SetVideoConstraints:return{...e,videoConstraints:t.payload.videoConstraints};case Un.UploadFile:return{...e,uploads:e.uploads.concat({file:t.payload.file,progress:0,id:e.uniqueId}),uniqueId:e.uniqueId+1};case Un.SetUploadProgress:return{...e,uploads:e.uploads.map(n=>n.file===t.payload.file?{...n,progress:t.payload.progress}:n)};case Un.AddUploadedFile:return{...e,uploadedFiles:e.uploadedFiles.concat(t.payload.uploadedFile)};case Un.ClearUploadedFiles:return{...e,uploadedFiles:[]};case Un.ClearUpload:return{...e,uploads:e.uploads.filter(n=>n.file!==t.payload.file)};case Un.ClearAllUploads:return{...e,uploads:[]};case Un.AddPendingDeletion:return{...e,pendingDeletions:[...e.pendingDeletions,t.payload.fileId]};case Un.ClearPendingDeletion:return{...e,pendingDeletions:e.pendingDeletions.filter(n=>n!==t.payload.fileId)};default:return e}}const OV={template:void 0,inquiryTemplateVersion:void 0,currentSession:void 0,currentStep:void 0,isWebGLIncompatible:void 0,popupUrl:null,inquiry:void 0,organization:void 0,theme:void 0,documents:[],verifications:[],verificationsForSession:[],featureFlags:{},productFeatures:{},collectedData:[],component:void 0};function LV(e=OV,t){switch(t.type){case cn.LoadVerifications:{const{verifications:n}=t.payload;return{...e,verifications:n}}case cn.LogCollectedData:return{...e,collectedData:e.collectedData.concat(t.payload.data)};case cn.SaveVerification:{const{verification:n}=t.payload;return{...e,verifications:[...e.verifications.filter(r=>r.id!==n.id),n],verificationsForSession:[...e.verificationsForSession.filter(r=>r.id!==n.id),n]}}case cn.LoadDocuments:{const{documents:n}=t.payload;return{...e,documents:n}}case cn.UpdateDocumentAtIndex:{const{document:n,documentNumber:r}=t.payload;return{...e,documents:LC(r,n,e.documents)}}case cn.SaveTemplate:{const{template:n}=t.payload;return{...e,template:n}}case cn.SaveInquiryTemplateVersion:{const{inquiryTemplateVersion:n}=t.payload;return{...e,inquiryTemplateVersion:n}}case cn.SaveInquiry:{const{inquiry:n}=t.payload;return{...e,inquiry:n}}case cn.SaveOrganization:{const{organization:n}=t.payload;return{...e,organization:n}}case cn.SaveTheme:{const{theme:n}=t.payload;return{...e,theme:n}}case cn.SaveIsWebGLIncompatible:{const{isWebGLIncompatible:n}=t.payload;return{...e,isWebGLIncompatible:n}}case cn.SavePopupUrl:{const{popupUrl:n}=t.payload;return{...e,popupUrl:n}}case cn.SaveFeatureFlags:return{...e,featureFlags:t.payload.featureFlags};case cn.SaveProductFeatures:return{...e,productFeatures:t.payload.productFeatures};case cn.SetCurrentSession:return{...e,currentSession:t.payload.session};case cn.SetCurrentStep:return{...e,currentStep:t.payload.step};case cn.SetComponent:return{...e,component:t.payload.component};default:return e}}const FV={localeInfo:void 0};function MV(e=FV,t){switch(t.type){case Fp.SaveLocaleInfo:return{...e,localeInfo:t.payload.localeInfo};default:return e}}const VV={messages:[]};function BV(e=VV,t){switch(t.type){case Yo.ShowMessage:return{messages:[t.payload,...e.messages]};case Yo.ClearMessage:return{messages:FC(n=>n.id===t.payload.id,e.messages)};case Yo.ClearMessages:return{messages:[]};case Yo.ClearMessagesOnRouteChange:return{messages:e.messages.filter(n=>n.persist).map(n=>({...n,persist:!1}))};default:return e}}const UV={phoneNumber:void 0,emailAddress:void 0};function HV(e=UV,t){switch(t.type){case gl.SavePhoneNumber:return{...e,phoneNumber:t.payload.phoneNumber};case gl.SaveEmailAddress:return{...e,emailAddress:t.payload.emailAddress};default:return e}}const qV={forcedStatus:bs.sandboxToolsDisabled?void 0:kt.Passed};function $V(e=qV,t){switch(t.type){case Kb.SaveForcedStatus:return{...e,forcedStatus:t.payload.forcedStatus};default:return e}}const ir={verification:void 0,submittedValues:void 0,capturedSelfies:[],clientExtractions:[],clientExtractionSource:void 0,cameraInspectionData:void 0,captureMethod:void 0,uploads:{},uploadProgress:0,verificationType:void 0,governmentIdClass:void 0,videoConstraints:{},videoData:void 0,videoCaptureEnabled:!1,autoclassificationCountryCode:void 0,autoclassificationFailureReason:void 0,idClassesByCountries:[],didAutoclassificationIdSelection:!1};function GV(e=ir,t){var n,r;switch(t.type){case hn.SaveCaptureMethod:return{...e,captureMethod:t.payload.captureMethod};case hn.SaveUploadProgress:return{...e,uploadProgress:t.payload.progress};case hn.SaveActiveVerificationType:return{...e,verificationType:t.payload.verificationType};case hn.SaveActiveVerification:return{...e,verification:t.payload.verification};case hn.SelectGovernmentIdClass:return{...e,governmentIdClass:t.payload.governmentIdClass,clientExtractions:[],uploads:{}};case hn.SaveSubmittedValues:return{...e,submittedValues:t.payload.submittedValues};case hn.SaveVideoConstraints:return{...e,videoConstraints:t.payload.videoConstraints};case hn.SaveVideoCaptureEnabled:return{...e,videoCaptureEnabled:t.payload.videoCaptureEnabled};case hn.SaveCapturedSelfie:{const{selfieStep:o,imageDataUrl:a,captureMethod:s,capturedAt:c}=t.payload;return{...e,capturedSelfies:od(e.capturedSelfies,o,a,s,c)}}case hn.ClearCapturedSelfies:return{...e,capturedSelfies:[]};case hn.UpdateCameraInspectionData:{const{cameraInspectionData:o}=t.payload;return o?{...e,cameraInspectionData:o}:e}case hn.UploadFiles:{const{uploads:o}=e,{actionStep:a,clientExtractions:s=[],files:c,clientExtractionSource:l}=t.payload,u={...o,[a]:c},d=MC(gp(m=>m.type),pp(m=>m.reduce((h,p)=>VC(h,p),{})),BC)([...e.clientExtractions,...s]);return{...e,clientExtractions:d,clientExtractionSource:l,uploads:u}}case hn.SaveAutoclassificatonSuccessIdDetails:return{...e,autoclassificationCountryCode:t.payload.autoclassificationCountryCode,governmentIdClass:t.payload.governmentIdClass,idClassesByCountries:(n=t.payload.idClassesByCountries)!=null?n:ir.idClassesByCountries,didAutoclassificationIdSelection:!1};case hn.SaveAutoclassificatonFailureResult:return{...e,autoclassificationFailureReason:t.payload.autoclassificationFailureReason,idClassesByCountries:(r=t.payload.idClassesByCountries)!=null?r:ir.idClassesByCountries};case hn.SaveAutoclassificatonIdSelection:return{...e,autoclassificationCountryCode:t.payload.autoclassificationCountryCode,governmentIdClass:t.payload.governmentIdClass,didAutoclassificationIdSelection:!0};case hn.ResetAutoclassificationState:return{...e,autoclassificationCountryCode:ir.autoclassificationCountryCode,governmentIdClass:ir.governmentIdClass,didAutoclassificationIdSelection:ir.didAutoclassificationIdSelection,clientExtractions:ir.clientExtractions,uploads:ir.uploads};default:return e}}const zd=z0({initialEntries:[window.location.pathname+window.location.search]}),WV=e=>Q0({form:Re.reducer,locale:MV,messages:BV,inquiry:LV,test:$V,oneTimeLink:HV,document:DV,verification:GV,router:Z0(e),ui:jV,createPersona:kV,verifyWithPersona:jv}),YV=WV(zd),zV=K0({reducer:YV,middleware:e=>e({immutableCheck:!1}).concat(J0(zd))});ji(ci,{retries:3,retryDelay:ji.exponentialDelay,retryCondition:ji.isNetworkOrIdempotentRequestError});const KV={type:"backend",init:function(e,t,n){},read:async function(e,t,n){n(null,await Qb(e,3))},save:function(e,t,n){},create:function(e,t,n,r){}};async function Qb(e,t,n=0){try{const r=await QV(`locales/translation.${e}.json`),o=r.default||r;if(o==null)throw new Error("Failed to dynamic import resource bundle");return ls({...o})}catch{return n===t?void 0:new Promise(o=>setTimeout(()=>o(Qb(e,t,n+1)),500*(n+1)))}}function QV(e){switch(e){case"locales/translation.ar-EG":case"locales/translation.ar-EG.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.az),__vite__mapDeps([2,1,3]));case"locales/translation.bn":case"locales/translation.bn.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aA),__vite__mapDeps([2,1,3]));case"locales/translation.cs":case"locales/translation.cs.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aB),__vite__mapDeps([2,1,3]));case"locales/translation.cy":case"locales/translation.cy.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aC),__vite__mapDeps([2,1,3]));case"locales/translation.da":case"locales/translation.da.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aD),__vite__mapDeps([2,1,3]));case"locales/translation.de":case"locales/translation.de.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aE),__vite__mapDeps([2,1,3]));case"locales/translation.el-GR":case"locales/translation.el-GR.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aF),__vite__mapDeps([2,1,3]));case"locales/translation.en-US":case"locales/translation.en-US.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.ay),__vite__mapDeps([2,1,3]));case"locales/translation.es-MX":case"locales/translation.es-MX.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aG),__vite__mapDeps([2,1,3]));case"locales/translation.fi":case"locales/translation.fi.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aH),__vite__mapDeps([2,1,3]));case"locales/translation.fr":case"locales/translation.fr.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aI),__vite__mapDeps([2,1,3]));case"locales/translation.he":case"locales/translation.he.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aJ),__vite__mapDeps([2,1,3]));case"locales/translation.hi":case"locales/translation.hi.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aK),__vite__mapDeps([2,1,3]));case"locales/translation.hr":case"locales/translation.hr.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aL),__vite__mapDeps([2,1,3]));case"locales/translation.hu":case"locales/translation.hu.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aM),__vite__mapDeps([2,1,3]));case"locales/translation.id-ID":case"locales/translation.id-ID.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aN),__vite__mapDeps([2,1,3]));case"locales/translation.it":case"locales/translation.it.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aO),__vite__mapDeps([2,1,3]));case"locales/translation.ja":case"locales/translation.ja.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aP),__vite__mapDeps([2,1,3]));case"locales/translation.ko-KR":case"locales/translation.ko-KR.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aQ),__vite__mapDeps([2,1,3]));case"locales/translation.lt":case"locales/translation.lt.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aR),__vite__mapDeps([2,1,3]));case"locales/translation.ms":case"locales/translation.ms.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aS),__vite__mapDeps([2,1,3]));case"locales/translation.nl-NL":case"locales/translation.nl-NL.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aT),__vite__mapDeps([2,1,3]));case"locales/translation.no":case"locales/translation.no.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aU),__vite__mapDeps([2,1,3]));case"locales/translation.pl":case"locales/translation.pl.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aV),__vite__mapDeps([2,1,3]));case"locales/translation.pt-BR":case"locales/translation.pt-BR.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aW),__vite__mapDeps([2,1,3]));case"locales/translation.ro":case"locales/translation.ro.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aX),__vite__mapDeps([2,1,3]));case"locales/translation.ru":case"locales/translation.ru.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aY),__vite__mapDeps([2,1,3]));case"locales/translation.sk":case"locales/translation.sk.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.aZ),__vite__mapDeps([2,1,3]));case"locales/translation.sv":case"locales/translation.sv.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.a_),__vite__mapDeps([2,1,3]));case"locales/translation.ta":case"locales/translation.ta.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.a$),__vite__mapDeps([2,1,3]));case"locales/translation.th":case"locales/translation.th.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b0),__vite__mapDeps([2,1,3]));case"locales/translation.tl":case"locales/translation.tl.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b1),__vite__mapDeps([2,1,3]));case"locales/translation.tr-TR":case"locales/translation.tr-TR.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b2),__vite__mapDeps([2,1,3]));case"locales/translation.uk-UA":case"locales/translation.uk-UA.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b3),__vite__mapDeps([2,1,3]));case"locales/translation.ur":case"locales/translation.ur.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b4),__vite__mapDeps([2,1,3]));case"locales/translation.vi":case"locales/translation.vi.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b5),__vite__mapDeps([2,1,3]));case"locales/translation.zh-CN":case"locales/translation.zh-CN.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b6),__vite__mapDeps([2,1,3]));case"locales/translation.zh-TW":case"locales/translation.zh-TW.json":return tt(()=>import("./assets-NP11rhWX.js").then(t=>t.b7),__vite__mapDeps([2,1,3]));default:return new Promise(function(t,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const ts={ar:"ar-EG",el:"el-GR",en:"en-US",es:"es-MX",id:"id-ID",ko:"ko-KR",nl:"nl-NL",pt:"pt-BR",tr:"tr-TR",uk:"uk-UA",zh:"zh-CN"};function ZV(e){if(e in Tr)return e;if(e in ts)return ts[e];const t=e.split("-")[0];return t in Tr?t:t in ts?ts[t]:e}As.on("languageChanged",e=>document.documentElement.lang=e);As.use(X0).use(e1).use(KV).init({compatibilityJSON:"v3",fallbackLng:{default:["en-US"]},resources:{"en-US":nC},partialBundledLanguages:!0,detection:{lookupQuerystring:"language",convertDetectedLanguage:ZV},load:"currentOnly",supportedLngs:Object.keys(Tr),interpolation:{escapeValue:!1},react:{bindI18n:"languageChanged loaded",bindI18nStore:"added removed",nsMode:"default",useSuspense:!1},debug:!1});Ui.getInstance().init("8f9fcc63055c35a7ba867e38e0738939",void 0,{storage:"none",saveEvents:!1}),t1({release:"persona-web-inquiry@d1808851723",environment:/^(.+\.)?withpersona-staging\.com$/i.test(window.location.hostname)?"staging":"production",dsn:"https://233a1fa0fc38474f8743ec12dbe3f2a4@o175220.ingest.sentry.io/5579484",ignoreErrors:["TypeError: Load failed","Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node.","Node.removeChild: The node to be removed is not a child of this node","Error: No error message","[IGNORED]",'Could not load "util"','Could not load "stats".',"Can't find variable: HTMLDialogElement","ResizeObserver loop limit exceeded","ResizeObserver loop completed with undelivered notifications","The operation couldnt be completed. Software caused connection abort","Unexpected end of input",/^NotAllowedError/,"NotFoundError: Requested device not found","TypeError: Cannot redefine property:","can't access dead object",/^Failed to fetch$/,"ReferenceError: Can't find variable: zaloJSV2","ReferenceError: zaloJSV2 is not defined",/LPContentScriptFeatures/,/metamask/,/Could not inject \w+ provider because it's not your default extension/,"ethereum","solana","webkit-masked-url://hidden/",/get-frame-manager-configuration/,"Not implemented on this platform","Object Not Found Matching Id:","grecaptcha","__ybHasBeenPasswordField","getReadModeRender","getReadModeExtract","getReadModeConfig","window.webkit.messageHandlers"],beforeSend:(e,t)=>{const{originalException:n}=t;return n instanceof Wl?null:JV(e)}});function JV(e){return e.tags={...e.tags,rate_based:"True"},e}class XV extends f.Component{constructor(){super(...arguments),this.state={hasError:!1}}render(){return i.jsx(i.Fragment,{children:i.jsxs(f.StrictMode,{children:[i.jsx(TV,{}),i.jsx(n1,{store:this.store,children:i.jsx(i1,{history:this.history,children:i.jsx(AV,{})})})]})})}get history(){return this.props.history||zd}get store(){return this.props.store||zV}}document.getElementById("inquiry-preload-no-op")||r1.render(i.jsx(XV,{}),document.getElementById("main-application"));export{ge as B,qe as C,ee as E,_t as F,j as H,I_ as L,Be as M,mt as P,Qe as S,dt as T,Ae as U,eB as __vite_legacy_guard,te as a,at as b,Ye as c,Yt as d,Z as e,Hr as f,vi as g,Qv as h,Lt as i,ae as j,Mr as k,Ur as l,ne as m,vt as n,At as o,Gp as p,rt as q,Rt as r,hB as s,In as t,pr as u};
//# sourceMappingURL=inquiry-B5hMs5TT.js.map
